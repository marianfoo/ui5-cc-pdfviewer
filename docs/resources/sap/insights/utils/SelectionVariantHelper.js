/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/base/security/encodeURL","sap/m/Token","sap/ui/core/CustomData"],function(e,a,r){"use strict";var t=function(e){return"("+e+")"};var n=function(e,a,r){var t="or";var n=a;if(r==="E"){t="and"}if(e===""){return n}return[e,t,n].join(" ")};var o=function(e,a){if(a==="number"){return e+"m"}if(!(a==="integer"||a==="boolean"||a==="datetime")){return"'"+e+"'"}return e};var i=function(e,a,r,i){var u="";a.forEach(function(a){var s;switch(a.Option){case"BT":s=t([e,"ge",o(a.Low,i),"and",e,"le",o(a.High,i)].join(" "));break;case"CP":s="substringof("+o(a.Low,i)+","+e+")";break;default:s=[e,a.Option.toLowerCase(),o(a.Low,i)].join(" ");break}u=n(u,s,r)});return u};var u=function(e,a,r){var n=[],o=[];a.forEach(function(e){if(e.Sign==="I"){if(e.Option==="NE"){o.push(e)}else{n.push(e)}}else{if(e.Option==="NE"){n.push(e)}else{o.push(e)}}});var u=i(e,n,"I",r);var s=[];if(u){s.push(t(u))}var c=i(e,o,"E",r);if(c){s.push(t(c))}return s.join(" and ")};var s=function(a,r){var t=[];a.getSelectOptionsPropertyNames().forEach(function(e){t.push(u(e,a.getSelectOption(e),r[e]))});return t.length?"$filter="+e(t.join(" and ")):null};var c=function(a,r){var n="";a.getParameterNames().forEach(function(e){if(n!==""){n+=","}n+=e+"=";var t=a.getParameter(e);n+=o(t,r[e])});return n===""?null:t(e(n))};var f=function(e){var a=e.Option;switch(e.Option){case"CP":var r=e.Low;var t=r.indexOf("*")===0;var n=r.indexOf("*",1)===r.length-1;if(t&&!n){a="StartsWith"}else if(!t&&n){a="EndsWith"}else if(t&&n){a="Contains"}break;case"EQ":if(e.Low===""){a="Empty"}break}return a};var v=function(e,a){return new r({key:"range",value:{exclude:e.Sign==="E",keyField:a,operation:f(e),value1:e.Option==="CP"?e.Low.replace(/\*/g,""):e.Low,value2:e.High}})};var l=function(e,n){var o=[];var i=0;e.forEach(function(e){var u="";var s="";switch(e.Option){case"BT":u+=e.Low+" .. "+e.High;s="range_"+i++;break;case"CP":u+=e.Low;s="range_"+i++;break;case"EQ":if(e.Low===""){u+="<EMPTY>";s="<EMPTY>"}else{u+=e.Text?e.Text:e.Low;s=e.Low}break;case"NE":u+="!"+e.Low;s="range_"+i++;break;case"GT":u+=">"+e.Low;s="range_"+i++;break;case"GE":u+=">="+e.Low;s="range_"+i++;break;case"LT":u+="<"+e.Low;s="range_"+i++;break;case"LE":u+="<="+e.Low;s="range_"+i++;break}if(e.Sign==="E"){u="!"+t(u)}var c=new a({key:s,text:e.Text?e.Text:u});if(s!==e.Low){c.addCustomData(v(e,n))}c.addCustomData(new r({key:"selectOption",value:e}));o.push(c)});return o};var w=function(){var e=new sap.fe.navigation.SelectionVariant;return e.toJSONString()};var p=function(e){switch(e.Option){case"BT":e.Text+=e.Low+" .. "+e.High;break;case"EQ":if(e.Low===""){e.Text+="<EMPTY>"}else{e.Text+=e.Low}break;case"NE":e.Text+="!"+e.Low;break;case"GT":e.Text+=">"+e.Low;break;case"GE":e.Text+=">="+e.Low;break;case"LT":e.Text+="<"+e.Low;break;case"LE":e.Text+="<="+e.Low;break;default:e.Text+=e.Low;break}return e.Text};var g=function(e,a){var r={Sign:e.exclude?"E":"I",Option:e.operation,Low:e.value1.toString(),High:e.value2?e.value2.toString():"",Text:a?a:""};switch(e.operation){case"Contains":r.Option="CP";if(e.value1){r.Low="*"+e.value1+"*"}break;case"StartsWith":r.Option="CP";if(e.value1){r.Low=e.value1+"*"}break;case"EndsWith":r.Option="CP";if(e.value1){r.Low="*"+e.value1}break;case"Empty":r.Option="EQ";r.Low="";break}if(!r.Text){r.Text=p(r)}return r};return{getFilterQueryFromSV:s,getParameterQueryFromSV:c,getTokenFromSelectOptions:l,getEmptySVStringforProperty:w,getSelectOptionFromRange:g}});
//# sourceMappingURL=SelectionVariantHelper.js.map