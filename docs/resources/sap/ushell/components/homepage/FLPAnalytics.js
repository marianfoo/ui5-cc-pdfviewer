// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/services/AppConfiguration","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,a,jQuery){"use strict";var i=["deleteTile","actionModeActive","catalogTileClick","dashboardTileClick","dashboardTileLinkClick"],t=sap.ui.getCore().getEventBus(),n=this,o={};function l(e,a,i){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(t){t.logCustomEvent(e,a,i)})}function r(e){var a=sap.ushell.services.AppConfiguration.getMetadata();o[e]={};o[e].startTime=new Date;o[e].title=a.title}function c(e){try{var i=(new Date-o[e].startTime)/1e3;var t=o[e].title;l("FLP: Time in Application (sec)",i,[t])}catch(i){a.warning("Duration in application "+e+" could not be calculated",null,"sap.ushell.components.homepage.FLPAnalytics")}}function s(e,a,i){var n=hasher.getHash(),c;window.swa.custom1={ref:n};switch(a){case"appOpened":r(n);l("FLP: Application Opened","Direct Launch",[o[n].title]);t.unsubscribe("sap.ushell","appOpened",s);break;case"bookmarkTileAdded":c=window.document.title;l("FLP: Personalization","Save as Tile",[c,i&&i.group&&i.group.title?i.group.title:"",i&&i.group&&i.group.id?i.group.id:"",i&&i.tile&&i.tile.title?i.tile.title:c]);break;case"actionModeActive":l("FLP: Personalization","Enter Action Mode",[i.source]);break;case"catalogTileClick":l("FLP: Application Launch point","Catalog",[]);break;case"dashboardTileClick":l("FLP: Application Launch point","Homepage",[]);break;case"dashboardTileLinkClick":l("FLP: Application Launch point","Tile Group Link",[]);break;default:break}}function p(e){var a,i,t;if(e.getParameter("from")&&e.getParameter("to")){a=e.getParameter("from").getId().replace("application-","").replace("applicationShellPage-","");window.swa.custom1={ref:a};c(a);t=e.getParameter("to");i=t.getId().replace("application-","").replace("applicationShellPage-","");r(i);window.swa.custom1={ref:i};l("FLP: Application Opened","Fiori Navigation",[o[i].title])}}jQuery(window).on("unload",function(e){var a=window.location.hash.substr(1);c(a)});try{sap.ui.getCore().byId("viewPortContainer").attachAfterNavigate(p,n)}catch(e){a.warning("Failure when subscribing to viewPortContainer 'AfterNavigate' event",null,"sap.ushell.components.homepage.FLPAnalytics")}t.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",s,n);i.forEach(function(e){t.subscribe("launchpad",e,s,n)});t.subscribe("sap.ushell","appOpened",s,n)});
//# sourceMappingURL=FLPAnalytics.js.map