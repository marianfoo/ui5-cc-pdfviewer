{"version":3,"file":"CatalogsManager.js","names":["sap","ui","define","BaseObject","TileState","oEventHub","oUtils","oDestroyHelper","oGroupsHelper","oMessagingHelper","HomepageManager","resources","jQuery","Measurement","Log","Config","oCatalogsManagerInstance","CatalogsManager","extend","metadata","publicMethods","analyticsConstants","PERSONALIZATION","RENAME_GROUP","MOVE_GROUP","DELETE_GROUP","RESET_GROUP","DELETE_TILE","ADD_TILE","MOVE_TILE","_aDoableObjects","constructor","sId","mSettings","this","oLaunchPageServicePromise","ushell","Container","getServiceAsync","then","oLaunchPageService","bind","oTileCatalogToGroupsMap","tagsPool","iInitialLoad","oModel","model","oHomepageManagerData","oHomepageManager","prototype","getInstance","getInterface","registerEvents","oEventBus","getCore","getEventBus","subscribe","loadAllCatalogs","on","do","updateTilesAssociation","unregisterEvents","unsubscribe","forEach","oDoable","off","getModel","oGroupsPromise","Deferred","that","setDoneCBForGroups","resolve","done","aGroups","getProperty","length","last","loadPersonalizedGroups","destroyFLPAggregationModels","destroyTileModels","setProperty","appBoxes","customTiles","aPromises","start","pause","getCatalogs","catalogs","aInitialCatalog","slice","end","map","addCatalogToModel","Promise","all","processPendingCatalogs","onDoneLoadingCatalogs","fail","showLocalizedErrorHelper","mapCatalogTilesToGroups","updateCatalogTilesToGroupsMap","tileInd","aTiles","tileId","tileGroups","groupId","oGroup","sAttribute","encodeURIComponent","getCatalogTileId","object","getGroupId","indexOf","isGroupVisible","isGroupLocked","push","aCatalog","index","associatedGrps","aCatalogCustom","aCatalogAppboxes","aCatalogCustomIndex","aCatalogAppboxesIndex","oAppBoxTile","oCustomTile","src","associatedGroups","oCatalog","oCatalogModel","title","getCatalogTitle","id","getCatalogId","numberTilesSupportedOnCurrectDevice","static","resume","reject","getCatalogTiles","oCatalogEntry","sError","getTagList","maxTags","indexedTags","ind","tempTagsLst","tag","oTag","sorted","concat","occ","sort","a","b","aPendingCatalogQueue","aCurrentCatalogs","aAllEntryInCatalogMaster","getLocalizedText","oCatalogProcessPromise","reduce","oProcessPromise","oPendingCatalogEntry","bIsNewCatalog","oCatalogObject","oExistingCatalogInModel","searchModelCatalogByTitle","result","indexOfPreviousInstanceInModel","aEntryProcessPromises","oCatalogTile","_processCatalogObjectForModel","publish","setTimeout","setPerformanceMark","bUseUniqueMark","oCurrentCatalogObject","oAppBoxNew","_getIsIntentSupported","_getIsAppBox","createCatalogAppBoxes","createCatalogTiles","oCatalogTileNew","aFnToGetTileView","loadCustomTilesKeyWords","fn","pop","catalogTitle","catalogTitleExists","indexOfPreviousInstance","numOfTilesInCatalog","bGeneralCatalogAppeared","tempCatalog","i18n","getText","numberOfTiles","indexOfPreviousInstanceInPage","_getCatalogTileId","sCatalogTileId","bStableIDsEnabled","bSpacesEnabled","getStableCatalogTileId","bGetTileKeyWords","catalogTileId","tileTags","getCatalogTileTags","sNavigationMode","tileResolutionResult","navigationMode","getCatalogTilePreviewTitle","subtitle","getCatalogTilePreviewSubtitle","icon","getCatalogTilePreviewIcon","keywords","getCatalogTileKeywords","join","tags","url","getCatalogTileTargetURL","aCatalogs","aCatalogTilePromises","aResCatalogTile","iIndexResCatalogTile","noTiles","aLoadedCatalogs","filter","sCatalogError","getCatalogError","error","showLocalizedError","handleTilesVisibility","oTileViewPromise","sChipId","getChip","getBaseChipId","getCatalogTileViewControl","oTileView","aAssociatedGrps","aTileTags","state","sTileTitle","getCatalogTileTitle","catalog","catalogId","size","getCatalogTileSize","content","isTileIntentSupported","tileType","createGroupAndSaveTile","oData","oCatalogTileContext","catalogTileContext","sNewTitle","newGroupName","deferred","oResponseData","validHash","createGroup","oContext","promise","createTile","groupContext","data","group","status","action","sTitle","oDeferred","oResultPromise","addGroup","oGroupContext","addGroupToModel","getPath","sGroupId","warning","addTile","oTile","sGroupPath","getModelPathOfGroup","getTileTitle","addTileToGroup","oUsageAnalytics","logCustomEvent","deleteCatalogTileFromGroup","sDeletedTileCatalogId","decodeURIComponent","iGroupIndex","groupIndex","aDeleteTilePromises","aRemovedTileIds","oPositiveDeferred","oDeletePromise","sTmpTileCatalogId","removeTile","uuid","when","apply","bSuccess","deleteTilesFromGroup","calculateCatalogTileIndex","catalogIndex","numberOfExistingTiles","iTile","parseInt","undefined","notifyOnActionFailure","sMsgId","aParameters","resetAssociationOnFailure","sAppFinderDisplayMode","bIsAppBox","destroy"],"sources":["CatalogsManager-dbg.js"],"mappings":"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"}