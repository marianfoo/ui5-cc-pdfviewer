// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ui/core/util/AsyncHintsHelper","sap/base/Log","sap/ui/core/Component","sap/ui/thirdparty/URI","sap/ushell/bootstrap/common/common.load.core-min"],function(jQuery,e,r,n,a,t,o){"use strict";var s=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getLogonSystem().getPlatform()==="abap";var i={name:"core-ext-light",count:4,debugName:undefined,path:s?"sap/ushell_abap/bootstrap/evo/":"sap/fiori/"};function u(e,r){var n=new jQuery.Deferred;e.componentData=r;if(e.manifest===undefined){e.manifest=false}else if(r.technicalParameters&&r.technicalParameters.hasOwnProperty("sap-ui-fl-version")){if(typeof e.manifest==="string"&&e.manifest.length>0){var o=new t(e.manifest);o.addQuery("version",r.technicalParameters["sap-ui-fl-version"][0]);e.manifest=o.toString()}}a.create(e).then(function(e){n.resolve(e)},function(e){n.reject(e)});return n.promise()}function p(e){var r=e&&e.hasOwnProperty("amendedLoading")?e.amendedLoading:true;return r}function l(e){var r=true;if(e.hasOwnProperty("loadCoreExt")){r=e.loadCoreExt}return r}function c(e,r,n){var a=true;if(e.hasOwnProperty("loadDefaultDependencies")){a=e.loadDefaultDependencies}if(r&&r.hasOwnProperty("loadDefaultDependencies")){a=a&&r.loadDefaultDependencies}a=a&&n;return a}function f(e){var r=e.semanticObject||null;var n=e.action||null;if(!r||!n){return null}return"application-"+r+"-"+n+"-component"}function d(e){return e&&e.indexOf("?")>=0}function m(e){var r=new RegExp("[/]~[\\w-]+~[A-Z0-9]?");return e.replace(r,"")}function y(e){if(!e){return e}var r=e.indexOf("?");if(r>=0){return e.slice(0,r)}return e}function h(e,r,a,t,o){var s="The issue is most likely caused by application "+e,i="Failed to load UI5 component with properties: '"+o+"'.";if(t){i+=" Error likely caused by:\n"+t}else{i+=" Error: '"+r+"'"}if(a==="parsererror"){s+=", as one or more of its resources could not be parsed"}s+=". Please create a support incident and assign it to the support component of the respective application.";n.error(s,i,e)}function g(r){var n=new e(r||window.location.href).mParams,a=n["sap-xapp-state"],t;delete n["sap-xapp-state"];t={startupParameters:n};if(a){t["sap-xapp-state"]=a}return t}function C(e,r){if(!Array.isArray(r)){return}r.forEach(function(r){var a=String.prototype.toLowerCase.call(r.severity||"");a=["trace","debug","info","warning","error","fatal"].indexOf(a)!==-1?a:"error";n[a](r.text,r.details,e)})}function v(e){var r,n={name:"CoreResourcesComplement"};if(P(e)){r=e}else{r=i}if(window["sap-ui-debug"]===true){if(r.debugName!==undefined){n.aResources=[r.path+r.debugName+".js"]}else{n.aResources=[]}}else if(o.loaded){n.aResources=b(r.name,r.path,r.count)}else{n.aResources=[]}return n}function b(e,r,a){var t=arguments[3]||[],o=r;if(typeof e!=="string"||typeof o!=="string"||typeof a!=="number"){n.error("Ui5ComponentLoader: _buildBundleResourcesArray called with invalid arguments");return null}if(o.substr(-1)!=="/"){o+="/"}if(a===1){t.push(o+e+".js")}if(t.length>=a){return t}t.push(o+e+"-"+t.length+".js");return b(e,o,a,t)}function P(e){var r=true;if(!e){return false}if(!e.name||typeof e.name!=="string"){n.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'name' property");r=false}if(!e.count||typeof e.count!=="number"){n.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'count' property");r=false}if(!e.debugName||typeof e.debugName!=="string"){n.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'debugName' property");r=false}if(!e.path||typeof e.path!=="string"){n.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'path' property");r=false}return r}function w(e){if(!e||!Array.isArray(e.aResources)||!e.name){n.error("Ui5ComponentLoader: loadBundle called with invalid arguments");return null}return Promise.all(e.aResources.map(function(e){return sap.ui.loader._.loadJSResourceAsync(e)})).catch(function(){n.error("Ui5ComponentLoader: failed to load bundle: "+e.name);return Promise.reject()})}function x(e,n,a,t,o,s,i,u,p){var l=jQuery.extend(true,{},o);if(!l.asyncHints){l.asyncHints=n?{libs:["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]}:{}}if(e){l.asyncHints.preloadBundles=l.asyncHints.preloadBundles||[];l.asyncHints.preloadBundles=l.asyncHints.preloadBundles.concat(p.aResources)}if(t){l.asyncHints.waitFor=t}if(!l.name){l.name=s}if(i){l.url=y(i)}if(u){l.id=u}if(a&&l.asyncHints){r.modifyUrls(l.asyncHints,m)}return l}function R(e,r,n,a){var t=jQuery.extend(true,{startupParameters:{}},e);if(n){t.config=n}if(a){t.technicalParameters=a}if(d(r)){var o=g(r);t.startupParameters=o.startupParameters;if(o["sap-xapp-state"]){t["sap-xapp-state"]=o["sap-xapp-state"]}}return t}return{constructAppComponentId:f,getParameterMap:g,logAnyApplicationDependenciesMessages:C,logInstantiateComponentError:h,shouldLoadCoreExt:l,shouldLoadDefaultDependencies:c,shouldUseAmendedLoading:p,urlHasParameters:d,removeParametersFromUrl:y,createUi5Component:u,prepareBundle:v,loadBundle:w,createComponentProperties:x,createComponentData:R,buildBundleResourcesArray:b}},false);
//# sourceMappingURL=utils.js.map