// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["./UserRecentsBase"],function(e){"use strict";var t=e.extend("sap.ushell.services.RecentsList");t.prototype._updateIfAlreadyIn=function(e,t){return this.aRecents.some(function(i){var s;if(this._compareItems(i.oItem,e)){i.oItem=e;i.iTimestamp=t;i.iCount=i.iCount+1;s=true}else{s=false}return s}.bind(this))};t.prototype._insertNew=function(t,i){var s={oItem:t,iTimestamp:i,iCount:1};if(this.aRecents.length===this.iMaxItems){this.aRecents.sort(e._itemSorter);this.aRecents.pop()}this.aRecents.push(s)};t.prototype.clearAllActivities=function(){return this._save([])};t.prototype.newItem=function(e){var t=new jQuery.Deferred;var i=Date.now();var s;this._load().done(function(n){this.aRecents=n||[];s=this._updateIfAlreadyIn(e,i);if(!s){this._insertNew(e,i)}this._save(this.aRecents).done(function(){t.resolve()}).fail(function(){t.reject()})}.bind(this));return t.promise()};t.prototype.getRecentItems=function(){var t=new jQuery.Deferred;this._load().done(function(i){i=i||[];i.sort(e._itemSorter);this.aRecents=i.slice(0,this.iMaxItems);t.resolve(jQuery.map(this.aRecents,function(e){return e.oItem}))}.bind(this));return t.promise()};return t});
//# sourceMappingURL=RecentsList.js.map