// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/ushell/utils/objectOperations","sap/ushell/utils/UrlParsing"],function(e,t,a,jQuery,i,s){"use strict";function p(e,t){return i.getMember(e,t)}function o(e,a,i){a=t({},a);i=t({},i);var s={};s.semanticObject=a.semanticObject;s.action=a.action;s.title=a.title||p(i,"sap|app.title");s.info=a.info||p(i,"sap|app.info");s.icon=a.icon||p(i,"sap|ui.icons.icon");s.subTitle=a.subTitle||p(i,"sap|app.subTitle");s.shortTitle=a.shortTitle||p(i,"sap|app.shortTitle");var o,r,n,u,l,c,f=false;var m=p(i,"sap|platform|runtime");s.resolutionResult=jQuery.extend(true,{},m);if(m){s.resolutionResult["sap.platform.runtime"]=jQuery.extend(true,{},m)}if(p(i,"sap|ui.technology")==="GUI"){s.resolutionResult["sap.gui"]=p(i,"sap|gui")}if(p(i,"sap|ui.technology")==="WDA"){s.resolutionResult["sap.wda"]=p(i,"sap|wda")}if(p(i,"sap|ui.technology")==="URL"){if(i["sap.url"]){s.resolutionResult["sap.platform.runtime"]=s.resolutionResult["sap.platform.runtime"]||{};s.resolutionResult.url=i["sap.url"].uri;s.resolutionResult["sap.platform.runtime"].url=i["sap.url"].uri}else if(m&&m.uri){s.resolutionResult["sap.platform.runtime"].url=m.uri;s.resolutionResult.url=m.uri}}if(!s.resolutionResult["sap.ui"]){s.resolutionResult["sap.ui"]={}}s.resolutionResult["sap.ui"].technology=p(i,"sap|ui.technology");s.resolutionResult.applicationType=this._formatApplicationType(s.resolutionResult,i);s.resolutionResult.systemAlias=s.resolutionResult.systemAlias||a.systemAlias;s.resolutionResult.systemAliasSemantics="apply";s.resolutionResult.text=s.title;s.deviceTypes=p(i,"sap|ui.deviceTypes")||{};s.resolutionResult.appId=p(i,"sap|app.id");["desktop","tablet","phone"].forEach(function(e){if(Object.prototype.hasOwnProperty.call(a.deviceTypes||{},e)){s.deviceTypes[e]=a.deviceTypes[e]}if(!Object.prototype.hasOwnProperty.call(s.deviceTypes,e)){s.deviceTypes[e]=true}s.deviceTypes[e]=!!s.deviceTypes[e]});s.signature=a.signature||{};s.signature.parameters=s.signature.parameters||{};s.signature.additionalParameters=(a.signature||{}).additionalParameters||"allowed";var d=a.indicatorDataSource||p(i,"sap|app.crossNavigation.inbounds."+e+".indicatorDataSource");var y=d?"#Shell-dynamicTile":"#Shell-staticTile";if(p(i,"sap|app.type")==="tile"||p(i,"sap|flp.type")==="tile"){y=s.resolutionResult;y.url=p(i,"sap|platform|runtime.componentProperties.url");y.componentName=p(i,"sap|ui5.componentName");if(p(i,"sap|platform|runtime.includeManifest")){y.componentProperties=y.componentProperties||{};y.componentProperties.manifest=jQuery.extend(true,{},i);delete y.componentProperties.manifest["sap.platform.runtime"]}u=p(i,"sap|app.crossNavigation.outbounds.target");f=true}if(p(i,"sap|app.type")==="plugin"||p(i,"sap|flp.type")==="plugin"){return undefined}if(p(i,"sap|flp.tileSize")){o=p(i,"sap|flp.tileSize")}if(p(i,"sap|app.description")){r=p(i,"sap|app.description")}if(p(i,"sap|ui.technology")==="GUI"&&p(i,"sap|gui.transaction")){n=p(i,"sap|gui.transaction")}if(p(i,"sap|ui.technology")==="WDA"&&p(i,"sap|wda.applicationId")){n=p(i,"sap|wda.applicationId")}if(p(i,"sap|app.dataSources")){l=p(i,"sap|app.dataSources")}if(p(i,"sap|app.id")){c=p(i,"sap|app.id")}s.tileResolutionResult={appId:c,title:s.title,subTitle:s.subTitle,icon:s.icon,size:o,info:s.info,tileComponentLoadInfo:y,indicatorDataSource:d,dataSources:l,description:r,runtimeInformation:m,technicalInformation:n,deviceTypes:s.deviceTypes};s.tileResolutionResult.isCustomTile=f;if(u){s.tileResolutionResult.targetOutbound=u}return s}function r(e,t){var a=e.applicationType;if(a){return a}var i=p(t,"sap|platform|runtime.componentProperties.self.name")||p(t,"sap|ui5.componentName");if(p(t,"sap|flp.appType")==="UI5"||p(t,"sap|ui.technology")==="UI5"){e.applicationType="SAPUI5";e.additionalInformation="SAPUI5.Component="+i;e.url=p(t,"sap|platform|runtime.componentProperties.url");e.applicationDependencies=p(t,"sap|platform|runtime.componentProperties");return"SAPUI5"}if(p(t,"sap|ui.technology")==="GUI"){e.applicationType="TR";e["sap.gui"]=p(t,"sap|gui");e.systemAlias=p(t,"sap|app.destination.name");return"TR"}if(p(t,"sap|ui.technology")==="WDA"){e.applicationType="WDA";e["sap.wda"]=p(t,"sap|wda");e.systemAlias=p(t,"sap|app.destination.name");return"WDA"}if(p(t,"sap|ui.technology")==="URL"){e.applicationType="URL";e.systemAlias=p(t,"sap|app.destination.name")}return"URL"}function n(t){var a=this;if(!t){return[]}var i=[];try{var s=Object.keys(t.applications||{}).sort();s.forEach(function(s){try{var o=t.applications[s];var r=p(o,"sap|app.crossNavigation.inbounds");if(r){var n=Object.keys(r).sort();n.forEach(function(e){var t=r[e];var s=a.mapOne(e,t,o);if(s){i.push(s)}})}}catch(t){e.error("Error in application "+s+": "+t,t.stack)}})}catch(t){e.error(t);e.error(t.stack);return[]}return i}function u(e){var t,i,p;t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};i=a.get("signature.parameters",e)||{};Object.keys(i).forEach(function(e){if(i[e].filter&&Object.prototype.hasOwnProperty.call(i[e].filter,"value")&&(i[e].filter.format===undefined||i[e].filter.format==="plain")){t.params[e]=[i[e].filter.value]}if(i[e].launcherValue&&Object.prototype.hasOwnProperty.call(i[e].launcherValue,"value")&&(i[e].launcherValue.format===undefined||i[e].launcherValue.format==="plain")){t.params[e]=[i[e].launcherValue.value]}});p=s.constructShellHash(t);if(!p){return undefined}return p}function l(e){var t,a,i;t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};a=e.parameters||{};Object.keys(a).forEach(function(e){if(a.hasOwnProperty(e)&&typeof a[e].value==="object"){t.params[e]=[a[e].value.value]}});i=s.constructShellHash(t);if(!i){return undefined}return i}return{formatSite:n,toHashFromInbound:u,toHashFromOutbound:l,mapOne:o,_formatApplicationType:r}},true);
//# sourceMappingURL=utilsCdm.js.map