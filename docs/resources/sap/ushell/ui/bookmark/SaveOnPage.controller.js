// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ushell/resources","sap/ui/thirdparty/hasher","sap/ui/core/library"],function(e,t,r,o){"use strict";var i=o.ValueState;return e.extend("sap.ushell.ui.bookmark.SaveOnPage",{onInit:function(){var e=this.getView();e.setModel(t.i18nModel,"i18n");this.byId("bookmarkTitleInput").attachLiveChange(function(){if(this.getValue()===""){this.setValueStateText(t.i18n.getText("bookmarkTitleInputError"));this.setValueState(i.Error)}else{this.setValueState(i.None)}});this.oContentNodeSelector=this.byId("SelectedNodesComboBox");this.oContentNodeSelector.attachSelectionChanged(function(){var e=this.getSelectedContentNodes();if(Array.isArray(e)&&e.length<1){this.setValueStateText(t.i18n.getText("bookmarkPageSelectError"));this.setValueState(i.Error)}else{this.setValueState(i.None)}})},removeFocusFromTile:function(){this.getView().getDomRef().querySelector(".sapMGT").removeAttribute("tabindex")},getBookmarkTileData:function(){var e=this.getView();var t=e.getModel();var o=e.getViewData();var i;if(o.customUrl){if(typeof o.customUrl==="function"){i=o.customUrl()}else{i=o.customUrl}}else{i=r.getHash()?"#"+r.getHash():window.location.href}var n=this.oContentNodeSelector.getSelectedContentNodes().map(function(e){return e.id});var s={title:t.getProperty("/title")||"",subtitle:t.getProperty("/subtitle")||"",url:i,icon:t.getProperty("/icon"),info:t.getProperty("/info")||"",numberUnit:t.getProperty("/numberUnit"),serviceUrl:typeof o.serviceUrl==="function"?o.serviceUrl():o.serviceUrl,serviceRefreshInterval:t.getProperty("/serviceRefreshInterval"),pages:n.length>0?n:[],keywords:t.getProperty("/keywords")};s.title=s.title.substring(0,256).trim();s.subtitle=s.subtitle.substring(0,256).trim();s.info=s.info.substring(0,256).trim();return s},onValueHelpEndButtonPressed:function(){if(this.oContentNodeSelector&&this.oContentNodeSelector.fireSelectionChanged){this.oContentNodeSelector.fireSelectionChanged()}}})});
//# sourceMappingURL=SaveOnPage.controller.js.map