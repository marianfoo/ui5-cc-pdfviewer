//@ui5-bundle sap/ushell/preload-bundles/homepage-af-dep.js
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/f/dnd/GridDragOver", ["sap/ui/base/Object","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/Configuration"],function(t,jQuery,i,e){"use strict";var o=t.extend("sap.f.dnd.GridDragOver",{_iTimeoutBeforeDrop:200,_$indicator:jQuery("<div class='sapUiDnDGridIndicator'></div>"),constructor:function(){this._oDragControlDelegate={ondragend:this.scheduleEndDrag};this._oDropContainerDelegate={ondragleave:this._onDragLeave,onBeforeRendering:this._onDropContainerBeforeRendering,onAfterRendering:this._onDropContainerAfterRendering}},destroy:function(){this._oDragEndDelegate=null}});o.prototype.setCurrentContext=function(t,i,e,o){if(this._oDragControl===t&&this._oDropContainer===i&&this._sTargetAggregation===e){return this}if(this._oDragControl&&this._oDragControl!==t){this.endDrag()}this._oDragControl=t;this._oDragContainer=t.getParent();this._oDropContainer=i;this._sTargetAggregation=e;this._oCoreDragSession=o;this._mDragItemDimensions=this._getDimensions(t);this._bIsInSameContainer=this._oDragContainer===this._oDropContainer;if(this._bIsInSameContainer){this._iDragFromIndex=i.indexOfAggregation(e,t)}else{this._iDragFromIndex=null}i.getAggregation(e).forEach(function(t){t.addStyleClass("sapUiDnDGridControl")});this._attachEventDelegates();this._hideCoreDefaultIndicator();return this};o.prototype.handleDragOver=function(t){if(this._shouldFreeze(t.pageX,t.pageY)){return}this._hideCoreDefaultIndicator();var i=this._calculateDropPosition(t);if(!i){return}if(this._timeoutOnSamePosition(i)){if(i.targetControl===this._oDragControl){return}this._hideDraggedItem();this._showIndicator(i,t);this._freezeCurrentPosition(t.pageX,t.pageY)}};o.prototype.getSuggestedDropPosition=function(){return this._mLastDropPosition};o.prototype.setDropIndicatorSize=function(t){if(!t){this._mDropIndicatorSize=null;return}if(!t.rows||!t.columns){i.error("Custom indicator size for grid drag and drop is not valid. It must be an object with rows and columns properties: '{rows: <int>, columns: <int>}'.");this._mDropIndicatorSize=null;return}this._mDropIndicatorSize=t};o.prototype.scheduleEndDrag=function(){if(!this._isDragActive()){return}var t=this._oDropContainer.getBindingInfo(this._sTargetAggregation);if(t&&t.template){setTimeout(this.endDrag.bind(this),0)}else{this.endDrag()}};o.prototype.endDrag=function(){if(!this._isDragActive()){return}this._hideIndicator();this._showDraggedItem();this._removeEventDelegates();this._resetCoreDefaultIndicator();this._mDropIndicatorSize=null;this._oDragControl=null;this._oDropContainer=null;this._sTargetAggregation=null;this._iDragFromIndex=null;this._iDropPositionHoldStart=null;this._mLastDropPosition=null;this._mFreezePosition=null;this._oCoreDragSession=null};o.prototype._isDragActive=function(){return this._oDragControl&&this._oDropContainer};o.prototype._showIndicator=function(t,i){var e=this._oDropContainer,o=e.getDomRefForSetting(this._sTargetAggregation)||e.getDomRef(),r=t.targetControl,n=e.indexOfAggregation(this._sTargetAggregation,r),s,a,g;if(r){s=this._findContainingGridItem(r);a=s||r.$()}if(this._mDropIndicatorSize){g={"grid-row-start":"span "+this._mDropIndicatorSize.rows,"grid-column-start":"span "+this._mDropIndicatorSize.columns}}else{g={"grid-column-start":this._mDragItemDimensions.columnsSpan,"grid-row-start":this._mDragItemDimensions.rowsSpan}}if(g){this._$indicator.css(g)}if(a&&t.position=="Before"){this._$indicator.insertBefore(a)}else if(a){this._$indicator.insertAfter(a);n+=1}else{o.appendChild(this._$indicator[0])}this._$indicator.show();this._iDragFromIndex=n};o.prototype._hideIndicator=function(){this._$indicator.detach();this._$indicator.attr("style","")};o.prototype._hideDraggedItem=function(){this._oDragControl.$().hide();var t=this._findContainingGridItem(this._oDragControl);if(t&&this._bIsInSameContainer){t.hide()}};o.prototype._showDraggedItem=function(){if(this._oDragControl.getDomRef()){this._oDragControl.$().show()}var t=this._findContainingGridItem(this._oDragControl);if(t){t.show()}};o.prototype._hideCoreDefaultIndicator=function(){var t=this._oCoreDragSession.getIndicator(),i={visibility:"hidden",position:"relative"};this._oCoreDragSession.setIndicatorConfig(i);if(t){jQuery(t).css(i)}};o.prototype._resetCoreDefaultIndicator=function(){var t=this._oCoreDragSession.getIndicator(),i={visibility:"visible",position:"absolute"};this._oCoreDragSession.setIndicatorConfig(i);if(t){jQuery(t).css(i)}};o.prototype._timeoutOnSamePosition=function(t){if(!this._mLastDropPosition||t.targetControl!==this._mLastDropPosition.targetControl||t.position!=this._mLastDropPosition.position){this._iDropPositionHoldStart=Date.now();this._mLastDropPosition=t;return false}return Date.now()-this._iDropPositionHoldStart>this._iTimeoutBeforeDrop};o.prototype._shouldFreeze=function(t,i){var e=20;return this._mFreezePosition&&Math.abs(this._mFreezePosition.pageX-t)<e&&Math.abs(this._mFreezePosition.pageY-i)<e};o.prototype._freezeCurrentPosition=function(t,i){this._mFreezePosition={pageX:t,pageY:i}};o.prototype._calculateDropPosition=function(t){var i=this._findItemFromPoint(t.pageX,t.pageY),e,o,r;if(!i){e=this._findClosestItem(t.pageX,t.pageY)}if(e){i=e.target}if(e&&e.direction==="Left"){r="After"}if(!i){i=this._getLastItem();r="After"}if(!i){return{targetControl:null,position:"After"}}if(i.hasClass("sapUiDnDGridIndicator")){return null}o=i.control(0,true);if(!r){r=this._calculateDropBeforeOrAfter(o,t)}return{targetControl:o,position:r}};o.prototype._calculateDropBeforeOrAfter=function(t,i){var e=this._getDimensions(t),o=e.rect;if(this._oDragControl===t){return"Before"}if(this._mDragItemDimensions.rect.width*1.5<o.width){var r=window.pageXOffset,n={left:o.left+r,width:o.width},s=i.pageX-n.left;return s<n.width*.5?"Before":"After"}if(this._iDragFromIndex===null){return"Before"}var a=this._oDropContainer.indexOfAggregation(this._sTargetAggregation,t);if(this._iDragFromIndex>a){return"Before"}return"After"};o.prototype._getDimensions=function(t){var i=this._findContainingGridItem(t);if(i){return{rect:i[0].getBoundingClientRect(),columnsSpan:i.css("grid-column-start"),rowsSpan:i.css("grid-row-start")}}return{rect:t.getDomRef().getBoundingClientRect(),columnsSpan:"span 1",rowsSpan:"span 1"}};o.prototype._findContainingGridItem=function(t){var i=t.$(),e=i.parent().css("display");if(e==="grid"||e==="inline-grid"){return i}e=i.parent().parent().css("display");if(e==="grid"||e==="inline-grid"){return i.parent()}return null};o.prototype._getLastItem=function(){var t=this._oDropContainer.getAggregation(this._sTargetAggregation),i;if(t&&t.length){i=t[t.length-1].$()}return i};o.prototype._findItemFromPoint=function(t,i){var e=document.elementFromPoint(t-window.pageXOffset,i-window.pageYOffset),o=jQuery(e).closest(".sapUiDnDGridControl, .sapUiDnDGridIndicator");if(o.hasClass("sapUiDnDGridIndicator")){return o}if(o.hasClass("sapUiDnDGridControl")){return o}return null};o.prototype._findClosestItem=function(t,i){var o=e.getRTL(),r=o?-1:1,n=80*r,s=20,a,g,h=0,d=t-n;while(!a&&d>0&&h<4){a=this._findItemFromPoint(d,i);d-=n;h++}if(a){g="Left"}if(!a&&i-s>0){a=this._findItemFromPoint(t,i-20);g="Top"}return{target:a,direction:g}};o.prototype._removeEventDelegates=function(){if(this._oDropContainer){this._oDropContainer.removeEventDelegate(this._oDropContainerDelegate)}if(this._oDragControl){this._oDragControl.removeEventDelegate(this._oDragControlDelegate)}};o.prototype._attachEventDelegates=function(){this._removeEventDelegates();this._oDragControl.addEventDelegate(this._oDragControlDelegate,this);this._oDropContainer.addEventDelegate(this._oDropContainerDelegate,this)};o.prototype._onDragLeave=function(t){var i=document.elementFromPoint(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset),e=this._oDropContainer.getDomRef().contains(i);if(!e){this.scheduleEndDrag()}};o.prototype._onDropContainerBeforeRendering=function(){if(!this._isDragActive()){return}this._hideIndicator()};o.prototype._onDropContainerAfterRendering=function(){if(!this._isDragActive()){return}this._hideDraggedItem();if(this._mLastDropPosition){this._showIndicator(this._mLastDropPosition)}};var r;o.getInstance=function(){if(!r){r=new o}return r};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/f/dnd/GridDropInfo", ["sap/ui/core/library","sap/ui/core/dnd/DropInfo","sap/f/dnd/GridDragOver","sap/base/Log"],function(r,t,e,o){"use strict";var n=t.extend("sap.f.dnd.GridDropInfo",{metadata:{library:"sap.f",interfaces:["sap.ui.core.dnd.IDropInfo"],properties:{dropIndicatorSize:{type:"function",invalidate:false,parameters:{draggedControl:{type:"sap.ui.core.Control"}}}},events:{}}});n.prototype.isDroppable=function(r,e){if(!this._shouldEnhance()){return t.prototype.isDroppable.apply(this,arguments)}if(!this.getEnabled()){return false}if(!r||!e){return false}var o=this.getDropTarget();if(!o){return false}var n=o.getDomRefForSetting(this.getTargetAggregation());if(n&&n.contains(e.target)){e.setMark("DragWithin",this.getTargetAggregation());return true}if(!n&&o===r){return true}return false};n.prototype.fireDragEnter=function(r){if(!this._shouldEnhance()||this._isKeyboardEvent(r)){return t.prototype.fireDragEnter.apply(this,arguments)}if(!r||!r.dragSession||!r.dragSession.getDragControl()){return null}var o=e.getInstance(),n=r.dragSession.getDragControl();if(this.getDropIndicatorSize()){o.setDropIndicatorSize(this.getDropIndicatorSize()(n))}o.setCurrentContext(r.dragSession.getDragControl(),this.getDropTarget(),this.getTargetAggregation(),r.dragSession);var i=o.getSuggestedDropPosition();var s=this.fireEvent("dragEnter",{dragSession:r.dragSession,browserEvent:r.originalEvent,target:i?i.targetControl:null},true);if(s){o.handleDragOver(r)}return s};n.prototype.fireDragOver=function(r){if(!this._shouldEnhance()||this._isKeyboardEvent(r)){return t.prototype.fireDragOver.apply(this,arguments)}if(!r||!r.dragSession||!r.dragSession.getDragControl()){return null}var e=this._suggestDropPosition(r);if(e&&r.dragSession&&e.targetControl){r.dragSession.setDropControl(e.targetControl)}return this.fireEvent("dragOver",{dragSession:r.dragSession,browserEvent:r.originalEvent,target:e?e.targetControl:null,dropPosition:e?e.position:null})};n.prototype.fireDrop=function(r){if(!this._shouldEnhance()||this._isKeyboardEvent(r)){return t.prototype.fireDrop.apply(this,arguments)}if(!r||!r.dragSession||!r.dragSession.getDragControl()){return null}var o=r.dragSession,n=e.getInstance(),i;n.setCurrentContext(o.getDragControl(),this.getDropTarget(),this.getTargetAggregation(),o);i=n.getSuggestedDropPosition();this.fireEvent("drop",{dragSession:r.dragSession,browserEvent:r.originalEvent,dropPosition:i?i.position:null,draggedControl:o.getDragControl(),droppedControl:i?i.targetControl:null});n.scheduleEndDrag()};n.prototype._shouldEnhance=function(){if(this._bShouldEnhance===undefined){if(!this.getParent().isA("sap.f.dnd.IGridDroppable")){o.error("The control which uses 'sap.f.dnd.GridDropInfo' has to implement 'sap.f.dnd.IGridDroppable'.","sap.f.dnd.GridDropInfo");this._bShouldEnhance=false;return this._bShouldEnhance}this._bShouldEnhance=this.getDropPosition()===r.dnd.DropPosition.Between&&this.getDropLayout()===r.dnd.DropLayout.Horizontal}return this._bShouldEnhance};n.prototype._isKeyboardEvent=function(r){return r.originalEvent.type==="keydown"};n.prototype._suggestDropPosition=function(r){if(!r.dragSession||!r.dragSession.getDragControl()){return null}var t=e.getInstance();t.setCurrentContext(r.dragSession.getDragControl(),this.getDropTarget(),this.getTargetAggregation(),r.dragSession);t.handleDragOver(r);return t.getSuggestedDropPosition()};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/ComboBox", ["./ComboBoxTextField","./ComboBoxBase","./List","./library","sap/ui/Device","sap/ui/core/Item","./ComboBoxRenderer","sap/ui/dom/containsOrEquals","sap/m/inputUtils/scrollToItem","sap/m/inputUtils/inputsDefaultFilter","sap/m/inputUtils/typeAhead","sap/m/inputUtils/filterItems","sap/m/inputUtils/ListHelpers","sap/m/inputUtils/itemsVisibilityHandler","sap/m/inputUtils/selectionRange","sap/m/inputUtils/calculateSelectionStart","sap/ui/events/KeyCodes","sap/ui/core/Core","sap/base/Log"],function(e,t,s,i,o,n,r,a,l,h,p,c,u,d,g,f,m,y,I){"use strict";var S=i.ListMode;var v=t.extend("sap.m.ComboBox",{metadata:{interfaces:["sap.m.IToolbarInteractiveControl"],library:"sap.m",designtime:"sap/m/designtime/ComboBox.designtime",properties:{selectedKey:{type:"string",group:"Data",defaultValue:""},selectedItemId:{type:"string",group:"Misc",defaultValue:""},filterSecondaryValues:{type:"boolean",group:"Misc",defaultValue:false}},associations:{selectedItem:{type:"sap.ui.core.Item",multiple:false}},events:{change:{parameters:{value:{type:"string"},itemPressed:{type:"boolean"}}},selectionChange:{parameters:{selectedItem:{type:"sap.ui.core.Item"}}}},dnd:{draggable:false,droppable:true}},renderer:r});function L(e){var t=this.getSelectedItem(),s=u.getListItem(t),i=t&&s&&s.getDomRef(),o=i&&i.offsetTop,n=i&&i.offsetHeight,r=this.getPicker(),a=r.getDomRef("cont"),l=a.clientHeight;if(t&&o+n>l){if(!e){this._getList().$().css("visibility","hidden")}else{a.scrollTop=o-n/2;this._getList().$().css("visibility","visible")}}}v.prototype._getSelectedItemText=function(e){e=e||this.getSelectedItem();if(!e){e=this.getDefaultSelectedItem()}if(e){return e.getText()}return""};v.prototype.setSelectedIndex=function(e,t){var s;t=t||this.getItems();e=e>t.length-1?t.length-1:Math.max(0,e);s=t[e];if(s){this.setSelection(s)}};v.prototype.revertSelection=function(){var e,t=this.getPickerTextField();this.setSelectedItem(this._oSelectedItemBeforeOpen);this.setValue(this._sValueBeforeOpen);if(this.getSelectedItem()===null){e=this._sValueBeforeOpen}else{e=this._oSelectedItemBeforeOpen.getText()}t&&t.setValue(e)};v.prototype._filterStartsWithItems=function(e,t){var s=e.toLowerCase();var i=this.getItems(),o=i.filter(function(e){return e[t]&&e[t]().toLowerCase().startsWith(s)});return o};v.prototype.setSelection=function(e){var t=this._getList(),s,i;this.setAssociation("selectedItem",e);this._setPropertyProtected("selectedItemId",e instanceof n?e.getId():e,true);if(typeof e==="string"){e=y.byId(e)}if(t){s=u.getListItem(e);if(s){t.setSelectedItem(s,true)}else{t.removeSelections(true)}}i=e?e.getKey():"";this._setPropertyProtected("selectedKey",i)};v.prototype.isSelectionSynchronized=function(){var e=this.getSelectedItem();return this.getSelectedKey()===(e&&e.getKey())};v.prototype.isItemSelected=function(e){return e&&e.getId()===this.getAssociation("selectedItem")};v.prototype.setAssociation=function(e,s,i){var o=this._getList();if(o&&e==="selectedItem"){if(!(s instanceof n)){s=this.findItem("id",s)}o.setSelectedItem(u.getListItem(s),true)}return t.prototype.setAssociation.apply(this,arguments)};v.prototype.removeAllAssociation=function(e,i){var o=this._getList();if(o&&e==="selectedItem"){s.prototype.removeAllAssociation.apply(o,arguments)}return t.prototype.removeAllAssociation.apply(this,arguments)};v.prototype.init=function(){t.prototype.init.apply(this,arguments);this.bOpenValueStateMessage=true;this._sValueBeforeOpen="";this._sInputValueBeforeOpen="";this._oSelectedItemBeforeOpen=null;if(o.system.phone){this.attachEvent("_change",this.onPropertyChange,this)}this.setLastFocusedListItem(null)};v.prototype.onBeforeRendering=function(){t.prototype.onBeforeRendering.apply(this,arguments);var e=this.getItems();if(this.getRecreateItems()){u.fillList(e,this._getList(),this._mapItemToListItem.bind(this));this.setRecreateItems(false)}this.synchronizeSelection();if(!this.isOpen()&&document.activeElement===this.getFocusDomRef()&&this.getEnabled()){this.addStyleClass("sapMFocus")}if(this.getSelectedItem()&&e.indexOf(this.getSelectedItem())===-1){var s=this.getValue();this.clearSelection();this.setValue(s)}};v.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._oSelectedItemBeforeOpen=null;this._bInputFired=null;this.setLastFocusedListItem(null)};v.prototype.onBeforeRenderingPicker=function(){var e=this["onBeforeRendering"+this.getPickerType()];e&&e.call(this)};v.prototype.onBeforeRenderingDropdown=function(){var e=this.getPicker(),t=this.$().outerWidth()/parseFloat(i.BaseFontSize)+"rem";if(e){e.setContentMinWidth(t)}};v.prototype.onBeforeRenderingList=function(){if(this.bProcessingLoadItemsEvent){var e=this._getList(),t=this.getFocusDomRef();if(e){e.setBusy(true)}if(t){t.setAttribute("aria-busy","true")}}};v.prototype.onAfterRenderingPicker=function(){var e=this["onAfterRendering"+this.getPickerType()];e&&e.call(this);L.call(this,false)};v.prototype.onAfterRenderingList=function(){var e=this.getSelectedItem(),t=u.getListItem(e);if(this.bProcessingLoadItemsEvent&&this.getItems().length===0){return}var s=this._getList(),i=this.getFocusDomRef();this.highlightList(this._sInputValueBeforeOpen);if(e){s.setSelectedItem(t);this.setLastFocusedListItem(t)}if(s){s.setBusy(false)}if(i){i.removeAttribute("aria-busy")}};v.prototype.filterItems=function(e){return c(this,this.getItems(),e,true,this.getFilterSecondaryValues(),this.fnFilter||h)};v.prototype._mapItemToListItem=function(e){var t=u.createListItemFromCoreItem(e,this.getShowSecondaryValues());if(e.isA("sap.ui.core.Item")){this.setSelectable(e,e.getEnabled())}if(e.isA("sap.ui.core.SeparatorItem")){t.addAriaLabelledBy(this._getGroupHeaderInvisibleText().getId())}t.addStyleClass(this.getRenderer().CSS_CLASS_COMBOBOXBASE+"NonInteractiveItem");return t};v.prototype.oninput=function(e){t.prototype.oninput.apply(this,arguments);this.syncPickerContent();if(e.isMarked("invalid")){return}this._bInputFired=true;this.loadItems(function(){this.handleInputValidation(e)},{name:"input",busyIndicator:false});if(this.bProcessingLoadItemsEvent&&this.getPickerType()==="Dropdown"){this.open()}if(this.getLastFocusedListItem()){this.getLastFocusedListItem().removeStyleClass("sapMLIBFocused");this.setLastFocusedListItem(null)}this.addStyleClass("sapMFocus");this._getList().removeStyleClass("sapMListFocus");if(this._getItemsShownWithFilter()){this.toggleIconPressedStyle(true)}};v.prototype.handleInputValidation=function(e){var t,s,i,o,n=this.getSelectedItem(),r=e.target.value,a=r==="",h=e.srcControl,p=this.getPickerType()==="Dropdown",c=u.getListItem(n),g=this.filterItems(r);if(a&&!this.bOpenedByKeyboardOrButton&&!this.isPickerDialog()){t=this.getItems()}else{t=g.items;d(this.getItems(),g)}i=t[0];o=t.some(function(e){return e.getKey()===this.getSelectedKey()},this);s=this.intersectItems(this._filterStartsWithItems(r,"getText"),t);if(i&&this.getSelectedKey()&&!o){this.setSelection(null)}if(!a&&h&&h._bDoTypeAhead){this.handleTypeAhead(h,t,r)}else if(!a&&s[0]&&r===s[0].getText()){this.setSelection(s[0])}else{this.setSelection(null)}if(n!==this.getSelectedItem()){this.fireSelectionChange({selectedItem:this.getSelectedItem()});c=u.getListItem(this.getSelectedItem())}this._sInputValueBeforeOpen=r;if(this.isOpen()){setTimeout(function(){this.highlightList(r)}.bind(this))}if(i){if(a&&!this.bOpenedByKeyboardOrButton){this.close()}else if(p){this.open();l(c,this.getPicker())}}else if(this.isOpen()){if(p&&!this.bOpenedByKeyboardOrButton){this.close()}}else{this.clearFilter()}};v.prototype.handleTypeAhead=function(e,t,s){var i,o=this.getFilterSecondaryValues(),n=p(s,e,t,function(e){i=[e.getText()];if(o){i.push(e.getAdditionalText())}return i});this.setSelection(n[0]);this.addStyleClass("sapMFocus");this._getList().removeStyleClass("sapMListFocus")};v.prototype.onSelectionChange=function(e){var t=u.getItemByListItem(this.getItems(),e.getParameter("listItem")),s=this.getChangeEventParams(),i=t!==this.getSelectedItem();t&&this.updateDomValue(t.getText());this.setSelection(t);this.fireSelectionChange({selectedItem:this.getSelectedItem()});if(i){s.itemPressed=true;this.onChange(null,s)}};v.prototype.onItemPress=function(e){var t=e.getParameter("listItem"),s=t.getTitle(),i=this.getChangeEventParams(),o=t!==u.getListItem(this.getSelectedItem());if(t.isA("sap.m.GroupHeaderListItem")){return}this.setLastFocusedListItem(t);this.updateDomValue(s);if(!o){i.itemPressed=true;this.onChange(null,i)}this._setPropertyProtected("value",s,true);if(this.getPickerType()==="Dropdown"&&!this.isPlatformTablet()){this.selectText(this.getValue().length,this.getValue().length)}this.close()};v.prototype.onBeforeOpen=function(){t.prototype.onBeforeOpen.apply(this,arguments);var e=this["onBeforeOpen"+this.getPickerType()],s=this.getFocusDomRef();this.setProperty("open",true);if(this.hasLoadItemsEventListeners()&&!this.bProcessingLoadItemsEvent){this.loadItems()}if(s){s.setAttribute("aria-controls",this.getPicker().getId())}this.addContent();e&&e.call(this)};v.prototype.onBeforeOpenDialog=function(){var e=this.getPickerTextField();this._oSelectedItemBeforeOpen=this.getSelectedItem();this._sValueBeforeOpen=this.getValue();this.getSelectedItem()&&d(this.getItems(),this.filterItems(""));e.setValue(this._sValueBeforeOpen)};v.prototype.onAfterOpen=function(){var e=this.getSelectedItem(),t=g(this.getFocusDomRef()),s=this.isPlatformTablet();this.closeValueStateMessage();L.call(this,true);if(!s&&e&&t.start===t.end&&t.start>1){setTimeout(function(){this.selectText(0,t.end)}.bind(this),0)}};v.prototype.onBeforeClose=function(){t.prototype.onBeforeClose.apply(this,arguments);var e=this.getFocusDomRef();this.setProperty("open",false);if(e){e.removeAttribute("aria-controls")}if(document.activeElement===e){this.updateFocusOnClose()}this.toggleIconPressedStyle(false)};v.prototype.onAfterClose=function(){this.clearFilter();this._sInputValueBeforeOpen="";if(this.isPickerDialog()){t.prototype.closeValueStateMessage.apply(this,arguments)}};v.prototype.onItemChange=function(e){var s=this.getAssociation("selectedItem"),i=e.getParameter("newValue"),o=e.getParameter("name");if(s===e.getParameter("id")){switch(o){case"text":if(!this.isBound("value")){this.setValue(i)}break;case"key":if(!this.isBound("selectedKey")){this.setSelectedKey(i)}break}}return t.prototype.onItemChange.call(this,e,this.getShowSecondaryValues())};v.prototype.onkeydown=function(e){var s=e.srcControl;t.prototype.onkeydown.apply(s,arguments);if(!s.getEnabled()||!s.getEditable()){return}var i=m;s._bDoTypeAhead=!o.os.android&&e.which!==i.BACKSPACE&&e.which!==i.DELETE};v.prototype.oncut=function(e){var s=e.srcControl;t.prototype.oncut.apply(s,arguments);s._bDoTypeAhead=false};v.prototype.onsapenter=function(e){var s=e.srcControl,i=s.getSelectedItem();if(i&&this.getFilterSecondaryValues()){s.updateDomValue(i.getText())}t.prototype.onsapenter.apply(s,arguments);if(!s.getEnabled()||!s.getEditable()){return}if(s.isOpen()&&!this.isComposingCharacter()){s.close()}};["onsapup","onsapdown","onsappageup","onsappagedown","onsaphome","onsapend"].forEach(function(e){v.prototype[e]=function(t){this.handleListNavigation(t,e)}});v.prototype.handleListNavigation=function(e,t){var s=e.srcControl;if(!s.getEnabled()||!s.getEditable()){return}e.preventDefault();this.loadItems(function(){this.syncPickerContent();if(!this.isOpen()){this.handleInlineListNavigation(t)}else{var s=this._getSuggestionsPopover();s&&s.handleListNavigation(this,e,t)}e.setMarked()})};v.prototype.handleInlineListNavigation=function(e){var t=this.getItems(),s=u.getSelectableItems(t),i=this.getSelectedItem(),o;switch(e){case"onsapdown":o=s.indexOf(i)+1;break;case"onsapup":o=i?s.indexOf(i)-1:s.length-1;break;case"onsapend":o=s.length-1;break;case"onsaphome":o=0;break;case"onsappagedown":o=Math.min(s.length-1,s.indexOf(i)+10);break;case"onsappageup":o=Math.max(0,s.indexOf(i)-10);break}this.handleSelectionFromList(s[o])};v.prototype.handleSelectionFromList=function(e){if(!e){return}var t=this.getFocusDomRef(),s=t.value.substring(0,t.selectionStart),i=this.getSelectedItem(),o=this.getLastFocusedListItem(),n,r,a,l;if(e.isA("sap.m.StandardListItem")||e.isA("sap.m.GroupHeaderListItem")){n=e;e=u.getItemByListItem(this.getItems(),e)}else{n=u.getListItem(e)}this.setSelection(e);this.setLastFocusedListItem(n);if(e.isA("sap.ui.core.SeparatorItem")){this.setSelectedItem(null);this.updateDomValue(s);this.fireSelectionChange({selectedItem:null});this._getGroupHeaderInvisibleText().setText(this._oRb.getText("LIST_ITEM_GROUP_HEADER")+" "+e.getText());return}if(e!==i){r=e.getText();l=o&&o.isA("sap.m.GroupHeaderListItem");a=f(g(t,l),r,s,l);this.updateDomValue(r);this.fireSelectionChange({selectedItem:e});e=this.getSelectedItem();this.selectText(a,t.value.length)}};v.prototype.setLastFocusedListItem=function(e){this._oLastFocusedListItem=e};v.prototype.getLastFocusedListItem=function(){return this._oLastFocusedListItem};v.prototype.onsapshow=function(e){var s,i,o=this.getEditable(),n;t.prototype.onsapshow.apply(this,arguments);this.syncPickerContent();if(!this.getValue()&&o){s=u.getSelectableItems(this.getItems());i=s[0];if(i){n=u.getListItem(i);if(this.isOpen()){this._getSuggestionsPopover().updateFocus(this,n);this.setLastFocusedListItem(n)}else{this.addStyleClass("sapMFocus")}this.setSelection(i);this.updateDomValue(i.getText());this.fireSelectionChange({selectedItem:i});setTimeout(function(){this.selectText(0,i.getText().length)}.bind(this),0)}}};v.prototype.onsaphide=v.prototype.onsapshow;v.prototype.ontap=function(e){if(!this.getEnabled()){return}this.updateFocusOnClose()};v.prototype.updateFocusOnClose=function(){var e=this.getFocusDomRef(),t=this._getSuggestionsPopover();this.setLastFocusedListItem(null);if(t){t.setValueStateActiveState(false);t.updateFocus(this)}e.removeAttribute("aria-activedescendant")};v.prototype.onmouseup=function(){if(this.getPickerType()==="Dropdown"&&document.activeElement===this.getFocusDomRef()&&!this.getSelectedText()){this.selectText(0,this.getValue().length)}};v.prototype.onfocusin=function(e){var t=this.getPickerType()==="Dropdown";if(this._bIsBeingDestroyed){return}if(e.target===this.getOpenArea()){this.bOpenValueStateMessage=false;if(t&&!this.isPlatformTablet()){this.focus()}}else{if(!this.isOpen()&&this.bOpenValueStateMessage&&this.shouldValueStateMessageBeOpened()){this.openValueStateMessage()}this.bOpenValueStateMessage=true}if(this.getEnabled()&&(!this.isOpen()||!this.getSelectedItem()||!this._getList().hasStyleClass("sapMListFocus"))){this.addStyleClass("sapMFocus")}};v.prototype.onsapfocusleave=function(e){var s,i,o,n,r=this.getSelectedItem();if(r&&this.getFilterSecondaryValues()){this.updateDomValue(r.getText())}t.prototype.onsapfocusleave.apply(this,arguments);if(this.isPickerDialog()){return}i=this.getPicker();if(!e.relatedControlId||!i){return}s=this.isPlatformTablet();o=y.byId(e.relatedControlId);n=o&&o.getFocusDomRef();if(a(i.getFocusDomRef(),n)&&!s&&!this._getSuggestionsPopover().getValueStateActiveState()){this.focus()}};v.prototype.synchronizeSelection=function(){if(this.isSelectionSynchronized()){return}var e=this.getSelectedKey(),t=this.getItemByKey(""+e);if(t&&e!==""){this.setAssociation("selectedItem",t,true);this._setPropertyProtected("selectedItemId",t.getId(),true);this.setValue(t.getText());this._sValue=this.getValue()}};v.prototype.configPicker=function(e){var t=this.getRenderer(),s=t.CSS_CLASS_COMBOBOXBASE;e.setHorizontalScrolling(false).addStyleClass(s+"Picker").addStyleClass(s+"Picker-CTX").attachBeforeOpen(this.onBeforeOpen,this).attachAfterOpen(this.onAfterOpen,this).attachBeforeClose(this.onBeforeClose,this).attachAfterClose(this.onAfterClose,this).addEventDelegate({onBeforeRendering:this.onBeforeRenderingPicker,onAfterRendering:this.onAfterRenderingPicker},this)};v.prototype._configureList=function(e){var t=this.getRenderer();if(!e){return}e.applyAriaRole("listbox");e.setMode(S.SingleSelectMaster).addStyleClass(t.CSS_CLASS_COMBOBOXBASE+"List").addStyleClass(t.CSS_CLASS_COMBOBOX+"List");e.attachSelectionChange(this.onSelectionChange,this).attachItemPress(this.onItemPress,this);e.addEventDelegate({onBeforeRendering:this.onBeforeRenderingList,onAfterRendering:this.onAfterRenderingList},this)};v.prototype.getDefaultSelectedItem=function(){return null};v.prototype.getChangeEventParams=function(){return{itemPressed:false}};v.prototype.clearSelection=function(){this.setAssociation("selectedItem",null);this.setSelectedItemId("");this.setSelectedKey("")};v.prototype.selectText=function(e,s){t.prototype.selectText.apply(this,arguments);return this};v.prototype.clone=function(e){var s=t.prototype.clone.apply(this,arguments),i=this._getList();s.setAssociation("selectedItem",null);if(!this.isBound("items")&&i){s.syncPickerContent();s.setSelectedIndex(this.indexOfItem(this.getSelectedItem()))}return s};v.prototype.open=function(){this.syncPickerContent();t.prototype.open.call(this);var e=u.getListItem(this.getSelectedItem());if(!this._bInputFired){this._getSuggestionsPopover()&&this._getSuggestionsPopover().updateFocus(this,e)}this._bInputFired=false;return this};v.prototype.syncPickerContent=function(){var e,t=this.getPicker(),s=this.getInputForwardableProperties();if(!t){var i,o;t=this.createPicker(this.getPickerType());e=this.getPickerTextField();u.fillList(this.getItems(),this._getList(),this._mapItemToListItem.bind(this));d(this.getItems(),this.filterItems(""));if(e){s.forEach(function(t){t=t.charAt(0).toUpperCase()+t.slice(1);i="set"+t;o="get"+t;if(e[i]){e[i](this[o]())}},this)}this._getSuggestionsPopover().updateValueState(this.getValueState(),this.getValueStateText(),this.getShowValueStateMessage())}this.synchronizeSelection();return t};v.prototype.findAggregatedObjects=function(){var e=this._getList();if(e){return s.prototype.findAggregatedObjects.apply(e,arguments)}return[]};v.prototype.setSelectedItem=function(e){if(typeof e==="string"){this.setAssociation("selectedItem",e,true);e=y.byId(e)}if(!(e instanceof n)&&e!==null){return this}if(!e){e=this.getDefaultSelectedItem()}this.setSelection(e);this.setValue(this._getSelectedItemText(e));return this};v.prototype.setSelectedItemId=function(e){e=this.validateProperty("selectedItemId",e);if(!e){e=this.getDefaultSelectedItem()}this.setSelection(e);e=this.getSelectedItem();this.setValue(this._getSelectedItemText(e));return this};v.prototype.setSelectedKey=function(e){e=this.validateProperty("selectedKey",e);var t=e==="",s=this.isBound("selectedKey")&&this.isBound("value")&&this.getBindingInfo("selectedKey").skipModelUpdate;if(t){this.setSelection(null);if(!s){this.setValue("")}return this}var i=this.getItemByKey(e);if(i){this.setSelection(i);if(!s){this.setValue(this._getSelectedItemText(i))}return this}this._sValue=this.getValue();return this._setPropertyProtected("selectedKey",e)};v.prototype._setPropertyProtected=function(e,t,s){try{return this.setProperty(e,t,s)}catch(e){I.warning("setSelectedKey update failed due to exception. Loggable in support mode log",null,null,function(){return{exception:e}})}};v.prototype.getSelectedItem=function(){var e=this.getAssociation("selectedItem");return e===null?null:y.byId(e)||null};v.prototype._decoratePopupInput=function(e){t.prototype._decoratePopupInput.apply(this,arguments);if(!e||!e.isA(["sap.m.InputBase"])){return}e.addEventDelegate({onsapenter:function(){var t=e.getValue();this.updateDomValue(t);this.onChange();if(t){this.updateDomValue(t);this.onChange();this.close()}}},this);e.attachChange(this._handleInnerInputChange.bind(this));return e};v.prototype._handleInnerInputChange=function(e){if(e.getParameter("value")===""){this.clearSelection();this.clearFilter()}};v.prototype.applyShowItemsFilters=function(){var e,t;this.syncPickerContent();e=this.getPicker();t=function(){e.detachBeforeOpen(t,this);e=null;d(this.getItems(),this.filterItems(this.getValue()||"_"))};e.attachBeforeOpen(t,this)};v.prototype.showItems=function(e){var s,i,o=Array.prototype.slice.call(arguments),n=this.fnFilter,r=function(){this.setFilterFunction(e||function(){return true});i=this.filterItems(this.getValue()||"_");d(this.getItems(),i);this.setFilterFunction(n);s=i.items;if(s&&s.length){t.prototype.showItems.apply(this,o)}}.bind(this);this.attachLoadItems(r);this.loadItems(r)};v.prototype._getFormattedValueStateText=function(){if(this.isOpen()){return this._getSuggestionsPopover()._getValueStateHeader().getFormattedText()}else{return e.prototype.getFormattedValueStateText.call(this)}};v.prototype.handleClearIconPress=function(e){var t=this.getSelectedItem(),s=this.getChangeEventParams();if(!(this.getEnabled()&&this.getEditable())){return}if(this.getValue()!==""){this.clearSelection();this.bOpenedByKeyboardOrButton?this.clearFilter():this.close();this.setProperty("effectiveShowClearIcon",false)}if(t){this.fireSelectionChange({selectedItem:null});this.fireChangeEvent(null,s)}};v.prototype._getToolbarInteractive=function(){return true};return v});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/ComboBoxBase", ["./Input","./ComboBoxTextField","./ComboBoxBaseRenderer","./SuggestionsPopover","sap/ui/base/ManagedObjectObserver","sap/ui/core/SeparatorItem","sap/ui/core/InvisibleText","sap/ui/base/ManagedObject","sap/base/Log","./library","sap/ui/Device","sap/ui/dom/containsOrEquals","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/m/inputUtils/forwardItemProperties","sap/m/inputUtils/highlightDOMElements","sap/m/inputUtils/ListHelpers","sap/ui/core/IconPool","sap/ui/core/Core"],function(t,e,i,s,o,n,r,a,u,p,l,h,c,jQuery,d,g,f,I,y){"use strict";var m=p.PlacementType;var b=["value","enabled","name","placeholder","editable","textAlign","textDirection","valueState","valueStateText"];var v=e.extend("sap.m.ComboBoxBase",{metadata:{library:"sap.m",abstract:true,defaultAggregation:"items",properties:{showSecondaryValues:{type:"boolean",group:"Misc",defaultValue:false},open:{type:"boolean",defaultValue:false,hidden:true},showClearIcon:{type:"boolean",defaultValue:false},effectiveShowClearIcon:{type:"boolean",defaultValue:false,visibility:"hidden"}},aggregations:{items:{type:"sap.ui.core.Item",multiple:true,singularName:"item",bindable:"bindable"},picker:{type:"sap.ui.core.PopupInterface",multiple:false,visibility:"hidden"}},events:{loadItems:{}},dnd:{draggable:false,droppable:true}},renderer:i});v.prototype.oncompositionend=function(t){e.prototype.oncompositionend.apply(this,arguments);if(!l.browser.firefox){this.handleInputValidation(t,this.isComposingCharacter())}};v.prototype.shouldShowClearIcon=function(){return this.getProperty("effectiveShowClearIcon")&&!!this.getValue()&&this.getEditable()&&this.getEnabled()};v.prototype.updateItems=function(t){this.bItemsUpdated=false;this.destroyItems();this.updateAggregation("items");this.bItemsUpdated=true;if(this.hasLoadItemsEventListeners()){if(this.isOpen()){f.fillList(this.getItems(),this._getList(),this._mapItemToListItem.bind(this));this.setRecreateItems(false)}this.onItemsLoaded()}};v.prototype.setFilterFunction=function(t){if(t===null||t===undefined){this.fnFilter=null;return this}if(typeof t!=="function"){u.warning("Passed filter is not a function and the default implementation will be used")}else{this.fnFilter=t}return this};v.prototype.highlightList=function(t){var e=[];e=this._getList().$().find(".sapMSLIInfo, .sapMSLITitleOnly");g(e,t)};v.prototype._decoratePopupInput=function(t){if(t){this.setTextFieldHandler(t);t.setShowClearIcon(this.getShowClearIcon())}return t};v.prototype.setTextFieldHandler=function(t){var e=this,i=t._handleEvent;t._handleEvent=function(t){i.apply(this,arguments);if(/keydown|keyup|sapdown|sapup|saphome|sapend|sappagedown|sappageup|input/.test(t.type)){e._handleEvent(t)}}};v.prototype.refreshItems=function(){this.bItemsUpdated=false;this.refreshAggregation("items")};v.prototype.loadItems=function(t,e){var i=typeof t==="function";if(this.hasLoadItemsEventListeners()&&this.getItems().length===0){this._bOnItemsLoadedScheduled=false;if(i){e=jQuery.extend({action:t,busyIndicator:true,busyIndicatorDelay:300},e);this.aMessageQueue.push(e);if(this.iLoadItemsEventInitialProcessingTimeoutID===-1&&e.busyIndicator){this.iLoadItemsEventInitialProcessingTimeoutID=setTimeout(function t(){this.setInternalBusyIndicatorDelay(0);this.setInternalBusyIndicator(true)}.bind(this),e.busyIndicatorDelay)}}if(!this.bProcessingLoadItemsEvent){this.bProcessingLoadItemsEvent=true;this.fireLoadItems()}}else if(i){t.call(this)}};v.prototype.onItemsLoaded=function(){this.bProcessingLoadItemsEvent=false;clearTimeout(this.iLoadItemsEventInitialProcessingTimeoutID);if(this.bInitialBusyIndicatorState!==this.getBusy()){this.setInternalBusyIndicator(this.bInitialBusyIndicatorState)}if(this.iInitialBusyIndicatorDelay!==this.getBusyIndicatorDelay()){this.setInternalBusyIndicatorDelay(this.iInitialBusyIndicatorDelay)}for(var t=0,e,i,s;t<this.aMessageQueue.length;t++){e=this.aMessageQueue.shift();t--;s=t+1===this.aMessageQueue.length;i=s?null:this.aMessageQueue[t+1];if(typeof e.action==="function"){if(e.name==="input"&&!s&&i.name==="input"){continue}e.action.call(this)}}};v.prototype.hasLoadItemsEventListeners=function(){return this.hasListeners("loadItems")};v.prototype._scheduleOnItemsLoadedOnce=function(){if(!this._bOnItemsLoadedScheduled&&!this.isBound("items")&&this.hasLoadItemsEventListeners()&&this.bProcessingLoadItemsEvent){this._bOnItemsLoadedScheduled=true;setTimeout(this.onItemsLoaded.bind(this),0)}};v.prototype.getPickerInvisibleTextId=function(){return r.getStaticId("sap.m","COMBOBOX_AVAILABLE_OPTIONS")};v.prototype._getGroupHeaderInvisibleText=function(){if(!this._oGroupHeaderInvisibleText){this._oGroupHeaderInvisibleText=new r;this._oGroupHeaderInvisibleText.toStatic()}return this._oGroupHeaderInvisibleText};v.prototype._isListInSuggestMode=function(){return this._getList().getItems().some(function(t){return!t.getVisible()&&f.getItemByListItem(this.getItems(),t).getEnabled()},this)};v.prototype.getSelectable=function(t){return t._bSelectable};v.prototype._setItemsShownWithFilter=function(t){this._bItemsShownWithFilter=t};v.prototype._getItemsShownWithFilter=function(){return this._bItemsShownWithFilter};v.prototype._getClearIcon=function(){if(this._oClearIcon){return this._oClearIcon}this._oClearIcon=this.addEndIcon({src:I.getIconURI("decline"),noTabStop:true,visible:false,alt:this._oRb.getText("INPUT_CLEAR_ICON_ALT"),useIconTooltip:false,decorative:false,press:this.handleClearIconPress.bind(this)},0);this._oClearIcon.addStyleClass("sapMComboBoxBaseClearIcon");return this._oClearIcon};v.prototype.handleClearIconPress=function(t){};v.prototype.onkeyup=function(t){if(!this.getEnabled()||!this.getEditable()){return}this.getShowClearIcon()&&this.setProperty("effectiveShowClearIcon",!!this.getValue())};v.prototype.setValue=function(t){e.prototype.setValue.apply(this,arguments);this.setProperty("effectiveShowClearIcon",!!t);return this};v.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oRb=y.getLibraryResourceBundle("sap.m");this.setPickerType(l.system.phone?"Dialog":"Dropdown");this._setItemsShownWithFilter(false);this.bItemsUpdated=false;this.bOpenedByKeyboardOrButton=false;this._bShouldClosePicker=false;this.bProcessingLoadItemsEvent=false;this.iLoadItemsEventInitialProcessingTimeoutID=-1;this.aMessageQueue=[];this.bInitialBusyIndicatorState=this.getBusy();this.iInitialBusyIndicatorDelay=this.getBusyIndicatorDelay();this._bOnItemsLoadedScheduled=false;this._bDoTypeAhead=true;this.getArrowIcon().addEventDelegate({onmousedown:function(t){this._bShouldClosePicker=this.isOpen()}},this);this.getArrowIcon().attachPress(this._handlePopupOpenAndItemsLoad.bind(this,true,this));this.fnFilter=null;var t=new o(function(t){var e=t.mutation;var i=t.child;var s={remove:"detachEvent",insert:"attachEvent"};var o={remove:"handleItemRemoval",insert:"handleItemInsertion"};if(!i[s[e]]||!this[o[e]]){return}i[s[e]]("_change",this.onItemChange,this);this.setRecreateItems(true);this[o[e]](i)}.bind(this));t.observe(this,{aggregations:["items"]})};v.prototype.handleItemRemoval=function(t){};v.prototype.handleItemInsertion=function(t){};v.prototype.setRecreateItems=function(t){this._bRecreateItems=t};v.prototype.getRecreateItems=function(){return this._bRecreateItems};v.prototype.onBeforeRendering=function(){var t=this.isOpen(),i=t?this._getSuggestionsPopover()._getValueStateHeader().getText():null,s=t?this._getSuggestionsPopover()._getValueStateHeader().getValueState():null;e.prototype.onBeforeRendering.apply(this,arguments);if(t&&(this.getValueStateText()&&i!==this.getValueStateText()||this.getValueState()!==s||this.getFormattedValueStateText())){this._updateSuggestionsPopoverValueState()}if(this.getShowClearIcon()){this._getClearIcon().setVisible(this.shouldShowClearIcon())}else if(this._oClearIcon){this._getClearIcon().setVisible(false)}};v.prototype._handlePopupOpenAndItemsLoad=function(t,e){var i;if(!this.getEnabled()||!this.getEditable()){return}if(t&&this._getItemsShownWithFilter()){this._bShouldClosePicker=false;this.toggleIconPressedStyle(true);this.bOpenedByKeyboardOrButton=false;this.clearFilter();this._setItemsShownWithFilter(false);return}if(this._bShouldClosePicker){this._bShouldClosePicker=false;this.close();return}this.loadItems();this.bOpenedByKeyboardOrButton=t;if(this.isPlatformTablet()){this.syncPickerContent();i=this.getPicker();i.setInitialFocus(i)}if(e){i=this.getPicker();i&&i.setInitialFocus(e)}this.open()};v.prototype.exit=function(){e.prototype.exit.apply(this,arguments);this._oRb=null;if(this._getGroupHeaderInvisibleText()){this._getGroupHeaderInvisibleText().destroy();this._oGroupHeaderInvisibleText=null}if(this._oSuggestionPopover){this._oSuggestionPopover.destroy();this._oSuggestionPopover=null}clearTimeout(this.iLoadItemsEventInitialProcessingTimeoutID);this.aMessageQueue=null;this.fnFilter=null};v.prototype.onsapshow=function(t){if(!this.getEnabled()||!this.getEditable()){return}t.setMarked();if(t.keyCode===c.F4){this.onF4(t)}if(this._getItemsShownWithFilter()){this.loadItems(this._handlePopupOpenAndItemsLoad.bind(this,true));return}if(this.isOpen()){this.close();return}this.selectText(0,this.getValue().length);this.loadItems();this.bOpenedByKeyboardOrButton=true;this.open()};v.prototype.onF4=function(t){t.preventDefault()};v.prototype.onsapescape=function(t){if(this.getEnabled()&&this.getEditable()&&this.isOpen()){t.setMarked();t.preventDefault();this.close()}else{e.prototype.onsapescape.apply(this,arguments)}};v.prototype.onsaphide=v.prototype.onsapshow;v.prototype.onsapfocusleave=function(t){if(!t.relatedControlId){e.prototype.onsapfocusleave.apply(this,arguments);return}var i=sap.ui.getCore().byId(t.relatedControlId);if(i===this){return}var s=this.getPicker(),o=i&&i.getFocusDomRef();if(s&&h(s.getFocusDomRef(),o)){return}e.prototype.onsapfocusleave.apply(this,arguments)};v.prototype.getPopupAnchorDomRef=function(){return this.getDomRef()};v.prototype.addContent=function(t){};v.prototype.getList=function(){u.warning("[Warning]:","You are attempting to use deprecated method 'getList()', please refer to SAP note 2746748.",this);return this._getList()};v.prototype._getList=function(){var t=this._oSuggestionPopover&&this._oSuggestionPopover.getItemsContainer();if(this.bIsDestroyed||!t){return null}return t};v.prototype.setPickerType=function(t){this._sPickerType=t};v.prototype.getPickerType=function(){return this._sPickerType};v.prototype._updateSuggestionsPopoverValueState=function(){var t=this._getSuggestionsPopover();if(!t){return}var e=this.getValueState(),i=this.getValueState()!==t._getValueStateHeader().getValueState(),s=this.getFormattedValueStateText(),o=this.getValueStateText(),n=s||i;if(t.isOpen()&&!n){this.setFormattedValueStateText(t._getValueStateHeader().getFormattedText())}t.updateValueState(e,s||o,this.getShowValueStateMessage())};v.prototype.shouldValueStateMessageBeOpened=function(){var t=e.prototype.shouldValueStateMessageBeOpened.apply(this,arguments);return t&&!this.isOpen()};v.prototype.onPropertyChange=function(t,e){var i=t.getParameter("newValue"),s=t.getParameter("name"),o="set"+s.charAt(0).toUpperCase()+s.slice(1),n=e&&e.srcControl||this.getPickerTextField();if(this.getInputForwardableProperties().indexOf(s)>-1&&n&&typeof n[o]==="function"){n[o](i)}};v.prototype.getInputForwardableProperties=function(){return b};v.prototype.isPickerDialog=function(){return this.getPickerType()==="Dialog"};v.prototype.isPlatformTablet=function(){var t=!l.system.combi,e=l.system.tablet&&t;return e};v.prototype.getDropdownSettings=function(){return{showArrow:false,placement:m.VerticalPreferredBottom,offsetX:0,offsetY:0,bounce:false,ariaLabelledBy:this.getPickerInvisibleTextId()||undefined}};v.prototype._configureList=function(){};v.prototype.createPicker=function(t){var e=this.getAggregation("picker");if(e){return e}this._oSuggestionPopover=this._createSuggestionsPopover();e=this._oSuggestionPopover.getPopover();this.setAggregation("picker",e,true);this.configPicker(e);return e};v.prototype.configPicker=function(t){};v.prototype._hasShowSelectedButton=function(){return false};v.prototype._createSuggestionsPopover=function(){var e=new s(this);e.decorateParent(this);e.createSuggestionPopup(this,{showSelectedButton:this._hasShowSelectedButton()},t);this._decoratePopupInput(e.getInput());e.initContent(this.getId());this.forwardEventHandlersToSuggPopover(e);this._configureList(e.getItemsContainer());return e};v.prototype.forwardEventHandlersToSuggPopover=function(t){t.setOkPressHandler(this._handleOkPress.bind(this));t.setCancelPressHandler(this._handleCancelPress.bind(this));t.setInputLabels(this.getLabels.bind(this))};v.prototype._handleOkPress=function(){var t=this,e=t.getPickerTextField();t.updateDomValue(e.getValue());t.onChange();t.close()};v.prototype._handleCancelPress=function(){this.close();this.revertSelection()};v.prototype.setSelectable=function(t,e){if(this.indexOfItem(t)<0){return}t._bSelectable=e;var i=f.getListItem(t);if(i){i.setVisible(e)}};v.prototype.onBeforeOpen=function(){this._updateSuggestionsPopoverValueState();if(!this._getItemsShownWithFilter()){this.toggleIconPressedStyle(true)}};v.prototype.onBeforeClose=function(){this.bOpenedByKeyboardOrButton=false;this._setItemsShownWithFilter(false);this._updateSuggestionsPopoverValueState()};v.prototype.getPicker=function(){var t=this.getAggregation("picker");if(t&&!t.bIsDestroyed&&!this.bIsDestroyed){return t}return null};v.prototype._getSuggestionsPopover=function(){return this._oSuggestionPopover};v.prototype.getValueStateLinks=function(){var t=this.getPicker()&&this.getPicker().getCustomHeader()&&typeof this.getPicker().getCustomHeader().getFormattedText==="function",e=t&&this.getPicker().getCustomHeader().getFormattedText(),i=e&&e.getControls();return i||[]};v.prototype.getPickerTextField=function(){var t=this._getSuggestionsPopover();return t?t.getInput():null};v.prototype.getPickerTitle=function(){var t=this.getPicker(),e=t&&t.getCustomHeader();if(this.isPickerDialog()&&e){return e.getContentMiddle()[0]}return null};v.prototype.revertSelection=function(){};v.prototype.hasContent=function(){return this.getItems().length>0};v.prototype.syncPickerContent=function(){};v.prototype.open=function(){var t=this.getPicker();if(t){t.open()}return this};v.prototype.getVisibleItems=function(){return f.getVisibleItems(this.getItems())};v.prototype.isItemSelected=function(){};v.prototype.getKeys=function(t){t=t||this.getItems();for(var e=0,i=[];e<t.length;e++){i[e]=t[e].getKey()}return i};v.prototype.findItem=function(t,e){var i="get"+t.charAt(0).toUpperCase()+t.slice(1);for(var s=0,o=this.getItems();s<o.length;s++){if(o[s][i]()===e){return o[s]}}return null};v.prototype.getItemByText=function(t){return this.findItem("text",t)};v.prototype.clearFilter=function(){this.getItems().forEach(function(t){var e=f.getListItem(t);if(e){e.setVisible(t.getEnabled()&&this.getSelectable(t))}},this)};v.prototype.onItemChange=function(t,e){d({item:t.getSource(),propName:t.getParameter("name"),propValue:t.getParameter("newValue")},e)};v.prototype.clearSelection=function(){};v.prototype.setInternalBusyIndicator=function(t){this.bInitialBusyIndicatorState=this.getBusy();return this.setBusy.apply(this,arguments)};v.prototype.setInternalBusyIndicatorDelay=function(t){this.iInitialBusyIndicatorDelay=this.getBusyIndicatorDelay();return this.setBusyIndicatorDelay.apply(this,arguments)};v.prototype.getItemAt=function(t){return this.getItems()[+t]||null};v.prototype.getFirstItem=function(){return this.getItems()[0]||null};v.prototype.getLastItem=function(){var t=this.getItems();return t[t.length-1]||null};v.prototype.getEnabledItems=function(t){return f.getEnabledItems(t||this.getItems())};v.prototype.getItemByKey=function(t){return this.findItem("key",t)};v.prototype.addItemGroup=function(t,e,i){e=e||new n({text:a.escapeSettingsValue(t.text)||a.escapeSettingsValue(t.key)});this.addAggregation("items",e,i);if(this._getList()&&e.isA("sap.ui.core.SeparatorItem")){this._getList().addItem(this._mapItemToListItem(e))}return e};v.prototype.isOpen=function(){var t=this.getPicker();return!!(t&&t.isOpen())};v.prototype.close=function(){var t=this.getPicker();if(t){t.close()}return this};v.prototype.intersectItems=function(t,e){return t.filter(function(t){return e.map(function(t){return t.getId()}).indexOf(t.getId())!==-1})};v.prototype.showItems=function(t){var e=this.fnFilter,i=function(){if(!this.getItems().length){return}this.detachLoadItems(i);this.setFilterFunction(t||function(){return true});this.applyShowItemsFilters();this._handlePopupOpenAndItemsLoad(false,this);this.setFilterFunction(e)}.bind(this);if(!this.getEnabled()||!this.getEditable()){return}this._setItemsShownWithFilter(true);this.attachLoadItems(i);this.loadItems(i)};v.prototype.applyShowItemsFilters=function(){};return v});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/ComboBoxBaseRenderer", ["./ComboBoxTextFieldRenderer","sap/ui/core/Renderer"],function(e,s){"use strict";var t=s.extend(e);t.apiVersion=2;t.CSS_CLASS_COMBOBOXBASE="sapMComboBoxBase";t.getAccessibilityState=function(s){var t=e.getAccessibilityState.call(this,s),a=s._getList();if(a){t.controls=a.getId()}return t};t.addOuterClasses=function(s,a){e.addOuterClasses.apply(this,arguments);var i=t.CSS_CLASS_COMBOBOXBASE;s.class(i);if(!a.getEnabled()){s.class(i+"Disabled")}if(!a.getEditable()){s.class(i+"Readonly")}};t.addButtonClasses=function(s,a){e.addButtonClasses.apply(this,arguments);s.class(t.CSS_CLASS_COMBOBOXBASE+"Arrow")};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/ComboBoxRenderer", ["./ComboBoxBaseRenderer","sap/ui/core/Renderer","sap/m/inputUtils/ListHelpers"],function(e,t,a){"use strict";var s=t.extend(e);s.apiVersion=2;s.CSS_CLASS_COMBOBOX="sapMComboBox";s.addOuterClasses=function(t,a){e.addOuterClasses.apply(this,arguments);t.class(s.CSS_CLASS_COMBOBOX)};s.addInnerClasses=function(t,a){e.addInnerClasses.apply(this,arguments);t.class(s.CSS_CLASS_COMBOBOX+"Inner")};s.addButtonClasses=function(t,a){e.addButtonClasses.apply(this,arguments);t.class(s.CSS_CLASS_COMBOBOX+"Arrow")};s.addPlaceholderClasses=function(t,a){e.addPlaceholderClasses.apply(this,arguments);t.class(s.CSS_CLASS_COMBOBOX+"Placeholder")};s.writeInnerAttributes=function(t,s){var r=s.isOpen(),i,n,d;var l=s._getSuggestionsPopover();e.writeInnerAttributes.apply(this,arguments);t.attr("aria-expanded",r);if(!l){return}var o=l.getFocusedListItem();var u=l.getValueStateActiveState();if(!r||!o&&!u){return}if(u){t.attr("aria-activedescendant",s._getFormattedValueStateText().getId());return}i=o.isA("sap.m.GroupHeaderListItem")||o.isA("sap.ui.core.SeparatorItem");n=s.getSelectedItem();d=n&&a.getListItem(n);o=i?o:d;if(o){t.attr("aria-activedescendant",o.getId())}};return s},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/ComboBoxTextField", ["./InputBase","./library","sap/ui/core/LabelEnablement","./ComboBoxTextFieldRenderer"],function(e,t,o,r){"use strict";var i=e.extend("sap.m.ComboBoxTextField",{metadata:{library:"sap.m",properties:{maxWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},showButton:{type:"boolean",group:"Appearance",defaultValue:true}}},renderer:r});var n=sap.ui.getCore().getLibraryResourceBundle("sap.m");i.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oArrowIcon=this.addEndIcon({id:this.getId()+"-arrow",src:"sap-icon://slim-arrow-down",noTabStop:true,alt:n.getText("COMBOBOX_BUTTON"),decorative:false})};i.prototype.getArrowIcon=function(){return this._oArrowIcon};i.prototype.getIcon=i.prototype.getArrowIcon;i.prototype.toggleIconPressedStyle=function(t){this.toggleStyleClass(e.ICON_PRESSED_CSS_CLASS,t)};i.prototype.onBeforeRendering=function(){e.prototype.onBeforeRendering.apply(this,arguments);var t=o.getReferencingLabels(this)||[],r=this.getArrowIcon();r.setVisible(this.getShowButton());t.forEach(function(e){if(r.getAriaLabelledBy().indexOf(e)===-1){r.addAssociation("ariaLabelledBy",e,true)}},this)};i.prototype.getOpenArea=function(){var e=this.getArrowIcon().getDomRef();return e?e.parentNode:e};i.prototype.onsapenter=function(t){e.prototype.onsapenter.apply(this,arguments);if(!this.getEnabled()||!this.getEditable()){return}this._bCheckDomValue&&t.setMarked();var o=this.getValue(),r=o.length;this.setValue(o);this.selectText(r,r)};i.prototype.getValue=function(){var e=this.getFocusDomRef();if(e){return e.value}return this.getProperty("value")};i.prototype.getDomRefForValueStateMessage=function(){return this.getDomRef()};i.prototype.getAccessibilityInfo=function(){var t=e.prototype.getAccessibilityInfo.apply(this,arguments);t.type=n.getText("ACC_CTR_TYPE_COMBO");return t};i.prototype.exit=function(){e.prototype.exit.apply(this,arguments);this._oArrowIcon=null};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/ComboBoxTextFieldRenderer", ["./InputBaseRenderer","sap/ui/core/Renderer"],function(t,e){"use strict";var a=e.extend(t);a.apiVersion=2;a.CSS_CLASS_COMBOBOXTEXTFIELD="sapMComboBoxTextField";a.writeInnerAttributes=function(t,e){t.attr("role","combobox");t.attr("aria-haspopup","listbox");t.attr("aria-autocomplete","both");t.attr("aria-expanded","false");t.attr("autocomplete","off");t.attr("autocorrect","off");t.attr("autocapitalize","off");t.attr("type","text")};a.getAriaRole=function(){};a.addOuterStyles=function(t,e){t.style("max-width",e.getMaxWidth())};a.writeIcons=function(t,e){t.openStart("div").attr("tabindex","-1").attr("aria-hidden","true").class("sapMInputBaseIconContainer").openEnd();e.forEach(t.renderControl,t);t.close("div")};return a},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MessageToast", ["./InstanceManager","sap/ui/core/Popup","sap/ui/core/library","sap/ui/core/Control","sap/ui/Device","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/Configuration"],function(e,t,i,o,n,a,jQuery,s){"use strict";var r=i.Dock;var f=i.CSSSize;var l={};var u="0 -64",d="sapMMessageToast",p="sapUiSelectable",c="sapContrast",v="sapContrastPlus";l._mSettings={duration:3e3,width:"15em",my:"center bottom",at:"center bottom",of:document.defaultView,offset:"0 0",collision:"fit fit",onClose:null,animationTimingFunction:"ease",animationDuration:1e3,autoClose:true,closeOnBrowserNavigation:true};l._aPopups=[];l._iOpenedPopups=0;l._bBoundedEvents=false;l._validateSettings=function(e){l._isFiniteInteger(e.duration);l._validateWidth(e.width);l._validateDockPosition(e.my);l._validateDockPosition(e.at);l._validateOf(e.of);l._validateOffset(e.offset);l._validateCollision(e.collision);l._validateOnClose(e.onClose);l._validateAutoClose(e.autoClose);l._validateAnimationTimingFunction(e.animationTimingFunction);l._isFiniteInteger(e.animationDuration)};l._isFiniteInteger=function(e){if(typeof e!=="number"||!isFinite(e)||!(Math.floor(e)===e)||e<=0){a.error('"iNumber" needs to be a finite positive nonzero integer on '+l+"._isFiniteInteger")}};l._validateWidth=function(e){if(!f.isValid(e)){a.error(e+" is not of type "+'"sap.ui.core.CSSSize" for property "width" on '+l+"._validateWidth")}};l._validateDockPosition=function(e){if(!r.isValid(e)){a.error('"'+e+'"'+" is not of type "+'"sap.ui.core.Popup.Dock" on '+l+"._validateDockPosition")}};l._validateOf=function(e){if(!(e instanceof jQuery)&&!(e&&e.nodeType===1)&&!(e instanceof o)&&e!==window){a.error('"of" needs to be an instance of sap.ui.core.Control or an Element or a jQuery object or the window on '+l+"._validateOf")}};l._validateOffset=function(e){if(typeof e!=="string"){a.error(e+" is of type "+typeof e+', expected "string" for property "offset" on '+l+"._validateOffset")}};l._validateCollision=function(e){var t=/^(fit|flip|none|flipfit|flipflip|flip flip|flip fit|fitflip|fitfit|fit fit|fit flip)$/i;if(!t.test(e)){a.error('"collision" needs to be a single value “fit”, “flip”, or “none”, or a pair for horizontal and vertical e.g. "fit flip”, "fit none", "flipfit" on '+l+"._validateOffset")}};l._validateOnClose=function(e){if(typeof e!=="function"&&e!==null){a.error('"onClose" should be a function or null on '+l+"._validateOnClose")}};l._validateAutoClose=function(e){if(typeof e!=="boolean"){a.error('"autoClose" should be a boolean on '+l+"._validateAutoClose")}};l._validateAnimationTimingFunction=function(e){var t=/^(ease|linear|ease-in|ease-out|ease-in-out)$/i;if(!t.test(e)){a.error('"animationTimingFunction" should be a string, expected values: '+"ease, linear, ease-in, ease-out, ease-in-out on "+l+"._validateAnimationTimingFunction")}};function _(e){for(var t=["my","at","of","offset"],i=0;i<t.length;i++){if(e[t[i]]!==undefined){return false}}return true}function m(e){var t=document.createElement("div");t.className=d+" "+p+" "+c+" "+v;if(s.getAccessibility()){t.setAttribute("role","alert")}t.style.width=e.width;t.appendChild(document.createTextNode(e.message));return t}function g(e){if(e){if(_(e)){e.offset=u}if(e.of&&e.of.nodeType===9){e.of=document.defaultView}}else{e={offset:u}}return e}l._handleResizeEvent=function(){if(n.system.phone||n.system.tablet){l._resetPosition(l._aPopups)}setTimeout(l["_applyPositions"].bind(l,l._aPopups),0)};l._handleMouseDownEvent=function(e){var t=e.target.hasAttribute("class")&&e.target.getAttribute("class").indexOf(d)!==-1;if(t||e.isMarked("delayedMouseEvent")){return}l._aPopups.forEach(function(e){e&&e.__bAutoClose&&e.close()})};l._resetPosition=function(e){for(var t=0,i;t<e.length;t++){i=e[t]&&e[t].getContent();if(i){i.style.visibility="hidden";i.style.left=0}}};l._applyPositions=function(e){for(var t=0,i,o;t<e.length;t++){i=e[t];if(i){o=i._oPosition;if(n.system.phone||n.system.tablet){setTimeout(l["_applyPosition"].bind(l,i,o),0)}else{i.setPosition(o.my,o.at,o.of,o.offset)}}}};l._applyPosition=function(e,t){t=t||e._oPosition;var i=e.getContent();e.setPosition(t.my,t.at,t.of,t.offset);i.style.visibility="visible"};l._setCloseAnimation=function(e,t,i,o){var n="opacity "+o.animationTimingFunction+" "+o.animationDuration+"ms",a="webkitTransitionEnd."+d+" transitionend."+d;if(s.getAnimation()&&o.animationDuration>0){e[0].style.webkitTransition=n;e[0].style.transition=n;e[0].style.opacity=0;e.on(a,function t(){e.off(a);i()})}else{i()}};l.show=function(i,o){var a=l,s=jQuery.extend({},l._mSettings,{message:i}),r=new t,f,u,p="mousedown."+d+" touchstart."+d,c,v;o=g(o);jQuery.extend(s,o);l._validateSettings(s);u=m(s);f=l._aPopups.push(r)-1;r.setContent(u);r.setPosition(s.my,s.at,s.of,s.offset,s.collision);r.setAnimations(function e(t,i,o){o()},function e(t,i,o){a._setCloseAnimation(t,i,o,s)});r.setShadow(false);r.__bAutoClose=s.autoClose;if(s.closeOnBrowserNavigation){e.addPopoverInstance(r)}if(!l._bBoundedEvents){jQuery(window).on("resize."+d,l._handleResizeEvent.bind(l));jQuery(document).on(p,l._handleMouseDownEvent.bind(l));l._bBoundedEvents=true}r.open();l._iOpenedPopups++;function _(){e.removePopoverInstance(a._aPopups[f]);jQuery(a._aPopups[f].getContent()).remove();a._aPopups[f].detachClosed(_);a._aPopups[f].destroy();a._aPopups[f]=null;a._iOpenedPopups--;if(a._iOpenedPopups===0){a._aPopups=[];jQuery(window).off("resize."+d);jQuery(document).off(p);a._bBoundedEvents=false}if(typeof s.onClose==="function"){s.onClose.call(a)}}r.attachClosed(_);c=setTimeout(r["close"].bind(r),s.duration);function y(){clearTimeout(c);c=null;function e(){v=setTimeout(r["close"].bind(r),s.duration);r.getContent().removeEventListener("mouseleave",e)}r.getContent().addEventListener("mouseleave",e);clearTimeout(v);v=null}r.getContent().addEventListener("touchstart",y);r.getContent().addEventListener("mouseover",y);if(n.system.desktop){r.getContent().addEventListener("mouseleave",function(){c=setTimeout(r["close"].bind(r),s.duration)})}};l.toString=function(){return"sap.m.MessageToast"};return l},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MultiComboBox", ["./InputBase","./ComboBoxBase","./Tokenizer","./Token","./Popover","./CheckBox","./Toolbar","./library","sap/ui/core/EnabledPropagator","sap/ui/core/IconPool","sap/ui/core/library","sap/ui/Device","sap/ui/core/Item","sap/ui/core/ResizeHandler","./MultiComboBoxRenderer","sap/ui/dom/containsOrEquals","sap/m/inputUtils/completeTextSelected","sap/m/inputUtils/inputsDefaultFilter","sap/m/inputUtils/typeAhead","sap/m/inputUtils/ListHelpers","sap/m/inputUtils/filterItems","sap/m/inputUtils/itemsVisibilityHandler","sap/m/inputUtils/forwardItemPropertiesToToken","sap/m/inputUtils/getTokenByItem","sap/ui/events/KeyCodes","sap/base/util/deepEqual","sap/base/assert","sap/base/Log","sap/ui/core/Core","sap/ui/core/InvisibleText","sap/ui/thirdparty/jquery","sap/ui/dom/jquery/cursorPos","sap/ui/dom/jquery/control"],function(e,t,i,s,n,o,r,a,l,h,u,c,g,p,d,f,m,I,y,v,S,_,k,b,T,C,E,A,P,V,jQuery){"use strict";var O=a.ListMode;var D=u.ValueState;var x=u.OpenState;var L=a.TokenizerRenderMode;var F=t.extend("sap.m.MultiComboBox",{metadata:{library:"sap.m",designtime:"sap/m/designtime/MultiComboBox.designtime",properties:{selectedKeys:{type:"string[]",group:"Data",defaultValue:[]},hasSelection:{type:"boolean",visibility:"hidden",defaultValue:false},showSelectAll:{type:"boolean",defaultValue:false}},associations:{selectedItems:{type:"sap.ui.core.Item",multiple:true,singularName:"selectedItem"}},aggregations:{tokenizer:{type:"sap.m.Tokenizer",multiple:false,visibility:"hidden"}},events:{selectionChange:{parameters:{changedItem:{type:"sap.ui.core.Item"},changedItems:{type:"sap.ui.core.Item[]"},selected:{type:"boolean"},selectAll:{type:"boolean"}}},selectionFinish:{parameters:{selectedItems:{type:"sap.ui.core.Item[]"}}}},dnd:{draggable:false,droppable:true}},renderer:d});h.insertFontFaceStyle();l.apply(F.prototype,[true]);F.prototype.clone=function(e){var i=t.prototype.clone.apply(this,arguments),s=this._getList();if(s){i.syncPickerContent()}return i};F.prototype.open=function(){if(!this.isOpen()){this._bPickerIsOpening=true}this.syncPickerContent();return t.prototype.open.apply(this,arguments)};F.prototype.onsapend=function(e){if(e.isMarked("forwardFocusToParent")){this.focus()}};F.prototype.onsaphome=function(e){if(!this.getFocusDomRef().selectionStart&&this._hasTokens()){i.prototype.onsaphome.apply(this.getAggregation("tokenizer"),arguments)}e.setMarked()};F.prototype.onsapdown=function(e){if(!this.getEnabled()||!this.getEditable()){return}e.setMarked();e.preventDefault();this.syncPickerContent();if(!this.isOpen()){this._oTraversalItem=this._getNextTraversalItem();if(this._oTraversalItem&&!this.isFocusInTokenizer()&&!this.isComposingCharacter()){this.updateDomValue(this._oTraversalItem.getText());this.selectText(0,this.getValue().length)}return}setTimeout(this.handleDownEvent.bind(this,e),0)};F.prototype.onsapup=function(e){if(!this.getEnabled()||!this.getEditable()){return}e.setMarked();e.preventDefault();this.syncPickerContent();if(this.isFocusInTokenizer()||this.isOpen()){return}this._oTraversalItem=this._getPreviousTraversalItem();if(this._oTraversalItem){this.updateDomValue(this._oTraversalItem.getText());this.selectText(0,this.getValue().length)}};F.prototype.handleDownEvent=function(e){if(!this.isOpen()){return}var t=e.srcControl,i=t&&t.getDomRef(),s=f(this.getDomRef(),i),n=this.getPicker().getCustomHeader(),o=n&&n.getDomRef();e.setMarked();e.preventDefault();if(s&&this.getValueState()!=D.None){this._handleFormattedTextNav();return}if((s||f(o,i))&&this.getShowSelectAll()){this.focusSelectAll();return}this.focusFirstItemInList()};F.prototype.handleEndEvent=function(e){e.setMarked();e.preventDefault();var t=v.getVisibleItems(this.getItems()),i=t.length&&v.getListItem(t[t.length-1]);i&&i.focus()};F.prototype.handleHomeEvent=function(e){e.setMarked();e.preventDefault();if(this.getValueState()!==D.None){this._handleFormattedTextNav();e.stopPropagation(true);return}if(this.getShowSelectAll()){this.focusSelectAll();e.stopPropagation(true);return}this.focusFirstItemInList()};F.prototype.focusFirstItemInList=function(){var e=v.getVisibleItems(this.getItems()),t=e.length&&v.getListItem(e[0]);t&&t.focus()};F.prototype.isFocusInTokenizer=function(){return jQuery.contains(this.getAggregation("tokenizer").getFocusDomRef(),document.activeElement)};F.prototype.onsapshow=function(e){e.preventDefault();this._handleItemToFocus();t.prototype.onsapshow.apply(this,arguments)};F.prototype._handlePopupOpenAndItemsLoad=function(){this._handleItemToFocus();t.prototype._handlePopupOpenAndItemsLoad.apply(this,arguments)};F.prototype._valueStateNavDelegate=function(e,t){return{onsapdown:this.handleDownEvent,onsapup:this.focus,onsapend:this.handleEndEvent,onfocusout:function(i){e.removeStyleClass("sapMFocusable");if(!e.getDomRef().contains(i.relatedTarget)){t.forEach(function(e){e.getDomRef().setAttribute("tabindex","-1")})}},onsapshow:this.close,onsaphide:this.close}};F.prototype._closePickerDelegate={onsaptabnext:function(){this.close();setTimeout(function(){this.closeValueStateMessage()}.bind(this),0)}};F.prototype._formattedTextLinksNav={onsapup:this.focus,onsapdown:this.handleDownEvent};F.prototype._handleFormattedTextNav=function(){var e=this.getPicker().getCustomHeader(),t=this.getValueStateLinks(),i=t?t[t.length-1]:null,s=t?t[0]:null;if(!e.getDomRef()||e.getDomRef()===document.activeElement){return}if(!this.oValueStateNavDelegate){this.oValueStateNavDelegate=this._valueStateNavDelegate(e,t);e.addEventDelegate(this.oValueStateNavDelegate,this)}e.getDomRef().setAttribute("tabindex","-1");e.addStyleClass("sapMFocusable");e.focus();t.forEach(function(e){e.getDomRef().setAttribute("tabindex","0");e.addEventDelegate(this._formattedTextLinksNav,this)},this);this.oMoveFocusBackToVSHeader=!this.oMoveFocusBackToVSHeader?{onsaptabprevious:function(t){t.preventDefault();e.focus();e.addStyleClass("sapMFocusable")}}:this.oMoveFocusBackToVSHeader;i&&i.addEventDelegate(this._closePickerDelegate,this);s&&s.addEventDelegate(this.oMoveFocusBackToVSHeader,this)};F.prototype.onsaphide=function(e){this.onsapshow(e)};F.prototype._selectItemByKey=function(e){var t,i,s,n,o,r,a=this.isOpen();if(!this.getEnabled()||!this.getEditable()){return}if(e){e.setMarked()}t=this._getUnselectedItems(a?"":this.getValue());for(n=0;n<t.length;n++){r=!(t[n].getKey()===undefined||t[n].getKey()===null)&&!t[n].isA("sap.ui.core.SeparatorItem");if(t[n].getText().toUpperCase()===this.getValue().toUpperCase()&&r){s=t[n];o=true;break}}if(o){i={item:s,id:s.getId(),key:s.getKey(),fireChangeEvent:true,fireFinishEvent:true,suppressInvalidate:true,listItemUpdated:false};this._bPreventValueRemove=false;if(this.getValue()===""||typeof this.getValue()==="string"&&s.getText().toLowerCase().startsWith(this.getValue().toLowerCase())){if(v.getListItem(s).isSelected()){this.setValue("")}else{this.setSelection(i)}}}else{this._bPreventValueRemove=true}if(e){this.close()}};F.prototype.onsapenter=function(t){var i=this.getAggregation("tokenizer");e.prototype.onsapenter.apply(this,arguments);this._showAlreadySelectedVisualEffect();if(this.getValue()){this._selectItemByKey(t)}if(!this.getEditable()&&i.getHiddenTokensCount()&&t.target===this.getFocusDomRef()){i._togglePopup(i.getTokensPopup())}};F.prototype.onsaptabnext=function(e){var t=this.getValue();if(t){var i=this._getUnselectedItemsStartingText(t);if(i.length===1){this._selectItemByKey(e)}else{this._showWrongValueVisualEffect()}}};F.prototype.onsaptabprevious=F.prototype.onsaptabnext;F.prototype.onsapfocusleave=function(e){var t=this.isPlatformTablet(),i=P.byId(e.relatedControlId),s=i&&i.getFocusDomRef(),n=this.getValue(),o=this.getPicker(),r=this.getAggregation("tokenizer");if(!this._bPickerIsOpening&&(!o||!o.getFocusDomRef()||!s||!jQuery.contains(o.getFocusDomRef(),s))){this.setValue(null);if(n){this.fireChangeEvent("",{value:n})}if(!jQuery.contains(this.getDomRef(),document.activeElement)){r.setRenderMode(L.Narrow)}}if(o&&s){if(C(o.getFocusDomRef(),s)&&!t&&!this.isPickerDialog()){this.focus()}}};F.prototype.onfocusin=function(e){var t=this.getPicker();var i=false;var s=t&&t.getFocusDomRef();var n=t&&t.oPopup.getOpenState()||x.CLOSED;var o=n===x.CLOSING||n===x.CLOSED;var r=this.getPickerType()==="Dropdown";var a=this.getAggregation("tokenizer");if(r){i=s&&jQuery.contains(s,e.relatedTarget)}if(this.getEditable()&&e.target===this.getDomRef("inner")){a.setRenderMode(L.Loose)}if(e.target===this.getFocusDomRef()){a.hasOneTruncatedToken()&&a.setFirstTokenTruncated(false);this.getEnabled()&&this.addStyleClass("sapMFocus");!o&&i&&this.handleInputValidation(e,false)}if(e.target===this.getOpenArea()&&r&&!this.isPlatformTablet()){this.focus()}if(!this.isOpen()&&this.shouldValueStateMessageBeOpened()){this.openValueStateMessage()}};F.prototype._handleItemTap=function(e){var t=jQuery(e.target).control(0);if(!t.isA("sap.m.CheckBox")&&!t.isA("sap.m.GroupHeaderListItem")){this._bCheckBoxClicked=false}};F.prototype._handleItemPress=function(e){if(this.isOpen()&&this._isListInSuggestMode()&&this.getPicker().oPopup.getOpenState()!==x.CLOSING){this.clearFilter();var t=this._getLastSelectedItem();if(t){v.getListItem(t).focus()}}};F.prototype._handleSelectionLiveChange=function(e){if(e.getParameter("selectAll")){return}var t=e.getParameter("listItem");var i=e.getParameter("listItems");var s=i&&i[i.length-1]||t;var n=this.isPickerDialog()?this.getPickerTextField():this;var o=this._getIsClick()&&!!s;var r=e.getParameter("selected");var a=v.getItemByListItem(this.getItems(),t);var l;if(i&&i.length){l=[];i.forEach(function(e){if(e.getType()==="Active"){l.push(v.getItemByListItem(this.getItems(),e))}},this)}if(t.getType()==="Inactive"){return}E(a,"The corresponding mapped item was not found on "+this);if(!a){return}var h={item:a,items:l,id:a.getId(),key:a.getKey(),selectAll:false,fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:true};if(r){this.fireChangeEvent(a.getText());this.setSelection(h)}else{this.fireChangeEvent(a.getText());this.removeSelection(h)}if(this._bCheckBoxClicked){n.setValue(this._sOldInput);if(o&&this.isOpen()&&this.getPicker().oPopup.getOpenState()!==x.CLOSING){s.focus();this._setIsClick(false)}}else{this._bCheckBoxClicked=true;this.setValue("");this.close()}};F.prototype.onkeydown=function(e){var i=this.getEditable(),s=this.getAggregation("tokenizer"),n=s.getTokens().length;t.prototype.onkeydown.apply(this,arguments);if(!this.getEnabled()){return}if((e.ctrlKey||e.metaKey)&&e.which===T.I&&n){e.preventDefault();if(i){this._togglePopover()}else{this._handleIndicatorPress()}return}this._bIsPasteEvent=(e.ctrlKey||e.metaKey)&&e.which===T.V;if(this.getValue().length===0&&(e.ctrlKey||e.metaKey)&&e.which===T.A&&this._hasTokens()){s.focus();s.selectAllTokens(true);e.preventDefault()}if(this.isPickerDialog()){this._sOldValue=this.getPickerTextField().getValue();this._iOldCursorPos=jQuery(this.getFocusDomRef()).cursorPos()}this._bDoTypeAhead=!c.os.android&&e.which!==T.BACKSPACE&&e.which!==T.DELETE};F.prototype.oninput=function(e){t.prototype.oninput.apply(this,arguments);var i=e.srcControl,s=this.isPickerDialog(),n=s?this.getPickerTextField():this,o=n.getValueState();if(o===D.Error&&this._bAlreadySelected){n.setValueState(this._sInitialValueState);n.setValueStateText(this._sInitialValueStateText);this._bAlreadySelected=false}if(!this.getEnabled()||!this.getEditable()){return}this.syncPickerContent();this.handleInputValidation(e,this.isComposingCharacter());if(this._bIsPasteEvent){i.updateDomValue(this._sOldValue||e.target.value||"");return}if(this.isOpen()){setTimeout(this.highlightList.bind(this,this._sOldInput))}if(this._getItemsShownWithFilter()){this.toggleIconPressedStyle(true)}};F.prototype.filterItems=function(e){return S(this,e.items,e.value,true,false,this.fnFilter||I)};F.prototype.onkeyup=function(e){t.prototype.onkeyup.apply(this,arguments);if(!this.getEnabled()||!this.getEditable()){return}this._sOldValue=this.getValue();this._iOldCursorPos=jQuery(this.getFocusDomRef()).cursorPos()};F.prototype._showWrongValueVisualEffect=function(){var e=this._getSuggestionsPopover();var t=this._sInitialValueStateText;var i=this._sInitialValueState;var s=t||this._oRbC.getText("VALUE_STATE_ERROR");var n=this;if(i===D.Error){return}if(e){e.updateValueState(D.Error,s,true);setTimeout(e.updateValueState.bind(e,n.getValueState(),s,true),1e3)}if(!this.isPickerDialog()){this.setValueState(D.Error);this.setValueStateText(this.getValueStateText()||s);setTimeout(this["setValueState"].bind(this,i||D.Error),1e3)}this._syncInputWidth(this.getAggregation("tokenizer"))};F.prototype._showAlreadySelectedVisualEffect=function(){var e=this._oRb.getText("VALUE_STATE_ERROR_ALREADY_SELECTED");if(!this.getValue()){return}var t=!!this.getSelectedItems().filter(function(e){return e.getText().toLowerCase()===this.getValue().toLowerCase()},this).length;var i=this.getItems().filter(function(e){return e.getText().toLowerCase()===this.getValue().toLowerCase()},this).length;if(t){this._sInitialValueState=this.getValueState();this._sInitialValueStateText=this.getValueStateText();this.setValueStateText(e);this._bAlreadySelected=true;this.setValueState("Error");return}else if(i){return}else{this._showWrongValueVisualEffect()}};F.prototype._hasShowSelectedButton=function(){return true};F.prototype.forwardEventHandlersToSuggPopover=function(e){t.prototype.forwardEventHandlersToSuggPopover.apply(this,arguments);e.setShowSelectedPressHandler(this._filterSelectedItems.bind(this))};F.prototype.configPicker=function(e){var t=this.getRenderer(),i=t.CSS_CLASS_MULTICOMBOBOX;e.setHorizontalScrolling(false).addStyleClass(t.CSS_CLASS_COMBOBOXBASE+"Picker").addStyleClass(i+"Picker").addStyleClass(i+"Picker-CTX").attachBeforeOpen(this.onBeforeOpen,this).attachAfterOpen(this.onAfterOpen,this).attachBeforeClose(this.onBeforeClose,this).attachAfterClose(this.onAfterClose,this).addEventDelegate({onBeforeRendering:this.onBeforeRenderingPicker,onAfterRendering:this.onAfterRenderingPicker},this)};F.prototype._configureList=function(e){var t=10;if(!e){return}e.applyAriaRole("listbox");e.setMode(O.MultiSelect);e.setIncludeItemInSelection(true);e.setGrowingThreshold(t);e.attachBrowserEvent("tap",this._handleItemTap,this).attachSelectionChange(this._handleSelectionLiveChange,this).attachItemPress(this._handleItemPress,this);e.addEventDelegate({onAfterRendering:this.onAfterRenderingList,onfocusin:this.onFocusinList},this);this.getShowSelectAll()&&this.createSelectAllHeaderToolbar(e)};F.prototype._decoratePopupInput=function(e){t.prototype._decoratePopupInput.apply(this,arguments);if(!e||!e.isA(["sap.m.InputBase"])){return}e.attachSubmit(function(t){var i=e.getValue();if(i){this.setValue(i);this._selectItemByKey();this.setValue(this._sOldInput);this.close()}}.bind(this));e.addEventDelegate({onfocusout:this._handleInputFocusOut},this);e.attachChange(this._handleInnerInputChange.bind(this));return e};F.prototype._handleInnerInputChange=function(e){if(e.getParameter("value")===""){this._sOldInput="";this.clearFilter()}};F.prototype.onBeforeRendering=function(){var e=this.getEditable();var i=this.getAggregation("tokenizer");var s=this.getItems();t.prototype.onBeforeRendering.apply(this,arguments);this._bInitialSelectedKeysSettersCompleted=true;i.setEnabled(this.getEnabled());i.setEditable(e);this._updatePopoverBasedOnEditMode(e);if(!s.length){this._clearTokenizer()}if(this._getList()){this.syncPickerContent(true)}this.toggleSelectAllVisibility(this.getShowSelectAll());if(this._sOldInput&&s.length&&this.isOpen()){_(this.getItems(),this.filterItems({value:this._sOldInput,items:s}));setTimeout(this.highlightList.bind(this,this._sOldInput))}this._deregisterResizeHandler();this._synchronizeSelectedItemAndKey();this.setProperty("hasSelection",!!this.getSelectedItems().length,true);if(!this._bAlreadySelected){this._sInitialValueStateText=this.getValueStateText()}if(this.getValueState()!==D.Error){this._sInitialValueState=this.getValueState()}};F.prototype.syncPickerContent=function(e){var t,i,s=this.getPicker();if(!s){s=this.createPicker(this.getPickerType());this._updateSuggestionsPopoverValueState();e=true}if(e){i=this._getList();t=this.getEditable()?this.getItems():this.getSelectedItems();this._synchronizeSelectedItemAndKey();i.destroyItems();this._clearTokenizer();this._fillList(t);if(i.getItemNavigation()){this._iFocusedIndex=i.getItemNavigation().getFocusedIndex()}}return s};F.prototype._registerResizeHandler=function(){E(!this._iResizeHandlerId,"Resize handler already registered");this._iResizeHandlerId=p.register(this,this._onResize.bind(this))};F.prototype._deregisterResizeHandler=function(){if(this._iResizeHandlerId){p.deregister(this._iResizeHandlerId);this._iResizeHandlerId=null}};F.prototype._onResize=function(){var e=this.getAggregation("tokenizer");e.setMaxWidth(this._calculateSpaceForTokenizer());this._syncInputWidth(e);this._handleNMoreAccessibility()};F.prototype.onAfterRenderingPicker=function(){var e=this["_onAfterRendering"+this.getPickerType()];if(e){e.call(this)}};F.prototype.onBeforeOpen=function(){t.prototype.onBeforeOpen.apply(this,arguments);var e=this["_onBeforeOpen"+this.getPickerType()];this.addContent();this._aInitiallySelectedItems=this.getSelectedItems();this._synchronizeSelectedItemAndKey();if(e){e.call(this)}};F.prototype.onAfterOpen=function(){var e=this.getFocusDomRef(),t=this.getValueStateLinks();e&&this.getFocusDomRef().setAttribute("aria-expanded","true");this._bPickerIsOpening=false;if(!this.isPlatformTablet()){this.getPicker().setInitialFocus(this)}t.forEach(function(e){e.addDelegate({onAfterRendering:function(){if(this.getFocusDomRef()){this.getFocusDomRef().setAttribute("tabindex","-1")}}},e)});this.closeValueStateMessage()};F.prototype.onBeforeClose=function(){t.prototype.onBeforeClose.apply(this,arguments)};F.prototype.onAfterClose=function(){var e=!jQuery.contains(this.getDomRef(),document.activeElement)||this.isPickerDialog(),t=this.getFocusDomRef();t&&this.getFocusDomRef().setAttribute("aria-expanded","false");this.toggleIconPressedStyle(false);this.clearFilter();!this.isComposingCharacter()&&!this._bPreventValueRemove&&this.setValue("");this._sOldValue="";this._sOldInput="";this._getSuggestionsPopover()._sTypedInValue="";if(this.isPickerDialog()){this.getPickerTextField().setValue("");this.getFilterSelectedButton()&&this.getFilterSelectedButton().setPressed(false)}this.fireSelectionFinish({selectedItems:this.getSelectedItems()});this.getAggregation("tokenizer").setRenderMode(e?L.Narrow:L.Loose);if(this.getValueState()==D.Error&&document.activeElement===this.getFocusDomRef()){this.selectText(0,this.getValue().length)}};F.prototype._onBeforeOpenDialog=function(){};F.prototype._onBeforeOpenDropdown=function(){var e=this.getPicker(),t=this.getDomRef(),i;if(t&&e){i=t.offsetWidth/parseFloat(a.BaseFontSize)+"rem";e.setContentMinWidth(i)}};F.prototype.getFilterSelectedButton=function(){return this._getSuggestionsPopover().getFilterSelectedButton()};F.prototype._filterSelectedItems=function(e,t){var i=e.oSource,s,n,o=this.getPickerTextField()?this.getPickerTextField().getValue():"",r=i&&i.getPressed&&i.getPressed()||t,a=v.getVisibleItems(this.getItems()),l=this.getItems(),h=this.getSelectedItems(),u=null;if(r){a.forEach(function(e){n=h.indexOf(e)>-1?true:false;s=v.getListItem(e);if(!s){return}if(s.isA("sap.m.GroupHeaderListItem")){s.setVisible(false);u=s}else{s.setVisible(n);if(n&&u){u.setVisible(true)}}},this)}else{_(this.getItems(),this.filterItems({value:o,items:l}))}this.manageSelectAllCheckBoxState()};F.prototype.revertSelection=function(){this.setSelectedItems(this._aInitiallySelectedItems)};F.prototype.setSelection=function(e){var t=this._getList(),i;if(e.item&&this.isItemSelected(e.item)){return}if(!e.item){return}if(!e.items||!e.items.length||e.selectAll){i=[e.item]}else{i=e.items}i.forEach(function(i){if(!e.listItemUpdated&&v.getListItem(i)&&t){t.setSelectedItem(v.getListItem(i),true)}var n=new s({key:i.getKey()});n.setText(i.getText());i.data(v.CSS_CLASS+"Token",n);this.getAggregation("tokenizer").addToken(n);this.addAssociation("selectedItems",i,e.suppressInvalidate);var o=this.getSelectedKeys();var r=this.getKeys([i])[0];if(r===""||o.indexOf(r)===-1){o.push(r);this.setProperty("selectedKeys",o,e.suppressInvalidate)}if(e.fireChangeEvent){this.fireSelectionChange({changedItem:e.item,changedItems:e.items,selectAll:e.selectAll,selected:true})}},this);if(!this.getProperty("hasSelection")&&this.getSelectedItems().length){this.setProperty("hasSelection",true)}this.setValue("");if(e.fireFinishEvent){if(!this.isOpen()){this.fireSelectionFinish({selectedItems:this.getSelectedItems()})}}};F.prototype.removeSelection=function(e){var t,i,s;if(e.item&&!this.isItemSelected(e.item)){return}if(!e.item){return}if(!e.items||!e.items.length||e.selectAll){t=[e.item]}else{t=e.items}t.forEach(function(t){this.removeAssociation("selectedItems",t,e.suppressInvalidate);i=this.getSelectedKeys();s=i.indexOf(t.getKey());i.splice(s,1);this.setProperty("selectedKeys",i,e.suppressInvalidate);if(!e.listItemUpdated&&v.getListItem(t)){var n=v.getListItem(t);this._getList().setSelectedItem(n,false)}if(!e.tokenUpdated){var o=b(t);t.data(v.CSS_CLASS+"Token",null);this.getAggregation("tokenizer").removeToken(o)}if(e.fireChangeEvent){this.fireSelectionChange({changedItem:e.item,changedItems:e.items,selectAll:e.selectAll,selected:false})}},this);if(this.getProperty("hasSelection")&&!this.getSelectedItems().length){this.setProperty("hasSelection",false)}if(e.fireFinishEvent){if(!this.isOpen()){this.fireSelectionFinish({selectedItems:this.getSelectedItems()})}}};F.prototype._synchronizeSelectedItemAndKey=function(){var e=this.getSelectedKeys();var t=this.getKeys(this.getSelectedItems());if(!e.length){A.info("Info: _synchronizeSelectedItemAndKey() the MultiComboBox control does not contain any item on ",this);return}for(var i=0,s=null,n=null,o=e.length;i<o;i++){s=e[i];if(t.indexOf(s)>-1){continue}n=this.getItemByKey(""+s);if(n){this.setSelection({item:n,id:n.getId(),key:n.getKey(),fireChangeEvent:false,suppressInvalidate:true,listItemUpdated:false})}}};F.prototype.updateItems=function(e){var i=function(e){return e&&e.getKey&&e.getKey()},s,n=this.getSelectedItems().map(i),o=this.getSelectedKeys();var r=t.prototype.updateItems.apply(this,arguments);n=this.getSelectedItems().map(i).filter(function(e){return n.indexOf(e)>-1});s=o.concat(n);this.setSelectedKeys(s);return r};F.prototype._getSelectedItemsOf=function(e){for(var t=0,i=e.length,s=[];t<i;t++){if(v.getListItem(e[t]).isSelected()){s.push(e[t])}}return s};F.prototype._getLastSelectedItem=function(){var e=this.getAggregation("tokenizer").getTokens();var t=e.length?e[e.length-1]:null;if(!t){return null}return this._getItemByToken(t)};F.prototype._getFocusedListItem=function(){if(!document.activeElement){return null}var e=P.byId(document.activeElement.id);if(this._getList()&&f(this._getList().getFocusDomRef(),e.getFocusDomRef())){return e}return null};F.prototype._getFocusedItem=function(){return v.getItemByListItem(this.getItems(),this._getFocusedListItem())};F.prototype._hasTokens=function(){return this.getAggregation("tokenizer").getTokens().length>0};F.prototype._decorateListItem=function(e){e.addDelegate({onkeydown:function(e){if((e.ctrlKey||e.metaKey)&&e.which==T.A){e.setMarked();e.preventDefault();var t=v.getSelectableItems(this.getItems());var i=this._getSelectedItemsOf(t);if(i.length!==t.length){t.forEach(function(e){this.setSelection({item:e,items:t,selectAll:true,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:false})},this)}else{t.forEach(function(e){this.removeSelection({item:e,items:t,selectAll:true,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:false})},this)}}},onmousedown:function(e){this._setIsClick(true)},onkeyup:function(e){var t=null;if(e.which==T.SPACE&&this.isOpen()&&this._isListInSuggestMode()){this.open();t=this._getLastSelectedItem();if(t){v.getListItem(t).focus()}return}}},true,this);e.addEventDelegate({onsapbackspace:function(e){e.preventDefault()},onsapshow:function(e){e.setMarked();this.close()},onsaphide:function(e){this.onsapshow(e)},onsapenter:function(e){e.setMarked();this.close()},onsaphome:this.handleHomeEvent.bind(this),onsapend:this.handleEndEvent.bind(this),onsapup:function(e){e.setMarked();e.preventDefault();var t=v.getVisibleItems(this.getItems());var i=t[0];var s=jQuery(document.activeElement).control()[0];if(s!==v.getListItem(i)){return}if(this.getShowSelectAll()){this.focusSelectAll()}else if(this.getValueState()!==D.None){this._handleFormattedTextNav()}else{this.focus()}e.stopPropagation(true)},onfocusin:function(e){this.addStyleClass(this.getRenderer().CSS_CLASS_MULTICOMBOBOX+"Focused")},onfocusout:function(e){this.removeStyleClass(this.getRenderer().CSS_CLASS_MULTICOMBOBOX+"Focused")},onsapfocusleave:function(e){var t=this.getAggregation("picker");var i=P.byId(e.relatedControlId);if(t&&i&&C(t.getFocusDomRef(),i.getFocusDomRef())){if(e.srcControl){e.srcControl.focus()}}},onsaptabnext:function(){this.getPicker().close()},onsaptabprevious:function(){this.getPicker().close()}},this);if(c.support.touch){e.addEventDelegate({ontouchstart:function(e){e.setMark("cancelAutoClose")}})}};F.prototype._handleInputFocusOut=function(){var e=this.isPickerDialog()?this.getPickerTextField():this,t=this._sOldInput||this._sOldValue||"";e.updateDomValue(t);this._bIsPasteEvent=null};F.prototype.onItemChange=function(e){var i=t.prototype.onItemChange.call(this,e,this.getShowSecondaryValues());var s=e.getParameters();k({item:e.getSource(),propName:s.name,propValue:s.newValue});return i};F.prototype._handleIndicatorPress=function(){var e,t=this.getAggregation("tokenizer");if(this.getEditable()){this.syncPickerContent();this._filterSelectedItems({},true);this.focus();e=this.getPicker();e.open()}else{t._togglePopup(t.getTokensPopup())}if(this.isPickerDialog()){this.getFilterSelectedButton().setPressed(true);this.bOpenedByKeyboardOrButton=true}};F.prototype._togglePopover=function(){var e=this.getPicker();if(!e){e=this.syncPickerContent(true)}if(e.isOpen()){e.close()}else{e.open()}};F.prototype._createTokenizer=function(){var e=new i({renderMode:L.Narrow}).attachTokenDelete(this._handleTokenDelete,this);e.getTokensPopup().attachAfterOpen(function(){if(e.hasOneTruncatedToken()){e.setFirstTokenTruncated(false)}}).attachAfterClose(function(){var t=e.getTokens();if(t.length===1&&!t[0].getTruncated()){e.setFirstTokenTruncated(true)}});e.addEventDelegate({onAfterRendering:this._onAfterRenderingTokenizer},this);return e};F.prototype._onAfterRenderingTokenizer=function(){var e=this.getAggregation("tokenizer");if(this.getEditable()){e.addStyleClass("sapMTokenizerIndicatorDisabled")}else{e.removeStyleClass("sapMTokenizerIndicatorDisabled")}setTimeout(this._syncInputWidth.bind(this,e),0);setTimeout(this._handleNMoreAccessibility.bind(this),0);setTimeout(e["scrollToEnd"].bind(e),0)};F.prototype._handleTokenDelete=function(e){var t=e.getParameter("tokens");var i=this.getSelectedItems();this._removeSelection(t);if(i.length!==v.getSelectableItems(this.getItems())){!this.isPickerDialog()&&!this.isFocusInTokenizer()&&this.focus();this.fireChangeEvent("")}};F.prototype._removeSelection=function(e){var t=this.getAggregation("tokenizer");e.forEach(function(e){var i=e&&this._getItemByToken(e);if(!this.getEditable()||!this.getEnabled()||!i||!this.isItemSelected(i)||!i.getEnabled()||!e.getEditable()){return}this.removeSelection({item:i,id:i.getId(),key:i.getKey(),tokenUpdated:true,fireChangeEvent:true,fireFinishEvent:true,suppressInvalidate:true});e.destroy();if(this.getSelectedItems().length>0){var s=t.getTokens();s[s.length-1].focus()}else{this.focus()}},this)};F.prototype.onAfterRenderingList=function(){var e=document.activeElement===this.getFocusDomRef();var t=this._getList();var i=t?t.getVisibleItems():[];if(this.getEditable()&&!e&&i[this._iFocusedIndex]){i[this._iFocusedIndex].focus();this._iFocusedIndex=null}this.manageSelectAllCheckBoxState()};F.prototype.onFocusinList=function(){var e=this._getList();if(this._bListItemNavigationInvalidated&&this._getList().getItemNavigation()){e.getItemNavigation().setSelectedIndex(this._iInitialItemFocus);this._bListItemNavigationInvalidated=false}this._getSuggestionsPopover().updateListDataAttributes(e)};F.prototype.onAfterRendering=function(){var e=this.getAggregation("tokenizer");t.prototype.onAfterRendering.apply(this,arguments);this._registerResizeHandler();setTimeout(function(){e.setMaxWidth(this._calculateSpaceForTokenizer())}.bind(this),0)};F.prototype.onfocusout=function(e){this.isOpen()&&this._handleInputFocusOut();this.removeStyleClass("sapMFocus");if(this.getValueState()===D.Error&&this.getValueStateText()===this._oRb.getText("VALUE_STATE_ERROR_ALREADY_SELECTED")){this.setValueState(this._sInitialValueState);this.setValueStateText(this._sInitialValueStateText)}t.prototype.onfocusout.apply(this,arguments)};F.prototype.onpaste=function(e){var t;var i=false;var s=this.getSelectedItems();t=e.originalEvent.clipboardData.getData("text/plain");if(t.length&&t.endsWith("\r\n")){t=t.substring(0,t.lastIndexOf("\r\n"))}var n=t.split(/\r\n|\r|\n|\t/g);if(n&&n.length>1){v.getSelectableItems(this.getItems()).filter(function(e){return s.indexOf(e)===-1}).forEach(function(e){if(n.indexOf(e.getText())>-1){i=true;this.setSelection({item:e,id:e.getId(),key:e.getKey(),fireChangeEvent:true,fireFinishEvent:true,suppressInvalidate:true,listItemUpdated:false})}},this)}if(i){e.stopPropagation();e.preventDefault()}};F.prototype.onsapbackspace=function(e){var t=this.getAggregation("tokenizer");var i=t.getTokens();var s=i.filter(function(e){return e.getSelected()});if(!this.getEnabled()||!this.getEditable()){e.preventDefault();return}if(this.getCursorPosition()>0||this.getValue().length>0){return}if(s.length>0){this._removeAllTokens();return}if(document.activeElement===this.getFocusDomRef()){i[i.length-1]&&i[i.length-1].focus()}e.preventDefault()};F.prototype._removeAllTokens=function(){var e=this.getAggregation("tokenizer");var t=e.getTokens().filter(function(e){return e.getSelected()});if(!t.length){return}this._removeSelection(t);this.fireChangeEvent("");this.invalidate()};F.prototype.onsapdelete=F.prototype.onsapbackspace;F.prototype.onsapnext=function(e){var t=this.getAggregation("tokenizer");if(e.isMarked()){return}var i=jQuery(document.activeElement).control()[0];if(!i){return}if(i===t||t.$().find(i.$()).length>0&&this.getEditable()){t.scrollToEnd();this.focus()}};F.prototype.onsapprevious=function(e){if(this.getCursorPosition()===0&&!m(this.getFocusDomRef())){if(e.srcControl===this){i.prototype.onsapprevious.apply(this.getAggregation("tokenizer"),arguments)}}};F.prototype.onclick=function(e){var t=this.getEditable(),i=this.getEnabled(),s=e.target.className.indexOf("sapMTokenizerIndicator")>-1;if(t&&i&&s){e.preventDefault();this._handleIndicatorPress()}};F.prototype.ontap=function(e){t.prototype.ontap.apply(this,arguments);var i=this.getOpenArea();if(!this.getEnabled()||!this.getEditable()){return}e.setMarked();if(this.isPickerDialog()&&i.contains(e.target)){this.open()}};F.prototype.getOpenArea=function(){if(this.isPickerDialog()){return this.getDomRef()}else{return t.prototype.getOpenArea.apply(this,arguments)}};F.prototype._getItemsStartingWithPerTerm=function(e,t){var i=[],s=t?v.getEnabledItems(this.getItems()):v.getSelectableItems(this.getItems()),n=this.fnFilter?this.fnFilter:I;s.forEach(function(t){if(n(e,t)){i.push(t)}},this);return i};F.prototype._getItemsStartingWith=function(e,t){var i=[],s=t?v.getEnabledItems(this.getItems()):v.getSelectableItems(this.getItems());s.forEach(function(t){if(typeof e==="string"&&e!==""&&t.getText().toLowerCase().startsWith(e.toLowerCase())){i.push(t)}},this);return i};F.prototype._getUnselectedItemsStartingText=function(e){var t=[];this._getUnselectedItems().forEach(function(i){if(typeof e==="string"&&e!==""&&i.getText().toLowerCase().startsWith(e.toLowerCase())){t.push(i)}},this);return t};F.prototype.getCursorPosition=function(){return this._$input.cursorPos()};F.prototype._selectPreviousItemsOf=function(e){var t;do{t=true;var i=this._getPreviousVisibleItemOf(e);if(i){var s=v.getListItem(i);if(s){t=v.getListItem(i).getSelected()}}this.setSelection({item:e,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true});e=i}while(!t)};F.prototype._getNextVisibleItemOf=function(e){var t=v.getSelectableItems(this.getItems());var i=t.indexOf(e)+1;if(i<=0||i>t.length-1){return null}return t[i]};F.prototype._getPreviousVisibleItemOf=function(e){var t=v.getSelectableItems(this.getItems());var i=t.indexOf(e)-1;if(i<0){return null}return t[i]};F.prototype._getNextUnselectedItemOf=function(e){var t=this._getUnselectedItems();var i=t.indexOf(e)+1;if(i<=0||i>t.length-1){return null}return t[i]};F.prototype._getPreviousUnselectedItemOf=function(e){var t=this._getUnselectedItems();var i=t.indexOf(e)-1;if(i<0){return null}return t[i]};F.prototype._getNextTraversalItem=function(){var e=this.getValue();var t=e?this._getItemsStartingWithPerTerm(e):[];var i=this._getUnselectedItems();if(t.indexOf(this._oTraversalItem)>-1&&this._oTraversalItem.getText()===this.getValue()){return this._getNextUnselectedItemOf(this._oTraversalItem)}if(t.length&&t[0].getText()===this.getValue()){return this._getNextUnselectedItemOf(t[0])}return t.length?t[0]:i[0]};F.prototype._getPreviousTraversalItem=function(){var e=this.getValue();var t=e?this._getItemsStartingWithPerTerm(e):[];if(t.indexOf(this._oTraversalItem)>-1&&this._oTraversalItem.getText()===this.getValue()){return this._getPreviousUnselectedItemOf(this._oTraversalItem)}if(t.length&&t[t.length-1].getText()===this.getValue()){return this._getPreviousUnselectedItemOf(t[t.length-1])}if(t.length){return t[t.length-1]}else{var i=this._getUnselectedItems();if(i.length>0){return i[i.length-1]}else{return null}}};F.prototype.setSelectedItems=function(e){this.removeAllSelectedItems();if(!e||!e.length){return this}if(!Array.isArray(e)){A.warning("Warning: setSelectedItems() has to be an array of sap.ui.core.Item instances or of valid sap.ui.core.Item IDs",this);return this}e.forEach(function(e){if(!(e instanceof g)&&typeof e!=="string"){A.warning("Warning: setSelectedItems() has to be an array of sap.ui.core.Item instances or of valid sap.ui.core.Item IDs",this);return}if(typeof e==="string"){e=P.byId(e)}this.setSelection({item:e?e:null,id:e?e.getId():"",key:e?e.getKey():"",suppressInvalidate:true})},this);return this};F.prototype.addSelectedItem=function(e){if(!e){return this}if(typeof e==="string"){e=P.byId(e)}this.setSelection({item:e?e:null,id:e?e.getId():"",key:e?e.getKey():"",fireChangeEvent:false,suppressInvalidate:true});return this};F.prototype.removeSelectedItem=function(e){if(!e){return null}if(typeof e==="string"){e=P.byId(e)}if(!this.isItemSelected(e)){return null}this.removeSelection({item:e,id:e.getId(),key:e.getKey(),fireChangeEvent:false,suppressInvalidate:true});return e};F.prototype.removeAllSelectedItems=function(){var e=[];var t=this.getAssociation("selectedItems",[]);t.forEach(function(t){var i=this.removeSelectedItem(t);if(i){e.push(i.getId())}},this);return e};F.prototype.removeSelectedKeys=function(e){var t,i=[];if(!e||!e.length||!Array.isArray(e)){return i}e.forEach(function(e){t=this.getItemByKey(e);if(t){this.removeSelection({item:t?t:null,id:t?t.getId():"",key:t?t.getKey():"",fireChangeEvent:false,suppressInvalidate:true});i.push(t)}},this);return i};F.prototype.setSelectedKeys=function(e){if(this._bInitialSelectedKeysSettersCompleted){this.setProperty("selectedKeys",[],true);this.removeAllSelectedItems()}this.addSelectedKeys(e);this._bInitialSelectedKeysSettersCompleted=true;return this};F.prototype.addSelectedKeys=function(e){var t,i=[];e=this.validateProperty("selectedKeys",e);e.forEach(function(e){var t=this.getItemByKey(e);if(t){this.addSelectedItem(t)}else if(e!=null){i.push(e)}},this);if(i.length>0){t=this.getProperty("selectedKeys").filter(function(e){return i.indexOf(e)===-1});i=t.concat(i);this.setProperty("selectedKeys",i,true)}return this};F.prototype._getUnselectedItems=function(){var e=jQuery(v.getSelectableItems(this.getItems())).not(this.getSelectedItems()).get();if(!this.isOpen()){return e.filter(function(e){return!e.isA("sap.ui.core.SeparatorItem")})}return e};F.prototype.getSelectedItems=function(){var e=[],t=this.getAssociation("selectedItems")||[];t.forEach(function(t){var i=P.byId(t);if(i){e.push(i)}},this);return e};F.prototype.getWidth=function(){return this.getProperty("width")||"100%"};F.prototype._updatePopoverBasedOnEditMode=function(e){var t=this._getList(),i=this._getSuggestionsPopover();if(t&&e!==this._bPrevEditable&&e){i.addContent(t)}this._bPrevEditable=e};F.prototype._mapItemToListItem=function(e){var t,i,n,o=this.getRenderer();if(!e){return null}t=v.createListItemFromCoreItem(e,this.getShowSecondaryValues());this._decorateListItem(t);if(e.isA("sap.ui.core.SeparatorItem")){return t}i=o.CSS_CLASS_MULTICOMBOBOX+"Item";n=this.isItemSelected(e)?i+"Selected":"";t.addStyleClass(i+" "+n);if(n){var r=new s({key:e.getKey()});r.setText(e.getText());e.data(v.CSS_CLASS+"Token",r);this.getAggregation("tokenizer").addToken(r,true)}this.setSelectable(e,e.getEnabled());return t};F.prototype.setSelectable=function(e,i){t.prototype.setSelectable.call(this,e,i);var s=b(e);if(s){s.setVisible(i)}};F.prototype._fillList=function(){var e=this._getList();var t=this.getEditable()?this.getItems():this.getSelectedItems();if(!e){return}e.destroyItems();if(!this._oListItemEnterEventDelegate){this._oListItemEnterEventDelegate={onsapenter:function(e){if(e.srcControl.isSelected()){e.setMarked()}}}}for(var i=0,s,n=t.length;i<n;i++){s=this._mapItemToListItem(t[i]);s.addDelegate(this._oListItemEnterEventDelegate,true,this,true);if(s.isA("sap.m.GroupHeaderListItem")){this._getList().addItemGroup(null,s)}else{this._getList().addItem(s)}if(this.isItemSelected(t[i])){this._getList().setSelectedItem(s,true)}}};F.prototype.handleInputValidation=function(e,t){var i=e.target.value,s=this.isValueValid(i),n,o,r;var a=e.srcControl;if(!s&&i!==""&&!t){this._handleFieldValidationState(a);return}r=this._getItemsStartingWith(i,true);if(!t||this._bIsPasteEvent){this._handleTypeAhead(i,r,a)}n=this.getItems();if(this.isPickerDialog()){o=this.getFilterSelectedButton();if(o!=null&&o.getPressed()){o.setPressed(false)}}_(this.getItems(),this.filterItems({value:i,items:n}));this.manageSelectAllCheckBoxState();this._sOldInput=i;if((!this.getValue()||!s)&&!this.bOpenedByKeyboardOrButton&&!this.isPickerDialog()){this.close()}else{this.open()}};F.prototype.isValueValid=function(e){var t=this._getItemsStartingWith(e,true);var i=this._getItemsStartingWithPerTerm(e,true);return t.length||i.length};F.prototype._handleTypeAhead=function(e,t,i){var s,n;if(!this._bDoTypeAhead){return}s=this.getSelectedItems();n=t.filter(function(e){return s.indexOf(e)===-1});y(e,i,n)};F.prototype._handleFieldValidationState=function(e){if(this._sOldInput&&this.isValueValid(this._sOldInput)){e.updateDomValue(this._sOldInput)}else if(this._sOldValue&&this.isValueValid(this._sOldValue)){e.updateDomValue(this._sOldValue)}else{e.updateDomValue("");e.setProperty("effectiveShowClearIcon",false)}if(this._iOldCursorPos){jQuery(e.getFocusDomRef()).cursorPos(this._iOldCursorPos)}this._showWrongValueVisualEffect()};F.prototype.init=function(){t.prototype.init.apply(this,arguments);this._bInitialSelectedKeysSettersCompleted=false;this._bListItemNavigationInvalidated=false;this._iInitialItemFocus=-1;this._bCheckBoxClicked=true;this._bPreventValueRemove=false;this._oTokenizer=this._createTokenizer();this.setAggregation("tokenizer",this._oTokenizer);this._aInitiallySelectedItems=[];this._oRbC=P.getLibraryResourceBundle("sap.ui.core");this._fillList()};F.prototype.handleItemRemoval=function(e){this.removeSelection({item:e,id:e?e.getId():"",key:e?e.getKey():"",fireChangeEvent:false,suppressInvalidate:true,listItemUpdated:true})};F.prototype.isItemSelected=function(e){return this.getSelectedItems().indexOf(e)>-1};F.prototype._clearTokenizer=function(){this.getAggregation("tokenizer").destroyTokens()};F.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._deregisterResizeHandler();if(this._oTokenizer){this._oTokenizer.destroy();this._oTokenizer=null}this._oRbC=null;this._oListItemEnterEventDelegate=null;this.oValueStateNavDelegate=null;this._sInitialValueState=null};F.prototype.destroyItems=function(){this.setProperty("selectedKeys",[]);this._clearTokenizer();return this.destroyAggregation("items")};F.prototype._getItemByToken=function(e){return v.getItemBy(this.getItems(),e,"Token")};F.prototype._getItemByValue=function(e){var t=v.getSelectableItems(this.getItems());for(var i=0;i<t.length;i++){if(t[i].getText().toLowerCase()===e.toLowerCase()){return t[i]}}};F.prototype._handleItemToFocus=function(){if(this.isOpen()){return}this.syncPickerContent();var e,t,i=P.byId(document.activeElement.id),s=this.getSelectedItems(),n=v.getSelectableItems(this.getItems()),o=this._getList(),r=o&&o.getItemNavigation(),a=this.getValue(),l=this.getPicker();if(i&&i.isA("sap.m.Token")){t=this._getItemByToken(i)}else if(a){t=this._getItemByValue(a)}if(!t){t=s.length?v.getItemByListItem(this.getItems(),this._getList().getSelectedItems()[0]):n[0]}e=v.getVisibleItems(this.getItems()).indexOf(t);if(r){r.setSelectedIndex(e)}else{this._bListItemNavigationInvalidated=true;this._iInitialItemFocus=e}if(!t){l.setInitialFocus(this)}else{l.setInitialFocus(o)}};F.prototype.getAccessibilityInfo=function(){var e=this.getSelectedItems().map(function(e){return e.getText()}).join(" ");var i=t.prototype.getAccessibilityInfo.apply(this,arguments);i.type=P.getLibraryResourceBundle("sap.m").getText("ACC_CTR_TYPE_MULTICOMBO");i.description=(this.getValueDescriptionInfo()+" "+e).trim();return i};F.prototype.getValueDescriptionInfo=function(){if(this.getValue()){return this.getValue()}return this._hasTokens()?"":sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("INPUTBASE_VALUE_EMPTY")};F.prototype._setIsClick=function(e){this._bIsClick=e};F.prototype._getIsClick=function(){return this._bIsClick};F.prototype._calculateSpaceForTokenizer=function(){if(this.getDomRef()){var e,t=this.getDomRef().getBoundingClientRect().width,i=this._calculateIconsSpace(),s=this.$().find(".sapMInputBaseInner"),n=["min-width","padding-right","padding-left"],o=n.reduce(function(e,t){return e+(parseInt(s.css(t))||0)},0);e=t-(i+o);e=e<0?0:e;return e+"px"}else{return null}};F.prototype._syncInputWidth=function(e){var t=this.getDomRef("inner"),i,s;if(!t||e&&!e.getDomRef()){return}s=parseFloat(e.getDomRef().getBoundingClientRect().width.toFixed(2));i=this._calculateIconsSpace();t.style.width="calc(100% - "+parseFloat(i+s)+"px)"};F.prototype._handleNMoreAccessibility=function(){var e=V.getStaticId("sap.m","MULTICOMBOBOX_OPEN_NMORE_POPOVER"),t=this.getAggregation("tokenizer"),i=this.getFocusDomRef(),s=i&&i.getAttribute("aria-describedby"),n=s?s.split(" "):[],o=n.indexOf(e),r=this.getEnabled(),a=!this.getEditable()&&t&&t.getHiddenTokensCount();if(a&&o===-1){n.push(e);r&&this.getFocusDomRef().setAttribute("aria-keyshortcuts","Enter")}else if(o!==-1&&!a){n.splice(o,1);this.getFocusDomRef().removeAttribute("aria-keyshortcuts")}if(i&&n.length){i.setAttribute("aria-describedby",n.join(" ").trim())}};F.prototype.applyShowItemsFilters=function(){this.syncPickerContent();_(this.getItems(),this.filterItems({value:this.getValue()||"_",items:this.getItems()}));this.manageSelectAllCheckBoxState()};F.prototype.showItems=function(e){var i=true,s=this.fnFilter;if(typeof e==="function"){this.syncPickerContent();this.setFilterFunction(e||function(){return true});i=this.filterItems({value:this.getValue()||"_",items:this.getItems()}).items.length>0;this.setFilterFunction(s)}if(i){t.prototype.showItems.apply(this,arguments)}};F.prototype.createSelectAllHeaderToolbar=function(e){e=e||this._getList();if(!e||e.getHeaderToolbar()){return}var t=new o({select:function(e){var t=e.getSource(),i=v.getSelectableItems(this.getItems()),s=this._getSelectedItemsOf(i);if(e.getParameter("selected")){var n=i.filter(function(e){return s.indexOf(e)===-1});n.forEach(function(e){this.setSelection({item:e,items:n,selectAll:true,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:false})},this)}else{s.forEach(function(e){this.removeSelection({item:e,items:s,selectAll:true,id:e.getId(),key:e.getKey(),fireChangeEvent:true,suppressInvalidate:true,listItemUpdated:false})},this)}t.focus()}.bind(this)});t.addEventDelegate(this._selectAllDelegate(),this);e.setHeaderToolbar(new r({content:t}).addStyleClass("sapMMultiComboBoxSelectAll")).setSticky(["HeaderToolbar"]);this.attachSelectionChange(this.manageSelectAllCheckBoxState.bind(this))};F.prototype.manageSelectAllCheckBoxState=function(){var e=this.getSelectAllCheckbox();if(!e){return}var t=this.getItems(),i=this.getSelectedItems(),s=v.getSelectableItems(t).filter(function(e){return i.indexOf(e)>-1}).length===v.getSelectableItems(t).length;e.setText(this._oRb.getText("MULTICOMBOBOX_SELECT_ALL_CHECKBOX",[i.length,v.getAllSelectableItems(t).length])).setSelected(s)};F.prototype.getSelectAllToolbar=function(){var e=this._getList();return e&&e.getHeaderToolbar()};F.prototype.getSelectAllCheckbox=function(){var e=this.getSelectAllToolbar();return e&&e.getContent()[0]};F.prototype._selectAllDelegate=function(){return{onsapdown:this.handleDownEvent,onsapup:function(e){e.preventDefault();if(this.getValueState()!==D.None){this._handleFormattedTextNav();return}this.getFocusDomRef().focus()},onsaphome:this.handleHomeEvent,onsapend:this.handleEndEvent,onfocusin:function(){var e=this.getRenderer(),t=this.getSelectAllToolbar();t&&t.addStyleClass(e.CSS_CLASS_MULTICOMBOBOX+"SelectAllFocused")},onfocusout:function(){var e=this.getRenderer(),t=this.getSelectAllToolbar();t&&t.removeStyleClass(e.CSS_CLASS_MULTICOMBOBOX+"SelectAllFocused")},onsapshow:this.close,onsaphide:this.close}};F.prototype.focusSelectAll=function(){var e=this.getSelectAllCheckbox();e&&e.focus()};F.prototype.toggleSelectAllVisibility=function(e){var t=this.getSelectAllToolbar();if(t){t.setVisible(e);return}e&&this.createSelectAllHeaderToolbar()};F.prototype.handleClearIconPress=function(){if(!(this.getEnabled()&&this.getEditable())){return}if(this.getValue()!==""){this.setValue("");this._sOldInput="";this.bOpenedByKeyboardOrButton?this.clearFilter():this.close();this.setProperty("effectiveShowClearIcon",false)}};return F});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/MultiComboBoxRenderer", ["./ComboBoxBaseRenderer","./ComboBoxTextFieldRenderer","sap/ui/core/Renderer","sap/ui/core/Core"],function(e,t,r,i){"use strict";var n=r.extend(e);n.apiVersion=2;n.CSS_CLASS_MULTICOMBOBOX="sapMMultiComboBox";n.addOuterClasses=function(t,r){e.addOuterClasses.apply(this,arguments);t.class(n.CSS_CLASS_MULTICOMBOBOX);if(r.getProperty("hasSelection")){t.class("sapMMultiComboBoxHasToken")}};n.getAriaDescribedBy=function(e){var r=t.getAriaDescribedBy.apply(this,arguments),i=e.getAggregation("tokenizer"),n=i&&i.getTokensInfoId();return(r||"")+" "+n};n.getAccessibilityState=function(t){var r=e.getAccessibilityState.apply(this,arguments),n=i.getLibraryResourceBundle("sap.m");r.roledescription=n.getText("MULTICOMBOBOX_ARIA_ROLE_DESCRIPTION");return r};n.prependInnerContent=function(e,t){e.renderControl(t.getAggregation("tokenizer"))};return n},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/SplitApp", ["./SplitContainer","./library","sap/ui/Device","./SplitAppRenderer","sap/ui/util/Mobile","sap/ui/thirdparty/jquery"],function(e,t,i,n,o,jQuery){"use strict";var r=e.extend("sap.m.SplitApp",{metadata:{library:"sap.m",properties:{homeIcon:{type:"any",group:"Misc",defaultValue:null}},events:{orientationChange:{deprecated:true,parameters:{landscape:{type:"boolean"}}}},designtime:"sap/m/designtime/SplitApp.designtime"},renderer:n});r.prototype.init=function(){if(e.prototype.init){e.prototype.init.apply(this,arguments)}this.addStyleClass("sapMSplitApp");o.init({viewport:!this._debugZoomAndScroll,statusBar:"default",hideBrowser:true,preventScroll:!this._debugZoomAndScroll,rootId:this.getId()})};r.prototype.onBeforeRendering=function(){if(e.prototype.onBeforeRendering){e.prototype.onBeforeRendering.apply(this,arguments)}o.init({homeIcon:this.getHomeIcon()})};r.prototype.onAfterRendering=function(){if(e.prototype.onAfterRendering){e.prototype.onAfterRendering.apply(this,arguments)}var t=this.getDomRef().parentNode;while(t&&t!==document.documentElement){var i=jQuery(t);if(i.attr("data-sap-ui-root-content")){break}if(!t.style.height){t.style.height="100%"}t=t.parentNode}};r.prototype._onOrientationChange=function(){this.fireOrientationChange({landscape:i.orientation.landscape})};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/SplitAppRenderer", ["./SplitContainerRenderer","sap/ui/core/Renderer","sap/m/library"],function(e,r,n){"use strict";var a=n.BackgroundHelper;var t=r.extend(e);t.apiVersion=2;t.renderAttributes=function(e,r){a.addBackgroundColorStyles(e,r.getBackgroundColor(),r.getBackgroundImage())};t.renderBeforeContent=function(e,r){a.renderBackgroundImageTag(e,r,"sapMSplitContainerBG",r.getBackgroundImage(),r.getBackgroundRepeat(),r.getBackgroundOpacity())};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Token", ["./library","sap/ui/core/Control","sap/ui/core/library","sap/ui/core/Icon","./TokenRenderer","sap/ui/events/KeyCodes","sap/ui/core/Core"],function(e,t,i,r,o,n,a){"use strict";var s=i.TextDirection;var p=t.extend("sap.m.Token",{metadata:{library:"sap.m",properties:{selected:{type:"boolean",group:"Misc",defaultValue:false},key:{type:"string",group:"Misc",defaultValue:""},text:{type:"string",group:"Misc",defaultValue:""},editable:{type:"boolean",group:"Misc",defaultValue:true},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:s.Inherit},editableParent:{type:"boolean",group:"Behavior",defaultValue:true,visibility:"hidden"},truncated:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"},posinset:{type:"int",visibility:"hidden"},setsize:{type:"int",visibility:"hidden"}},aggregations:{deleteIcon:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{delete:{enableEventBubbling:true},press:{},select:{},deselect:{}}},renderer:o});p.prototype.init=function(){var e=new r({id:this.getId()+"-icon",src:"sap-icon://decline",noTabStop:true,press:this._fireDeleteToken.bind(this)});e.addStyleClass("sapMTokenIcon");e.setUseIconTooltip(false);this.setAggregation("deleteIcon",e)};p.prototype.ontouchstart=function(e){if(e.target.id===this.getId()+"-icon"){e.preventDefault()}};p.prototype._getTooltip=function(e,t){var i=e.getTooltip_AsString(),r=a.getLibraryResourceBundle("sap.m").getText("TOKEN_ARIA_DELETABLE");if(t&&!i){return r}return i};p.prototype._onTokenPress=function(e){var t=this.getSelected(),i=e.ctrlKey||e.metaKey,r=true;if(i||e.which===n.SPACE){r=!t}this.setSelected(r);this.firePress();if(t!==r){if(r){this.fireSelect()}else{this.fireDeselect()}}if(this.getSelected()){this.focus()}};p.prototype.ontap=function(e){var t=this.getAggregation("deleteIcon");if(t&&e.target.id===t.getId()){e.setMark("tokenDeletePress",true);return}e.setMark("tokenTap",this);this._onTokenPress(e)};p.prototype._fireDeleteToken=function(e,t,i){if(this.getEditable()&&this.getProperty("editableParent")){this.fireDelete({token:this,byKeyboard:t,backspace:i})}e.preventDefault()};p.prototype.onsapspace=function(e){this._onTokenPress(e);if(e){e.preventDefault();e.stopPropagation()}};p.prototype.onkeydown=function(e){if((e.ctrlKey||e.metaKey)&&e.which===n.SPACE){this.onsapspace(e);e.preventDefault()}};p.prototype.getTruncated=function(){return this.getProperty("truncated")};p.prototype.setTruncated=function(e){return this.setProperty("truncated",e)};return p});
/*!

* OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.

*/
sap.ui.predefine("sap/m/TokenRenderer", ["sap/ui/core/library","sap/ui/core/InvisibleText"],function(e,t){"use strict";var r=e.TextDirection;var i={apiVersion:2};i.render=function(e,r){var a=r._getTooltip(r,r.getEditable()&&r.getProperty("editableParent"));var n=r.getAggregation("deleteIcon");var s=[];var o={role:"option"};var d=r.getProperty("posinset");var p=r.getProperty("setsize");e.openStart("div",r).class("sapMToken");this._setAttributes(e,r);if(r.getSelected()){e.class("sapMTokenSelected")}if(d!==undefined){e.attr("aria-posinset",r.getProperty("posinset"))}if(p!==undefined){e.attr("aria-setsize",r.getProperty("setsize"))}if(!r.getEditable()){e.class("sapMTokenReadOnly")}if(r.getTruncated()){e.class("sapMTokenTruncated")}if(a){e.attr("title",a)}s.push(t.getStaticId("sap.m","TOKEN_ARIA_LABEL"));if(r.getEditable()&&r.getProperty("editableParent")){s.push(t.getStaticId("sap.m","TOKEN_ARIA_DELETABLE"))}e.attr("aria-selected",r.getSelected());o.describedby={value:s.join(" "),append:true};e.accessibilityState(r,o);e.openEnd();i._renderInnerControl(e,r);if(r.getEditable()&&n){e.renderControl(n)}e.close("div")};i._renderInnerControl=function(e,t){var i=t.getTextDirection();e.openStart("span").class("sapMTokenText");if(i!==r.Inherit){e.attr("dir",i.toLowerCase())}e.openEnd();var a=t.getText();if(a){e.text(a)}e.close("span")};i._setAttributes=function(e,t){e.attr("tabindex","-1")};return i},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/Tokenizer", ["./library","sap/m/Button","sap/m/List","sap/m/StandardListItem","sap/m/ResponsivePopover","sap/ui/core/Core","sap/ui/core/Control","sap/ui/core/delegate/ScrollEnablement","sap/ui/Device","sap/ui/core/InvisibleText","sap/ui/core/ResizeHandler","./TokenizerRenderer","sap/ui/dom/containsOrEquals","sap/ui/events/KeyCodes","sap/base/Log","sap/ui/core/EnabledPropagator","sap/ui/core/theming/Parameters","sap/ui/thirdparty/jquery","sap/ui/dom/jquery/control","sap/ui/dom/jquery/scrollLeftRTL"],function(e,t,o,i,n,s,r,a,l,d,p,h,u,c,f,g,T,jQuery,k){"use strict";var _="sapUiNoContentPadding";var y=e.TokenizerRenderMode;var m=e.PlacementType;var v=e.ListMode;var S=e.ButtonType;var R=r.extend("sap.m.Tokenizer",{metadata:{library:"sap.m",properties:{editable:{type:"boolean",group:"Misc",defaultValue:true},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},maxWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},renderMode:{type:"string",group:"Misc",defaultValue:y.Loose},hiddenTokensCount:{type:"int",group:"Misc",defaultValue:0,visibility:"hidden"}},defaultAggregation:"tokens",aggregations:{tokens:{type:"sap.m.Token",multiple:true,singularName:"token"},_tokensInfo:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{tokenChange:{deprecated:true,parameters:{type:{type:"string"},token:{type:"sap.m.Token"},tokens:{type:"sap.m.Token[]"},addedTokens:{type:"sap.m.Token[]"},removedTokens:{type:"sap.m.Token[]"}}},tokenUpdate:{deprecated:true,allowPreventDefault:true,parameters:{type:{type:"string"},addedTokens:{type:"sap.m.Token[]"},removedTokens:{type:"sap.m.Token[]"}}},tokenDelete:{parameters:{tokens:{type:"sap.m.Token[]"},keyCode:{type:"number"}}}}},renderer:h});var b=s.getLibraryResourceBundle("sap.m");g.apply(R.prototype,[true]);R.prototype.init=function(){this.allowTextSelection(false);this._oTokensWidthMap={};this._oIndicator=null;this._oScroller=new a(this,this.getId()+"-scrollContainer",{horizontal:true,vertical:false,nonTouchScrolling:true});this._fFontSizeRatio=1;if(s.getConfiguration().getAccessibility()){var e=new d({text:b.getText("TOKENIZER_ARIA_NO_TOKENS")});this.setAggregation("_tokensInfo",e)}this.attachEvent("delete",function(e){var t=e.getSource();var o=this.getSelectedTokens();this.fireTokenChange({type:R.TokenChangeType.Removed,token:t,tokens:o.length?o:[t],addedTokens:[],removedTokens:o.length?o:[t]});this.fireTokenUpdate({type:R.TokenChangeType.Removed,addedTokens:[],removedTokens:o.length?o:[t]});this.fireEvent("tokenDelete",{tokens:[t]})},this)};R.prototype._handleNMoreIndicatorPress=function(){this._togglePopup(this.getTokensPopup())};R.prototype._getTokensList=function(){if(!this._oTokensList){this._oTokensList=new o({width:"auto",mode:v.Delete}).attachDelete(this._handleListItemDelete,this)}return this._oTokensList};R.prototype._setPopoverMode=function(e){var t={},o=this.getTokensPopup();switch(e){case v.Delete:t={showArrow:false,placement:m.VerticalPreferredBottom};break;default:t={showArrow:true,placement:m.Auto};break}o.setShowArrow(t.showArrow);o.setPlacement(t.placement);this._getTokensList().setMode(e)};R.prototype._fillTokensList=function(e,t){e.destroyItems();t=t?t:function(){return true};this.getTokens().filter(t).forEach(function(t){e.addItem(this._mapTokenToListItem(t))},this)};R.prototype._handleListItemDelete=function(e){var t=e.getParameter("listItem");var o=t&&t.data("tokenId");var i;i=this.getTokens().filter(function(e){return e.getId()===o&&e.getEditable()})[0];if(i){this.fireTokenUpdate({addedTokens:[],removedTokens:[i],type:R.TokenUpdateType.Removed});this.fireTokenDelete({tokens:[i]});this._adjustTokensVisibility()}};R.prototype.getTokensPopup=function(){if(this._oPopup){return this._oPopup}this._oPopup=new n({showArrow:false,showHeader:l.system.phone,placement:m.Auto,offsetX:0,offsetY:3,horizontalScrolling:false,title:this._getDialogTitle(),content:this._getTokensList()}).attachBeforeOpen(function(){var e=this.getEditable()?120:32,t=this._oPopup,o=function(){var e=this.getDomRef()&&this.getDomRef().parentElement;var t="Cozy";if(!e){return t}if(e.closest(".sapUiSizeCompact")!==null||document.body.classList.contains("sapUiSizeCompact")){t="Compact"}return t}.bind(this),i=new Promise(function(e){T.get({name:["_sap_m_Tokenizer_FontSizeRatio"+o()],callback:function(t){var o=parseFloat(t);if(isNaN(o)){e(this._fFontSizeRatio);return}e(o)}.bind(this)})}.bind(this));if(t.getContent&&!t.getContent().length){t.addContent(this._getTokensList())}this._fillTokensList(this._getTokensList());e+=Object.keys(this._oTokensWidthMap).map(function(e){return this._oTokensWidthMap[e]},this).sort(function(e,t){return e-t}).pop()||0;i.then(function(o){e+=Math.ceil(e*(1-o));t.setContentWidth(e+"px")})},this);this.addDependent(this._oPopup);this._oPopup.addStyleClass(_);this._oPopup.addStyleClass("sapMTokenizerTokensPopup");if(l.system.phone){this._oPopup.setEndButton(new t({text:b.getText("SUGGESTIONSPOPOVER_CLOSE_BUTTON"),type:S.Emphasized,press:function(){this._oPopup.close()}.bind(this)}))}return this._oPopup};R.prototype._getDialogTitle=function(){var e=s.getLibraryResourceBundle("sap.m");var t=this.getAriaLabelledBy().map(function(e){return s.byId(e)});return t.length?t[0].getText():e.getText("COMBOBOX_PICKER_TITLE")};R.prototype._togglePopup=function(e){var t,o=this.getDomRef(),i=e.isOpen(),n=this.getEditable();this._setPopoverMode(n?v.Delete:v.None);if(i){e.close()}else{t=n||this.hasOneTruncatedToken()?o:this._oIndicator[0];t=t&&t.className.indexOf("sapUiHidden")===-1?t:o;e.openBy(t||o)}};R.prototype._mapTokenToListItem=function(e){if(!e){return null}var t=new i({selected:true}).data("tokenId",e.getId());t.setTitle(e.getText());return t};R.prototype._getPixelWidth=function(){var e=this.getMaxWidth(),t,o=this.getDomRef(),i;if(!o){return}i=parseInt(this.$().css("padding-left"));if(e.indexOf("px")===-1){t=o.clientWidth}else{t=parseInt(this.getMaxWidth())}return t-i};R.prototype._adjustTokensVisibility=function(){if(!this.getDomRef()){return}var e=this._getPixelWidth(),t=this._getVisibleTokens().reverse(),o=t.length,i,n,s,r=-1;t.some(function(t,o){e=e-this._oTokensWidthMap[t.getId()];if(e<0){r=o;return true}else{n=e}},this);if(o===1&&r!==-1){this.setFirstTokenTruncated(true);return}else if(o===1&&t[0].getTruncated()){this.setFirstTokenTruncated(false)}if(r>-1){for(s=0;s<o;s++){if(s>=r){t[s].addStyleClass("sapMHiddenToken")}else{t[s].removeStyleClass("sapMHiddenToken")}}this._handleNMoreIndicator(o-r);i=this._oIndicator.width();if(i>=n){r=r-1;this._handleNMoreIndicator(o-r);t[r].addStyleClass("sapMHiddenToken")}this._setHiddenTokensCount(o-r)}else{this._setHiddenTokensCount(0);this._showAllTokens()}};R.prototype.setFirstTokenTruncated=function(e){var t=this.getTokens()[0];t&&t.setTruncated(e);if(e){this.addStyleClass("sapMTokenizerOneLongToken")}else{this.removeStyleClass("sapMTokenizerOneLongToken");this.scrollToEnd()}return this};R.prototype.hasOneTruncatedToken=function(){return this.getTokens().length===1&&this.getTokens()[0].getTruncated()};R.prototype._handleNMoreIndicator=function(e){if(!this.getDomRef()){return this}if(e){var t="MULTIINPUT_SHOW_MORE_TOKENS";if(e===this._getVisibleTokens().length){if(e===1){t="TOKENIZER_SHOW_ALL_ITEM"}else{t="TOKENIZER_SHOW_ALL_ITEMS"}}this._oIndicator.html(b.getText(t,e))}return this};R.prototype._getVisibleTokens=function(){return this.getTokens().filter(function(e){return e.getVisible()})};R.prototype._showAllTokens=function(){this._getVisibleTokens().forEach(function(e){e.removeStyleClass("sapMHiddenToken")})};R.prototype.getScrollDelegate=function(){return this._oScroller};R.prototype.scrollToEnd=function(){var e=this.getDomRef(),t=s.getConfiguration().getRTL(),o,i;if(!this.getDomRef()){return}i=this.$().find(".sapMTokenizerScrollContainer")[0];o=i.scrollWidth;if(t){o*=-1}e.scrollLeft=o};R.prototype._registerResizeHandler=function(){if(!this._sResizeHandlerId){this._sResizeHandlerId=p.register(this.getDomRef(),this._handleResize.bind(this))}};R.prototype._handleResize=function(){this._useCollapsedMode(this.getRenderMode());this.scrollToEnd()};R.prototype.setPixelWidth=function(e){if(typeof e!=="number"){f.warning("Tokenizer.setPixelWidth called with invalid parameter. Expected parameter of type number.");return}this.setWidth(e+"px");if(this._oScroller){this._oScroller.refresh()}};R.prototype.scrollToStart=function(){var e=this.getDomRef();if(!e){return}e.scrollLeft=0};R.prototype.getScrollWidth=function(){if(!this.getDomRef()){return 0}return this.$().children(".sapMTokenizerScrollContainer")[0].scrollWidth};R.prototype.onBeforeRendering=function(){var e=this.getTokens();if(e.length!==1){this.setFirstTokenTruncated(false)}e.forEach(function(t,o){t.setProperty("editableParent",this.getEditable()&&this.getEnabled(),true);t.setProperty("posinset",o+1,true);t.setProperty("setsize",e.length,true)},this);this._setTokensAria()};R.prototype.onAfterRendering=function(){var e=this.getRenderMode();this._oIndicator=this.$().find(".sapMTokenizerIndicator");if(s.isThemeApplied()){this._storeTokensSizes()}this._useCollapsedMode(e);this._registerResizeHandler();if(e===y.Loose){this.scrollToEnd()}};R.prototype.onThemeChanged=function(){this._storeTokensSizes();this._useCollapsedMode(this.getRenderMode())};R.prototype._storeTokensSizes=function(){var e=this.getTokens();e.forEach(function(e){if(e.getDomRef()&&!e.$().hasClass("sapMHiddenToken")&&!e.getTruncated()){this._oTokensWidthMap[e.getId()]=e.$().outerWidth(true)}},this)};R.prototype._useCollapsedMode=function(e){var t=this._getVisibleTokens();if(!t.length){this._setHiddenTokensCount(0);return}if(e===y.Narrow){this._adjustTokensVisibility()}else{this._setHiddenTokensCount(0);this._showAllTokens()}};R.prototype.onsapfocusleave=function(e){if(document.activeElement===this.getDomRef()||!this._checkFocus()){this._changeAllTokensSelection(false);this._oSelectionOrigin=null}};R.prototype.onsapbackspace=function(e){var t=this.getSelectedTokens();var o=this.getTokens().filter(function(e){return e.getFocusDomRef()===document.activeElement})[0];var i=t.length?t:[o];e.preventDefault();return this.fireTokenDelete({tokens:i,keyCode:e.which})};R.prototype.onsapdelete=R.prototype.onsapbackspace;R.prototype.onkeydown=function(e){var t;if(!this.getEnabled()){return}if(e.which===c.TAB){this._changeAllTokensSelection(false)}if((e.ctrlKey||e.metaKey)&&e.which===c.A){t=this.getSelectedTokens().length<this._getVisibleTokens().length;if(this._getVisibleTokens().length>0){this.focus();this._changeAllTokensSelection(t);e.preventDefault();e.stopPropagation()}}if((e.ctrlKey||e.metaKey)&&(e.which===c.C||e.which===c.INSERT)){this._copy()}if((e.ctrlKey||e.metaKey)&&e.which===c.X||e.shiftKey&&e.which===c.DELETE){if(this.getEditable()){this._cut()}else{this._copy()}}};R.prototype._shouldPreventModifier=function(e){var t=l.os.macintosh&&e.metaKey;var o=l.os.windows&&e.altKey;return t||o};R.prototype.onsappreviousmodifiers=function(e){if(!this._shouldPreventModifier(e)){this.onsapprevious(e)}};R.prototype.onsapnextmodifiers=function(e){if(!this._shouldPreventModifier(e)){this.onsapnext(e)}};R.prototype.onsaphomemodifiers=function(e){this._selectRange(false)};R.prototype.onsapendmodifiers=function(e){this._selectRange(true)};R.prototype._selectRange=function(e){var t={},o=this._getVisibleTokens(),i=jQuery(document.activeElement).control()[0],n=o.indexOf(i);if(!i||!i.isA("sap.m.Token")){return}if(e){t.start=n;t.end=o.length-1}else{t.start=0;t.end=n}if(t.start<t.end){for(var s=t.start;s<=t.end;s++){o[s].setSelected(true)}}};R.prototype._copy=function(){this._fillClipboard("copy")};R.prototype._fillClipboard=function(e){var t=this.getSelectedTokens();var o=t.map(function(e){return e.getText()}).join("\r\n");var i=function(e){if(e.clipboardData){e.clipboardData.setData("text/plain",o)}else{e.originalEvent.clipboardData.setData("text/plain",o)}e.preventDefault()};document.addEventListener(e,i);document.execCommand(e);document.removeEventListener(e,i)};R.prototype._cut=function(){var e=this.getSelectedTokens();this._fillClipboard("cut");this.fireTokenChange({type:R.TokenChangeType.Removed,token:e,tokens:e,addedTokens:[],removedTokens:e});this.fireTokenUpdate({type:R.TokenChangeType.Removed,addedTokens:[],removedTokens:e});this.fireTokenDelete({tokens:e})};R.prototype._ensureTokenVisible=function(e){if(!e||!e.getDomRef()||!this.getDomRef()){return}var t=this.$().offset().left,o=this.$().width(),i=e.$().offset().left,n=s.getConfiguration().getRTL(),r=n?parseInt(e.$().css("margin-left")):parseInt(e.$().css("margin-right")),a=parseInt(e.$().css("border-left-width"))+parseInt(e.$().css("border-right-width")),l=e.$().width()+r+a,d=n?this.$().scrollLeftRTL():this.$().scrollLeft(),p=d-t+i,h=d+(i-t+l-o);if(this._getVisibleTokens().indexOf(e)===0){this.$().scrollLeft(0);return}if(i<t){n?this.$().scrollLeftRTL(p):this.$().scrollLeft(p)}if(i-t+l>o){n?this.$().scrollLeftRTL(h):this.$().scrollLeft(h)}};R.prototype.ontap=function(e){var t=e.shiftKey,o=e.ctrlKey||e.metaKey,i=e.getMark("tokenTap"),n=e.getMark("tokenDeletePress"),s=this._getVisibleTokens(),r,a,l,d,p;if(n||!i||!t&&o){this._oSelectionOrigin=null;return}if(!t){this._oSelectionOrigin=i;this._changeAllTokensSelection(false,i,true)}r=i;if(this._oSelectionOrigin){r=this._oSelectionOrigin}else{this._oSelectionOrigin=r}if(i&&this.hasOneTruncatedToken()){this._handleNMoreIndicatorPress();return}a=this.indexOfToken(r);l=this.indexOfToken(i);d=Math.min(a,l);p=Math.max(a,l);s.forEach(function(e,t){if(t>=d&&t<=p){e.setSelected(true)}else if(!o){e.setSelected(false)}})};R.prototype.onsapprevious=function(e){var t=this._getVisibleTokens(),o=t.length;if(o===0){return}var i=jQuery(document.activeElement).control()[0];var n=i?t.indexOf(i):-1;if(n===0){e.setMarked("forwardFocusToParent");return}var s,r;if(n>0){s=t[n-1];this._ensureTokenVisible(s);s.focus()}else{s=t[t.length-1];this._ensureTokenVisible(s);s.focus({preventScroll:true})}if(e.shiftKey){r=t[n];s.setSelected(true);r.setSelected(true)}e.setMarked();e.preventDefault()};R.prototype.onsapnext=function(e){var t=this._getVisibleTokens(),o=t.length;if(o===0){return}var i=jQuery(document.activeElement).control()[0];var n=i?t.indexOf(i):-1;var s=t[n+1];this._ensureTokenVisible(s);if(n<o-1){var r=t[n];s.focus();if(e.shiftKey){s.setSelected(true);r.setSelected(true)}}else{e.setMarked("forwardFocusToParent");return}e.setMarked();e.preventDefault()};R.prototype.addValidator=function(e){f.warning("[Warning]:","You are attempting to use deprecated method 'addValidator()', please use MultiInput.prototype.addValidator instead.",this)};R.prototype.removeValidator=function(e){f.warning("[Warning]:","You are attempting to use deprecated method 'addValidator()', please use MultiInput.prototype.addValidator instead.",this)};R.prototype.removeAllValidators=function(){f.warning("[Warning]:","You are attempting to use deprecated method 'addValidator()', please use MultiInput.prototype.addValidator instead.",this)};R.prototype.addValidateToken=function(e){f.warning("[Warning]:","You are attempting to use deprecated method 'addValidator()', please use MultiInput.prototype.addValidator instead.",this)};R.prototype._parseString=function(e){return e.split(/\r\n|\r|\n/g)};R.prototype._checkFocus=function(){return this.getDomRef()&&u(this.getDomRef(),document.activeElement)};R.prototype.selectAllTokens=function(e){if(e===undefined){e=true}this._changeAllTokensSelection(e);return this};R.prototype._changeAllTokensSelection=function(e,t,o){var i=this._getVisibleTokens();i.filter(function(e){return e!==t}).forEach(function(t){t.setSelected(e)});if(!o){this._doSelect()}return this};R.prototype.getSelectedTokens=function(){return this._getVisibleTokens().filter(function(e){return e.getSelected()})};R.prototype.onsaphome=function(e){var t=this.getTokens().filter(function(e){return e.getDomRef()&&!e.getDomRef().classList.contains("sapMHiddenToken")});t.length&&t[0].focus();this.scrollToStart();e.preventDefault()};R.prototype.onsapend=function(e){var t=this._getVisibleTokens(),o=t[t.length-1];if(o.getDomRef()!==document.activeElement){o.focus();this.scrollToEnd();e.stopPropagation()}else{e.setMarked("forwardFocusToParent")}e.preventDefault()};R.prototype.onclick=function(e){var t;if(!this.getEnabled()){return}t=!this.hasStyleClass("sapMTokenizerIndicatorDisabled")&&e.target.classList.contains("sapMTokenizerIndicator");if(t){this._handleNMoreIndicatorPress()}};R.prototype.ontouchstart=function(e){e.setMarked();if(l.browser.chrome&&window.getSelection()){window.getSelection().removeAllRanges()}};R.prototype.exit=function(){this._deregisterResizeHandler();if(this._oTokensList){this._oTokensList.destroy();this._oTokensList=null}if(this._oScroller){this._oScroller.destroy();this._oScroller=null}if(this._oPopup){this._oPopup.destroy();this._oPopup=null}this._oTokensWidthMap=null;this._oIndicator=null;this._aTokenValidators=null};R.prototype._deregisterResizeHandler=function(){if(this._sResizeHandlerId){p.deregister(this._sResizeHandlerId);delete this._sResizeHandlerId}};R.prototype._setTokensAria=function(){var e=this._getVisibleTokens().length;var t;var o="";var i="";var n={0:"TOKENIZER_ARIA_NO_TOKENS",1:"TOKENIZER_ARIA_CONTAIN_ONE_TOKEN"};if(s.getConfiguration().getAccessibility()){t=this.getAggregation("_tokensInfo");i=n[e]?n[e]:"TOKENIZER_ARIA_CONTAIN_SEVERAL_TOKENS";o=b.getText(i,e);t.setText(o)}};R.prototype._doSelect=function(){if(this._checkFocus()&&this._bCopyToClipboardSupport){var e=document.activeElement;var t=window.getSelection();t.removeAllRanges();if(this.getSelectedTokens().length){var o=document.createRange();o.selectNodeContents(this.getDomRef("clip"));t.addRange(o)}if(window.clipboardData&&e.id===this.getId()+"-clip"&&this.getDomRef()){this.getDomRef().focus()}}};R.prototype._setHiddenTokensCount=function(e){e=this.validateProperty("hiddenTokensCount",e);return this.setProperty("hiddenTokensCount",e)};R.prototype.getHiddenTokensCount=function(){return this.getProperty("hiddenTokensCount")};R.prototype.getTokensInfoId=function(){return this.getAggregation("_tokensInfo").getId()};R.prototype._handleBackspace=function(e,t){var o=this.getTokens();if(o[e-1]){return o[e-1].focus()}return t()};R.prototype._handleDelete=function(e,t){var o=this.getTokens();if(o[e+1]){return o[e+1].focus()}return t()};R.prototype.focusToken=function(e,t,o){var i=this.getTokens();var n=t.keyCode;var s=t.keyCode===c.BACKSPACE;if(i.length===0){return}if(!n){return}if(s){return this._handleBackspace(e,o)}return this._handleDelete(e,o)};R.TokenChangeType={Added:"added",Removed:"removed",RemovedAll:"removedAll",TokensChanged:"tokensChanged"};R.TokenUpdateType={Added:"added",Removed:"removed"};return R});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/TokenizerRenderer", ["sap/ui/Device","sap/ui/core/InvisibleText"],function(e,n){"use strict";var t={apiVersion:2};t.render=function(t,i){if(i.getParent()&&i.getParent().isA(["sap.m.MultiInput","sap.m.MultiComboBox"])){t.openStart("div",i)}else{t.openStart("div",i);this._renderTabIndex(t,i)}t.class("sapMTokenizer");if(!i.getEditable()){t.class("sapMTokenizerReadonly")}if(!i.getEnabled()){t.class("sapMTokenizerDisabled")}var a=i.getTokens();if(!a.length){t.class("sapMTokenizerEmpty");t.attr("aria-hidden","true")}t.style("max-width",i.getMaxWidth());var o=i.getWidth();if(o){t.style("width",o)}var r={role:"listbox"};r.labelledby={value:n.getStaticId("sap.m","TOKENIZER_ARIA_LABEL"),append:true};t.accessibilityState(i,r);t.openEnd();t.renderControl(i.getAggregation("_tokensInfo"));i._bCopyToClipboardSupport=false;if((e.system.desktop||e.system.combi)&&a.length){t.openStart("div",i.getId()+"-clip").class("sapMTokenizerClip");if(window.clipboardData){t.attr("contenteditable","true");t.attr("tabindex","-1")}t.openEnd();t.unsafeHtml("&nbsp");t.close("div");i._bCopyToClipboardSupport=true}t.openStart("div",i.getId()+"-scrollContainer");t.class("sapMTokenizerScrollContainer");if(i.getHiddenTokensCount()===i.getTokens().length){t.class("sapMTokenizerScrollContainerNoVisibleTokens")}t.openEnd();this._renderTokens(t,i);t.close("div");this._renderIndicator(t,i);t.close("div")};t._renderTokens=function(e,n){var t=0,i=n.getTokens(),a=i.length;for(t=0;t<a;t++){e.renderControl(i[t])}};t._renderIndicator=function(e,n){e.openStart("span");e.class("sapMTokenizerIndicator");this._renderIndicatorTabIndex(e,n);if(n.getHiddenTokensCount()===0){e.class("sapUiHidden")}e.openEnd().close("span")};t._renderTabIndex=function(e,n){e.attr("tabindex","0")};t._renderIndicatorTabIndex=function(e,n){};return t},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/inputUtils/completeTextSelected", [],function(){"use strict";var e=function(e){var t=e&&e.value&&e.value.length;if(!e||!t||e.selectionStart!==0||e.selectionEnd!==t){return false}return true};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/inputUtils/forwardItemProperties", ["sap/m/inputUtils/ListHelpers"],function(e){"use strict";var t=function(t,i){var a=t.item;var r=a.data(e.CSS_CLASS+"ListItem");var s;var l;var p;var n={text:"title",enabled:"visible",tooltip:"tooltip"};var o=t.propName;var v=t.propValue;if(!r){return}if(a.isA("sap.ui.core.Item")&&o==="enabled"){a._bSelectable=!!v}if(n[o]){l=n[o];p="set"+l.charAt(0).toUpperCase()+l.slice(1);r[p](v)}if(o==="additionalText"){s=i?v:"";r.setInfo(s)}};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/inputUtils/forwardItemPropertiesToToken", ["sap/m/inputUtils/ListHelpers","sap/m/inputUtils/getTokenByItem"],function(e,t){"use strict";var r=function(e){var r=e.item;var i=e.propName;var a=e.propValue;var s=t(r);if(!s){return}if(i==="enabled"){s.setVisible(a)}else if(s.getMetadata().hasProperty(i)){s.setProperty(i,a)}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/inputUtils/getTokenByItem", ["sap/m/inputUtils/ListHelpers"],function(n){"use strict";var t=function(t){return t?t.data(n.CSS_CLASS+"Token"):null};return t});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/m/inputUtils/itemsVisibilityHandler", ["sap/m/inputUtils/ListHelpers"],function(i){"use strict";return function(e,t){var s,r,n;if(!Array.isArray(e)||!e.length){return}t=t||{};s=t.items||[];r=t.groups||[];e.forEach(function(e){n=i.getListItem(e);if(!e.isA("sap.ui.core.SeparatorItem")&&n){n.setVisible(s.indexOf(e)!==-1)}});r.forEach(function(e){n=i.getListItem(e.header);n&&n.setVisible(e.visible)})}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/dom/denormalizeScrollLeftRTL", ["sap/ui/util/_FeatureDetection"],function(i){"use strict";var t;if(i.initialScrollPositionIsZero()){t=function(i,t){return t.clientWidth+i-t.scrollWidth}}else{t=function(i,t){return i}}var n=function(i,n){if(n){return t(i,n)}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/dom/jquery/scrollLeftRTL", ["sap/ui/dom/denormalizeScrollLeftRTL","sap/ui/util/_FeatureDetection","sap/ui/thirdparty/jquery"],function(t,e,jQuery){"use strict";var i;if(e.initialScrollPositionIsZero()){i=function(t){return t.scrollWidth+t.scrollLeft-t.clientWidth}}else{i=function(t){return t.scrollLeft}}var r=function(e){var r=this.get(0);if(r){if(e===undefined){return i(r)}else{r.scrollLeft=t(e,r);return this}}};jQuery.fn.scrollLeftRTL=r;return jQuery});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Layout", ["sap/ushell/Config","sap/ui/Device","sap/ui/thirdparty/jquery"],function(t,e,jQuery){"use strict";var i=function(t){this.init(t)};i.prototype={settings:null,tileWidth:0,tileHeight:0,tileMargin:0,curTouchMatrixCords:null,tilesInRow:null,groupsList:null,item:null,matrix:null,tiles:null,collisionLeft:false,startGroup:null,currentGroup:null,endGroup:null,init:function(t){this.curTouchMatrixCords={column:null,row:null};this.endGroup=null;this.groupSwitched=false;this.item=null;this.matrix=null;this.tiles=null;this.collisionLeft=false;this.startArea=null;this.currentArea=null;this.endArea=undefined;this.startGroup=null;this.draggedTileDomRef=null;this.sDragStartGroupModelId=undefined;this.sDragTargetGroupModelId=undefined;this.currentGroup=null;this.groupsList=null;this.allGroups=null;this.settings=this.settings||t;jQuery.extend(this,this.settings);this.tileWidth=this.thisLayout.styleInfo.tileWidth;this.tileHeight=this.thisLayout.styleInfo.tileHeight;this.tileMargin=this.thisLayout.styleInfo.tileMarginWidth;this.aExcludedControlClass=this.aExcludedControlClass||[];this.reorderElementsCallback=this.reorderElementsCallback||function(){};this.rightToLeft=sap.ui.getCore().getConfiguration().getRTL();this.tabBarArrowCollisionRight=false;this.tabBarArrowCollisionLeft=false;this.collidedLinkAreas=[];this.intersectedLink=null;this.aLinksBoundingRects=[];this.intersectedLinkPlaceHolder=undefined;this.isLinkPersonalizationSupported=this.thisLayout.oLaunchPageService?this.thisLayout.oLaunchPageService.isLinkPersonalizationSupported():null;this.isLinkMarkerShown=false;this.bIsTabBarCollision=false},moveDraggable:function(t,e,i){var r=this.getCollisionObject(t,e,i),s;if(r){this._toggleAnchorItemHighlighting(false);if(r.collidedObjectType!=="TabBar"){this._toggleTabBarOverflowArrows(false);this.thisLayout.setOnTabBarElement(false);this._resetOverFlowButtonElements();this.bIsTabBarCollision=false}else{this.bIsTabBarCollision=true;this._toggleTabBarOverflowArrows(true);this.removePlaceHolders();this._handleTabBarCollision(t,i)}if(this.isLinkPersonalizationSupported&&r.collidedObjectType==="Group-link"){s=this._handleLinkAreaIntersection(r.collidedObject,t,e)}else if(r.collidedObjectType==="Group-tile"){s=this._handleTileAreaIntersection(r.collidedObject,t,e);this._toggleTileCloneHoverOpacity(false)}if(s||this.endAreaChanged){this.handlePlaceHolder(r.collidedObject)}}else{this._removeEmptyLinkAreaMark()}},_toggleAnchorItemHighlighting:function(t){if(this.targetGroup){this.targetGroup.classList.toggle("sapUshellAnchorItemDropCollision",t);this.targetGroup.firstElementChild.classList.toggle("sapUshellAnchorInnerMarker",t)}},removePlaceHolders:function(){this._removeLinkDropMarker();this._removeEmptyLinkAreaMark();this._handleChangedGroup(this.currentGroup)},handlePlaceHolder:function(t){if(this.endArea==="tiles"){if(this.endAreaChanged){this._removeLinkDropMarker()}this.handlePlaceholderChange()}else if(this.endArea==="links"&&this.intersectedLink){this._changeLinkPlaceholder(this.intersectedLink,t);if(this.endAreaChanged){this.handlePlaceholderChange()}}},switchLinkWithClone:function(t){if(t){this.intersectedLinkPlaceHolder=t.getDomRef().cloneNode(true);this.intersectedLinkPlaceHolder.id="sapUshellIntersectedLinkPlaceHolder";jQuery(t.getDomRef()).replaceWith(this.intersectedLinkPlaceHolder)}},_removeLinkDropMarker:function(){jQuery("#sapUshellLinkDropMarker").remove();this.isLinkMarkerShown=false},saveLinkBoundingRects:function(t){var e=sap.ui.getCore().byId(t.id);this.draggedLinkBoundingRects=e.getBoundingRects()},_getMarkerOffset:function(t,e){var i=jQuery(e.getDomRef()).find(".sapUshellLineModeContainer")[0].getBoundingClientRect().left,r=jQuery(e.getDomRef()).find(".sapUshellLineModeContainer")[0].getBoundingClientRect().top,s=this.rightToLeft?20:-1,n=this.rightToLeft?42:21,o=t[t.length-1].offset.x-i+t[t.length-1].width-s,a=t[this.rightToLeft?t.length-1:0].offset.x-i-n,l=t[this.rightToLeft?t.length-1:0].offset.y-r,h=t[this.rightToLeft?0:t.length-1].offset.y-r;if(jQuery("body.sapUiSizeCompact").length){l-=6;h-=6}if(this.rightToLeft){if(jQuery(e.getDomRef()).find(".sapUshellLineModeContainer")[0].getBoundingClientRect().right-t[t.length-1].offset.x-t[t.length-1].width<16){o=o-8}}else if(a<16){a=0}return{right:o,left:a,topLeft:l,topRight:h}},_changeLinkPlaceholder:function(t,e){var i=this.aLinksBoundingRects[t.link.getId()],r=i.left,s=i.topLeft,n=i.topRight,o=i.right;if(jQuery(e.getDomRef()).find("#sapUshellLinkDropMarker").length===0){this._removeLinkDropMarker();jQuery(e.getDomRef()).find(".sapUshellLinksInnerContainer").prepend(this.LinkDropMarker)}jQuery(this.LinkDropMarker).css({left:t.leftSide?r:o,top:t.leftSide?s:n});this.isLinkMarkerShown=true},showTilePlaceholder:function(t,e,i){var r,s=this.curTouchMatrixCords.row,n=this.curTouchMatrixCords.column;this.domRef=this.item.getDomRef()?this.item.getDomRef():this.domRef;jQuery(this.domRef).show();this.removeExcludedElementsFromMatrix(this.aExcludedControlClass);r=this.tiles||this.thisLayout.getGroupTiles(this.endGroup).slice(0);if(this.matrix[s]&&typeof this.matrix[s][n]==="object"){this.handleMatrixCollision(r,t,e,i);return}this._handleMoveOutOfBorders(r,t)},removeTilePlaceholder:function(){this.domRef=this.item.getDomRef()?this.item.getDomRef():this.domRef;var t=this.thisLayout.getGroupTiles(this.currentGroup);t=t.slice(0);if(this.startArea!=="links"&&t.indexOf(this.item)>-1){t.splice(t.indexOf(this.item),1)}if(!jQuery(this.domRef.parentNode).hasClass("sapUshellLinksInnerContainer")){jQuery(this.domRef).hide()}this.thisLayout.initGroupDragMode(this.endGroup);var e=this.thisLayout.organizeGroup(t);this.thisLayout.renderLayoutGroup(this.currentGroup,e)},handlePlaceholderChange:function(){var t=this.currentGroup,e=this.endGroup!==this.currentGroup,i=this.endAreaChanged&&this.endArea==="links",r=this.thisLayout.isTabBarActive()&&this.groupSwitched;this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);this.matrix=this.thisLayout.organizeGroup(this.tiles);if(r){this.handleTabBarSwitch(t)}if(e){this._handleChangedGroup(t)}else if(i){this.removeTilePlaceholder()}if(!i){this.showTilePlaceholder(t,e,i)}},handleMatrixCollision:function(t,e,i,r){var s,n,o,a;s=this.matrix[this.curTouchMatrixCords.row][this.curTouchMatrixCords.column];n=t.indexOf(s);o=t.indexOf(this.item);if(this.rightToLeft){this.collisionLeft=!this.collisionLeft}if(o>-1&&o<n){s=t[n+1]}if(s===this.item){if(i||r){t.splice(t.indexOf(this.item),1)}this._handleTileReplace(t,e);return}a=this.changeTilesOrder(this.item,s,t,this.matrix);if(a&&!this.isLinkMarkerShown){this._handleTileReplace(a,e)}},handleTabBarSwitch:function(t){this._appendTargetGroupDomRefWithDraggedTile();if(!this.item.getDomRef()){this.endGroup.getInnerContainersDomRefs()[0].appendChild(this.draggedTileDomRef)}else{this.endGroup.getInnerContainersDomRefs()[0].appendChild(this.item.getDomRef())}this.currentGroup=this.endGroup;var e=this.thisLayout.getGroupTiles(t);this.thisLayout.initGroupDragMode(this.endGroup);var i=this.thisLayout.organizeGroup(e);this.thisLayout.renderLayoutGroup(t,i)},_handleMoveOutOfBorders:function(t,e){var i=this.findTileToPlaceAfter(this.matrix,t),r;if(t[i+1]==this.item){return}if(t[i+1]){r=t[i+1]}else if(this.currentGroup.getShowPlaceholder()){r=t[0]}var s=this.changeTilesOrder(this.item,r,t,this.matrix);if(s){this._handleTileReplace(s,e)}},_handleChangedGroup:function(t){var e=this.thisLayout.getGroupTiles(this.currentGroup),i;if(this.currentGroup===this.startGroup&&(this.startArea==="tiles"||this.intersectedLinkPlaceHolder)){e=e.slice(0);if(e.indexOf(this.item)>-1){e.splice(e.indexOf(this.item),1)}}if(this.startGroup===this.endGroup&&this.startArea==="tiles"){this.tiles.splice(this.tiles.indexOf(this.item),1)}i=this.item.getDomRef()||this.domRef;if(this.startArea==="links"&&!this.intersectedLinkPlaceHolder){this.switchLinkWithClone(this.item)}if(this.endArea==="tiles"){this.endGroup.getInnerContainersDomRefs()[0].appendChild(i)}if(!jQuery(i.parentNode).hasClass("sapUshellLinksInnerContainer")){jQuery(i).hide()}this.currentGroup=this.endGroup;this.thisLayout.initGroupDragMode(this.endGroup);var r=this.thisLayout.organizeGroup(e);this.thisLayout.renderLayoutGroup(t,r)},_handleTileReplace:function(t,e){this.reorderElementsCallback({currentGroup:e,endGroup:this.endGroup,tiles:t,item:this.item});this.reorderTilesView(t,this.endGroup);this.reorderTilesInDom();this.thisLayout.renderLayoutGroup(this.endGroup,this.matrix)},_getIntersectedLink:function(t,e,i){var r=jQuery(".sapUshellLinkTile")[0];if(!r){return}var s=t.getDomRef().querySelector(".sapUshellLineModeContainer").getBoundingClientRect(),n=!jQuery("body.sapUiSizeCompact").length,o=Math.floor((i-s.top)/(n?45:31)),a=this.collidedLinkAreas[t.getId()],l;if(this.rightToLeft){l=Math.floor((s.right-e)/20)}else{l=Math.floor((e-s.left)/20)}if(o<a.length&&a[o]&&l<a[o].length){return a[o][l]}else if(a.length){var h=a.length;if(o>=h){o=h-1}if(!this.collidedLinkAreas[t.getId()][o]){return}l=this.collidedLinkAreas[t.getId()][o].length;return this.collidedLinkAreas[t.getId()][o][l-1]}},_mapGroupLinks:function(t){var e=t.getId(),i,r,s=0;if(!this.collidedLinkAreas[e]||this.bElapseGroupLinksMap){this.bElapseGroupLinksMap=false;var n=t.getLinks(),o=[];this.collidedLinkAreas.push(t.getId());n.forEach(function(e){r=this._getLinkBoundingRects(e,t);r.forEach(function(r){if(r.offset.y>i){s++}i=r.offset.y;this._addLinkToHashMap(o,t,r,s,e)}.bind(this))}.bind(this));this.collidedLinkAreas[e]=o}},_getLinkBoundingRects:function(t,e){var i=t.getBoundingRects();if(this.item&&this.item.getId()===t.getId()){i=this.draggedLinkBoundingRects}if(i.length){this.aLinksBoundingRects[t.getId()]=this._getMarkerOffset(i,e)}return i},_addLinkToHashMap:function(t,e,i,r,s){if(!t[r]){t[r]=[]}for(var n=0;n<=(i.width+20)/20;n++){var o={link:s,leftSide:!this.rightToLeft};if(n>(i.width+20)/20/2){o.leftSide=this.rightToLeft}t[r].push(o)}},_isLinkAreaIntersection:function(t,e,i){var r=t.getInnerContainersDomRefs();if(r[1]){return this._isElementCollideByGivenCordinates(r[1],e,i)}return false},_isLinksEquals:function(t,e){if(!t||!e){return false}if(t.link.getId()!==e.link.getId()){return false}return t.link.leftSide===e.link.leftSide},_toggleTileCloneHoverOpacity:function(t){jQuery(".sapUshellTile-clone").toggleClass("sapUshellTileDragOpacity",t)},_handleLinkAreaIntersection:function(t,e,i){var r,s=false;if(this.isLinkPersonalizationSupported){this._toggleTileCloneHoverOpacity(true)}this._mapGroupLinks(t);this.matrix=this.matrix||this.thisLayout.organizeGroup(this.thisLayout.getGroupTiles(t));r=this._getIntersectedLink(t,e,i);if(r){s=this._isLinksEquals(this.intersectedLink,r);this.intersectedLink=r}else{this.removeTilePlaceholder()}this._markEmptyLinkArea(t);return s},_markEmptyLinkArea:function(t){if(!t.getLinks().length){jQuery(t.getDomRef()).find(".sapUshellLineModeContainer").addClass("sapUshellEmptyLinkAreaHover")}},_removeEmptyLinkAreaMark:function(){jQuery(".sapUshellLineModeContainer").removeClass("sapUshellEmptyLinkAreaHover")},reorderTilesInDom:function(){var t=this.item.getDomRef()?this.item.getDomRef():this.domRef,e=jQuery(t).index(),i=jQuery(t).closest(".sapUshellTilesContainer-sortable"),r=this.calcDestIndexInGroup(),s=jQuery(this.endGroup.getDomRef()).find(".sapUshellTilesContainer-sortable"),n=s.find(".sapUshellTile");if(this.startArea==="tiles"){i.find(n[e]).remove()}else if(!this.intersectedLinkPlaceHolder){this.switchLinkWithClone(this.item)}if(this.endArea!=="links"){n=s.find(".sapUshellTile");s[0].insertBefore(t,n[r])}},isLinkIntersected:function(){return this.intersectedLink!==undefined},calcDestIndexInGroup:function(){var t,e=0,i,r,s=false;for(i=0;i<this.matrix.length&&!s;i++){for(r=0;r<this.matrix[i].length;r++){if(this.matrix[i][r]!==undefined){if(this.item.sId!==this.matrix[i][r].sId){if(t!==this.matrix[i][r].sId){t=this.matrix[i][r].sId;e++}}else{s=true;break}}}}return e},layoutStartCallback:function(t){this.init();this.item=sap.ui.getCore().byId(t.id);this.tilesInRow=this.thisLayout.getTilesInRow();this.groupsList=this.thisLayout.getGroups();this.allGroups=this.thisLayout.getAllGroups();this.startGroup=this.currentGroup=this.item.getParent();this.groupSwitched=false;this.startArea=this.isLinkPersonalizationSupported&&this.item.getMode&&this.item.getMode()==="LineMode"?"links":"tiles";this.currentArea=this.startArea;this.thisLayout.initDragMode();if(this.isLinkPersonalizationSupported){this.LinkDropMarker=this._getLinkDropMarkerElement()}},_getLinkDropMarkerElement:function(){var t=document.createElement("DIV"),e=document.createElement("DIV"),i=document.createElement("DIV");t.setAttribute("id","sapUshellLinkDropMarker");e.setAttribute("id","sapUshellLinkDropMarkerDot");i.setAttribute("id","sapUshellLinkDropMarkerLine");t.appendChild(e);t.appendChild(i);return t},isAreaChanged:function(){return this.currentArea&&this.endArea?this.currentArea!==this.endArea:false},isOriginalAreaChanged:function(){return this.startArea&&this.endArea?this.startArea!==this.endArea:false},_getDestinationIndex:function(t){if(t==="links"){if(this.intersectedLink){var e=this.endGroup.getLinks().indexOf(this.intersectedLink.link),i=this.endGroup.getLinks().indexOf(this.item);if(this.intersectedLink.leftSide){e=this.rightToLeft?e+1:e-1}if(i<0||i>e){e=this.rightToLeft?e:e+1}return e}return this.endGroup.getLinks().length}return this._getDestinationTileIndex()},layoutEndCallback:function(){var t,e,i;this._removeLinkDropMarker();if(this.endArea!=="links"&&!this.tiles){return{tile:this.item}}e=this._getDragSourceGroup();if(!s.isTabBarActive()||!this.bIsTabBarCollision){this.targetGroup=""}i=this._getDestGroupObject(this.targetGroup);t={srcGroup:e,dstGroup:i,dstGroupData:this._getDropTargetGroup(),tile:this.item,dstTileIndex:this._getDestinationIndex(this.endArea),tileMovedFlag:true,srcArea:this.startArea,dstArea:this.bIsTabBarCollision?undefined:this.endArea};return t},_getDestGroupObject:function(t){return t?sap.ui.getCore().byId(t.getAttribute("id")):this.endGroup},_getDragSourceGroup:function(){var t;t=this.startGroup;if(this.thisLayout.isTabBarActive()&&this.groupSwitched===true){t={groupId:this.sDragStartGroupModelId}}return t},_getDropTargetGroup:function(){var t;if(this.thisLayout.isTabBarActive()&&this.thisLayout.isOnTabBarElement()){t={groupId:this.sDragTargetGroupModelId}}else{t=this.endGroup}return t},_getDestinationTileIndex:function(){var t,e;if(this.thisLayout.isTabBarActive()&&this.thisLayout.isOnTabBarElement()){t=this._getDropTargetGroup().groupId;e=this._getModelGroupById(t);return e.tiles.length}return this.tiles.indexOf(this.item)},compareArrays:function(t,e){if(t.length!==e.length){return false}for(var i=0;i<t.length;i++){if(t[i]!==e[i]){return false}}return true},reorderTilesView:function(t){this.tiles=t;this.matrix=this.thisLayout.organizeGroup(t)},changeTilesOrder:function(t,e,i,r){var s=i.slice(0),n=s.indexOf(t),o,a,l;if(n>-1){s.splice(n,1)}if(e){s.splice(s.indexOf(e),0,this.item)}else{s.push(t)}if(this.currentGroup==this.endGroup){if(this.compareArrays(i,s)){return false}o=this.thisLayout.organizeGroup(s);a=this.thisLayout.getTilePositionInMatrix(t,r);l=this.thisLayout.getTilePositionInMatrix(t,o);if(a.row==l.row&&a.col==l.col){return false}}this.tiles=s;this.currentGroup=this.endGroup;return s},setMatrix:function(t){this.matrix=t},findTileToPlaceAfter:function(t,e){var i=this.thisLayout.rightToLeft?0:this.curTouchMatrixCords.column,r=this.thisLayout.rightToLeft?1:-1,s=0,n,o,a,l=t[0].length;for(n=this.curTouchMatrixCords.row;n>=0;n--){for(o=i;o>=0&&o<l;o+=r){if(!t[n]||typeof t[n][o]!=="object"){continue}a=e.indexOf(t[n][o]);s=a>s?a:s}i=t[0].length-1}return s||e.length-1},_isElementCollideByGivenCordinates:function(t,e,i){var r=t.getBoundingClientRect(),s=false,n=false;if(r.height===0&&!t.classList.contains("sapUshellNoLinksAreaPresent")){r=t.parentNode.getBoundingClientRect()}s=r.right>=e&&r.left<=e;n=r.bottom>=i&&r.top<=i;return s&&n},_getMatrixCordinatesOfTouchedTile:function(t,e,i){var r=jQuery.extend({},this.curTouchMatrixCords),s=t.getInnerContainersDomRefs()[0].getBoundingClientRect();this.matrix=this.matrix||this.thisLayout.organizeGroup(this.thisLayout.getGroupTiles(t));var n=this.rightToLeft?s.right+-1*e:s.left*-1+e,o=(s.top*-1+i)/(this.tileHeight+this.tileMargin),a=n/(this.tileWidth+this.tileMargin);r={row:Math.floor(o),column:Math.floor(a)};return r},_getCollidedGroup:function(t,e){for(var i=0;i<this.groupsList.length;i++){var r=this.groupsList[i],s=r.getInnerContainersDomRefs();if(!s){continue}for(var n=0;n<s.length;n++){if(s[n]&&this._isElementCollideByGivenCordinates(s[n],t,e)){var o=!r.groupHasTiles();for(var a=this.groupsList.length-1;a>=i;a--){if(o){break}if(!this.groupsList[a].groupHasTiles()){var l=this.groupsList[a].$();if(!l.hasClass("sapUshellInDragMode")){continue}l.find(".sapUshellInner").removeAttr("style")}}return r}}}},_handleTileAreaIntersection:function(t,e,i){var r=this._getMatrixCordinatesOfTouchedTile(t,e,i);if(t===this.endGroup&&r.column===this.curTouchMatrixCords.column&&r.row===this.curTouchMatrixCords.row){return false}if(this.rightToLeft){this.collisionLeft=this.curTouchMatrixCords.column-r.column>0}else{this.collisionLeft=r.column-this.curTouchMatrixCords.column>0}if(r.column===this.curTouchMatrixCords.column){this.collisionLeft=false}jQuery.extend(this.curTouchMatrixCords,r);return true},_getGroupCollisionObject:function(t,e){var i,r;i=this._getCollidedGroup(t,e);if(!i||i.getIsGroupLocked()){return undefined}r=this._isLinkAreaIntersection(i,t,e);this.endGroup=i;if(!this.tiles){this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0)}this.endArea=r?"links":"tiles";this.endAreaChanged=this.isAreaChanged();this.currentArea=this.endArea;return{collidedObjectType:r?"Group-link":"Group-tile",collidedObject:i}},getCollisionObject:function(t,e){if(this.thisLayout.oTabBarItemClickTimer){clearTimeout(this.thisLayout.oTabBarItemClickTimer)}if(this.thisLayout.isTabBarActive()&&this._isTabBarCollision(e)){return{collidedObjectType:"TabBar"}}return this._getGroupCollisionObject(t,e)},_isTabBarScrollArea:function(t){var e=jQuery("#anchorNavigationBar").height()||0,i=jQuery("#anchorNavigationBar").offset(),r=i?i.top:0,s=e+r;return e>0&&t>s&&t<s+30},_cancelLongDropTimmer:function(){clearTimeout(this.thisLayout.oTabBarItemClickTimer)},_isTabBarCollision:function(t){var e=jQuery("#anchorNavigationBar").height()||0,i=jQuery("#anchorNavigationBar").offset(),r=i?i.top:0;return t<e+r&&t>r},_handleTabBarCollision:function(t,e){var i=this,r=this._getTabBarHoverItem(t,e),n,o,a,l,h;if(s.isTabBarActive()){this._toggleTileCloneHoverOpacity(true)}this.lastHighlitedTabItem=r;this.thisLayout.setOnTabBarElement(true);a=this._handleOverflowCollision(t);if(a){return}if(!r){return}this.targetGroup=r;this.sDragTargetGroupModelId=r.getAttribute("modelGroupId");n=this._getTabBarGroupIndexByModelId(this.sDragTargetGroupModelId);if(this.thisLayout.oTabBarItemClickTimer){clearTimeout(this.thisLayout.oTabBarItemClickTimer)}h=this._getModelGroupById(this._getDropTargetGroup().groupId);if(h.isGroupLocked){this._toggleTabBarOverflowArrows(false);this.thisLayout.setOnTabBarElement(false);this._resetOverFlowButtonElements();return}this._toggleAnchorItemHighlighting(true);if(!this.sDragStartGroupModelId){this.sDragStartGroupModelId=this.startGroup.getGroupId()}this.thisLayout.oTabBarItemClickTimer=setTimeout(function(){var t=i._getSelectedTabBarItem();if(i.lastHighlitedTabItem===t){return}i.draggedTileModelPath=i.item.getBindingContext().getPath();i._prepareDomForDragAndDrop();i.startGroup.removeAggregation("tiles",i.item,true);l=i.sDragStartGroupModelId===i.sDragTargetGroupModelId;i.item.getBindingContext().oModel.setProperty(i.draggedTileModelPath+"/draggedInTabBarToSourceGroup",l);i.groupSwitched=true;sap.ui.getCore().getEventBus().publish("launchpad","switchTabBarItem",{iGroupIndex:n});var e=i.thisLayout.getGroups();i.endGroup=e[0];i.bElapseGroupLinksMap=true},800);if(this.tiles===null&&this.endGroup){this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0)}o=jQuery(".sapUshellTabBarHoverOn");o.removeClass("sapUshellTabBarHoverOn");r.classList.add("sapUshellTabBarHoverOn");return true},_prepareDomForDragAndDrop:function(){if(e.system.tablet){var t=this.item.$().clone();var i=this.item.$();var r=i.parent();this.origItemId=i.attr("id");this.origItemDataSapUi=i.attr("data-sap-ui");i.removeAttr("id").removeAttr("data-sap-ui");i.hide();t.hide();jQuery("#dashboardGroups").parent().append(i);r.append(t);this.draggedTileDomRef=i.get(0)}else if(!this.draggedTileDomRef){this.draggedTileDomRef=this.item.getDomRef()}},_appendTargetGroupDomRefWithDraggedTile:function(){var t=this.endGroup.getInnerContainerDomRefs()?this.endGroup.getInnerContainerDomRefs()[0]:null;if(!this.item.getDomRef()){if(e.system.tablet){jQuery(this.draggedTileDomRef).attr("id",this.origItemId);jQuery(this.draggedTileDomRef).attr("data-sap-ui",this.origItemDataSapUi);jQuery(this.draggedTileDomRef).show()}if(t){t.appendChild(this.draggedTileDomRef)}}else{if(t){t.appendChild(this.item.getDomRef())}if(e.system.tablet){jQuery(this.item.getDomRef()).show()}}},_getSelectedTabBarItem:function(){return jQuery(".sapUshellAnchorItemSelected")[0]},_getTabBarGroupIndexByModelId:function(t){var e,i;for(e=0;e<this.allGroups.length;e++){i=this.allGroups[e].groupId;if(t===i){return e}}},_getModelGroupById:function(t){var e=this.thisLayout.getAllGroups(),i,r,s;for(i=0;i<e.length;i++){r=e[i];s=r.groupId;if(s===t){return r}}},_handleOverflowCollision:function(t){var e=sap.ui.getCore().byId("anchorNavigationBar"),i=this._calculateOverflowButtonSideCollision(t);if(i=="right"){if(!this.tabBarArrowCollisionRight){e._scrollToGroupByGroupIndex(e.anchorItems.length-1,5e3);this.tabBarArrowCollisionRight=true}return true}else if(i=="left"){if(!this.tabBarArrowCollisionLeft){e._scrollToGroupByGroupIndex(0,5e3);this.tabBarArrowCollisionLeft=true}return true}this._resetOverFlowButtonElements();return false},_calculateOverflowButtonSideCollision:function(t){var e=jQuery(".sapUshellAnchorRightOverFlowButton"),i=e.offset().left,r=jQuery(".sapUshellAnchorItemOverFlow"),s=r.offset().left,n=jQuery(".sapUshellAnchorLeftOverFlowButton"),o=n.offset().left,a=32,l=jQuery("#anchorNavigationBar"),h=l.offset().left;if(t>i&&t<s){return"right"}if(t>h&&t<o+a){return"left"}},_resetOverFlowButtonElements:function(){var t=e.system.tablet,i=jQuery(t?".sapUshellAnchorNavigationBarItemsScroll":".sapUshellAnchorNavigationBarItems");i.stop();this.tabBarArrowCollisionRight=false;this.tabBarArrowCollisionLeft=false},_toggleTabBarOverflowArrows:function(t){var e=jQuery(".sapUshellAnchorRightOverFlowButton"),i=jQuery(".sapUshellAnchorLeftOverFlowButton");i.toggleClass("sapUshellTabBarOverflowButton",t);e.toggleClass("sapUshellTabBarOverflowButton",t)},_getTabBarHoverItem:function(t,e){var i,r,s,n,o;r=jQuery(".sapUshellAnchorItem:not(.sapUshellShellHidden)").eq(0).offset().left;if(t-r<=0){return}i=Math.round((t-r)/10);if(i>=e.length){i=e.length-1}s=e[i];n=jQuery(".sapUshellAnchorItem");o=n[s];return o},removeExcludedElementsFromMatrix:function(t){if(!t.length){return}if(!this.matrix){return}var e=this.matrix.map(function(e){return e.map(function(e){var i=t.some(function(t){return e instanceof t});return i?undefined:e})});this.setMatrix(e)},setExcludedControl:function(t){if(t){this.aExcludedControlClass.push(t)}},setReorderTilesCallback:function(t){if(typeof t==="function"){this.reorderElementsCallback=t}}};var r=function(){};r.prototype={_initDeferred:jQuery.Deferred(),init:function(t){var e=function(){if(this.container&&this.container.id&&this.container.id.includes("destroyed")){return}var t=this.getStyleInfo(this.container);if(t.tileWidth>0){this.isInited=true;this.reRenderGroupsLayout();this.layoutEngine=new i({thisLayout:this});this._initDeferred.resolve();return}setTimeout(e,100)}.bind(this);this.cfg=t||this.cfg;this.minTilesinRow=2;this.container=this.cfg.container||document.getElementById("dashboardGroups");this.oTabBarItemClickTimer=new Date;this.bTabBarModeActive=false;this.bOnTabBarElement=false;if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(t){this.oLaunchPageService=t;e()}.bind(this))}else{e()}sap.ui.getCore().getEventBus().subscribe("launchpad","tabBarChange",this._onTabBarChange,this);return this.getInitPromise()},setOnTabBarElement:function(t){this.bOnTabBarElement=t},isOnTabBarElement:function(){return this.bOnTabBarElement},_onTabBarChange:function(t,e,i){if(i==="tabs"){this.bTabBarModeActive=true}else{this.bTabBarModeActive=false}},tabBarTileDropped:function(){if(this.oTabBarItemClickTimer){clearTimeout(this.oTabBarItemClickTimer)}},getInitPromise:function(){return this._initDeferred.promise()},getLayoutEngine:function(){return this.layoutEngine},getStyleInfo:function(e){var i=document.createElement("div"),r=e.getAttribute("id");e=r?document.getElementById(r):e;i.className="sapUshellTile";var s=t.last("/core/home/sizeBehavior");if(s==="Small"){i.classList.add("sapUshellSmall")}i.style.position="absolute";i.style.visibility="hidden";e.appendChild(i);var n=window.getComputedStyle(i);var o=window.getComputedStyle(e);var a={tileMarginHeight:parseFloat(n.marginBottom,10)+parseFloat(n.marginTop,10),tileMarginWidth:parseFloat(n.marginLeft,10)+parseFloat(n.marginRight,10),tileWidth:i.offsetWidth,tileHeight:i.offsetHeight,containerWidth:o.width?parseInt(o.width,10):e.offsetWidth};e.removeChild(i);return a},getGroups:function(){return this.cfg.getGroups()},getAllGroups:function(){return this.cfg.getAllGroups?this.cfg.getAllGroups():[]},isTabBarActive:function(){return this.cfg.isTabBarActive?this.cfg.isTabBarActive():false},getTilesInRow:function(){return this.tilesInRow},setTilesInRow:function(t){this.tilesInRow=t},checkPlaceForTile:function(t,e,i,r,s){if(typeof e[i.y]==="undefined"){e.push(new Array(e[0].length))}if(typeof e[i.y+1]==="undefined"){e.push(new Array(e[0].length))}if(typeof e[i.y][i.x]!=="undefined"){return false}var n=jQuery.extend({},i);if(s||t&&t.getLong&&!t.getLong()){return[n]}var o=[n];if(t&&t.getLong&&t.getLong()){if(i.x+1>=e[0].length||typeof e[n.y][n.x+1]!=="undefined"){return false}o.push({y:n.y,x:n.x+1})}return o},placeTile:function(t,e,i){for(var r=0;r<i.length;r++){e[i[r].y][i[r].x]=t}},getTilePositionInMatrix:function(t,e){for(var i=0;i<e.length;i++){for(var r=0;r<e[0].length;r++){if(e[i][r]===t){return{row:i,col:r}}}}return false},fillRowsInLine:function(t,e,i,r){if(!e.length){return 0}var s;for(var n=0;n<t[0].length&&e.length;n++){s=this.checkPlaceForTile(e[0],t,{x:n,y:i},r);if(s){this.placeTile(e[0],t,s);e.shift()}}},organizeGroup:function(t,e){var i=t.slice(0);var r=[];var s=0;r.push(new Array(e?Math.floor(this.tilesInRow/2):this.tilesInRow));while(i.length){this.fillRowsInLine(r,i,s,e);s++}if(this.rightToLeft){for(var n=0;n<r.length;n++){r[n].reverse()}}r=this.cleanRows(r);return r},cleanRows:function(t){var e=false;for(var i=t.length-1;i>0&&!e;i--){for(var r=0;r<t[i].length&&!e;r++){if(typeof t[i][r]==="object"){e=true}}if(!e){t.pop()}}return t},setGroupsLayout:function(t,e){if(t.getIsGroupLocked()&&e.length>0){var i=t.getDomRef().parentElement;t.getDomRef().style.width="";i.style.width="";i.style.display=""}},calcTilesInRow:function(t,e,i){var r=Math.floor(t/(e+i));r=r<this.minTilesinRow?this.minTilesinRow:r;return r},getGroupTiles:function(t){var e=t.getTiles();if(t.getShowPlaceholder()){e.push(t.oPlusTile)}return e},reRenderGroupsLayout:function(t){if(!this.isInited){return}var e=this.getStyleInfo(this.container);if(!e.tileWidth){return}this.styleInfo=e;this.tilesInRow=this.calcTilesInRow(e.containerWidth,e.tileWidth,e.tileMarginWidth);t=t||this.getGroups();for(var i=0;i<t.length;i++){if(t[i].getDomRef&&!t[i].getDomRef()){continue}var r=this.getGroupTiles(t[i]);var s=this.organizeGroup(r);this.setGroupsLayout(t[i],s)}},initDragMode:function(){this.initGroupDragMode(this.layoutEngine.currentGroup)},endDragMode:function(){var t=this.getGroups();for(var e=0;e<t.length;e++){var i=t[e].$();if(!i.hasClass("sapUshellInDragMode")){continue}i.removeClass("sapUshellInDragMode");var r=this.getGroupTiles(t[e]);for(var s=0;s<r.length;s++){r[s].$().removeAttr("style")}i.find(".sapUshellInner").removeAttr("style")}},initGroupDragMode:function(t){if(t.$().hasClass("sapUshellInDragMode")){return}var e=this.getGroupTiles(t);var i=this.organizeGroup(e);t.$().addClass("sapUshellInDragMode");this.renderLayoutGroup(t,i)},calcTranslate:function(t,e){var i=e*(this.styleInfo.tileWidth+this.styleInfo.tileMarginWidth);var r=t*(this.styleInfo.tileHeight+this.styleInfo.tileMarginHeight);if(this.layoutEngine.rightToLeft){i=-i}return{x:i,y:r}},renderLayoutGroup:function(t,e){var i;this.styleInfo=this.getStyleInfo(this.container);for(var r=0;r<e.length;r++){for(var s=0;s<e[r].length;s++){if(i===e[r][s]){continue}else{i=e[r][s]}if(typeof i==="undefined"){break}}}}};var s=new r;return s},false);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/CatalogsManager", ["sap/ui/base/Object","sap/ushell/ui/launchpad/TileState","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/ushell/components/HomepageManager","sap/ushell/resources","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/Log","sap/ushell/Config"],function(e,t,a,o,i,s,r,n,l,jQuery,g,u,c){"use strict";var h;var d=e.extend("sap.ushell.components.CatalogsManager",{metadata:{publicMethods:["createGroup","createGroupAndSaveTile","createTile","deleteCatalogTileFromGroup","notifyOnActionFailure","resetAssociationOnFailure"]},analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},_aDoableObjects:[],constructor:function(e,t){this.oLaunchPageServicePromise=sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){this.oLaunchPageService=e}.bind(this));this.oTileCatalogToGroupsMap={};this.tagsPool=[];this.iInitialLoad=100;this.oModel=t.model;var a={model:this.oModel};this.oHomepageManager=n.prototype.getInstance();if(!this.oHomepageManager){this.oHomepageManager=new n("dashboardMgr",a)}h=this.getInterface();this.registerEvents()},registerEvents:function(){var e=sap.ui.getCore().getEventBus();e.subscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects=[a.on("showCatalog").do(this.updateTilesAssociation.bind(this)),a.on("updateGroups").do(this.updateTilesAssociation.bind(this))]},unregisterEvents:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects.forEach(function(e){e.off()})},getModel:function(){return this.oModel},loadAllCatalogs:function(){var e=new jQuery.Deferred;var t=this;var a;e.resolve();a=function(){e.done(function(){var e=t.getModel().getProperty("/groups");if(e&&e.length!==0){t.updateTilesAssociation()}})};if(!this.oModel.getProperty("/catalogs")){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){if(!c.last("/core/spaces/enabled")){e=this.oHomepageManager.loadPersonalizedGroups()}}i.destroyFLPAggregationModels(this.oModel.getProperty("/catalogs"));i.destroyTileModels(this.oModel.getProperty("/catalogTiles"));this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogSearchEntity",{appBoxes:[],customTiles:[]});this.aPromises=[];g.start("FLP:DashboardManager.GetCatalogsRequest","GetCatalogsRequest","FLP");g.start("FLP:DashboardManager.getCatalogTiles","getCatalogTiles","FLP");g.pause("FLP:DashboardManager.getCatalogTiles");g.start("FLP:DashboardManager.BuildCatalogModelWithRendering","BuildCatalogModelWithRendering","FLP");g.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){e.getCatalogs().done(function(e){var t=e.slice(0,this.iInitialLoad);g.end("FLP:DashboardManager.GetCatalogsRequest");this.aPromises=t.map(this.addCatalogToModel.bind(this));Promise.all(this.aPromises).then(this.processPendingCatalogs.bind(this)).then(function(){this.aPromises=e.slice(this.iInitialLoad).map(this.addCatalogToModel.bind(this));Promise.all(this.aPromises).then(this.processPendingCatalogs.bind(this))}.bind(this)).then(this.onDoneLoadingCatalogs.bind(this,e)).then(a)}.bind(this)).fail(r.showLocalizedErrorHelper("fail_to_load_catalog_msg"))}.bind(this))}else{a()}},updateTilesAssociation:function(){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap()},mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var e=this.oModel.getProperty("/groups");var t,a,o,i,s;var r=this;e.forEach(function(e){["tiles","links"].forEach(function(n){a=e[n];if(a){for(t=0;t<a.length;++t){o=encodeURIComponent(r.oLaunchPageService.getCatalogTileId(a[t].object));i=r.oTileCatalogToGroupsMap[o]||[];s=r.oLaunchPageService.getGroupId(e.object);if(i.indexOf(s)===-1&&(typeof e.isGroupVisible==="undefined"||e.isGroupVisible)&&!e.isGroupLocked){i.push(s)}r.oTileCatalogToGroupsMap[o]=i}}})})},updateCatalogTilesToGroupsMap:function(){var e=this.getModel().getProperty("/catalogs");var t,a,o,i,s,r,n,l,g,u;if(e){for(t=0;t<e.length;t++){r=e[t].appBoxes;if(r){for(l=0;l<r.length;l++){g=r[l];a=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(g.src));i=this.oTileCatalogToGroupsMap[a];o=i||[];g.associatedGroups=o}}s=e[t].customTiles;if(s){for(n=0;n<s.length;n++){u=s[n];a=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(u.src));i=this.oTileCatalogToGroupsMap[a];o=i||[];u.associatedGroups=o}}}}this.getModel().setProperty("/catalogs",e)},addCatalogToModel:function(e){var t={title:this.oLaunchPageService.getCatalogTitle(e),id:this.oLaunchPageService.getCatalogId(e),numberTilesSupportedOnCurrectDevice:0,static:false,customTiles:[],appBoxes:[]};g.resume("FLP:DashboardManager.getCatalogTiles");return new Promise(function(a,o){this.oLaunchPageService.getCatalogTiles(e).done(function(e){g.pause("FLP:DashboardManager.getCatalogTiles");a({oCatalogEntry:e,oCatalogModel:t})}).fail(function(e){r.showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg");o(e)})}.bind(this))},getTagList:function(e){var t={};var a=0;var o=[];var i,s,r;if(this.oModel.getProperty("/tagList")&&this.oModel.getProperty("/tagList").length>0){this.tagsPool.concat(this.oModel.getProperty("/tagList"))}for(a=0;a<this.tagsPool.length;a++){s=this.tagsPool[a];if(t[s]){t[s]++}else{t[s]=1}}for(i in t){o.push({tag:i,occ:t[i]})}r=o.sort(function(e,t){return t.occ-e.occ});if(e){this.oModel.setProperty("/tagList",r.slice(0,e))}else{this.oModel.setProperty("/tagList",r)}},processPendingCatalogs:function(e){var t=this.oModel.getProperty("/catalogs");var a=sap.ui.getCore().getEventBus();var i=this.oModel.getProperty("/masterCatalogs")||[{title:r.getLocalizedText("all")}];g.end("FLP:DashboardManager.getCatalogTiles");g.resume("FLP:DashboardManager.BuildCatalogModelWithRendering");var s=e.reduce(function(e,a){return e.then(function(){var e,o;var s=a.oCatalogEntry;var r=a.oCatalogModel;var n=this.searchModelCatalogByTitle(r.title);if(n.result){o=this.oModel.getProperty("/catalogs")[n.indexOfPreviousInstanceInModel];e=false}else{e=true;o=r}var l=s.map(function(e){return this._processCatalogObjectForModel(o,e)}.bind(this));return Promise.all(l).then(function(){if(o.appBoxes.length>0||o.customTiles.length>0){if(e){t.push(r);i.push({title:r.title})}}if(this.oModel.getProperty("/enableCatalogTagFilter")===true){this.getTagList()}}.bind(this))}.bind(this))}.bind(this),Promise.resolve());return s.then(function(){this.oModel.setProperty("/masterCatalogs",i);this.oModel.setProperty("/catalogs",t);a.publish("launchpad","afterCatalogSegment");setTimeout(function(){o.setPerformanceMark("FLP-TTI-AppFinder",{bUseUniqueMark:true})},0);g.pause("FLP:DashboardManager.BuildCatalogModelWithRendering")}.bind(this))},_processCatalogObjectForModel:function(e,t){var a;if(this._getIsIntentSupported(t)){if(this._getIsAppBox(t)){a=this.createCatalogAppBoxes(t,true);e.appBoxes.push(a);return Promise.resolve()}return this.createCatalogTiles(t).then(function(t){e.customTiles.push(t);if(!this.aFnToGetTileView){this.aFnToGetTileView=[]}}.bind(this))}return Promise.resolve()},loadCustomTilesKeyWords:function(){var e;if(this.aFnToGetTileView){while(this.aFnToGetTileView.length>0){e=this.aFnToGetTileView.pop();e()}}},searchModelCatalogByTitle:function(e){var t=this.oModel.getProperty("/catalogs");var a=false;var o;var i=0;var s=false;var r;for(var n=0;n<t.length;++n){r=t[n];if(r.title===l.i18n.getText("catalogsLoading")){s=true}else if(e===r.title){o=n;i=r.numberOfTiles;a=true;break}}return{result:a,indexOfPreviousInstanceInModel:o,indexOfPreviousInstanceInPage:s?o-1:o,numOfTilesInCatalog:i}},_getCatalogTileId:function(e){var t;var a=c.last("/core/stableIDs/enabled");var o=c.last("/core/spaces/enabled");if(a&&o){t=this.oLaunchPageService.getStableCatalogTileId(e)}if(!t){t=this.oLaunchPageService.getCatalogTileId(e)}return t},createCatalogAppBoxes:function(e,t){var a=encodeURIComponent(this._getCatalogTileId(e));var o=this.oTileCatalogToGroupsMap[a]||[];var i=this.oLaunchPageService.getCatalogTileTags(e)||[];if(i.length>0){this.tagsPool=this.tagsPool.concat(i)}var s;if(e.tileResolutionResult){s=e.tileResolutionResult.navigationMode}return{id:a,associatedGroups:o,src:e,title:this.oLaunchPageService.getCatalogTilePreviewTitle(e),subtitle:this.oLaunchPageService.getCatalogTilePreviewSubtitle(e),icon:this.oLaunchPageService.getCatalogTilePreviewIcon(e),keywords:t?(this.oLaunchPageService.getCatalogTileKeywords(e)||[]).join(","):[],tags:i,navigationMode:s,url:this.oLaunchPageService.getCatalogTileTargetURL(e)}},onDoneLoadingCatalogs:function(e){var t=e.map(function(e){return new Promise(function(t,a){this.oLaunchPageService.getCatalogTiles(e).done(t).fail(a)}.bind(this))}.bind(this));Promise.all(t).then(function(t){var a;var o=true;for(a=0;a<t.length;a++){if(t[a].length!==0){o=false;break}}if(o||!e.length){this.oModel.setProperty("/catalogsNoDataText",l.i18n.getText("noCatalogs"))}}.bind(this));var a=sap.ui.getCore().getEventBus();a.publish("launchpad","catalogContentLoaded");var i=e.filter(function(e){var t=this.oLaunchPageService.getCatalogError(e);if(t){u.error("A catalog could not be loaded",t,"sap.ushell.components.CatalogsManager")}return!t}.bind(this));if(i.length!==e.length){r.showLocalizedError("partialCatalogFail")}o.handleTilesVisibility()},createCatalogTiles:function(e){var a=Promise.resolve();var o=e.getChip&&e.getChip().getBaseChipId&&e.getChip().getBaseChipId();if(o&&["X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER","X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER"].indexOf(o)===-1){a=new Promise(function(t,a){this.oLaunchPageService.getCatalogTileViewControl(e).done(t).fail(a)}.bind(this))}return a.then(function(a){var o=encodeURIComponent(this._getCatalogTileId(e));var i=this.oTileCatalogToGroupsMap[o]||[];var s=this.oLaunchPageService.getCatalogTileTags(e)||[];if(s.length>0){this.tagsPool=this.tagsPool.concat(s)}if(!a){a=new t({state:"Loading"})}var r=this.oLaunchPageService.getCatalogTilePreviewTitle(e);if(!r){r=this.oLaunchPageService.getCatalogTileTitle(e)}return{associatedGroups:i,src:e,catalog:e.title,catalogId:e.id,title:r,tags:s,keywords:(this.oLaunchPageService.getCatalogTileKeywords(e)||[]).join(","),id:o,size:this.oLaunchPageService.getCatalogTileSize(e),content:[a],isTileIntentSupported:this.oLaunchPageService.isTileIntentSupported(e),tileType:e.tileType}}.bind(this))},createGroupAndSaveTile:function(e){var t=this;var a=e.catalogTileContext;var i=e.newGroupName;var s=new jQuery.Deferred;var r={};if(o.validHash(i)&&a){this.createGroup(i).then(function(e){var o=t.createTile({catalogTileContext:a,groupContext:e});o.done(function(e){r={group:e.group,status:1,action:"addTileToNewGroup"};s.resolve(r)}).fail(function(e){r={group:e.group,status:0,action:"addTileToNewGroup"};s.resolve(r)})})}return s.promise()},createGroup:function(e){var t=this;var a=new jQuery.Deferred;if(!o.validHash(e)){return a.reject({status:0,action:"createNewGroup"})}var i=this.oLaunchPageService.addGroup(e);i.done(function(e){var o=t.oHomepageManager.addGroupToModel(e);a.resolve(o)});i.fail(function(){r.showLocalizedError("fail_to_create_group_msg");var e={status:0,action:"createNewGroup"};a.resolve(e)});return a.promise()},createTile:function(e){var t=this;var a=e.catalogTileContext;var o=e.groupContext;var i=this.oModel.getProperty(o.getPath());var n=i.groupId;var l;var g=new jQuery.Deferred;var c={};var h;h=sap.ui.getCore().getEventBus();h.publish("launchpad","addTile",{catalogTileContext:a,groupContext:o});if(!a){u.warning("CatalogsManager: Did not receive catalog tile object. Abort.",this);c={group:i,status:0,action:"add"};return Promise.resolve(c)}l=this.oLaunchPageService.addTile(a.getProperty("src"),o.getProperty("object"));l.done(function(e){var a=t.oModel.getProperty("/groups");var o=s.getModelPathOfGroup(a,n);var r=t.oLaunchPageService.getTileTitle(e);t.oHomepageManager.addTileToGroup(o,e);c={group:i,status:1,action:"add"};sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(e){e.logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.ADD_TILE,[i.title,r])});g.resolve(c)}).fail(function(){r.showLocalizedError("fail_to_add_tile_msg");c={group:i,status:0,action:"add"};g.resolve(c)});return g.promise()},deleteCatalogTileFromGroup:function(e){var t=this;var a=decodeURIComponent(e.tileId);var o=e.groupIndex;var i=this.oModel.getProperty("/groups/"+o);var s=new jQuery.Deferred;var r=[];var n=[];var l,g;["tiles","links"].forEach(function(e){i[e].forEach(function(e){var o=t.oLaunchPageService.getCatalogTileId(e.object);if(o===a){l=new jQuery.Deferred;g=t.oLaunchPageService.removeTile(i.object,e.object);g.done(function(t){return function(){n.push(e.uuid);t.resolve({status:true})}}(l));g.fail(function(e){return function(){e.resolve({status:false})}}(l));r.push(l)}})});jQuery.when.apply(jQuery,r).done(function(e){var a=r.length===n.length;t.oHomepageManager.deleteTilesFromGroup(i.groupId,n);t.updateTilesAssociation();s.resolve({group:i,status:a,action:"remove"})});return s.promise()},calculateCatalogTileIndex:function(e,t,a){var o=parseInt(e*1e5,10);o+=(t!==undefined?t:0)+a;return o},notifyOnActionFailure:function(e,t){r.showLocalizedError(e,t)},resetAssociationOnFailure:function(e,t){this.notifyOnActionFailure(e,t);this.updateTilesAssociation()},_getIsIntentSupported:function(e){return!!this.oLaunchPageService.isTileIntentSupported(e)},_getIsAppBox:function(e){var t,a;t=this.oModel.getProperty("/appFinderDisplayMode");if(t==="tiles"){a=false}else{a=!!(this.oLaunchPageService.getCatalogTileTargetURL(e)&&(this.oLaunchPageService.getCatalogTilePreviewTitle(e)||this.oLaunchPageService.getCatalogTilePreviewSubtitle(e)))}return a},destroy:function(){this.unregisterEvents()}});d.prototype.getInstance=function(){return h};return d});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/DestroyHelper", [],function(){"use strict";function t(t){var e;if(t&&t.content){for(e=0;e<t.content.length;e++){if(t.content[e].destroy){t.content[e].destroy()}}}}function e(e){var n;if(e){for(n=0;n<e.length;n++){t(e[n])}}}function n(t){if(t){e(t.tiles)}}function o(t){var e;if(t){for(e=0;e<t.length;e++){n(t[e])}}}return{destroyFLPAggregationModel:n,destroyFLPAggregationModels:o,destroyTileModel:t,destroyTileModels:e}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/GroupsHelper", [],function(){"use strict";return{getIndexOfGroup:n,getModelPathOfGroup:r};function r(r,u){var t=n(r,u);if(t<0){return null}return"/groups/"+t}function n(r,n){for(var u=0;u<r.length;u++){if(r[u].groupId===n){return u}}return-1}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/HomepageManager", ["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/Device","sap/ui/model/Filter","sap/ushell/ui/launchpad/TileState","sap/ushell/components/_HomepageManager/PagingManager","sap/ushell/components/_HomepageManager/DashboardLoadingManager","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/SelectDialog","sap/m/StandardListItem","sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter","sap/ushell/components/_HomepageManager/TransientPageOperationAdapter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/model/Context","sap/m/MessageToast","sap/base/Log","sap/ui/performance/Measurement"],function(jQuery,e,t,i,o,r,s,n,a,l,u,d,p,h,g,c,f,b,M,v,m,P,T,G,_){"use strict";var y=m.GenericTileScope;var I={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};var k=[];var w;var L=e.extend("sap.ushell.components.HomepageManager",{metadata:{publicMethods:["getModel","getDashboardView","loadPersonalizedGroups","resetGroupsOnFailure","addGroupToModel","addTileToGroup","deleteTilesFromGroup"]},analyticsConstants:I,constructor:function(e,t){if(w){if(!w.view){w.setDashboardView(t.view)}return w}this.oServiceLoadingPromise=sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){this.oPageBuilderService=e;this.oPageBuilderService.registerTileActionsProvider(this._addFLPActionsToTile.bind(this));this.oPageOperationAdapter=b.getInstance(e);this.bLinkPersonalizationSupported=this.oPageOperationAdapter.isLinkPersonalizationSupported()}.bind(this));sap.ui.getCore().attachThemeChanged(l.handleTilesVisibility);w=this;this.oModel=t.model;this.oRouter=t.router;this.oDashboardView=t.view;this.oSortableDeferred=new jQuery.Deferred;this.oSortableDeferred.resolve();this.registerEvents();this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.tileUuid=null;this.bIsGroupsModelLoading=false;this.bIsGroupsRequestPending=false;this.segmentsStore=[];this.bIsFirstSegment=true;this.bIsFirstSegmentViewLoaded=false;this.aGroupsFrame=null;this.iMinNumOfTilesForBlindLoading=this.oModel.getProperty("/optimizeTileLoadingThreshold")||100;this.bIsScrollModeAccordingKPI=false;this.oGroupNotLockedFilter=new i("isGroupLocked",v.EQ,false);this.oDashboardLoadingManager=new s("loadingManager",{oDashboardManager:this});if(this.oRouter){var o=this.oRouter.getTarget("home");o.attachDisplay(function(e){this.oDashboardView=e.getParameter("view")}.bind(this))}var r=a.last("/core/home/enableTransientMode");k.push(a.on("/core/home/enableTransientMode").do(function(e){if(r===e){return}r=e;this._changeMode(e)}.bind(this)));this.oModel.bindProperty("/tileActionModeActive").attachChange(this._changeLinksScope.bind(this));this._aRequestQueue=[];this._bRequestRunning=false;return undefined},_addRequest:function(e){this._aRequestQueue.push(e);if(!this._bRequestRunning){this._bRequestRunning=true;this._aRequestQueue.shift()()}},_checkRequestQueue:function(){if(this._aRequestQueue.length===0){this._bRequestRunning=false}else{this._aRequestQueue.shift()()}},_requestFailed:function(){this._aRequestQueue=[];this._bRequestRunning=false},isBlindLoading:function(){var e=a.last("/core/home/homePageGroupDisplay");if((e===undefined||e==="scroll")&&this.bIsScrollModeAccordingKPI){G.info("isBlindLoading reason IsScrollModeAccordingKPI and IsScrollMode: true");return true}if(this.oModel.getProperty("/tileActionModeActive")){G.info("isBlindLoading reason TileActionModeActive : true");return true}return false},createMoveActionDialog:function(e){var t=new c(e,{title:u.i18n.getText("moveTileDialog_title"),rememberSelections:false,contentWidth:"400px",contentHeight:"auto",confirm:function(t){var i=t.getParameter("selectedContexts");this.publishMoveActionEvents(i,e)}.bind(this),cancel:function(){var e=jQuery('.sapUshellTile[tabindex="0"]')[0];if(e){e.focus()}},items:{path:"/groups",template:new f({title:"{title}"})}});return t},publishMoveActionEvents:function(e,i){var o=sap.ui.getCore().getEventBus();if(e.length){var r=this.tileType==="link"?"links":"tiles",s=e[0].getObject().groupId,n={sTileId:this.tileUuid,sToItems:r,sFromItems:r,sTileType:r,toGroupId:e[0].getObject().groupId,toIndex:e[0].getObject()[this.tileType==="link"?"links":"tiles"].length,source:i};if(t.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(e){e.getInstance().then(function(e){n.callBack=e.callbackSetFocus.bind(e);o.publish("launchpad","scrollToGroup",{groupId:s});o.publish("launchpad","movetile",n)})})}else{o.publish("launchpad","scrollToGroup",{groupId:s});o.publish("launchpad","movetile",n)}}},_changeLinksScope:function(e){var t=this;if(this.bLinkPersonalizationSupported){var i=e.getSource().getValue();this.oModel.getProperty("/groups").forEach(function(e,o){if(!e.isGroupLocked){t._changeGroupLinksScope(e,i?"Actions":"Display")}})}},_changeGroupLinksScope:function(e,t){var i=this;e.links.forEach(function(e,o){i._changeLinkScope(e.content[0],t)})},_changeLinkScope:function(e,t){var i;if(e.getScope){i=e}else if(e.getContent){i=e.getContent()[0]}if(this.bLinkPersonalizationSupported&&i&&i.setScope){i.setScope(t)}},registerEvents:function(){var e=sap.ui.getCore().getEventBus();e.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);e.subscribe("launchpad","tabSelected",this.getSegmentTabContentViews,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);e.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);e.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);e.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);e.subscribe("launchpad","createGroupAt",this._createGroupAt,this);e.subscribe("launchpad","deleteGroup",this._deleteGroup,this);e.subscribe("launchpad","resetGroup",this._resetGroup,this);e.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);e.subscribe("launchpad","moveGroup",this._moveGroup,this);e.subscribe("launchpad","deleteTile",this._deleteTile,this);e.subscribe("launchpad","movetile",this._moveTile,this);e.subscribe("launchpad","sortableStart",this._sortableStart,this);e.subscribe("launchpad","sortableStop",this._sortableStop,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.subscribe("launchpad","convertTile",this._convertTile,this)},_changeMode:function(e){var t=this.getModel().getProperty("/groups");if(e){this.oPageOperationAdapter=M.getInstance();var i=this.oPageOperationAdapter.transformGroupModel(t);this.getModel().setProperty("/groups",i)}else{this.oPageOperationAdapter=b.getInstance();d.destroyFLPAggregationModels(t);this.getModel().setProperty("/groups",[]);this.loadPersonalizedGroups()}},_addFLPActionsToTile:function(e){var t=[];if(a.last("/core/shell/enablePersonalization")){var i=this.bLinkPersonalizationSupported&&this.oPageOperationAdapter.isLinkPersonalizationSupported(e);t.push(this._getMoveTileAction(e));if(i){t.push(this._getConvertTileAction(e))}}return t},getPersonalizableGroups:function(){var e=this.getModel().getProperty("/groups");return e.filter(function(e){return!e.isGroupLocked})},_getConvertTileAction:function(e){var i=sap.ui.getCore().getEventBus();var o=this.oPageOperationAdapter.getTileType(e);var r=o==="tile"?"ConvertToLink":"ConvertToTile";return{id:r,text:u.i18n.getText(r),press:function(e){var o={tile:e};if(t.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(e){e.getInstance().then(function(e){o.callBack=e.callbackSetFocus.bind(e);i.publish("launchpad","convertTile",o)})})}else{i.publish("launchpad","convertTile",o)}}}},_getMoveTileAction:function(e){var t="moveTile_action";return{id:t,text:u.i18n.getText(t),press:function(t){this.tileType=this.oPageOperationAdapter.getTileType(e);var o=this.tileType==="tile";this.tileUuid=this.getModelTileById(this.oPageOperationAdapter.getTileId(e),o?"tiles":"links").uuid;var r=t.getParent().getProperty("groupId");var s=new i("groupId",v.NE,r);var n=function(e){var t=e.getParameter("value");var o=new i("title",v.Contains,t);var r=e.getSource().getBinding("items");r.filter([o,this.oGroupNotLockedFilter,s])}.bind(this);var a=o?this.moveTileDialog:this.moveLinkDialog;if(!a){a=this.createMoveActionDialog("move"+this.tileType+"Dialog");a.setModel(this.oModel);if(o){this.moveTileDialog=a}else{this.moveLinkDialog=a}}else{a.detachSearch(a._searchHandler)}a.getBinding("items").filter([this.oGroupNotLockedFilter,s]);a.attachSearch(n);a._searchHandler=n;a.open()}.bind(this)}},_handleTileAppearanceAnimation:function(e){if(!e){return}var t=["webkit",""];function i(i,o){for(var r=0;r<t.length;r++){o=o.toLowerCase();e.attachBrowserEvent(t[r]+o,function(t){if(t.originalEvent&&t.originalEvent.animationName==="sapUshellTileEntranceAnimation"){e.removeStyleClass("sapUshellTileEntrance")}},false)}}i(e,"AnimationEnd");e.addStyleClass("sapUshellTileEntrance")},destroy:function(){var t=sap.ui.getCore().getEventBus();t.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);t.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);t.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);t.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);t.unsubscribe("launchpad","resetGroup",this._resetGroup,this);t.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);t.unsubscribe("launchpad","moveGroup",this._moveGroup,this);t.unsubscribe("launchpad","deleteTile",this._deleteTile,this);t.unsubscribe("launchpad","movetile",this._moveTile,this);t.unsubscribe("launchpad","sortableStart",this._sortableStart,this);t.unsubscribe("launchpad","sortableStop",this._sortableStop,this);t.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);sap.ui.getCore().detachThemeChanged(l.handleTilesVisibility);k.forEach(function(e){e.off()});b.destroy();M.destroy();w=undefined;e.prototype.destroy.apply(this,arguments)},_sortableStart:function(){this.oSortableDeferred=new jQuery.Deferred},_createBookmark:function(e,t,i){var o=i.group?i.group.object:"";delete i.group;function r(){sap.ushell.Container.getServiceAsync("Bookmark").then(function(e){e.addBookmark(i,o).always(this._checkRequestQueue.bind(this)).done(function(){h.showLocalizedMessage("tile_created_msg")}).fail(function(e){G.error("Failed to add bookmark",e,"sap.ushell.ui.footerbar.AddBookmarkButton");h.showLocalizedError("fail_to_add_tile_msg")})}.bind(this))}this._addRequest(r.bind(this))},_addBookmarkToModel:function(e,t,i){var o=i.tile,r,s=i.group,n,a,u,d,p;if(!i||!o){this.bIsGroupsModelDirty=true;if(!this.bGroupsModelLoadingInProcess){this._handleBookmarkModelUpdate()}return}if(!s){r=this.getModel().getProperty("/groups");for(p=0;p<r.length;p++){if(r[p].isDefaultGroup===true){s=r[p].object;break}}}a=this._getIndexOfGroupByObject(s);u=this.oModel.getProperty("/groups/"+a);n=this.oPageOperationAdapter.getPreparedTileModel(o,u.isGroupLocked);this.getTileView(n);u.tiles.push(n);u.visibilityModes=l.calcVisibilityModes(u,true);d=u.tiles.length;this._updateModelWithTileView(a,d);this.oModel.setProperty("/groups/"+a,u)},_refreshGroupInModel:function(e,t,i){var o=this;this.oPageOperationAdapter.refreshGroup(i).then(function(e){if(!e){return}var t=o._getIndexOfGroupByObject(e.object);e.visibilityModes=l.calcVisibilityModes(e.object,true);o.oModel.setProperty("/groups/"+t,e);if(e.tiles){e.tiles.forEach(function(e){o.getTileView(e)})}})},_sortableStop:function(){this.oSortableDeferred.resolve()},_handleAfterSortable:function(e){return function(){var t=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){e.apply(null,t)})}.bind(this)},_createGroupAt:function(e,t,i){var o=parseInt(i.location,10),r=this.oModel.getProperty("/groups"),s=this.oPageOperationAdapter.getPreparedGroupModel(null,false,o===r.length,i),n=this.oModel,a;s.index=o;r.splice(o,0,s);for(a=0;a<r.length-1;a++){r[a].isLastGroup=false}for(a=o+1;a<r.length;a++){r[a].index++}n.setProperty("/groups",r)},_getIndexOfGroupByObject:function(e){var t=this.oModel.getProperty("/groups");return this.oPageOperationAdapter.getIndexOfGroup(t,e)},getTileActions:function(e){return this.oPageOperationAdapter.getTileActions(e)},addTileToGroup:function(e,t){var i=e+"/tiles",o=this.oModel.getProperty(e),r=this.oModel.getProperty(i).length;var s=this.oModel.getProperty(e+"/isGroupLocked"),n=this.oModel.getProperty("/personalization");o.tiles[r]=this.oPageOperationAdapter.getPreparedTileModel(t,s);this.getTileView(o.tiles[r]);o.visibilityModes=l.calcVisibilityModes(o,n);this._updateModelWithTileView(o.index,r);this.oModel.setProperty(e,o)},addTilesToGroupByCatalogTileId:function(e,t){var i=e.getBindingContext();for(var o=0;o<t.length;o++){this.addTileToGroupByCatalogTileId(i.sPath,t[o])}},addTileToGroupByCatalogTileId:function(e,t){var i,o,r;if(!a.last("/core/home/enableTransientMode")){return}r=this.oPageOperationAdapter.getTileModelByCatalogTileId(t);if(!r){return}this.oDashboardLoadingManager.setTileResolved(r);i=this.oModel.getProperty(e+"/tiles").length;o=this.oModel.getProperty(e);o.tiles[i]=r;this.oModel.setProperty(e,o)},_getPathOfTile:function(e){var t=this.oModel.getProperty("/groups"),i,o,r,s,n;for(var a=0;a<t.length;++a){i=t[a];o=i.tiles;r=i.links;for(s=0;s<o.length;++s){if(o[s].uuid===e){return"/groups/"+a+"/tiles/"+s}}for(n=0;n<r.length;++n){if(r[n].uuid===e){return"/groups/"+a+"/links/"+n}}}return null},_moveInArray:function(e,t,i){if(i>=e.length){var o=i-e.length;while(o--+1){e.push(undefined)}}e.splice(i,0,e.splice(t,1)[0])},_updateGroupIndices:function(e){var t;for(t=0;t<e.length;t++){e[t].index=t}},_deleteGroup:function(e,t,i){var o=this,r=this.oModel,s=i.groupId,n=r.getProperty("/groups"),a=p.getIndexOfGroup(n,s),l=n.length-1===a,u=null,g,c;g=l?a-1:a;d.destroyFLPAggregationModel(r.getProperty("/groups/"+a));u=n.splice(a,1)[0];if(l){r.setProperty("/groups/"+g+"/isLastGroup",l)}r.setProperty("/groups",n);this._updateGroupIndices(n);if(g>=0){c=sap.ui.getCore().getEventBus();window.setTimeout(jQuery.proxy(c.publish,c,"launchpad","scrollToGroup",{groupId:r.getProperty("/groups")[g].groupId}),200)}function f(){o.oPageOperationAdapter.deleteGroup(u).then(function(){h.showLocalizedMessage("group_deleted_msg",[u.title]);o._checkRequestQueue()},function(){o._resetGroupsOnFailure("fail_to_delete_group_msg")})}this._addRequest(f)},_resetGroup:function(e,t,i){var o=this,r=i.groupId,s=this.oModel,a=s.getProperty("/groups"),u=p.getIndexOfGroup(a,r),d=o.oModel.getProperty("/groups/indexOfDefaultGroup")===u,g=s.getProperty("/groups/"+u),c,f;s.setProperty("/groups/"+u+"/sortable",false);function b(){o.oPageOperationAdapter.resetGroup(g,d).then(function(e){o._handleAfterSortable(function(e,t,i){var r=o.oModel.getProperty("/groups"),s=p.getIndexOfGroup(r,e);o._loadGroup(s,i||t);h.showLocalizedMessage("group_reset_msg",[t.title]);o.oModel.setProperty("/groups/"+s+"/sortable",true);c=sap.ui.getCore().byId("dashboardGroups").getGroupControlByGroupId(e);f=c.getBindingContext().getObject().links;if(f&&f.length&&!c.getIsGroupLocked()){o._changeGroupLinksScope(c.getBindingContext().getObject(),o.oModel.getProperty("/tileActionModeActive")?y.Actions:y.Display)}if(c){c.rerender();n.emit("updateGroups",Date.now());l.handleTilesVisibility()}})(r,g,e);o._checkRequestQueue()},function(){o._resetGroupsOnFailure("fail_to_reset_group_msg")})}this._addRequest(b)},_moveGroup:function(e,t,i){if(isNaN(i.fromIndex)){return}var o=i.fromIndex,r=i.toIndex,s=this.oModel,n=s.getProperty("/groups"),a=s.getProperty("/tileActionModeActive"),l,u,d=this,h,g;if(!a){o=this._adjustFromGroupIndex(o,n)}l=n[o];u=l.groupId;if(!a){r=this._adjustToGroupIndex(r,n,u)}g=n[r];this._moveInArray(n,o,r);this._updateGroupIndices(n);for(h=0;h<n.length-1;h++){n[h].isLastGroup=false}n[n.length-1].isLastGroup=true;s.setProperty("/groups",n);function c(){n=s.getProperty("/groups");var e=s.getProperty(p.getModelPathOfGroup(n,u));if(!e.object){return}d.oPageOperationAdapter.getOriginalGroupIndex(g,n).then(function(t){var i={iFromIndex:o,iToIndex:r};return d.oPageOperationAdapter.moveGroup(e,t,i)}).then(d._checkRequestQueue.bind(d),function(){d._resetGroupsOnFailure("fail_to_move_group_msg")})}this._addRequest(c)},_adjustToGroupIndex:function(e,t,i){var o=0,r=false,s=0;for(s=0;s<t.length&&o<e;s++){if(t[s].isGroupVisible){if(t[s].groupId===i){r=true}else{o++}}}if(r){return s-1}return s},_adjustFromGroupIndex:function(e,t){var i=0,o;for(o=0;o<t.length;o++){if(t[o].isGroupVisible){i++}if(i===e+1){return o}}return e},_changeGroupTitle:function(e,t,i){var o=this,r=i.newTitle,s=this.oModel.getProperty("/groups"),n=i.groupId,a=p.getIndexOfGroup(s,n),l=o.oModel.getProperty("/groups/indexOfDefaultGroup")===a,u=this.oModel.getProperty("/groups/"+a),d=u.title;this.oModel.setProperty("/groups/"+a+"/title",r);function h(){var e;if(u.isLastGroup){e=o.oPageOperationAdapter.addGroupAt(u,undefined,l)}else{var t=o.oModel.getProperty("/groups")[a+1];e=o.oPageOperationAdapter.getOriginalGroupIndex(t,s).then(function(e){return o.oPageOperationAdapter.addGroupAt(u,e,l)})}e.then(function(e){o._handleAfterSortable(function(e,t){var i=o.oModel.getProperty("/groups");var r=p.getIndexOfGroup(i,e);var s=i[r];Object.keys(t).forEach(function(e){if(e==="tiles"||e==="links"){return}s[e]=t[e]});o.oModel.refresh();o._checkRequestQueue()})(n,e)},function(){o._resetGroupsOnFailure("fail_to_create_group_msg")})}function g(){this.oPageOperationAdapter.renameGroup(u,r,d).then(function(){o._checkRequestQueue()},function(){o._resetGroupsOnFailure("fail_to_rename_group_msg")})}if(!u.object){this._checkRequestQueue();this._addRequest(h.bind(this))}else{this._addRequest(g.bind(this))}},addGroupToModel:function(e){var t=this.oPageOperationAdapter.getPreparedGroupModel(e,false,true,{isRendered:true}),i=this.oModel.getProperty("/groups"),o=i.length,r;if(o>0){i[o-1].isLastGroup=false}t.index=o;i.push(t);this.oModel.setProperty("/groups/",i);r=new P(this.oModel,"/groups/"+o);return r},_deleteTile:function(e,i,o){var r=o.tileId,s=this.oModel.getProperty("/groups"),n=o.items||"tiles",a,u,p,h;function g(e,t){this.oPageOperationAdapter.removeTile(e,t).then(this._checkRequestQueue.bind(this),this._resetGroupsOnFailure.bind(this,"fail_to_remove_tile_msg"))}function c(e,t,i){var o=sap.ui.getCore().byId("dashboardGroups"),r=o.getGroupControlByGroupId(t.groupId),s;if(i==="tiles"){if(e+1===t[i].length){s=r.oPlusTile}}else{var n=r.getLinks();if(e+1===n.length){if(n.length===1){s=r.oPlusTile}else{s=n[e-1]}}else{s=n[e+1]}}if(s){sap.ui.require(["sap/ushell/components/ComponentKeysHandler"],function(e){e.getInstance().then(function(e){e.moveScrollDashboard(s.$())})})}}for(p=0;p<s.length;++p){a=s[p];for(h=0;h<a[n].length;++h){u=a[n][h];if(u.uuid===r){if(t.system.desktop){c(h,a,n)}d.destroyTileModel(this.oModel.getProperty("/groups/"+p+"/"+n+"/"+h));var f=a[n].splice(h,1)[0],b=this.oModel.getProperty("/personalization");a.visibilityModes=l.calcVisibilityModes(a,b);this.oModel.setProperty("/groups/"+p,a);this._addRequest(g.bind(this,a,f));l.handleTilesVisibility();return}}}},deleteTilesFromGroup:function(e,t){var i=this.oModel.getProperty("/groups"),o=p.getIndexOfGroup(i,e),r=this.oModel.getProperty("/groups/"+o),s=[];["tiles","links"].forEach(function(e){s=r[e].filter(function(e){if(t.indexOf(e.uuid)<0){return true}return false});r[e]=s});r.visibilityModes=l.calcVisibilityModes(r,true);this.oModel.setProperty("/groups/"+o,r)},_getGroupIndex:function(e){var t=this.oModel.getProperty("/groups"),i=this._getNewGroupInfo(t,e);if(i){return i.newGroupIndex}return undefined},_convertTile:function(e,t,i){var o=i.tile?i.tile:i,r=i.srcGroupId?this._getGroupIndex(i.srcGroupId):undefined,s=i.srcGroupId?this.oModel.getProperty("/groups/"+r):o.getParent().getBindingContext().getObject(),a=o.getBindingContext().sPath.split("/"),d=o.getBindingContext().getObject(),p=a[a.length-2],h=d.uuid,g=parseInt(a[a.length-1],10),c=i.toIndex!==undefined?i.toIndex:undefined,f=this.oModel.getProperty("/tileActionModeActive"),b=i.toGroupId?this._getGroupIndex(i.toGroupId):s.index,M=i.toGroupId?this.oModel.getProperty("/groups/"+b):s,v=this;var m=this._getIndexForConvert(p,g,c,s,M),P={tileIndex:g,groupIndex:r,group:s};function G(){d.tileIsBeingMoved=true;var e=this.oPageOperationAdapter.moveTile(d,m,s,M,p==="links"?"tile":"link");e.then(function(e){v._handleAfterSortable(function(e,t){var o=v._getPathOfTile(e);var r=t.content;if(o){if(p==="tiles"){v._attachLinkPressHandlers(r);v._changeLinkScope(r,f?"Actions":"Display")}if(s===M){T.show(u.i18n.getText("PageRuntime.Message.VisualizationConverted"))}else{T.show(u.i18n.getText("PageRuntime.Message.VisualizationMovedAndConverted"))}var a={tileIndex:c,groupIndex:b,group:M};var h={tile:d,view:r,type:p,tileObj:t.object};d.tileIsBeingMoved=true;v.replaceTileViewAfterConvert(P,a,h);n.emit("updateGroups",Date.now());l.handleTilesVisibility();if(i.callBack){i.callBack(r)}}})(h,e);v._checkRequestQueue()},function(){v._handleAfterSortable(v._resetGroupsOnFailure.bind(v))("fail_to_move_tile_msg")})}this._addRequest(G.bind(this))},replaceTileViewAfterConvert:function(e,t,i){var o=i.tile,r=o.content;o.tileIsBeingMoved=false;o.content=[i.view];o.object=i.tileObj;o.originalTileId=this.oPageOperationAdapter.getTileId(i.tileObj);e.group[i.type].splice(e.tileIndex,1);if(t.tileIndex!==undefined){t.group[i.type==="tiles"?"links":"tiles"].splice(t.tileIndex,0,o)}else{t.group[i.type==="tiles"?"links":"tiles"].push(o)}this.oModel.setProperty("/groups/"+t.groupIndex,t.group);this.oModel.setProperty("/groups/"+e.groupIndex,e.group);if(i.type==="links"){this._handleTileAppearanceAnimation(o.content[0].getParent())}else{this._handleTileAppearanceAnimation(o.content[0])}if(r&&r[0]){r[0].destroy()}},_getIndexForConvert:function(e,t,i,o,r){var s;if(e==="tiles"){if(i!==undefined){s=r[e].length+i}else{s=r[e].length+r.links.length}if(o.groupId===r.groupId){s--}}else{s=i||o.tiles.length;t+=o.tiles.length}return{tileIndex:t,newTileIndex:s}},_getIndexForMove:function(e,t,i,o,r){var s;if(e==="tiles"){s=i!==undefined?i:o[e].length}else{if(i!==undefined){s=o.tiles.length+i}else{s=o.tiles.length+o.links.length}t+=r.tiles.length}return{tileIndex:t,newTileIndex:s}},_getTileInfo:function(e,t,i){var o,r,s,n;for(o=0;o<e.length;++o){s=e[o];for(r=0;r<s[i].length;++r){n=s[i][r];if(n.uuid===t){return{oTile:n,tileIndex:r,oGroup:s,groupIndex:o}}}}return},_getNewGroupInfo:function(e,t){var i;for(var o=0;o<e.length;++o){i=e[o];if(i.groupId===t){return{oNewGroup:i,newGroupIndex:o}}}return},_moveTile:function(e,t,i){var o=i.toIndex,r=i.toGroupId,s=i.sTileId,a=i.source,d=i.sTileType==="tiles"||i.sTileType==="tile"?"tile":"link",p=i.sToItems,h=i.sFromItems,g=this.oModel.getProperty("/tileActionModeActive"),c=this.oModel.getProperty("/groups"),f,b,M,v,m,P={},G=this;v=this._getTileInfo(c,s,h);m=this._getNewGroupInfo(c,r);var _=v.tileIndex===m.oNewGroup.tiles.length-1&&o>=m.oNewGroup.tiles.length;if((v.tileIndex===o||_)&&v.oGroup.groupId===m.oNewGroup.groupId){return}if(v.oGroup.groupId===m.oNewGroup.groupId&&(a==="movetileDialog"||o===null||a==="movelinkDialog")){if(i.callBack&&v.oTile&&v.oTile.content&&v.oTile.content.length){i.callBack(v.oTile.content[0])}return}if(d==="link"){v.oTile.content[0].addStyleClass("sapUshellZeroOpacity")}if(d==="tile"&&p==="tiles"){if(o&&o>m.oNewGroup[p].length){o=m.oNewGroup[p].length}}if(v.oGroup.groupId===r&&p===h){if(o===null||o===undefined){v.oGroup[p].splice(v.tileIndex,1);o=v.oGroup[p].length;v.oGroup[p].push(v.oTile)}else{o=this._adjustTileIndex(o,v.oTile,v.oGroup,p);this._moveInArray(v.oGroup[p],v.tileIndex,o)}this.oModel.setProperty("/groups/"+v.groupIndex+"/"+p,v.oGroup[p])}else{M=this.oModel.getProperty("/personalization");v.oGroup[h].splice(v.tileIndex,1);v.oGroup.visibilityModes=l.calcVisibilityModes(v.oGroup,M);this.oModel.setProperty("/groups/"+v.groupIndex+"/"+h,v.oGroup[h]);if(o===null||o===undefined){o=m.oNewGroup[p].length;m.oNewGroup[p].push(v.oTile)}else{o=this._adjustTileIndex(o,v.oTile,m.oNewGroup,p);m.oNewGroup[p].splice(o,0,v.oTile)}m.oNewGroup.visibilityModes=l.calcVisibilityModes(m.oNewGroup,M);this.oModel.setProperty("/groups/"+m.newGroupIndex+"/"+p,m.oNewGroup[p])}n.emit("updateGroups",Date.now());l.handleTilesVisibility();function y(){f=this.oModel.getProperty("/groups/"+v.groupIndex);b=this.oModel.getProperty("/groups/"+m.newGroupIndex);P=this._getIndexForMove(h,v.tileIndex,o,m.oNewGroup,f);v.oTile.tileIsBeingMoved=true;this.oPageOperationAdapter.moveTile(v.oTile,P,f,b,d).then(function(e){var t=G._getPathOfTile(s);if(t){G.oModel.setProperty(t+"/object",e.object);G.oModel.setProperty(t+"/originalTileId",e.originalTileId);var o=G.oModel.getProperty(t+"/content");var r=e.content;if(p==="links"){G._changeLinkScope(r,g?"Actions":"Display");G._attachLinkPressHandlers(r);G._handleTileAppearanceAnimation(r);v.oTile.content=[r];G.oModel.setProperty(t,jQuery.extend({},v.oTile));G.oModel.setProperty("/groups/"+m.newGroupIndex+"/"+p,G.oModel.getProperty("/groups/"+m.newGroupIndex+"/"+p))}else{G.oModel.setProperty(t+"/content",[r])}if(o&&o[0]){var n=r.onAfterRendering;r.onAfterRendering=function(){n.apply(this);o[0].destroy();r.onAfterRendering=n}}G.oModel.setProperty(t+"/tileIsBeingMoved",false);if(i.callBack){i.callBack(r)}T.show(u.i18n.getText("PageRuntime.Message.VisualizationMoved"))}G._checkRequestQueue()},function(){G._resetGroupsOnFailure("fail_to_move_tile_msg")})}this._addRequest(y.bind(this))},_adjustTileIndex:function(e,t,i,o){var r=0,s=false,n=0;for(n=0;n<i[o].length&&r<e;n++){if(i[o][n].isTileIntentSupported){if(i[o][n]===t){s=true}else{r++}}}if(s){return n-1}return n},getModel:function(){return this.oModel},getDashboardView:function(){return this.oDashboardView},setDashboardView:function(e){this.oDashboardView=e;return this},setTileVisible:function(e,t){this.oPageOperationAdapter.setTileVisible(e.object,t)},refreshTile:function(e){this.oPageOperationAdapter.refreshTile(e.object)},updateSettings:function(e){this.oModel=e.model||this.oModel;this.oConfig=e.config||this.oConfig;this.oRouter=e.router||this.oRouter;this.oDashboardView=e.view||this.oDashboardView},_resetGroupsOnFailure:function(e,t){this._requestFailed();h.showLocalizedError(e,t);this.bStartLoadRemainSegment=false;this.loadPersonalizedGroups();this.oModel.updateBindings(true)},resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments)},_bindSegment:function(e,t){var i,o,r,s;for(i=0;i<t.length;i++){r=t[i];s=r.index;o=e[s];if(o){o.isRendered=true;o.tiles=o.tiles.concat(r.tiles);o.links=o.links.concat(r.links)}}return e},createGroupsModelFrame:function(e,t){var i,o=[],r,s;s=function(e){var t=jQuery.extend({},e);t.tiles=[];t.pendingLinks=[];t.links=[];return t};for(i=0;i<e.length;i++){r=e[i];o[i]=s(r);o[i].isRendered=false;o[i].visibilityModes=l.calcVisibilityModes(r,t)}return o},_splitGroups:function(e,t){var i,o=[],r=0,s=this.oModel.getProperty("/homePageGroupDisplay")==="tabs",n=this.oModel.getProperty("/personalization"),a=0,l;var u=500;for(i=0;i<e.length;i++){l=e[i];o.push(l);if(!this.segmentsStore.length){r+=this.PagingManager.getGroupHeight(l,t===i,n)}else{a+=l.tiles.length+l.links.length}if(s&&!this.segmentsStore.length&&r>0){o.loadTilesView=true;this.segmentsStore.push(o);o=[];r=0}if(r>=1||a>=u){this.segmentsStore.push(o);o=[];r=0;a=0}}if(o.length){this.segmentsStore.push(o)}},_processSegment:function(e){var t=this.segmentsStore.shift();if(!t){return e}if(this.isBlindLoading()===false){if(this.oModel.getProperty("/homePageGroupDisplay")!=="tabs"||t.loadTilesView){this.getSegmentContentViews(t)}}e=this._bindSegment(e,t);return e},getSegmentContentViews:function(e){var t,i,o,r;for(t=0;t<e.length;t++){o=e[t];for(i=0;i<o.tiles.length;i++){r=o.tiles[i];if(r.isTileIntentSupported){this.getTileView(r)}}for(i=0;i<o.links.length;i++){r=o.links[i];if(r.isTileIntentSupported){this.getTileView(r,o.index)}}}this.bIsFirstSegmentViewLoaded=true},getSegmentTabContentViews:function(e,t,i){var o,r,s=i.iSelectedGroup,n;n=this.oModel.getProperty("/groups/"+s);for(o=0;o<n.tiles.length;o++){r=n.tiles[o];if(r.isTileIntentSupported){this.getTileView(r)}}for(o=0;o<n.links.length;o++){r=n.links[o];if(r.isTileIntentSupported){this.getTileView(r,s)}}},_handleBookmarkModelUpdate:function(){this.bIsGroupsModelDirty=false;this.bGroupsModelLoadingInProcess=true;this.loadPersonalizedGroups()},_modelLoaded:function(){this.bGroupsModelLoadingInProcess=false;if(this.bIsGroupsModelDirty){this._handleBookmarkModelUpdate()}},handleFirstSegmentLoaded:function(){var e=this.oModel.getProperty("/groups");if(this.aGroupsFrame){Array.prototype.push.apply(e,this.aGroupsFrame);this.aGroupsFrame=null}this._initializeAnchorNavigationBar();if(!this.bStartLoadRemainSegment){this._processRemainingSegments()}},_initializeAnchorNavigationBar:function(){var e,t=w.getDashboardView();e=t.getAnchorItemTemplate();this.oDashboardView.oAnchorNavigationBar.bindAggregation("groups",{path:"/groups",template:e})},_processRemainingSegments:function(){var e;if(this.segmentsStore.length>0){window.setTimeout(function(){e=this._processSegment(this.oModel.getProperty("/groups"));this.oModel.setProperty("/groups",e);this.bIsFirstSegment=false;this._processRemainingSegments()}.bind(this),0)}else{this.bIsGroupsModelLoading=false;this._updateModelWithTileView(0,0);l.handleTilesVisibility();sap.ui.getCore().getEventBus().publish("launchpad","dashboardModelContentLoaded");n.emit("updateGroups",Date.now())}},tabsModeVisibilityChanged:function(){if(this.bIsFirstSegmentViewLoaded===false&&this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){this.oDashboardLoadingManager.manageTilesView();this.bIsFirstSegmentViewLoaded=true;n.emit("firstSegmentCompleteLoaded",true)}},_setGroupModel:function(e){if(this.bIsGroupsModelLoading){G.info("Skip set the group model, because the group model is still loading");return}var t=0,i,o=0,s=0,a=0,u,p,h=null,g,c,f=[];this.bIsGroupsModelLoading=true;try{o=this.oModel.getProperty("/groups").length}catch(e){}for(t=e.length;t<o;++t){d.destroyFLPAggregationModel(this.oModel.getProperty("/groups/"+t))}if(!this.PagingManager){var b=jQuery("#dashboardGroups").width();if(!b){b=window.innerWidth}var M=jQuery("#sapUshellDashboardPage-cont").height();if(M<100){M=window.innerHeight}this.PagingManager=new r("dashboardPaging",{supportedElements:{tile:{className:"sapUshellTile"},link:{className:"sapUshellLinkTile"}},containerHeight:M,containerWidth:b})}e.forEach(function(e){if(e.isGroupVisible){s+=e.tiles.length}});this.bIsScrollModeAccordingKPI=s>this.iMinNumOfTilesForBlindLoading;this.aGroupsFrame=this.createGroupsModelFrame(e,this.oModel.getProperty("/personalization"));for(t=0;t<this.aGroupsFrame.length;t++){if(this.aGroupsFrame[t].isGroupVisible&&this.aGroupsFrame[t].visibilityModes[0]){if(h===null){h=t;this.aGroupsFrame[t].isGroupSelected=true;this.oModel.setProperty("/iSelectedGroup",t)}a++;if(a>1){this.aGroupsFrame[h].showGroupHeader=false;break}}}this._splitGroups(e,h);p=this.segmentsStore[0]?this.segmentsStore[0].length:0;u=this.aGroupsFrame.splice(0,p);_.start("FLP:DashboardManager._processSegment","_processSegment","FLP");f=this._processSegment(u);e.every(function(e,t){if(e.isDefaultGroup){i=t;return false}return true});f.indexOfDefaultGroup=i;if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){g=this.getDashboardView();if(g){c=g.oDashboardGroupsBox;var v=c.getBinding("groups");if(v){v.filter([g.oFilterSelectedGroup])}}}_.end("FLP:DashboardManager._processSegment");this.oModel.setProperty("/groups",f);this.aGroupModel=f;if(this.oDashboardView){n.once("firstSegmentCompleteLoaded").do(function(){l.setPerformanceMark("FLP-TTI-Homepage",{bUseUniqueMark:true})}).do(this.handleFirstSegmentLoaded.bind(this))}else{setTimeout(function(){Array.prototype.push.apply(this.aGroupModel,this.aGroupsFrame);this.aGroupsFrame=null;this.bStartLoadRemainSegment=true;this._processRemainingSegments()}.bind(this),0)}if(this.bIsFirstSegmentViewLoaded){n.emit("firstSegmentCompleteLoaded",true)}_.end("FLP:DashboardManager.loadGroupsFromArray")},getPreparedGroupModel:function(){return this.aGroupModel},_loadGroup:function(e,t){var i=this,o="/groups/"+e,r=i.oModel.getProperty(o),s=r.isLastGroup,n=r.groupId;d.destroyFLPAggregationModel(r);if(n){t.groupId=n}t.isLastGroup=s;t.index=e;t.isRendered=true;this.oModel.setProperty(o,t)},_hasPendingLinks:function(e){for(var t=0;t<e.length;t++){if(e[t].content[0]===undefined){return true}}return false},_addModelToTileViewUpdateQueue:function(e,t){this.tileViewUpdateQueue.push({uuid:e,view:t})},_updateModelWithTileView:function(e,t){var i=this;if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID)}this.tileViewUpdateTimeoutID=window.setTimeout(function(){i.tileViewUpdateTimeoutID=undefined;i.oSortableDeferred.done(function(){i._updateModelWithTilesViews(e,t)})},50)},_updateGroupModelWithTilesViews:function(e,t,i,o){var r,s,n,a,l=t||0;for(var u=l;u<e.length;u=u+1){r=e[u];for(var d=0;d<this.tileViewUpdateQueue.length;d++){s=this.tileViewUpdateQueue[d];if(r.uuid===s.uuid){i.push(d);if(s.view){if(o){r.content=[s.view]}else{r.content[0].destroy();r.content=[s.view]}this.oDashboardLoadingManager.setTileResolved(r);n=this.oPageOperationAdapter.getTileSize(r.object);a=n!==null&&n==="1x2"||false;if(r.long!==a){r.long=a}}else{r.content[0].setState("Failed")}break}}}},_updateModelWithTilesViews:function(e,t){var i=this.oModel.getProperty("/groups"),o=e||0,r=[];if(!i||this.tileViewUpdateQueue.length===0){return}for(var s=o;s<i.length;s=s+1){this._updateGroupModelWithTilesViews(i[s].tiles,t,r);if(i[s].links){this._updateGroupModelWithTilesViews(i[s].links,t,r,true);if(i[s].pendingLinks.length>0){if(!i[s].links){i[s].links=[]}i[s].links=i[s].links.concat(i[s].pendingLinks);i[s].pendingLinks=[]}}}var n=[],a;for(a=0;a<this.tileViewUpdateQueue.length;a++){if(r.indexOf(a)===-1){n.push(this.tileViewUpdateQueue[a])}}this.tileViewUpdateQueue=n;this.oModel.setProperty("/groups",i)},getModelTileById:function(e,t){var i=this.oModel.getProperty("/groups"),o,r=false;i.every(function(i){i[t].every(function(t){if(t.uuid===e||t.originalTileId===e){o=t;r=true}return!r});return!r});return o},_attachLinkPressHandlers:function(e){var t=sap.ui.getCore().getEventBus(),i=e.attachPress?e:e.getContent()[0];i.attachPress(function(i){var o=e.getBindingContext().getObject().tileIsBeingMoved;if(!o&&this.getScope&&this.getScope()==="Actions"){switch(i.getParameters().action){case"Press":var r=e.getState?e.getState():"";if(r!=="Failed"){sap.ushell.components.homepage.ActionMode._openActionsMenu(i)}break;case"Remove":var s=e.getBindingContext().getObject().uuid;t.publish("launchpad","deleteTile",{tileId:s,items:"links"});break;default:break}}else{t.publish("launchpad","dashboardTileLinkClick")}})},handleDisplayModeChange:function(e){this.oModel.setProperty("/homePageGroupDisplay",e);switch(e){case"scroll":this._handleDisplayModeChangeToScroll();break;case"tabs":this._handleDisplayModeChangeToTabs();break}},_handleDisplayModeChangeToTabs:function(){var e=this.oModel.getProperty("/iSelectedGroup"),t=this.oModel.getProperty("/groups");this.oDashboardLoadingManager.manageTilesView();if(t.length>0){for(var i=0;i<t.length;i++){this.oModel.setProperty("/groups/"+i+"/isGroupSelected",false)}this.oModel.setProperty("/groups/"+e+"/isGroupSelected",true)}},_handleDisplayModeChangeToScroll:function(){if(this.isBlindLoading()){return}var e=this.oModel.getProperty("/groups"),t,i,o,r=[],s,n;for(s=0;s<e.length;s++){t=e[s];i=t.tiles||[];for(n=0;n<i.length;n++){o=i[n];if(o.content.length===0){this.getTileView(o,s)}}r=t.links||[];for(n=0;n<r.length;n++){this.getTileView(r[n],s)}}this.oModel.refresh(false);var a=this.oModel.getProperty("/iSelectedGroup");if(a){setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","scrollToGroup",{groupId:e[a].groupId})},100)}},getTileViewsFromArray:function(e){var t=this;if(e.length===0){return}e.forEach(function(e){t.getTileView(e.oTile,e.iGroup)});this.oModel.refresh(false);if(this.bIsFirstSegmentViewLoaded===false){this.bIsFirstSegmentViewLoaded=true;n.emit("firstSegmentCompleteLoaded",true)}},getTileView:function(e,t){var i=this.oPageOperationAdapter.getTileType(e.object);if(this.oDashboardLoadingManager.isTileViewRequestIssued(e)){return}this.oDashboardLoadingManager.setTileInProgress(e);this.oPageOperationAdapter.setTileVisible(e.object,false);if(i==="card"){this._loadCardData(e)}else{this._loadTileData(e,t,i)}},_loadCardData:function(e){var t=sap.ui.getCore().byId(e.controlId);if(t&&t.setManifest&&this.isBlindLoading()){t.setManifest(e.manifest)}e.content=[e.manifest];this.oDashboardLoadingManager.setTileResolved(e)},getCurrentHiddenGroupIds:function(e){return this.oPageOperationAdapter.getCurrentHiddenGroupIds(e)},_loadTileData:function(e,t,i){var r=this,s=this.oPageOperationAdapter.getTileView(e),n,a,l,u=this._addModelToTileViewUpdateQueue,d,p=false,h=e.uuid,c=false;if(s.state()==="resolved"){c=true}s.done(function(i){if(i.oController&&i.oController.navigationTargetUrl&&!e.isCustomTile){e.target=i.oController.navigationTargetUrl}d=i;if(d.getComponentInstance){_.average("FLP:getComponentInstance","get info for navMode","FLP1");var o=d.getComponentInstance().getComponentData();if(o&&o.properties){e.navigationMode=o.properties.navigationMode}_.end("FLP:getComponentInstance")}r.oDashboardLoadingManager.setTileResolved(e);n=i.getMode?i.getMode():"ContentMode";if(r.bLinkPersonalizationSupported&&n==="LineMode"){r._attachLinkPressHandlers(d);if(t>=0){a=r.oModel.getProperty("/groups");if(a[t]){e.content=[d];l=r.oModel.getProperty("/groups/"+t+"/links");r.oModel.setProperty("/groups/"+t+"/links",[]);r.oModel.setProperty("/groups/"+t+"/links",l)}}}else if(r.isBlindLoading()){if(e.content&&e.content.length>0){e.content[0].destroy()}e.content=[d];if(t>=0&&!c){r.oModel.refresh(false)}}if(r.isBlindLoading()){var s=r.oPageOperationAdapter.getTileSize(e.object);var g=s==="1x2";if(e.long!==g){e.long=g}}else if(n==="LineMode"){e.content=[d];if(p){l=r.oModel.getProperty("/groups/"+t+"/links");r.oModel.setProperty("/groups/"+t+"/links",[]);r.oModel.setProperty("/groups/"+t+"/links",l)}}else if(e.content.length===0){e.content=[d]}else{u.apply(r,[h,d]);r._updateModelWithTileView(0,0)}});s.fail(function(){if(r.oPageOperationAdapter.getTileType(e.object)==="link"&&r.bLinkPersonalizationSupported){d=r.oPageOperationAdapter.getFailedLinkView(e);r._attachLinkPressHandlers(d)}else{d=new o({state:"Failed"})}e.content=[d]});if(!d){if(r.oPageOperationAdapter.getTileType(e.object)==="link"){p=true;d=new g({mode:"LineMode"})}else{d=new o}e.content=[d]}},loadPersonalizedGroups:function(){var e=this;var t=new jQuery.Deferred;if(this.bIsGroupsRequestPending){G.info("loadPersonalizedGroups was skipped because there is already a pending request.");t.reject();return t.promise()}this.bIsGroupsRequestPending=true;this.oServiceLoadingPromise.then(function(){return e.oPageOperationAdapter.getPage()}).then(function(i){e._setGroupModel(i);e.bIsGroupsRequestPending=false;t.resolve()}).catch(function(){h.showLocalizedError("fail_to_load_groups_msg");e.bIsGroupsRequestPending=false});_.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return t.promise()}});L.prototype.getInstance=function(){return w};return L});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/MessagingHelper", ["sap/ushell/services/Message","sap/ushell/resources"],function(e,s){"use strict";return{getLocalizedText:n,showLocalizedError:o,showLocalizedErrorHelper:r,showLocalizedMessage:i};function n(e,n){return s.i18n.getText(e,n)}function i(s,i,o){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("Message").then(function(r){r.show(o||e.Type.INFO,n(s,i),i)})}}function o(s,n){i(s,n,e.Type.ERROR)}function r(e,s){return function(){o(e,s)}}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HomepageManager/DashboardLoadingManager", ["sap/ui/base/Object","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery"],function(e,i,jQuery){"use strict";var s=e.extend("sap.ushell.components._HomepageManager.DashboardLoadingManager",{metadata:{},constructor:function(e,i){var s=sap.ui.getCore().getEventBus();this.currentVisibleTiles=[];this.aRefreshTiles=[];this.oBusyIndicatorTiles={};this.oActiveDynamicTiles={};this.oResolvedTiles={};this.oInProgressTiles={};this.oDashboardManager=i.oDashboardManager;s.subscribe("launchpad","visibleTilesChanged",this._onVisibilityChanged,this);s.subscribe("launchpad","dashboardTileClick",this._addTileToRefreshArray,this);s.subscribe("launchpad","refreshTiles",this._refreshTiles,this);s.subscribe("launchpad","setTilesNoVisibility",this._setTilesNoVisibility,this);s.subscribe("launchpad","onHiddenTab",this._setTilesNoVisibility,this)},_onVisibilityChanged:function(e,i,s){this.currentVisibleTiles=s;if(this.oDashboardManager.isBlindLoading()){this.manageTilesView()}this.oDashboardManager.tabsModeVisibilityChanged();this.manageBusyIndicatorTiles();this.manageDynamicTiles()},manageDynamicTiles:function(){var e;i.average("DashboardLoadingManagerActiveDynamicTile","Manage Active Dynamic Tiles","FLP_SHELL");var s,t,a,n,r={},l=jQuery.extend(true,{},{},this.oActiveDynamicTiles);for(var o=0;o<this.currentVisibleTiles.length;o++){var u=this.currentVisibleTiles[o];if(!u.bIsExtanded){delete l[u.oTile.uuid]}}for(s in l){a=this.oActiveDynamicTiles[s];n=a.object;this.oDashboardManager.setTileVisible(a,false)}for(t=0;t<this.currentVisibleTiles.length;t++){e=this.currentVisibleTiles[t];if(!e.bIsExtanded){a=e.oTile;n=a.object;if(this.oActiveDynamicTiles[a.uuid]===undefined&&n){this.oDashboardManager.setTileVisible(a,true)}r[a.uuid]=a}}this.oActiveDynamicTiles=r;i.end("DashboardLoadingManagerActiveDynamicTile")},isTileViewRequestIssued:function(e){if(this.oInProgressTiles[e.uuid]===undefined&&this.oResolvedTiles[e.uuid]===undefined){return false}return true},manageBusyIndicatorTiles:function(){i.average("DashboardLoadingManagerBusyIndicators","Manage Busy Indicators on Tiles","FLP_SHELL");var e,s,t,a,n=[],r,l=[];for(s in this.oBusyIndicatorTiles){r=true;a=this.oBusyIndicatorTiles[s];if(this.oResolvedTiles[s]===undefined){for(var o=0;o<this.currentVisibleTiles.length;o++){if(this.currentVisibleTiles[o].oTile.uuid===a.oTile.uuid){r=false;break}}if(r){n.push(a)}}}for(e=0;e<this.currentVisibleTiles.length;e++){t=this.currentVisibleTiles[e];if(this.oBusyIndicatorTiles[t.oTile.uuid]===undefined&&this.oResolvedTiles[t.oTile.uuid]===undefined){l.push(t)}}for(e=0;e<n.length;e++){t=n[e];if(t.oTile.content[0]&&t.oTile.content[0].setState){if(t.oTile.content[0].getState){if(t.oTile.content[0].getState()!=="Failed"){t.oTile.content[0].setState()}}else{t.oTile.content[0].setState()}}delete this.oBusyIndicatorTiles[t.oTile.uuid]}for(e=0;e<l.length;e++){t=l[e];if(t.oTile.content[0]&&t.oTile.content[0].setState){if(t.oTile.content[0].getState){if(t.oTile.content[0].getState()!=="Failed"){t.oTile.content[0].setState("Loading")}}else{t.oTile.content[0].setState("Loading")}}this.oBusyIndicatorTiles[t.oTile.uuid]=t}i.end("DashboardLoadingManagerBusyIndicators")},setTileInProgress:function(e){this.oInProgressTiles[e.uuid]=e},setTileResolved:function(e){delete this.oInProgressTiles[e.uuid];this.oResolvedTiles[e.uuid]=e},_addTileToRefreshArray:function(e,i,s){this.aRefreshTiles.push(s.uuid)},_refreshTiles:function(){for(var e=0;e<this.currentVisibleTiles.length;e++){var i=this.currentVisibleTiles[e].oTile;var s=i.object;if(s){for(var t=0;t<this.aRefreshTiles.length;t++){if(i.uuid===this.aRefreshTiles[t]){this.aRefreshTiles.splice(t,1);this.oDashboardManager.setTileVisible(i,true);this.oDashboardManager.refreshTile(i);break}}}}},_setTilesNoVisibility:function(){for(var e=0;e<this.currentVisibleTiles.length;e++){var i=this.currentVisibleTiles[e].oTile;var s=i.object;if(s){this.oDashboardManager.setTileVisible(i,false)}delete this.oActiveDynamicTiles[i.uuid]}},manageTilesView:function(){var e,i,s=[];for(e=0;e<this.currentVisibleTiles.length;e++){i=this.currentVisibleTiles[e];if(this.oInProgressTiles[i.oTile.uuid]===undefined&&this.oResolvedTiles[i.oTile.uuid]===undefined){s.push(i)}}this.oDashboardManager.getTileViewsFromArray(s)}});return s});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HomepageManager/PagingManager", ["sap/ui/base/Object","sap/ui/Device","sap/ushell/Config"],function(e,t,i){"use strict";var n=7;var h=e.extend("sap.ushell.components._HomepageManager.PagingManager",{metadata:{publicMethods:["setElementClass","GetGroupHeight","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},constructor:function(e,t){sap.ushell.components._HomepageManager.getPagingManager=function(e){return function(){return e}}(this.getInterface());this.currentPageIndex=0;this.containerHeight=t.containerHeight||0;this.containerWidth=t.containerWidth||0;this.supportedElements=t.supportedElements||"";this.tileHeight=0;this.tileSize={sapUshellTile:{width:100,height:100},sapUshellLinkTile:{width:40,height:20},default:{width:40,height:20}}},getTileHeight:function(){return this.tileHeight},setElementClass:function(e){this.supportedElements=e},_getTileHeight:function(e){return e?148:176},_getTileWidth:function(e,t){if(e){return t?304:360}return t?148:176},getGroupHeight:function(e,h,s){if(!e||e.isGroupVisible===false){return 0}var r=e.tiles,a=e.links,l=t.system.phone||i.last("/core/home/sizeBehavior")==="Small",o=this._getTileWidth(false,l),u=this._getTileWidth(true,l),g=48,c=8,d=this.containerWidth-c;var f=0,p=1,m,E,H;var v=r.some(function(e){return!!e&&e.isTileIntentSupported!==false});if(!v){if(e.isGroupLocked||e.isDefaultGroup||!s||t.system.phone){return 0}return(g+c)/this.containerHeight}var P=c;if(!h){P+=g}if(a&&a.length){P+=44}for(H=0;H<r.length;H++){if(P>this.containerHeight){break}m=r[H];if(!m||m.isTileIntentSupported===false){continue}E=m.long?u:o;if(f>0){f+=n}f+=E;if(f>d){p+=1;f=E}}P+=(this._getTileHeight(l)+n)*p;return P/this.containerHeight},setContainerSize:function(e,t){var i=this.getNumberOfAllocatedElements();this.containerHeight=e;this.containerWidth=t;this._changePageSize(i)},getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex},_changePageSize:function(e){this.currentPageIndex=Math.ceil(e/this._calcElementsPerPage())},moveToNextPage:function(){this.currentPageIndex++},resetCurrentPageIndex:function(){this.currentPageIndex=0},getSizeofSupportedElementInUnits:function(e){return this.supportedElements[e].sizeInBaseUnits},_calcElementMatrix:function(e){var t=document.createElement("div");t.classList.add(e);document.getElementsByTagName("body")[0].appendChild(t);var i=t.clientHeight;var n=t.clientWidth;var h;if(i<20||n<40){h=this.tileSize[e]||this.tileSize.default}else{h={width:n,height:i}}this.tileHeight=i;t.remove();return h},_calcElementsPerPage:function(){var e,t,i,n,h,s,r;for(e in this.supportedElements){i=this.supportedElements[e];n=this._calcElementMatrix(i.className);i.matrix=n;if(t){t.width=t.width>n.width?n.width:t.width;t.height=t.height>n.height?n.height:t.height}else{t={width:n.width,height:n.height}}}for(e in this.supportedElements){i=this.supportedElements[e];h=i.matrix;i.sizeInBaseUnits=Math.round(h.width/t.width*h.height/t.height)}s=Math.round(this.containerWidth/t.width);r=Math.round(this.containerHeight/t.height);if(!r||!s||s===Infinity||r===Infinity||s===0||r===0){return 10}return r*s}});return h});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter", ["sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/base/util/uid","sap/base/Log","sap/ui/performance/Measurement","sap/m/library","sap/base/util/deepEqual"],function(e,r,i,t,o,n,u,a,l,s){"use strict";var d=l.GenericTileMode;var c=l.LoadState;var g={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};function p(e,r){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(i){i.logCustomEvent(g.PERSONALIZATION,e,r)})}var f=e.extend("sap.ushell.components._HomepageManager.PersistentPageOperationAdapter",{constructor:function(r){e.call(this);this.oPageBuilderService=r},_getIsAppBox:function(e){var r=this.oPageBuilderService,i=!!(r.getCatalogTileTargetURL(e)&&(r.getCatalogTilePreviewTitle(e)||r.getCatalogTilePreviewSubtitle(e)));return i},getCurrentHiddenGroupIds:function(e){var r=e.getProperty("/groups"),i=[],t,o,n;for(o=0;o<r.length;o++){n=r[o]?r[o].isGroupVisible:true;if(r[o].object){t=this.oPageBuilderService.getGroupId(r[o].object)}if(!n&&t!==undefined){i.push(t)}}return i},getPreparedTileModel:function(e,i,t){var u=this.oPageBuilderService,a=n(),l,s=u.getTileSize(e),c=[],g;t=t||u.getTileType(e);if(t==="link"){c=[new o({mode:d.LineMode})]}l={isCustomTile:!this._getIsAppBox(e),object:e,originalTileId:u.getTileId(e),uuid:a,tileCatalogId:encodeURIComponent(u.getCatalogTileId(e)),content:c,long:s==="1x2",target:u.getTileTarget(e)||"",debugInfo:u.getTileDebugInfo(e),isTileIntentSupported:u.isTileIntentSupported(e),rgba:"",isLocked:i,showActionsIcon:r.last("/core/home/enableTileActionsIcon"),isLinkPersonalizationSupported:u.isLinkPersonalizationSupported(e),navigationMode:undefined};if(t==="card"){g=u.getCardManifest(e);l.isCard=true;if(g){l.manifest=g}}return l},getPreparedGroupModel:function(e,i,o,a){var l=this.oPageBuilderService,s=e&&l.getGroupTiles(e)||[],d=[],c=[],g,p=r.last("/core/shell/model/personalization"),f=r.last("/core/extension/enableHelp");var P=!!(e&&l.isGroupLocked(e)),v=!!(e&&l.isGroupFeatured(e));for(g=0;g<s.length;++g){var h=s[g],T=l.getTileType(h).toLowerCase();if(T==="tile"||T==="card"){d.push(this.getPreparedTileModel(s[g],P,T))}else if(T==="link"){c.push(this.getPreparedTileModel(s[g],P,T))}else{u.error("Unknown tile type: '"+T+"'",undefined,"sap.ushell.components.HomepageManager")}}return{title:i&&t.getLocalizedText("my_group")||e&&l.getGroupTitle(e)||a&&a.title||"",object:e,groupId:n(),helpId:f&&e?l.getGroupId(e):null,links:c,pendingLinks:[],tiles:d,isDefaultGroup:!!i,editMode:!e,isGroupLocked:P,isFeatured:v,visibilityModes:[true,true],removable:!e||l.isGroupRemovable(e),sortable:p,isGroupVisible:!e||l.isGroupVisible(e),isEnabled:!i,isLastGroup:o||false,isRendered:!!(a&&a.isRendered),isGroupSelected:false}},getPage:function(){a.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return this._getGroupsFromServer().then(this.loadGroupsFromArray.bind(this))},_getGroupsFromServer:function(){var e=this;return new Promise(function(r,i){e.oPageBuilderService.getGroups().done(function(e){a.end("FLP:DashboardManager.loadPersonalizedGroups");r(e)}).fail(i)})},loadGroupsFromArray:function(e){var r=this;a.start("FLP:DashboardManager.loadGroupsFromArray","loadGroupsFromArray","FLP");a.start("FLP:DashboardManager.getDefaultGroup","getDefaultGroup","FLP");return new Promise(function(i,t){r.oPageBuilderService.getDefaultGroup().done(function(t){a.end("FLP:DashboardManager.getDefaultGroup");if(e.length===0&&t===undefined){i([]);return}var o=0,n,u=[],l,d;e=r._sortGroups(t,e);d=e.findIndex(function(e){return s(e,t)});l=e.length;a.start("FLP:DashboardManager._getGroupModel","_getGroupModel","FLP");for(o=0;o<l;++o){n=r.getPreparedGroupModel(e[o],o===d,o===l-1);n.index=o;u.push(n)}a.end("FLP:DashboardManager._getGroupModel");a.end("FLP:DashboardManager.loadGroupsFromArray");i(u)}).fail(t)})},_sortGroups:function(e,i){var t=0,o=this,n=i.findIndex(function(r){return s(r,e)}),u=[],a,l,d;if(n>-1){i.splice(n,1)}while(t<i.length){l=i[t];d=this.oPageBuilderService.isGroupLocked(l);if(d){u.push(l);i.splice(t,1)}else{t++}}if(!r.last("/core/home/disableSortedLockedGroups")){u.sort(function(e,r){var i=o.oPageBuilderService.getGroupTitle(e).toLowerCase(),t=o.oPageBuilderService.getGroupTitle(r).toLowerCase();return i<t?-1:1})}u.sort(function(e,r){var i=o.oPageBuilderService.isGroupFeatured(e),t=o.oPageBuilderService.isGroupFeatured(r);if(i===t){return 0}else if(i>t){return-1}return 1});a=u;a.push(e);a.push.apply(a,i);return a},addGroupAt:function(e,r,i){var t=this;return new Promise(function(o,n){try{if(r===undefined){t.oPageBuilderService.addGroup(e.title).done(function(r){var n=t.oPageBuilderService.getGroupId(r);p(g.RENAME_GROUP,[null,e.title,n]);o(t.getPreparedGroupModel(r,i,e.isLastGroup,undefined))}).fail(n)}else{t.oPageBuilderService.addGroupAt(e.title,r).done(function(r){var n=t.oPageBuilderService.getGroupId(r);p(g.RENAME_GROUP,[null,e.title,n]);o(t.getPreparedGroupModel(r,i,e.isLastGroup,undefined))}).fail(n)}}catch(e){n()}})},renameGroup:function(e,r,i){var t=this;return new Promise(function(o,n){try{t.oPageBuilderService.setGroupTitle(e.object,r).done(function(){var n=t.oPageBuilderService.getGroupId(e.object);p(g.RENAME_GROUP,[i,r,n]);o()}).fail(n)}catch(e){n()}})},deleteGroup:function(e){var r=this,i=e.object,t=this.oPageBuilderService.getGroupId(i),o=this.oPageBuilderService.getGroupTitle(i);return new Promise(function(e,n){try{r.oPageBuilderService.removeGroup(i).done(function(){p(g.DELETE_GROUP,[o,t]);e()}).fail(n)}catch(e){n()}})},moveGroup:function(e,r,i){var t=this;return new Promise(function(o,n){try{t.oPageBuilderService.moveGroup(e.object,r).done(function(){var r=t.oPageBuilderService.getGroupId(e.object);p(g.MOVE_GROUP,[e.title,i.iFromIndex,i.iToIndex,r]);o()}).fail(n)}catch(e){n()}})},resetGroup:function(e,r){var i=this,t=e.object,o=this.oPageBuilderService.getGroupId(t),n=this.oPageBuilderService.getGroupTitle(t);return new Promise(function(u,a){try{i.oPageBuilderService.resetGroup(t).done(function(a){p(g.RESET_GROUP,[n,o]);u(i.getPreparedGroupModel(a||t,r,e.isLastGroup,undefined))}).fail(a)}catch(e){a()}})},refreshGroup:function(e){var r=this,i="Failed to refresh group with id:"+e+" in the model";return new Promise(function(t){r.oPageBuilderService.getGroups().fail(function(){u.error(i,null,"sap.ushell.components.HomepageManager");t(null)}).done(function(i){var o=null;for(var n=0;n<i.length;n++){if(r.oPageBuilderService.getGroupId(i[n])===e){o=i[n];break}}if(o){r.oPageBuilderService.getDefaultGroup().done(function(i){var n=e===i.getId(),u=r.getPreparedGroupModel(o,n,false,{isRendered:true});t(u)})}else{t(null)}})})},getIndexOfGroup:function(e,r){var i=-1,t=this,o=this.oPageBuilderService.getGroupId(r);e.every(function(e,r){var n=t.oPageBuilderService.getGroupId(e.object);if(n===o){i=r;return false}return true});return i},getOriginalGroupIndex:function(e){var r=this.oPageBuilderService,i=e.object,t=this.oPageBuilderService.getGroups();return new Promise(function(e,o){t.done(function(t){var o;for(var n=0;n<t.length;n++){if(r.getGroupId(t[n])===r.getGroupId(i)){o=n;break}}e(o)}).fail(o)})},moveTile:function(e,r,i,t,o){var n=this,u,a=new Promise(function(a,l){try{var s=n.oPageBuilderService.moveTile(e.object,r.tileIndex,r.newTileIndex,i.object,t.object,o);s.done(function(r){var o=[n.oPageBuilderService.getTileTitle(e.object),n.oPageBuilderService.getGroupTitle(i.object),n.oPageBuilderService.getGroupTitle(t.object),e.uuid];p(g.MOVE_TILE,o);u=r;a(r)});s.fail(l)}catch(e){l()}});return a.then(this._getTileViewAsPromise.bind(this)).then(function(e){return Promise.resolve({content:e,originalTileId:n.oPageBuilderService.getTileId(u),object:u})})},removeTile:function(e,r){var i=this,o=r.object,n=i.oPageBuilderService.getTileTitle(o),u=i.oPageBuilderService.getCatalogTileId(o),a=i.oPageBuilderService.getCatalogTileTitle(o),l=i.oPageBuilderService.getTileId(o),s;s=new Promise(function(r,s){try{i.oPageBuilderService.removeTile(e.object,o).done(function(){t.showLocalizedMessage("tile_deleted_msg",[n,e.title]);p(g.DELETE_TILE,[n||l,u,a,e.title]);r()}).fail(s)}catch(e){s()}});return s},_getTileViewAsPromise:function(e){var r=this,i=new Promise(function(i,t){var o=r.oPageBuilderService.getTileView(e);o.done(i);o.fail(t)});return i},refreshTile:function(e){this.oPageBuilderService.refreshTile(e)},setTileVisible:function(e,r){this.oPageBuilderService.setTileVisible(e,r)},getTileType:function(e){return this.oPageBuilderService.getTileType(e)},getTileSize:function(e){return this.oPageBuilderService.getTileSize(e)},getTileTitle:function(e){return this.oPageBuilderService.getTileTitle(e.object)},getTileId:function(e){return this.oPageBuilderService.getTileId(e)},isLinkPersonalizationSupported:function(e){return this.oPageBuilderService.isLinkPersonalizationSupported(e)},getTileTarget:function(e){return this.oPageBuilderService.getTileTarget(e.object)},getTileView:function(e){return this.oPageBuilderService.getTileView(e.object)},getTileActions:function(e){return this.oPageBuilderService.getTileActions(e)},getFailedLinkView:function(e){var r=this.oPageBuilderService.getCatalogTilePreviewSubtitle(e.object);var t=this.oPageBuilderService.getCatalogTilePreviewTitle(e.object);if(!t&&!r){t=i.i18n.getText("cannotLoadLinkInformation")}return new o({mode:d.LineMode,state:c.Failed,header:t,subheader:r})},getTileModelByCatalogTileId:function(e){u.error("Cannot get tile with id "+e+": Method is not supported")},transformGroupModel:function(){return}});var P=null;return{getInstance:function(e){if(!P){P=new f(e)}return P},destroy:function(){P=null}}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/_HomepageManager/TransientPageOperationAdapter", ["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/base/util/uid","sap/base/Log","sap/m/library"],function(jQuery,e,t,i,r,o,n,l,a,u,s){"use strict";var g=s.GenericTileMode;var d=s.LoadState;var c=e.extend("sap.ushell.components._HomepageManager.TransientPageOperationAdapter.js",{constructor:function(t){e.call(this);this.oPageBuilderService=t;this._createCatalogMap()},_createCatalogMap:function(){if(this.mCatalogTiles){return}var e=this.oPageBuilderService,t=this;this.mCatalogTiles={};this._getAllCatalogTiles().then(function(i){for(var r=0;r<i.length;r++){for(var o=0;o<i[r].length;o++){t.mCatalogTiles[e.getCatalogTileId(i[r][o])]=i[r][o]}}})},getCurrentHiddenGroupIds:function(){return[]},getTileActions:function(e){e.isStub=function(){return true};var t=this.oPageBuilderService.getTileActions(e);delete e.isStub;return t},getPreparedTileModel:function(e,i,r){var n=a(),l,u=[];r=r||e.type;if(r==="link"){u=[new o({mode:g.LineMode})]}l={isCustomTile:false,object:e,originalTileId:n,uuid:n,tileCatalogId:"",content:u,long:false,target:"",debugInfo:null,isTileIntentSupported:true,rgba:"",isLocked:i,showActionsIcon:t.last("/core/home/enableTileActionsIcon"),isLinkPersonalizationSupported:true,navigationMode:undefined};if(r==="card"){l.isCard=true;l.manifest={}}return l},getPreparedGroupModel:function(e,t,i,o){var n=a(),l=e&&e.tiles||[],s=[],g=[],d;for(d=0;d<l.length;++d){var c=l[d],f=c.type.toLowerCase();if(f==="tile"||f==="card"){s.push(this.getPreparedTileModel(l[d],false,f))}else if(f==="link"){g.push(this.getPreparedTileModel(l[d],false,f))}else{u.error("Unknown tile type: '"+f+"'",undefined,"sap.ushell.components.HomepageManager")}}return{title:t&&r.getLocalizedText("my_group")||e&&e.title||o&&o.title||"",object:e,groupId:n,links:g,pendingLinks:[],tiles:s,isDefaultGroup:!!t,editMode:!e,isGroupLocked:false,isFeatured:false,visibilityModes:[true,true],removable:true,sortable:true,isGroupVisible:true,isEnabled:!t,isLastGroup:i||false,isRendered:!!(o&&o.isRendered),isGroupSelected:false}},getPage:function(){return Promise.resolve([this.getPreparedGroupModel(null,false,true)])},addGroupAt:function(e,t,i){var r={title:e.title};return Promise.resolve(this.getPreparedGroupModel({},i,e.isLastGroup,r))},renameGroup:function(){return Promise.resolve()},deleteGroup:function(){return Promise.resolve()},moveGroup:function(){return Promise.resolve()},resetGroup:function(){return Promise.reject("Reset group not supported in transient mode")},refreshGroup:function(){return Promise.reject("Refresh group not supported in transient mode")},getIndexOfGroup:function(){return Promise.resolve(-1)},getOriginalGroupIndex:function(e,t){var i;for(var r=0;r<t.length;r++){if(t[r].groupId===e.groupId){i=r;break}}return Promise.resolve(i)},moveTile:function(e,t,i,r,o){var n=this._findCatalogTile(e.tileCatalogId);return Promise.resolve({content:this._getTileView(n,o),originalTileId:e.uuid,object:{id:e.uuid,type:o,title:this.oPageBuilderService.getCatalogTileTitle(n)}})},removeTile:function(){return Promise.resolve()},_getTileView:function(e,t){if(t==="link"){return new o({mode:g.LineMode,header:this.oPageBuilderService.getCatalogTileTitle(e),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(e)})}return new o({header:this.oPageBuilderService.getCatalogTileTitle(e),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(e),tileContent:new l({content:new n({src:this.oPageBuilderService.getCatalogTilePreviewIcon(e)})})})},refreshTile:function(){return},setTileVisible:function(){return},getTileType:function(e){return e.type},getTileSize:function(){return"1x1"},getTileId:function(e){return e.id},isLinkPersonalizationSupported:function(){return true},getTileTarget:function(e){var t=this._findCatalogTile(e.tileCatalogId);return this.oPageBuilderService.getCatalogTileTargetURL(t)},getTileTitle:function(e){return e.object.title},_getAllCatalogTiles:function(){var e=this.oPageBuilderService;function t(t){t.map(function(t){var i=e.getCatalogId(t)||"";return e.getCatalogTitle(t)||i.split(":").slice(1).join(":")});return Promise.all(t.map(function(t){return e.getCatalogTiles(t)}))}return Promise.resolve(e.getCatalogs()).then(t)},_findCatalogTile:function(e){return this.mCatalogTiles[e]},getTileView:function(e){var t=this._findCatalogTile(e.tileCatalogId),i=this._getTileView(t,e.object.type),r=new jQuery.Deferred;r.resolve(i);return r.promise()},getFailedLinkView:function(e){var t=e.object.title||i.i18n.getText("cannotLoadLinkInformation"),r="";return new o({mode:g.LineMode,state:d.Failed,header:t,subheader:r})},getTileModelByCatalogTileId:function(e,t){var i=this._findCatalogTile(e),r;t=t||"tile";r=this.getPreparedTileModel({},false,t);r.tileCatalogId=e;r.object={id:r.uuid,type:t,title:this.oPageBuilderService.getCatalogTileTitle(i)};var o=this._getTileView(i,t);r.content=[o];return r},transformGroupModel:function(e){var t=this,i;for(var r=0;r<e.length;r++){i=e[r];i.object={};i.tiles.forEach(function(e){var i=e.object;e.tileCatalogId=t.oPageBuilderService.getCatalogTileId(i);e.object={id:e.uuid,type:"tile",title:t.oPageBuilderService.getTileTitle(i)}});i.links.forEach(function(e){var i=e.object;e.tileCatalogId=t.oPageBuilderService.getCatalogTileId(i);e.object={id:e.uuid,type:"link",title:t.oPageBuilderService.getTileTitle(i)}})}return e}});var f;return{getInstance:function(e){if(!f){f=new c(e)}return f},destroy:function(){f=null}}});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/visualizationOrganizer/Component", ["sap/m/library","sap/m/GroupHeaderListItem","sap/ushell/library","sap/ui/core/UIComponent","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/base/Log","sap/ushell/Config","sap/ushell/resources","sap/m/MessageBox"],function(e,t,i,n,a,s,o,r,l,u,g){"use strict";var c=e.ButtonType;var d=i.ContentNodeType;return n.extend("sap.ushell.components.visualizationOrganizer.Component",{metadata:{version:"1.108.12",library:"sap.ushell",dependencies:{libs:["sap.m"]},properties:{pressed:{type:"boolean",group:"Misc",defaultValue:false}}},init:function(){n.prototype.init.apply(this,arguments);this.aPersonalizablePages=[];this.mVizIdInPages=new Map;this.stVizIdInSection=new Set},requestData:function(){var e=!l.last("/core/shell/enablePersonalization")&&l.last("/core/spaces/myHome/enabled");var t=l.last("/core/spaces/myHome/myHomePageId");return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(e){return e.getAllPages()}).then(function(i){if(e){i=i.filter(function(e){return e.identification.id===t})}this.aPersonalizablePages=i.map(function(e){return{id:e.identification.id,title:e.identification.title}});this._fillVizIdMaps(i);return this.aPersonalizablePages}.bind(this))},_fillVizIdMaps:function(e){this.mVizIdInPages=new Map;e.forEach(function(e){Object.keys(e.payload.sections).forEach(function(t){Object.keys(e.payload.sections[t].viz).forEach(function(i){var n=e.payload.sections[t].viz[i].vizId;if(this.mVizIdInPages.has(n)){this.mVizIdInPages.get(n).add(e.identification.id)}else{this.mVizIdInPages.set(n,new Set([e.identification.id]))}}.bind(this))}.bind(this))}.bind(this))},isVizIdPresent:function(e,t){if(t){return this.stVizIdInSection.has(e)}var i=this.mVizIdInPages.get(e);return!!(i&&i.size)},formatPinButtonIcon:function(e,t){return this.isVizIdPresent(decodeURIComponent(e),t)?"sap-icon://accept":"sap-icon://add"},formatPinButtonType:function(e,t){return this.isVizIdPresent(decodeURIComponent(e),t)?c.Emphasized:c.Default},formatPinButtonTooltip:function(e,t){var i=this.isVizIdPresent(decodeURIComponent(e),!!t);if(!t&&i){return u.i18n.getText("EasyAccessMenu_PinButton_Toggled_Tooltip")}if(!t&&!i){return u.i18n.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip")}if(t.sectionID&&i){return u.i18n.getText("VisualizationOrganizer.Button.Tooltip.RemoveFromSection",t.sectionTitle)}if(t.sectionID&&!i){return u.i18n.getText("VisualizationOrganizer.Button.Tooltip.AddToSection",t.sectionTitle)}if(!t.sectionID&&i){return u.i18n.getText("VisualizationOrganizer.Button.Tooltip.RemoveFromPage",t.pageTitle)}return u.i18n.getText("VisualizationOrganizer.Button.Tooltip.AddToPage",t.pageTitle)},onTilePinButtonClick:function(e,t){var i=e.getSource();var n=i.getBindingContext().getProperty();if(i.getBusy()){return Promise.resolve()}if(t){i.setBusy(true);return this._applyOrganizationChangeToSection(i,n,t).then(function(){i.setBusy(false)})}if(this.aPersonalizablePages.length===1){i.setBusy(true);return this._applyChangeToPage(i,n,this.aPersonalizablePages[0]).then(function(){i.setBusy(false)})}return this.toggle(i,n)},open:function(e,t){var i=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover"),n=Promise.resolve();if(!i){n=new Promise(function(e,t){sap.ui.require(["sap/ui/core/Fragment"],function(i){i.load({name:"sap.ushell.components.visualizationOrganizer.VisualizationOrganizerPopover",type:"XML",controller:this}).then(e).catch(t)}.bind(this))}.bind(this)).then(function(e){i=e;i.setModel(new o({pages:[],searchTerm:""}));i.setModel(u.i18nModel,"i18n")})}return n.then(function(){this.oOpenBy=e;this.sVisualizationId=decodeURIComponent(t.id);this.sVisualizationTitle=t.title;this.oVizInfo=t;this.fnResetPopup=this._resetPopup.bind(this);i.attachAfterClose(this.fnResetPopup);return Promise.all([sap.ushell.Container.getServiceAsync("Menu"),sap.ushell.Container.getServiceAsync("Pages")]).then(function(e){var i;var n=e[0];var a=e[1];if(t.isBookmark){i=a._findBookmarks({url:t.url}).then(function(e){var t=e.map(function(e){return e.pageId});return Promise.resolve(new Set(t))})}else{i=this.mVizIdInPages.get(this.sVisualizationId)}return Promise.all([n.getContentNodes([d.Space,d.Page]),i])}.bind(this)).then(function(t){var n=t[0];var a=t[1];var s=!l.last("/core/shell/enablePersonalization")&&l.last("/core/spaces/myHome/enabled");var o=l.last("/core/spaces/myHome/myHomeSpaceId");var r=[];n=this._filterPersonalizableContentNodes(n);n.forEach(function(e){if(s&&e.id!==o){return}e.children.forEach(function(t){if(!this._isPersonalizablePage(t.id)){return}r.push({id:t.id,title:t.label,space:e.label,spaceId:e.id,selected:a&&a.has(t.id)})}.bind(this))}.bind(this));var u=i.getModel();u.setProperty("/pages",r);u.setProperty("/pinnedPages",a);this._updatePagesList();i.openBy(e)}.bind(this))}.bind(this))},_filterPersonalizableContentNodes:function(e){if(!Array.isArray(e)){return[]}return e.reduce(function(e,t){t.children=this._filterPersonalizableContentNodes(t.children);if(t.type===d.HomepageGroup||t.type===d.Space||t.type===d.Page&&t.isContainer){e.push(t)}return e}.bind(this),[])},cancel:function(){var e=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover"),t=this._retrieveChangedPageIds();if(e&&t.deleteFromPageIds.length===0&&t.addToPageIds.length===0){e.close()}else{g.show(u.i18n.getText("VisualizationOrganizer.MessageBox.Description"),{id:"sapUshellVisualizationOrganizerDiscardDialog",title:u.i18n.getText("VisualizationOrganizer.MessageBox.Title"),actions:[u.i18n.getText("VisualizationOrganizer.MessageBox.ActionDiscard"),g.Action.CANCEL],emphasizedAction:u.i18n.getText("VisualizationOrganizer.MessageBox.ActionDiscard"),onClose:function(t){if(t===u.i18n.getText("VisualizationOrganizer.MessageBox.ActionDiscard")){e.close()}}})}},toggle:function(e,t){var i=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");if(i&&i.isOpen()&&i._oOpenBy&&i._oOpenBy.getId()===e.getId()){this.cancel();return Promise.resolve()}return this.open(e,t)},_applyOrganizationChangeToSection:function(e,t,i){return sap.ushell.Container.getServiceAsync("Pages").then(function(n){var a;var s=decodeURIComponent(t.id);var o=t.title;var r=i.pageID;var l=i.sectionID;var u=this._getTextMsgSectionContext(i,s,o);if(this.stVizIdInSection.has(s)){a=n.findVisualization(r,l,s).then(function(e){if(e.length===0){return Promise.resolve()}var t;var i=n.getPageIndex(r);var a=e.sort(function(e,t){return t.sectionIndex-e.sectionIndex});a.forEach(function(e){e.vizIndexes.sort(function(e,t){return t-e})});a.forEach(function(e){var a=e.sectionIndex;e.vizIndexes.forEach(function(e){if(!t){t=n.deleteVisualization(i,a,e)}else{t=t.then(function(){return n.deleteVisualization(i,a,e)})}})});return t}).then(function(){this.stVizIdInSection.delete(s)}.bind(this))}else{a=n.addVisualization(r,l,s).then(function(){this.stVizIdInSection.add(s)}.bind(this))}return a.then(function(){e.getBinding("icon").refresh(true);e.getBinding("type").refresh(true);e.getBinding("tooltip").refresh(true);sap.ui.require(["sap/m/MessageToast"],function(e){e.show(u,{offset:"0 -50"})})})}.bind(this))},_getTextMsgSectionContext:function(e,t,i){var n=e.sectionID;var a=e.sectionTitle;var s=e.pageTitle;if(n&&this.stVizIdInSection.has(t)){return u.i18n.getText("VisualizationOrganizer.MessageToastSectionContextRemove",[i||t,a,s])}if(n&&!this.stVizIdInSection.has(t)){return u.i18n.getText("VisualizationOrganizer.MessageToastSectionContextAdd",[i||t,a,s])}if(!n&&this.stVizIdInSection.has(t)){return u.i18n.getText("VisualizationOrganizer.MessageToastPageRemove",[i||t,s])}if(!n&&!this.stVizIdInSection.has(t)){return u.i18n.getText("VisualizationOrganizer.MessageToastPageAdd",[i||t,s])}},_organizeVisualizations:function(){var e=this._retrieveChangedPageIds();if(this.oVizInfo.isBookmark){return this._applyBookmarkOrganizationChange(e,true)}return this._applyOrganizationChange(e,true)},_applyOrganizationChange:function(e,t){var i=e.addToPageIds.length+e.deleteFromPageIds.length;if(!i){return Promise.resolve()}var n=this.sVisualizationId;var a=this.oOpenBy;var s=new Set;var o;var r=sap.ushell.Container.getServiceAsync("Pages").then(function(e){o=e});e.deleteFromPageIds.forEach(function(e){if(!s.has(e)){s.add(e);r=r.then(function(){return o.findVisualization(e,null,n).then(function(e){var t=[],i,n,a;for(var s=e.length-1;s>=0;s--){n=e[s];i=o.getPageIndex(n.pageId);for(var r=n.vizIndexes.length-1;r>=0;r--){a=n.vizIndexes[r];t.push(o.deleteVisualization(i,n.sectionIndex,a))}}return Promise.all(t)})})}this.mVizIdInPages.get(n).delete(e)}.bind(this));e.addToPageIds.forEach(function(e){r=r.then(function(){return o.addVisualization(e,null,n)});if(this.mVizIdInPages.has(n)){this.mVizIdInPages.get(n).add(e)}else{this.mVizIdInPages.set(n,new Set([e]))}}.bind(this));return r.then(function(){if(a){a.getBinding("icon").refresh(true);a.getBinding("type").refresh(true);a.getBinding("tooltip").refresh(true)}if(t){sap.ui.require(["sap/m/MessageToast"],function(e){e.show(u.i18n.getText("VisualizationOrganizer.MessageToast"))})}})},_resetPopup:function(e){var t=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover"),i=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSpacesList"),n=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSearch"),a=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSelectedPages");t.detachAfterClose(this.fnResetPopup);n.setValue("");a.setType(c.Default);i.getBinding("items").filter(null);i.removeSelections();delete this.fnResetPopup;delete this.sVisualizationId;delete this.sVisualizationTitle},pagePressed:function(e){this._changeSelectionForAllPagesWithTheSamePageId(e.getSource())},onSelectionChange:function(e){var t=e.getParameter("listItem"),i=e.getParameter("selected");this._changeSelectionForAllPagesWithTheSamePageId(t,i)},_changeSelectionForAllPagesWithTheSamePageId:function(e,t){var i=e.getModel(),n=e.getBindingContext(),a=n.getProperty("id"),s=t!==undefined?t:!n.getProperty("selected");var o=i.getProperty("/pages");for(var r=0;r<o.length;r++){var l=o[r];if(l.id===a){l.selected=s}}i.setProperty("/pages",o)},_onSearch:function(e){var t=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSelectedPages");var i=this.getPressed();if(e.sId==="press"){i=!i;this.setPressed(i);t.setPressed(i)}this._updatePagesList()},_updatePagesList:function(){var e=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSpacesList");var t=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSearch");var i=e.getBinding("items");var n=t.getValue();var o=this.getPressed();if(o){i.filter(new a({filters:[new a({filters:[new a({path:"title",operator:s.Contains,value1:n}),new a({path:"selected",operator:s.EQ,value1:o})],and:true}),new a({filters:[new a({path:"space",operator:s.Contains,value1:n}),new a({path:"selected",operator:s.EQ,value1:o})],and:true})],and:false}))}else{i.filter(new a({filters:[new a({path:"title",operator:s.Contains,value1:n}),new a({path:"space",operator:s.Contains,value1:n})],and:false}))}if(i.getLength()===0){e.setNoDataText(u.i18n.getText(n?"VisualizationOrganizer.PagesList.NoResultsText":"VisualizationOrganizer.PagesList.NoDataText"))}},loadSectionContext:function(e){this.stVizIdInSection.clear();if(!e||!e.pageID){return Promise.resolve(null)}return sap.ushell.Container.getServiceAsync("Pages").then(function(t){var i=decodeURIComponent(e.pageID);var n=e.sectionID?decodeURIComponent(e.sectionID):"";return t.loadPage(i).then(function(e){var i=t.getModel().getProperty(e);var a=this._createSectionContext(i,n);return a}.bind(this)).catch(function(){r.warning(i+" cannot be loaded. Please, check the id of the page.");return Promise.resolve(null)})}.bind(this))},_createSectionContext:function(e,t){var i=e.sections;var n;if(t){n=i.find(function(e){return e.id===t});this._initVizIdsInSection(n);return{pageID:e.id,sectionID:t,pageTitle:e.title,sectionTitle:n.title}}i.forEach(function(e){this._initVizIdsInSection(e)}.bind(this));return{pageID:e.id,sectionID:t,pageTitle:e.title}},_initVizIdsInSection:function(e){e.visualizations.forEach(function(e){this.stVizIdInSection.add(e.vizId)}.bind(this))},getPersonalizablePages:function(){return this.aPersonalizablePages},_isPersonalizablePage:function(e){var t=this.aPersonalizablePages.findIndex(function(t){return t.id===e});return t>-1},_retrieveChangedPageIds:function(){var e=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSpacesList"),t=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSearch"),i=e.getModel(),n=i.getProperty("/pinnedPages")||new Set;e.getBinding("items").filter(null);var a=e.getItems().filter(function(e){return e.isA("sap.m.StandardListItem")});t.fireSearch();var s={},o=[],r=[];a.forEach(function(e){var t=e.getBindingContext().getProperty("id");if(!s[t]){s[t]=true;if(e.getSelected()&&!n.has(t)){o.push(t)}else if(!e.getSelected()&&n.has(t)){r.push(t)}}});return{addToPageIds:o,deleteFromPageIds:r}},okay:function(){var e=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");if(e.getBusy()){return}e.setBusy(true);this._organizeVisualizations().then(function(){e.setBusy(false);e.close()}).catch(function(e){r.error("Could not save the selected pages on the VisualizationOrganizerPopover",e)})},onHierarchyAppsPinButtonClick:function(e,t){var i=e.getSource();var n=i.getParent().getBinding("title").getContext().getObject();if(i.getBusy()){return Promise.resolve(false)}n.isBookmark=true;n.title=n.text;if(t){i.setBusy(true);return this._applyBookmarkTileChangeToSection(n,t).then(function(){i.setBusy(false);return Promise.resolve(true)})}if(this.aPersonalizablePages.length===1){i.setBusy(true);return this._applyChangeToPage(i,n,this.aPersonalizablePages[0]).then(function(){i.setBusy(false);return Promise.resolve(true)})}return new Promise(function(e){this.toggle(i,n).then(function(){var t=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");if(t&&t.isOpen()){t.attachEventOnce("afterClose",function(){e(true)})}else{e(false)}})}.bind(this))},_applyBookmarkOrganizationChange:function(e,t){var n=e.addToPageIds.length+e.deleteFromPageIds.length;if(!n){return Promise.resolve()}var a=this.oVizInfo;var s=new Set;var o,r;var l=Promise.all([sap.ushell.Container.getServiceAsync("Bookmark"),sap.ushell.Container.getServiceAsync("Pages")]).then(function(e){o=e[0];r=e[1];return Promise.resolve()});e.deleteFromPageIds.forEach(function(e){if(!s.has(e)){s.add(e);l=l.then(function(){return r.deleteBookmarks({url:a.url},e)})}});e.addToPageIds.forEach(function(e){l=l.then(function(){return new Promise(function(t,n){var s={url:a.url,title:a.text,subtitle:a.subtitle,icon:a.icon};var r={type:i.ContentNodeType.Page,id:e,isContainer:true};o.addBookmark(s,r).done(t).fail(n)})})});return l.then(function(){if(t){sap.ui.require(["sap/m/MessageToast"],function(e){e.show(u.i18n.getText("VisualizationOrganizer.MessageToast"))})}})},_applyBookmarkTileChangeToSection:function(e,t){return sap.ushell.Container.getServiceAsync("Pages").then(function(i){var n,a;var s=e.url;var o=e.title;var r=t.pageID;var l=t.sectionID;if(e.bookmarkCount>0){a=u.i18n.getText("VisualizationOrganizer.MessageToastSectionContextRemove",[o,t.sectionTitle,t.pageTitle]);n=i.deleteBookmarks({url:s},r,l)}else{var g={url:s,title:e.text,subtitle:e.subtitle,icon:e.icon};a=u.i18n.getText("VisualizationOrganizer.MessageToastSectionContextAdd",[o,t.sectionTitle,t.pageTitle]);n=i.addBookmarkToPage(r,g,l)}return n.then(function(){sap.ui.require(["sap/m/MessageToast"],function(e){e.show(a,{offset:"0 -50"})})})})},updateBookmarkCount:function(e,t){return sap.ushell.Container.getServiceAsync("Pages").then(function(i){var n=e.map(function(e){return i._findBookmarks({url:e.url}).then(function(i){if(t){i=i.filter(function(e){return t.pageID===e.pageId&&t.sectionID===e.sectionId})}e.bookmarkCount=i.length;return e})});return Promise.all(n)})},formatBookmarkPinButtonTooltip:function(e,t){var i,n;if(t){n=t.sectionTitle;if(e>0){i="VisualizationOrganizer.Button.Tooltip.RemoveFromSection"}else{i="VisualizationOrganizer.Button.Tooltip.AddToSection"}}else if(e>0){i="EasyAccessMenu_PinButton_Toggled_Tooltip"}else{i="EasyAccessMenu_PinButton_UnToggled_Tooltip"}return u.i18n.getText(i,n)},_applyChangeToPage:function(e,t,i){var n=decodeURIComponent(t.id);var a=t.title;var s=i.id;var o=t.isBookmark?t.bookmarkCount>0:this.isVizIdPresent(n);var r={addToPageIds:o?[]:[s],deleteFromPageIds:o?[s]:[]};var l=u.i18n.getText(o?"VisualizationOrganizer.MessageToastPageRemove":"VisualizationOrganizer.MessageToastPageAdd",[a||n,i.title]);this.oVizInfo=t;this.sVisualizationId=n;var g;if(t.isBookmark){g=this._applyBookmarkOrganizationChange(r,false)}else{g=this._applyOrganizationChange(r,false)}return g.then(function(){e.getBinding("icon").refresh(true);e.getBinding("type").refresh(true);e.getBinding("tooltip").refresh(true);sap.ui.require(["sap/m/MessageToast"],function(e){e.show(l,{offset:"0 -50"})})})},groupBySpace:function(e){return{key:e.getProperty("spaceId"),title:e.getProperty("space")}},getGroupHeader:function(e){return new t({title:e.title})},exit:function(){var e=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");if(e){e.destroy()}}})});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/appfinder/AppBox", ["sap/ui/core/Control","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/appfinder/AppBoxRenderer"],function(e,t,s,o,i,n){"use strict";var p=e.extend("sap.ushell.ui.appfinder.AppBox",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Misc",defaultValue:null},url:{type:"string",group:"Misc",defaultValue:null},navigationMode:{type:"string",group:"Misc",defaultValue:null}},aggregations:{pinButton:{type:"sap.m.Button",multiple:false}},events:{press:{},afterRendering:{}}},renderer:n});p.prototype.init=function(){this._oIcon=(new t).addStyleClass("sapUshellAppBoxIcon")};p.prototype.destroy=function(){e.prototype.destroy.apply(this,arguments);this._oIcon.destroy()};p.prototype.onAfterRendering=function(){var e=this.$("title"),t=this.$("subTitle");var s=parseInt(e.css("lineHeight"),10),o=e.height();if(o/s>1){e.addClass("sapUshellAppBoxHeaderElementTwoLines");t.addClass("sapUshellAppBoxHeaderElementOneLine")}else{e.addClass("sapUshellAppBoxHeaderElementOneLine");t.addClass("sapUshellAppBoxHeaderElementTwoLines")}this.fireAfterRendering()};p.prototype.setIcon=function(e){this.setProperty("icon",e);this._oIcon.setSrc(s.isIconURI(e)?e:null)};p.prototype._getAriaLabel=function(){var e=this.getTitle(),t=this.getSubtitle(),s=this.getNavigationMode();if(t){e+=" "+t}if(s){e+=" "+i.i18n.getText(s+"NavigationMode")}return e};p.prototype.onclick=p.prototype.firePress;p.prototype.onsapspace=function(e){e.preventDefault();this.firePress(e)};p.prototype.onsapenter=p.prototype.onsapspace;return p});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/appfinder/AppBoxRenderer", ["sap/ushell/resources"],function(e){"use strict";var t={apiVersion:2};t.render=function(t,i){var a=i.getParent(),s=[];if(a&&a.getAppBoxesContainer&&a.getCustomTilesContainer){s=a.getAppBoxesContainer().concat(a.getCustomTilesContainer())}var l=s.filter(function(e){return e.getVisible()}),n=l.indexOf(i)>-1?l.indexOf(i)+1:"";t.openStart("li",i);t.class("sapUshellAppBox");t.attr("aria-posinset",n);t.attr("aria-setsize",l.length);t.attr("aria-label",i._getAriaLabel());t.attr("aria-roledescription",e.i18n.getText("tile"));t.attr("aria-describedby",i.getId());t.openEnd();t.openStart("div");t.class("sapUshellAppBoxInner");t.openEnd();var o=i.getIcon();if(o){t.renderControl(i._oIcon)}t.openStart("div");if(o){t.class("sapUshellAppBoxHeader")}else{t.class("sapUshellAppBoxHeaderNoIcon")}t.openEnd();t.openStart("div",i.getId()+"-title");t.class("sapUshellAppBoxTitle");t.openEnd();t.text(i.getTitle());t.close("div");if(i.getSubtitle()){t.openStart("div",i.getId()+"-subTitle");t.class("sapUshellAppBoxSubtitle");t.openEnd();t.text(i.getSubtitle());t.close("div")}t.close("div");t.close("div");t.openStart("div");t.class("sapUshellAppBoxActionsArea");if(i.getTitle){t.attr("role","toolbar");t.attr("aria-label",i.getTitle())}t.openEnd();t.renderControl(i.getPinButton());t.close("div");t.close("li")};return t},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/appfinder/PinButton", ["sap/m/Button","sap/ushell/library","sap/ushell/ui/appfinder/PinButtonRenderer"],function(e,t,n){"use strict";var r=e.extend("sap.ushell.ui.appfinder.PinButton",{metadata:{library:"sap.ushell",properties:{selected:{type:"boolean",group:"Appearance",defaultValue:false}}},renderer:n});r.prototype.onAfterRendering=function(){this.$("inner").toggleClass("sapUshellPinSelected",this.getSelected())};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/appfinder/PinButtonRenderer", ["sap/m/ButtonRenderer","sap/ui/core/Renderer"],function(e,r){"use strict";var t=r.extend(e);t.apiVersion=2;t.renderAccessibilityAttributes=function(e,r,t){t.pressed=r.getSelected()};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/AnchorItem", ["sap/ui/core/Control","sap/ushell/library","sap/ushell/ui/launchpad/AnchorItemRenderer"],function(e){"use strict";var t=e.extend("sap.ushell.ui.launchpad.AnchorItem",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},selected:{type:"boolean",group:"Misc",defaultValue:false},groupId:{type:"string",group:"Misc",defaultValue:null},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},helpId:{type:"string",group:"Misc",defaultValue:null},index:{type:"int",group:"Misc",defaultValue:null},isGroupVisible:{type:"boolean",group:"Misc",defaultValue:true},isGroupRendered:{type:"boolean",group:"Misc",defaultValue:false},isGroupDisabled:{type:"boolean",group:"Misc",defaultValue:false},locked:{type:"boolean",group:"Misc",defaultValue:false},posinset:{type:"int",group:"Misc",defaultValue:0},setsize:{type:"int",group:"Misc",defaultValue:0}},events:{press:{},afterRendering:{},visibilityChanged:{}}}});t.prototype.init=function(){this.addDelegate({onAfterRendering:this.fireAfterRendering.bind(this),onclick:this.firePress.bind(this),onsapenter:this.firePress.bind(this),onsapspace:function(e){e.preventDefault();this.firePress()}.bind(this)})};t.prototype.setVisible=function(e,t){this.setProperty("visible",e,t);this.fireVisibilityChanged();return this};return t});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/AnchorItemRenderer", function(){"use strict";var e={apiVersion:2,render:function(e,t){var s=t.getGroupId(),a=t.getSelected();e.openStart("li",t);e.attr("modelGroupId",s);e.attr("role","tab");e.attr("aria-selected",a);e.class("sapUshellAnchorItem");if(t.getSetsize()){e.attr("aria-posinset",t.getPosinset());e.attr("aria-setsize",t.getSetsize())}if(t.getHelpId()){if(t.getDefaultGroup()){e.class("help-id-homeAnchorNavigationBarItem")}else{e.class("help-id-anchorNavigationBarItem")}e.attr("data-help-id",t.getHelpId())}if(a){e.attr("tabindex","0");e.class("sapUshellAnchorItemSelected")}if(!t.getVisible()||!t.getIsGroupVisible()){e.class("sapUshellShellHidden")}e.openEnd();e.openStart("div",t.getId()+"-inner");e.class("sapUshellAnchorItemInner");if(t.getIsGroupDisabled()){e.class("sapUshellAnchorItemDisabled")}e.openEnd();e.text(t.getTitle());e.close("div");e.close("li")}};return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/AnchorNavigationBar", ["sap/m/Bar","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/m/Button","sap/ushell/resources","sap/ushell/library","./AnchorNavigationBarRenderer"],function(t,e,jQuery,s,o,i){"use strict";var r=t.extend("sap.ushell.ui.launchpad.AnchorNavigationBar",{metadata:{library:"sap.ushell",properties:{accessibilityLabel:{type:"string",defaultValue:null},selectedItemIndex:{type:"int",group:"Misc",defaultValue:0},overflowEnabled:{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{groups:{type:"sap.ushell.ui.launchpad.AnchorItem",multiple:true,singularName:"group"}},events:{afterRendering:{},itemPress:{}}}});r.prototype.init=function(){e.resize.attachHandler(this.reArrangeNavigationBarElements,this);this.bGroupWasPressed=false;this.bIsRtl=sap.ui.getCore().getConfiguration().getRTL();this._bIsRenderedCompletely=false;this.fnNavigationBarItemsVisibility=this.setNavigationBarItemsVisibility.bind(this);this.fnAdjustVisibleAnchorItemsAccessibility=this.adjustVisibleAnchorItemsAccessibility.bind(this)};r.prototype.onBeforeRendering=function(){var t=window.document.getElementsByClassName("sapUshellAnchorNavigationBarItemsScroll")[0];if(t){t.removeEventListener("scroll",this.fnNavigationBarItemsVisibility)}};r.prototype.onAfterRendering=function(){if(this._bIsRenderedCompletely){this.reArrangeNavigationBarElements();this.adjustVisibleAnchorItemsAccessibility();var t=window.document.getElementsByClassName("sapUshellAnchorNavigationBarItemsScroll")[0];if(t){t.addEventListener("scroll",this.fnNavigationBarItemsVisibility)}}};r.prototype.openOverflowPopup=function(){var t=jQuery(".sapUshellAnchorItemOverFlow").hasClass("sapUshellAnchorItemOverFlowOpen");if(this.oOverflowButton&&!t){this.oOverflowButton.firePress()}};r.prototype.closeOverflowPopup=function(){if(this.oPopover){this.oPopover.close()}};r.prototype.reArrangeNavigationBarElements=function(){this.anchorItems=this.getVisibleGroups();var t=this.getSelectedItemIndex()||0;if(this.anchorItems.length){this.adjustItemSelection(t)}if(e.system.phone&&this.anchorItems.length){this.anchorItems.forEach(function(t){t.setIsGroupVisible(false)});this.anchorItems[this.getSelectedItemIndex()].setIsGroupVisible(true)}else{setTimeout(function(){this.setNavigationBarItemsVisibility()}.bind(this),200)}};r.prototype._scrollToGroupByGroupIndex=function(t,s){var o=e.system.tablet?".sapUshellAnchorNavigationBarItemsScroll":".sapUshellAnchorNavigationBarItems";var i=document.documentElement.querySelector(o);var r=this.anchorItems[t].getDomRef();if(i&&r){var l=i.getBoundingClientRect();var n=r.getBoundingClientRect();var h=jQuery(i);var a=this.bIsRtl?h.scrollLeftRTL():i.scrollLeft;var f;if(n.left<l.left){f=n.left-l.left-16}else if(n.right>l.right){f=n.right-l.right+16}if(f){if(this.bIsRtl){h.scrollLeftRTL(a+f)}else{i.scrollLeft=a+f}}this.setNavigationBarItemsVisibility()}};r.prototype.setNavigationBarItemsVisibility=function(){if(!e.system.phone){this.setNavigationBarItemsVisibilityOnDesktop()}else if(this.anchorItems&&this.anchorItems.length>0){this.oOverflowButton.removeStyleClass("sapUshellShellHidden");var t=this.getSelectedItemIndex()||0;if(this.oPopover){this.oPopover.setTitle(this.anchorItems[t].getTitle())}}};r.prototype.setNavigationBarItemsVisibilityOnDesktop=function(){if(this.anchorItems.length&&(!this.isMostRightAnchorItemVisible()||!this.isMostLeftAnchorItemVisible())){this.oOverflowButton.removeStyleClass("sapUshellShellHidden")}else if(this.oOverflowButton){this.oOverflowButton.addStyleClass("sapUshellShellHidden")}if(this.bIsRtl){if(this.anchorItems.length&&!this.isMostLeftAnchorItemVisible()){this.oOverflowRightButton.removeStyleClass("sapUshellShellHidden")}else if(this.oOverflowRightButton){this.oOverflowRightButton.addStyleClass("sapUshellShellHidden")}if(this.anchorItems.length&&!this.isMostRightAnchorItemVisible()){this.oOverflowLeftButton.removeStyleClass("sapUshellShellHidden")}else if(this.oOverflowLeftButton){this.oOverflowLeftButton.addStyleClass("sapUshellShellHidden")}}else{if(this.anchorItems.length&&!this.isMostLeftAnchorItemVisible()){this.oOverflowLeftButton.removeStyleClass("sapUshellShellHidden")}else if(this.oOverflowLeftButton){this.oOverflowLeftButton.addStyleClass("sapUshellShellHidden")}if(this.anchorItems.length&&!this.isMostRightAnchorItemVisible()){this.oOverflowRightButton.removeStyleClass("sapUshellShellHidden")}else if(this.oOverflowRightButton){this.oOverflowRightButton.addStyleClass("sapUshellShellHidden")}}};r.prototype.adjustItemSelection=function(t){setTimeout(function(){if(this.anchorItems&&this.anchorItems.length){this.anchorItems.forEach(function(t){t.setSelected(false)});if(t>=0&&t<this.anchorItems.length){this.anchorItems[t].setSelected(true);this._scrollToGroupByGroupIndex(t)}}}.bind(this),50)};r.prototype.isMostRightAnchorItemVisible=function(){var t=jQuery(".sapUshellAnchorNavigationBarInner"),e=!s(t)?t.width():0,o=!s(t)&&t.offset()?t.offset().left:0,i=this.bIsRtl?this.anchorItems[0].getDomRef():this.anchorItems[this.anchorItems.length-1].getDomRef(),r=!s(i)?jQuery(i).width():0,l;if(r<0){r=80}l=i&&jQuery(i).offset()?jQuery(i).offset().left:0;return Math.ceil(l)+r<=o+e};r.prototype.isMostLeftAnchorItemVisible=function(){var t=jQuery(".sapUshellAnchorNavigationBarInner"),e=!s(t)&&t.offset()&&t.offset().left||0,o=this.bIsRtl?this.anchorItems[this.anchorItems.length-1].getDomRef():this.anchorItems[0].getDomRef(),i=!s(o)&&jQuery(o).offset()?jQuery(o).offset().left:0;return Math.ceil(i)>=e};r.prototype.setSelectedItemIndex=function(t){if(t!==undefined){this.setProperty("selectedItemIndex",t,true)}};r.prototype.setOverflowEnabled=function(t){this.setProperty("overflowEnabled",t);if(this.oOverflowButton){this.oOverflowButton.setEnabled(t)}};r.prototype._getOverflowLeftArrowButton=function(){if(!this.oOverflowLeftButton){this.oOverflowLeftButton=new o({icon:"sap-icon://slim-arrow-left",tooltip:i.i18n.getText("scrollToTop"),press:function(){this._scrollToGroupByGroupIndex(0)}.bind(this)}).addStyleClass("sapUshellShellHidden");this.oOverflowLeftButton._bExcludeFromTabChain=true}return this.oOverflowLeftButton};r.prototype._getOverflowRightArrowButton=function(){if(!this.oOverflowRightButton){this.oOverflowRightButton=new o({icon:"sap-icon://slim-arrow-right",tooltip:i.i18n.getText("scrollToEnd"),press:function(){this._scrollToGroupByGroupIndex(this.anchorItems.length-1)}.bind(this)}).addStyleClass("sapUshellShellHidden");this.oOverflowRightButton._bExcludeFromTabChain=true}return this.oOverflowRightButton};r.prototype._getOverflowButton=function(){if(!this.oOverflowButton){this.oOverflowButton=new o("sapUshellAnchorBarOverflowButton",{icon:"sap-icon://slim-arrow-down",tooltip:i.i18n.getText("more_groups"),enabled:this.getOverflowEnabled(),press:function(){this._togglePopover()}.bind(this)}).addStyleClass("sapUshellShellHidden")}return this.oOverflowButton};r.prototype._togglePopover=function(){sap.ui.require(["sap/m/Popover","sap/ui/model/Filter","sap/ushell/ui/launchpad/GroupListItem","sap/m/List","sap/m/library"],function(t,e,s,o,i){var r=i.ListMode;if(!this.oPopover){this.oList=new o({mode:r.SingleSelectMaster,rememberSelections:false,selectionChange:function(t){this.fireItemPress({group:t.getParameter("listItem")});this.oPopover.close()}.bind(this)});this.oPopover=new t("sapUshellAnchorBarOverflowPopover",{showArrow:false,showHeader:false,placement:"Left",content:[this.oList],horizontalScrolling:false,beforeOpen:function(){var t=jQuery(".sapUshellAnchorItemOverFlow"),e=sap.ui.getCore().getConfiguration().getRTL(),s=e?-1*t.outerWidth():t.outerWidth();this.setOffsetX(s)},afterClose:function(){jQuery(".sapUshellAnchorItemOverFlow").removeClass("sapUshellAnchorItemOverFlowOpen");jQuery(".sapUshellAnchorItemOverFlow").toggleClass("sapUshellAnchorItemOverFlowPressed",false)}}).addStyleClass("sapUshellAnchorItemsPopover").addStyleClass("sapContrastPlus")}if(this.oPopover.isOpen()){this.oPopover.close()}else{this.anchorItems=this.getVisibleGroups();this.oList.setModel(this.getModel());var l=this.getModel().getProperty("/tileActionModeActive");var n=new e("","EQ","a");n.fnTest=function(t){if(!t.visibilityModes[l?1:0]){return false}return t.isGroupVisible||l};this.oList.bindItems({path:"/groups",template:new s({title:"{title}",groupId:"{groupId}",index:"{index}"}),filters:[n]});var h=jQuery(".sapUshellAnchorItemSelected").attr("id");var a=sap.ui.getCore().byId(h);this.oList.getItems().forEach(function(t){if(a.mProperties.groupId===t.mProperties.groupId){t.addStyleClass("sapUshellAnchorPopoverItemSelected")}else{t.addStyleClass("sapUshellAnchorPopoverItemNonSelected")}});jQuery(".sapUshellAnchorItemOverFlow").toggleClass("sapUshellAnchorItemOverFlowPressed",true);this.oPopover.openBy(this.oOverflowButton)}}.bind(this))};r.prototype.getVisibleGroups=function(){return this.getGroups().filter(function(t){return t.getVisible()})};r.prototype._setRenderedCompletely=function(t){this._bIsRenderedCompletely=t};r.prototype.handleAnchorItemPress=function(t){this.bGroupWasPressed=true;this.fireItemPress({group:t.getSource(),manualPress:true})};r.prototype.adjustVisibleAnchorItemsAccessibility=function(){var t=this.getVisibleGroups(),e=t.length;t.forEach(function(t,s){t.setPosinset(s+1);t.setSetsize(e)})};r.prototype.addGroup=function(t,e){t.attachVisibilityChanged(this.fnAdjustVisibleAnchorItemsAccessibility);return this.addAggregation("groups",t,e)};r.prototype.insertGroup=function(t,e,s){t.attachVisibilityChanged(this.fnAdjustVisibleAnchorItemsAccessibility);return this.insertAggregation("groups",t,e,s)};r.prototype.removeGroup=function(t,e){t.detachVisibilityChanged(this.fnAdjustVisibleAnchorItemsAccessibility);return this.removeAggregation("groups",t,e)};r.prototype.exit=function(){if(this.oOverflowLeftButton){this.oOverflowLeftButton.destroy()}if(this.oOverflowRightButton){this.oOverflowRightButton.destroy()}if(this.oOverflowButton){this.oOverflowButton.destroy()}if(this.oPopover){this.oPopover.destroy()}if(t.prototype.exit){t.prototype.exit.apply(this,arguments)}};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/AnchorNavigationBarRenderer", ["sap/ushell/resources"],function(e){"use strict";var t={apiVersion:2};t.render=function(t,o){t.openStart("div",o);t.attr("data-sap-ui-customfastnavgroup","true");t.class("sapUshellAnchorNavigationBar");t.openEnd();t.openStart("div");t.class("sapUshellAnchorNavigationBarInner");t.openEnd();if(o.getGroups().length>0){o._setRenderedCompletely(true);t.openStart("div");t.class("sapUshellAnchorLeftOverFlowButton");t.accessibilityState(o._getOverflowLeftArrowButton(),{hidden:true});t.openEnd();t.renderControl(o._getOverflowLeftArrowButton());t.close("div");t.openStart("div");t.class("sapUshellAnchorNavigationBarItems");t.openEnd();t.openStart("ul");t.class("sapUshellAnchorNavigationBarItemsScroll");t.accessibilityState(o,{role:"tablist",label:e.i18n.getText("AnchorNavigationBar_AriaLabel")});t.openEnd();this.renderAnchorNavigationItems(t,o);t.close("ul");t.close("div");t.openStart("div");t.class("sapUshellAnchorRightOverFlowButton");t.accessibilityState(o._getOverflowRightArrowButton(),{hidden:true});t.openEnd();t.renderControl(o._getOverflowRightArrowButton());t.close("div");t.openStart("div");t.class("sapUshellAnchorItemOverFlow");t.accessibilityState(o._getOverflowButton(),{hidden:true});t.openEnd();t.renderControl(o._getOverflowButton());t.close("div")}t.close("div");t.close("div")};t.renderAnchorNavigationItems=function(e,t){t.getGroups().forEach(function(t){e.renderControl(t)})};t.shouldAddIBarContext=function(){return false};return t},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/CatalogEntryContainer", ["sap/base/Log","sap/ui/core/Control","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/TileContainerUtils"],function(e,t,i,n,a){"use strict";var s=t.extend("sap.ushell.ui.launchpad.CatalogEntryContainer",{metadata:{library:"sap.ushell",properties:{header:{type:"string",group:"Appearance",defaultValue:null},catalogSearchTerm:{type:"string",group:"Appearance",defaultValue:null},catalogTagSelector:{type:"object",group:"Appearance",defaultValue:null}},aggregations:{appBoxesContainer:{type:"sap.ushell.ui.appfinder.AppBox",multiple:true},customTilesContainer:{type:"sap.ushell.ui.launchpad.Tile",multiple:true}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t);e.attr("aria-labeledby",t.getId()+"-title");e.attr("role","group");e.class("sapUshellTileContainer");e.class("sapUshellCatalogTileContainer");e.openEnd();e.openStart("div");e.class("sapUshellTileContainerContent");e.attr("tabindex","-1");e.openEnd();var i=t.getHeader();if(i){if(n.i18n.hasText(i)){i=n.i18n.getText(i)}e.openStart("div");e.class("sapUshellTileContainerHeader");e.class("sapUshellCatalogTileContainerHeader");e.attr("id",t.getId()+"-groupheader");e.openEnd();e.openStart("div");e.class("sapUshellCatalogTileContainerHeaderInner");e.attr("id",t.getId()+"-title");e.openEnd();e.openStart("h2");e.class("sapUshellContainerTitle");e.class("sapUshellCatalogContainerTitle");e.attr("title",i);e.attr("aria-level","2");e.openEnd();e.text(i);e.close("h2");e.close("div");e.close("div")}var a=t.getAppBoxesContainer();var s;var l=t.getCustomTilesContainer();if(a.length>0||l.length>0){e.openStart("ul");e.class("sapUshellInner");e.openEnd();for(s=0;s<a.length;s++){e.renderControl(a[s])}if(a.length&&l.length){e.voidStart("br");e.voidEnd()}for(s=0;s<l.length;s++){e.renderControl(l[s])}e.close("ul")}e.close("div");e.close("div")}}});s.prototype.setAfterHandleElements=function(e){this.onAfterHandleElements=e};s.prototype.onAfterUpdate=function(e){this.fnCallback=e};s.prototype.updateAggregation=function(t){e.debug("Updating CatalogEntryContainer. Reason: ",t)};s.prototype.addNewItem=function(e,t){if(this.catalogState[t]!=="full"&&this.getAllocatedUnits&&!this.getAllocatedUnits()){this.catalogState[t]="partial";return false}if(t==="customTilesContainer"){var i=e.getObject&&e.getObject().src;if(i!==undefined){var n;if(i.Chip!==undefined&&i.Chip.getContract!==undefined){n=i.Chip.getContract("preview")}else if(i.getContract!==undefined){n=i.getContract("preview")}if(n!==undefined){n.setEnabled(true)}}sap.ushell.Container.getServiceAsync("LaunchPage").then(function(t){t.getCatalogTileViewControl(e.getProperty("src")).done(function(t){e.getProperty("content")[0]=t})})}var s=a.createNewItem.bind(this)(e,t);a.addNewItem.bind(this)(s,t);var l=t==="appBoxesContainer"?this.getAppBoxesContainer():this.getCustomTilesContainer(),r=e.getPath();this.indexingMaps[t].onScreenPathIndexMap[r]={aItemsRefrenceIndex:l.length-1,isVisible:true};return true};s.prototype.getNumberResults=function(){return{nAppboxes:this.nNumberOfVisibileElements.appBoxesContainer,nCustom:this.nNumberOfVisibileElements.customTilesContainer}};s.prototype.handleElements=function(e){var t=e,i=this.mBindingInfos[t].binding,n=i.getContexts(),s,l,r;if(!this.catalogState){this.catalogState={}}if(!this.catalogState[e]){this.catalogState[e]="start"}if(!this.indexingMaps){this.indexingMaps={}}if(!this.nNumberOfVisibileElements){this.nNumberOfVisibileElements=[]}if(!this.nNumberOfVisibileElements.customTilesContainer){this.nNumberOfVisibileElements.customTilesContainer=0}if(!this.nNumberOfVisibileElements.appBoxesContainer){this.nNumberOfVisibileElements.appBoxesContainer=0}if(!this.filters){this.filters={}}s=t==="appBoxesContainer"?this.getAppBoxesContainer():this.getCustomTilesContainer();this.indexingMaps[t]=a.indexOnScreenElements(s,false);r=a.markVisibleOnScreenElementsSearchCatalog(n,this.indexingMaps[t],true);if(a.createMissingElementsInOnScreenElementsSearchCatalog(this.indexingMaps[t],n,r,this.addNewItem.bind(this),s,this.filters[t],t,this.processFiltering.bind(this))){if(this.getAllocatedUnits&&this.getAllocatedUnits()){this.catalogState[e]="full"}}s=t==="appBoxesContainer"?this.getAppBoxesContainer():this.getCustomTilesContainer();l=a.showHideTilesAndHeaders(this.indexingMaps[t],s);this.nNumberOfVisibileElements[t]=l.nCountVisibElelemnts;if(this.fnCallback){this.fnCallback(this)}if(this.onAfterHandleElements){this.onAfterHandleElements(this)}};s.prototype.processFiltering=function(e,t){var i=e.getPath();if(t){var n=this.indexingMaps[t].onScreenPathIndexMap[i];if(n.isVisible&&this.currElementVisible){this.currElementVisible()}}};return s});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/CatalogsContainer", ["sap/base/Log","sap/ui/core/Control","sap/ui/performance/Measurement","sap/ushell/library","sap/ushell/ui/launchpad/TileContainerUtils"],function(t,e,i,n,a){"use strict";var s=e.extend("sap.ushell.ui.launchpad.CatalogsContainer",{metadata:{library:"sap.ushell",properties:{categoryFilter:{type:"string",defaultValue:"ALL"},categoryAllocateTiles:{type:"int",defaultValue:"0"}},aggregations:{catalogs:{type:"sap.ushell.ui.launchpad.CatalogEntryContainer",multiple:true}}},renderer:{apiVersion:2,render:function(t,e){var i=e.getCatalogs();t.openStart("div",e);t.class("sapUshellCatalogsContainer");t.openEnd();for(var n=0,a=i.length;n<a;++n){t.renderControl(i[n])}t.close("div")}}});s.prototype.onBeforeRendering=function(){if(this.getCatalogs().length){this.setBusy(false)}};s.prototype.setPagingManager=function(t){i.start("FLP:DashboardManager.CatalogsRendering","CatalogsRendering","FLP");i.pause("FLP:DashboardManager.CatalogsRendering");this.oPagingManager=t};s.prototype.updateAllocatedUnits=function(t){this.nAllocatedUnits=t};s.prototype.applyPagingCategoryFilters=function(t,e){var i=this.getCatalogs();this.nAllocatedUnits=t;if(e&&e!=="All"){this.sCatalogTerm=e}else{this.sCatalogTerm=""}if(!this.filters){this.filters={}}if(!this.filters.catalogEntry){this.filters.catalogEntry=function(t){var e=t.getPath(),i=t.getProperty("title")===this.sCatalogTerm,n;if(!this.sCatalogTerm){return}n=this.indexingMaps.onScreenPathIndexMap[e];if(n){n.isVisible=i}}.bind(this)}if(!this.filters.pagination){this.filters.pagination=function(t){var e=t.getPath(),i;i=this.indexingMaps.onScreenPathIndexMap[e];if(!this.nAllocatedUnits){i.isVisible=false}}.bind(this)}if(!this.indexingMaps){return}this.indexingMaps=a.indexOnScreenElements(i);a.applyFilterOnAllItems(this.mBindingInfos.catalogs,this.filters,this.processFiltering.bind(this));if(this.indexingMaps){a.showHideTilesAndHeaders(this.indexingMaps,this.getCatalogs())}};s.prototype.processFiltering=function(t){var e=this.getCatalogs(),i=t.getPath(),n=this.indexingMaps.onScreenPathIndexMap[i],a=e[n.aItemsRefrenceIndex],s;if(n.isVisible&&(!this.catalogPagination[i]||this.catalogPagination[i]==="start")){if(this.catalogPagination[i]===undefined){this.catalogPagination[i]="start";a.catalogState={}}else if(this.catalogPagination[i]==="start"){var l=a.nNumberOfVisibileElements;this.nAllocatedUnits+=l.appBoxesContainer+l.customTilesContainer}s=this.nAllocatedUnits;a.handleElements("appBoxesContainer");a.handleElements("customTilesContainer");if(a.catalogState.appBoxesContainer==="full"&&a.catalogState.customTilesContainer==="full"){this.catalogPagination[i]="full"}if(s-this.nAllocatedUnits>0){this.bSearchResults=true}else{n.isVisible=false}}else if(n.isVisible&&this.catalogPagination[i]==="full"){var o=a.nNumberOfVisibileElements;var r=o.appBoxesContainer+o.customTilesContainer;if(r===0){n.isVisible=false}}};s.prototype.resetCatalogPagination=function(){this.catalogPagination={}};s.prototype.updateAggregation=function(n){t.debug("Updating TileContainer. Reason: ",n);try{i.resume("FLP:DashboardManager.CatalogsRendering");this.filterElements();i.pause("FLP:DashboardManager.CatalogsRendering")}catch(t){e.prototype.updateAggregation.apply(this,arguments)}};s.prototype.addNewItem=function(t,e){var i,n,s,l=t.getPath();i=a.createNewItem.bind(this)(t,e);if(!i.filters){i.filters={};i.filters.appBoxesContainer={};i.filters.customTilesContainer={};i.filters.appBoxesContainer.pagination=function(t){var e=this.indexingMaps.appBoxesContainer.onScreenPathIndexMap[t.getPath()];if(this.getAllocatedUnits){e.isVisible=!!this.getAllocatedUnits()}}.bind(i);i.filters.customTilesContainer.pagination=function(t){var e=this.indexingMaps.customTilesContainer.onScreenPathIndexMap[t.getPath()];if(this.getAllocatedUnits){e.isVisible=!!this.getAllocatedUnits()}}.bind(i)}i.nAllocatedUnits=this.nAllocatedUnits;i.getAllocatedUnits=function(){return this.nAllocatedUnits}.bind(this);i.elementFiltered=function(t){n=this.oPagingManager.getSizeofSupportedElementInUnits("tile");this.nAllocatedUnits+=t*n;if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0}}.bind(this);i.elementsVisible=function(t){n=this.oPagingManager.getSizeofSupportedElementInUnits("tile");this.nAllocatedUnits-=t*n;if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0}}.bind(this);i.newElementCreated=function(t,e){this.nAllocatedUnits-=this.oPagingManager.getSizeofSupportedElementInUnits("tile");if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0}}.bind(this);i.currElementVisible=function(){this.nAllocatedUnits-=this.oPagingManager.getSizeofSupportedElementInUnits("tile");if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0}}.bind(this);a.addNewItem.bind(this)(i,e);s=this.getCatalogs();this.indexingMaps.onScreenPathIndexMap[l]={aItemsRefrenceIndex:s.length-1,isVisible:true};return true};s.prototype.handleFilters=function(){if(!this.catalogPagination){this.catalogPagination={}}if(!this.catalogsElementsMap){this.catalogsElementsMap={}}if(!this.filters){this.filters={}}};s.prototype.setHandleSearchCallback=function(t){this.handleSearchCallback=t};s.prototype.filterElements=function(){var t="catalogs",e=this.mBindingInfos[t].binding,i=e.getContexts(),n=this.getCatalogs(),s;if(!this.indexingMaps){this.indexingMaps=a.indexOnScreenElements(n)}this.handleFilters();s=a.markVisibleOnScreenElements(i,this.indexingMaps,false);if(!a.validateOrder(i,n,s)){throw true}a.createMissingElementsInOnScreenElements(this.indexingMaps,i,s,this.addNewItem.bind(this),n,this.filters,t);n=this.getCatalogs();a.showHideTilesAndHeaders(this.indexingMaps,n);if(this.handleSearchCallback){this.handleSearchCallback()}};return s});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/DashboardGroupsContainer", ["sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/InvisibleText","sap/ushell/Config","sap/ushell/library","sap/ushell/override","sap/ushell/resources","sap/ushell/utils","./DashboardGroupsContainerRenderer"],function(e,t,i,r,o,s,a,n){"use strict";var l=t.extend("sap.ushell.ui.launchpad.DashboardGroupsContainer",{metadata:{library:"sap.ushell",properties:{accessibilityLabel:{type:"string",defaultValue:null},displayMode:{type:"string",defaultValue:null}},aggregations:{groups:{type:"sap.ui.core.Control",multiple:true,singularName:"group"}},events:{afterRendering:{}}}});l.prototype.init=function(){this.addInvisibleAccessabilityTexts()};l.prototype.exit=function(){if(this.oTileText){this.oTileText.destroy()}if(this.oTileEditModeText){this.oTileEditModeText.destroy()}t.prototype.exit.apply(this,arguments)};l.prototype.updateGroups=s.updateAggregatesFactory("groups");l.prototype.onAfterRendering=function(){var e=this,t={bUseUniqueMark:true};n.setPerformanceMark("FLP-TimeToInteractive_tilesLoaded",t);e.fireAfterRendering()};l.prototype.getGroupControlByGroupId=function(e){try{var t=this.getGroups();for(var i=0,r=t.length;i<r;++i){if(t[i].getGroupId()===e){return t[i]}}}catch(e){}return null};l.prototype.addLinksToUnselectedGroups=function(){var t=this.getGroups();t.forEach(function(t,i){if(!t.getIsGroupSelected()){e.prototype.updateAggregation.call(t,"links")}})};l.prototype.removeLinksFromAllGroups=function(){var e=this.getGroups();e.forEach(function(e,t){var i=e.getLinks();if(i.length){if(i[0].getMetadata().getName()==="sap.m.GenericTile"){e.removeAllLinks()}else{for(var r=0;r<i.length;r++){i[r].destroy()}}}})};l.prototype.removeLinksFromUnselectedGroups=function(){var e=this.getGroups();e.forEach(function(e,t){var i=e.getLinks();if(i.length&&!e.getIsGroupSelected()){if(i[0].getMetadata().getName()==="sap.m.GenericTile"){e.removeAllLinks()}else{for(var r=0;r<i.length;r++){i[r].destroy()}}}})};l.prototype.addInvisibleAccessabilityTexts=function(){this.oTileText=new i("sapUshellDashboardAccessibilityTileText",{text:a.i18n.getText("tile")}).toStatic();var e=sap.ui.getCore().getLibraryResourceBundle("sap.m");if(e){this.oTileEditModeText=new i("sapUshellDashboardAccessibilityTileEditModeText",{text:e.getText("LIST_ITEM_NAVIGATION")}).toStatic()}};return l});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/DashboardGroupsContainerRenderer", ["sap/ushell/utils"],function(e){"use strict";var a={apiVersion:2};a.render=function(a,r){a.openStart("div",r);a.attr("data-sap-ui-customfastnavgroup","true");a.class("sapUshellDashboardGroupsContainer");if(r.getAccessibilityLabel()){a.accessibilityState(r,{role:"navigation",label:r.getAccessibilityLabel()})}a.openEnd();var s=r.getGroups();var t;for(var o=0;o<s.length;o++){t=s[o];a.openStart("div");a.class("sapUshellDashboardGroupsContainerItem");if(t.getIsGroupLocked()||t.getDefaultGroup()){a.class("sapUshellDisableDragAndDrop")}a.openEnd();a.renderControl(t);a.close("div")}a.close("div");e.setPerformanceMark("FLP -- dashboardgroupscontainer renderer")};return a},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/ExtendedChangeDetection", ["sap/ui/base/ManagedObject","sap/ushell/Config"],function(e,t){"use strict";var i=e.extend("sap.ushell.ui.launchpad.ExtendedChangeDetection",{metadata:{library:"sap.ushell",events:{itemDeleted:{},itemAdded:{},itemsReordered:{}}},constructor:function(i,n,r){e.call(this);this._oAggregation=n.getMetadata().getAggregation(i);this._oControl=n;this._sAggregationName=i;this._aSiblingAggregationNames=r;var a=t.last("/core/spaces/extendedChangeDetection/enabled");if(a){this._oControl[this._oAggregation._sUpdater]=this._updateAggregation.bind(this);this._oControl.bUseExtendedChangeDetection=true}}});i.oUpdateFromSiblingCache={};i.prototype._updateAggregation=function(){var e=this._oControl.getBindingInfo(this._sAggregationName);var t=e.binding;var i=this._isUpdateFromSibiling();var n=t.aLastContextData||[];var r=n.map(function(t){try{var i=JSON.parse(t);return i[e.key]}catch(e){return t}});var a=t.getContexts();var o=a.map(function(t){return t.getProperty(e.key)});var g=a.diff;var s;var d;var h=[];var l=[];var f={};var u=false;var _=false;if(g){for(d=0;d<g.length;d++){s=g[d];if(s.type==="insert"){h.push({item:o[s.index],index:s.index})}if(s.type==="delete"){l.push({item:r[s.index-h.length],index:s.index-h.length});r.splice(s.index-h.length,1)}}for(d=0;d<l.length;d++){f[l[d].item]=this._oControl.removeAggregation(this._sAggregationName,l[d].index,true)}var p;var m;for(d=0;d<h.length;d++){p=h[d];m=f[p.item];if(m&&!(g.length>=2&&g[0].index===g[1].index)){this._oControl.insertAggregation(this._sAggregationName,m,p.index,true);delete f[p.item]}else{this._createAndInsertItem(a[p.index],e,p.index);_=true}}u=!!Object.keys(f).length;for(var c in f){f[c].destroy();delete f[c]}}else if(!(i&&o.length===0&&r.length===0)){this._createAndInsertItems(a,e);_=true}else{return}this._updateBindingContexts(a);if(a.length===0){this._oControl.invalidate()}if(u){this.fireItemDeleted()}if(_){this.fireItemAdded()}if(!u&&!_&&g){this.fireItemsReordered()}if(g&&g.length&&!i){this._refreshSiblingBindings()}};i.prototype._isUpdateFromSibiling=function(){var e=this._oControl.getId()+":"+this._sAggregationName;if(i.oUpdateFromSiblingCache[e]){delete i.oUpdateFromSiblingCache[e];return true}return false};i.prototype._refreshSiblingBindings=function(){if(this._aSiblingAggregationNames){for(var e=0;e<this._aSiblingAggregationNames.length;++e){var t=this._aSiblingAggregationNames[e];var n=this._oControl.getId()+":"+t;var r=this._oControl.getBinding(t);i.oUpdateFromSiblingCache[n]=true;r.refresh(true)}}};i.prototype._createAndInsertItems=function(e,t){this._oAggregation.destroy(this._oControl);for(var i=0;i<e.length;i++){this._createAndInsertItem(e[i],t,i)}};i.prototype._createAndInsertItem=function(e,t,i){var n=t.factory(null,e);this._oControl.insertAggregation(this._sAggregationName,n,i,true)};i.prototype._updateBindingContexts=function(e){var t=this._oAggregation.get(this._oControl);for(var i=0;i<t.length;i++){t[i].setBindingContext(e[i])}};return i});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/GroupHeaderActions", ["sap/m/Button","sap/m/library","sap/ui/core/Control","sap/ushell/library"],function(t,e,o){"use strict";var n=e.ButtonType;var i=e.PlacementType;var r=o.extend("sap.ushell.ui.launchpad.GroupHeaderActions",{metadata:{library:"sap.ushell",properties:{isOverflow:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}}},renderer:{apiVersion:2,render:function(t,e){t.openStart("div",e);t.openEnd();var o=e.getContent();if(e.getTileActionModeActive()){if(e.getIsOverflow()){var n=o.some(function(t){return t.getVisible()});if(n){t.renderControl(e._getOverflowButton())}}else{o.forEach(function(e){t.renderControl(e)})}}t.close("div")}}});r.prototype.exit=function(){if(this._oOverflowButton){this._oOverflowButton.destroy()}if(this._oActionSheet){this._oActionSheet.destroy()}};r.prototype._getOverflowButton=function(){if(!this._oOverflowButton){this._oOverflowButton=new t({icon:"sap-icon://overflow",type:n.Transparent,enabled:"{= !${/editTitle}}",press:function(){sap.ui.require(["sap/m/ActionSheet"],function(t){if(!this._oActionSheet){this._oActionSheet=new t({placement:i.Auto})}this._oActionSheet.destroyButtons();this.getContent().forEach(function(t){var e=t.clone();e.setModel(t.getModel());e.setBindingContext(t.getBindingContext());this._oActionSheet.addButton(e)}.bind(this));this._oActionSheet.openBy(this._oOverflowButton)}.bind(this))}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");this._oOverflowButton.setParent(this)}return this._oOverflowButton};return r});
/*!
 * Copyright (c) 2009-2022 SAP SE, All Rights Reserved
 */
sap.ui.predefine("sap/ushell/ui/launchpad/GroupListItem", ["sap/m/ListItemBase","sap/ushell/library","sap/ushell/utils","./GroupListItemRenderer"],function(e,t,i){"use strict";var r=e.extend("sap.ushell.ui.launchpad.GroupListItem",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},show:{type:"boolean",group:"Misc",defaultValue:true},groupId:{type:"string",group:"Misc",defaultValue:null},index:{type:"int",group:"Misc",defaultValue:null},numberOfTiles:{type:"int",group:"Misc",defaultValue:0},isGroupVisible:{type:"boolean",group:"Misc",defaultValue:true}},events:{press:{},afterRendering:{}}}});r.prototype.exit=function(){e.prototype.exit.apply(this,arguments)};r.prototype.onAfterRendering=function(){this.fireAfterRendering()};r.prototype.groupHasVisibleTiles=function(){var e=this.getModel().getProperty("/groups/"+this.getIndex()+"/tiles");var t=this.getModel().getProperty("/groups/"+this.getIndex()+"/links");return i.groupHasVisibleTiles(e,t)};r.prototype.onclick=function(){this.firePress({id:this.getId()})};r.prototype.setGroupId=function(e){this.setProperty("groupId",e,true);return this};r.prototype.setTitle=function(e){this.setProperty("title",e);this.$().find(".sapMSLITitleOnly").text(e);return this};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/GroupListItemRenderer", ["sap/m/ListItemBaseRenderer","sap/ui/core/Renderer"],function(e,s){"use strict";var t=s.extend(e);t.apiVersion=2;t.renderLIAttributes=function(e){e.class("sapUshellGroupLI");e.class("sapUshellGroupListItem")};t.renderLIContent=function(e,s){e.openStart("div",s);e.class("sapMSLIDiv");e.class("sapMSLITitleDiv");if(!s.getVisible()){e.style("display","none")}e.openEnd();e.openStart("div",s);e.class("sapMSLITitleOnly");e.openEnd();e.text(s.getTitle());e.close("div");e.close("div")};return t},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/LinkTileWrapper", ["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/ui/launchpad/AccessibilityCustomData","./LinkTileWrapperRenderer"],function(e,t,i,jQuery,s,o){"use strict";var l=i.extend("sap.ushell.ui.launchpad.LinkTileWrapper",{metadata:{library:"sap.ushell",properties:{uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},target:{type:"string",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},debugInfo:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},footItems:{type:"sap.ui.core.Control",multiple:true,singularName:"footItem"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{}}}});l.prototype.destroy=function(e){this.destroyTileViews();i.prototype.destroy.call(this,e)};l.prototype.addTileView=function(e,i){e.setParent(null);e.addCustomData(new o({key:"tabindex",value:"-1",writeToDom:true}));t.prototype.addAggregation.call(this,"tileViews",e,i)};l.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0}};l.prototype.onAfterRendering=function(){this.fireAfterRendering()};l.prototype.onclick=l.prototype._onPress;l.prototype.onsapenter=l.prototype._launchTileViaKeyboard;l.prototype.onsapspace=l.prototype._launchTileViaKeyboard;l.prototype._launchTileViaKeyboard=function(t){e.info("Tile pressed:",this.getDebugInfo(),"sap.ushell.ui.launchpad.LinkTileWrapper");sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileLinkClick");if(this.getTileActionModeActive()){return}else if(this._getTileState()==="Failed"){this._onFailedStatePress()}else if(t.target.tagName!=="BUTTON"){var i=this.getTileViews()[0],s=false;if(i.firePress){i.firePress()}else{while(i.getContent&&!s){i=i.getContent()[0];if(i.firePress){i.firePress();s=true}}}}};l.prototype._onPress=function(t){e.info("Tile pressed:",this.getDebugInfo(),"sap.ushell.ui.launchpad.LinkTileWrapper");sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileLinkClick");if(!this.getTileActionModeActive()&&this._getTileState()==="Failed"){this._onFailedStatePress()}};l.prototype._onFailedStatePress=function(){if(!this.getTileActionModeActive()&&this._getTileState()==="Failed"){if(!this.FailedTileDialog){sap.ui.require(["sap/ushell/ui/launchpad/FailedTileDialog"],function(e){this.FailedTileDialog=new e;this._onFailedStatePress()}.bind(this))}else{this.FailedTileDialog.openFor(this)}return}};l.prototype._getTileState=function(){var e=this.getTileViews();var t;for(var i=0;i<e.length&&!t;++i){if(e[i].isA("sap.m.GenericTile")){t=e[i]}}if(!t){throw new Error("Could not find the wrapped Tile")}return t.getState()};l.prototype.setVisible=function(e){this.setProperty("visible",e,true);return this.toggleStyleClass("sapUshellHidden",!e)};l.prototype.setAnimationRendered=function(e){this.setProperty("animationRendered",e,true)};l.prototype._handleTileShadow=function(e,t){if(e.length){e.unbind("mouseenter mouseleave");var i,s=e.css("border").split("px")[0],o=this.getModel();if(s>0){i=e.css("border-color")}else{i=this.getRgba()}e.hover(function(){if(!o.getProperty("/tileActionModeActive")){var t=jQuery(e).css("box-shadow"),s=t?t.split(") ")[1]:null,l;if(s){l=s+" "+i;jQuery(this).css("box-shadow",l)}}},function(){jQuery(this).css("box-shadow","")})}};l.prototype.setUuid=function(e){this.setProperty("uuid",e,true);return this};return l});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/LinkTileWrapperRenderer", ["sap/base/Log","sap/m/GenericTile","sap/m/library","sap/ushell/resources"],function(e,a,i,t){"use strict";var l=i.GenericTileMode;var n=i.LoadState;var s={apiVersion:2};s.render=function(i,s){var r=null;var o=s.getModel();function d(){r=new a({header:t.i18n.getText("cannotLoadTile"),mode:l.LineMode,state:n.Failed})}try{r=s.getTileViews()[0]}catch(a){e.warning("Failed to load tile view: ",a.message);d()}if(!r){e.warning("Failed to load tile view: the control has no tileViews");d()}i.openStart("div",s);if(o&&o.getProperty("/enableHelp")){i.attr("data-help-id",s.getTileCatalogId())}i.class("sapUshellLinkTile");if(!s.getVisible()){i.class("sapUshellHidden")}if(s.getIsLocked()){i.class("sapUshellLockedTile")}i.attr("tabindex","-1");i.openEnd();i.renderControl(r);i.close("div")};return s},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/Page", ["sap/m/Button","sap/m/library","sap/m/Text","sap/ui/core/Control","sap/ui/core/dnd/DragDropInfo","sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/ExtendedChangeDetection","./PageRenderer"],function(e,t,i,n,o,s,a,r,u,d,c){"use strict";var l=t.ButtonType;var p=a.TextAlign;var g=a.InvisibleMessageMode;var h=r.DisplayFormat;var f=n.extend("sap.ushell.ui.launchpad.Page",{metadata:{library:"sap.ushell",properties:{edit:{type:"boolean",group:"Misc",defaultValue:false},enableSectionReordering:{type:"boolean",group:"Misc",defaultValue:false},dataHelpId:{type:"string",group:"Misc",defaultValue:""},noSectionsText:{type:"string",group:"Misc",defaultValue:""},showNoSectionsText:{type:"boolean",group:"Misc",defaultValue:true},showTitle:{type:"boolean",group:"Misc",defaultValue:false},title:{type:"string",group:"Misc",defaultValue:""}},defaultAggregation:"sections",aggregations:{sections:{type:"sap.ushell.ui.launchpad.Section",multiple:true,dnd:true},messageStrip:{type:"sap.m.MessageStrip",multiple:false},_addSectionButtons:{type:"sap.m.Button",multiple:true,visibility:"hidden"},_noSectionText:{type:"sap.m.Text",multiple:false,visibility:"hidden"}},events:{addSectionButtonPressed:{parameters:{index:{type:"int"}}},sectionDrop:{parameters:{draggedControl:{type:"sap.ushell.ui.launchpad.Section"},droppedControl:{type:"sap.ushell.ui.launchpad.Section"},dropPosition:{type:"string"}}}}},renderer:c});f.prototype.enhanceAccessibilityState=function(e,t){delete t.readonly};f.prototype.init=function(){this.setAggregation("_noSectionText",new i({text:u.i18n.getText("Page.NoSectionText"),width:"100%",textAlign:p.Center}));this._oDragDropInfo=new o({sourceAggregation:"sections",targetAggregation:"sections",dropPosition:"Between",dragStart:function(e){if(e.getParameter("target").getDefault()){e.preventDefault()}},dragEnter:function(e){if(e.getParameter("target").getDefault()){e.preventDefault()}},drop:function(e){this.fireSectionDrop(e.getParameters())}.bind(this)});this.addDelegate({onsappageup:this._handleKeyboardPageNavigation.bind(this),onsappagedown:this._handleKeyboardPageNavigation.bind(this),onsapdown:this._handleKeyboardArrowNavigation.bind(this,false),onsapdownmodifiers:this._handleKeyboardArrowNavigation.bind(this,true),onsapup:this._handleKeyboardArrowNavigation.bind(this,false),onsapupmodifiers:this._handleKeyboardArrowNavigation.bind(this,true),onsaphome:this._handleKeyboardHomeEndNavigation.bind(this),onsaphomemodifiers:this._handleKeyboardHomeEndNavigation.bind(this),onsapend:this._handleKeyboardHomeEndNavigation.bind(this),onsapendmodifiers:this._handleKeyboardHomeEndNavigation.bind(this),onfocusin:this._saveFocus.bind(this),onsapskipback:this._handleSkipBack.bind(this),onsapskipforward:this._handleSkipForward.bind(this),onBeforeFastNavigationFocus:this._handleBeforeFastNavigationFocus.bind(this)});this._oSectionsChangeDetection=new d("sections",this);this._oSectionsChangeDetection.attachItemDeleted(this.invalidate,this);this._oSectionsChangeDetection.attachItemsReordered(this.invalidate,this);this._oInvisibleMessageInstance=s.getInstance()};f.prototype._saveFocus=function(e){var t=e.srcControl;if(t.isA("sap.m.VBox")){var i=t.getParent();if(i){if(i.indexOfVisualization(this._oLastFocusedViz)===-1){this._oLastFocusedViz=i.getVisualizations()[0];this._oLastFocusedSection=this._oLastFocusedViz?undefined:i}}else{this._oLastFocusedViz=undefined;this._oLastFocusedSection=undefined}}else if(t.isA("sap.f.GridContainer")){var n=t.getItems();this._oLastFocusedViz=n.find(function(t){var i=t.getDomRef();return i&&i.parentNode===e.target})}else if(t.isA("sap.ushell.ui.launchpad.VizInstanceLink")){this._oLastFocusedViz=t}};f.prototype._handleSkipBack=function(e){if(this.getEdit()){var t;var i=e.srcControl;if(i.isA("sap.f.GridContainer")||i.isA("sap.ushell.ui.launchpad.VizInstanceLink")){t=this._getAncestorSection(i)}if(t){e.preventDefault();t.focus()}}};f.prototype._handleSkipForward=function(e){var t,i;var n=e.srcControl;if(n.isA("sap.m.VBox")){i=n.getParent()}if(i){if(i.indexOfVisualization(this._oLastFocusedViz)!==-1){t=this._oLastFocusedViz}else{t=i.getAllItems()[0]}}if(t){e.preventDefault();this._focusVisualization(t)}};f.prototype._handleBeforeFastNavigationFocus=function(e){var t=this.getSections();var i=this.getEdit();if(i&&this._oLastFocusedSection){this._oLastFocusedSection.focus()}else if(i&&e.forward&&this._oLastFocusedViz){this._getAncestorSection(this._oLastFocusedViz).focus()}else if(this._oLastFocusedViz&&this._oLastFocusedViz.getDomRef()){this._focusVisualization(this._oLastFocusedViz)}else if(i&&e.forward&&t.length>0){this._getFirstVisibleSection().focus()}else if(i&&!e.forward&&t.length>0){var n=t[0];if(n.getAllItems().length===0){n.focus()}else{this._focusVisualization(n.getAllItems()[0])}}else{var o=t.find(function(e){return e.getDomRef()&&e.getAllItems().length>0});this._focusVisualization(o.getAllItems()[0])}e.preventDefault()};f.prototype._getAncestorSection=function(e){if(!e){return null}if(e.isA("sap.ushell.ui.launchpad.Section")){return e}else if(e.getParent){return this._getAncestorSection(e.getParent())}return null};f.prototype.exit=function(){this._oDragDropInfo.destroy();this._oSectionsChangeDetection.destroy()};f.prototype.onBeforeRendering=function(){var t=this.getSections().length;var i=this.getAggregation("_addSectionButtons")||[];var n;for(var o=i.length;o<t+1;o++){n=new e({type:l.Transparent,icon:"sap-icon://add",text:u.i18n.getText("Page.Button.AddSection"),press:this.fireAddSectionButtonPressed.bind(this,{index:o})});n.addStyleClass("sapUshellPageAddSectionButton");this.addAggregation("_addSectionButtons",n)}};f.prototype.getFocusDomRef=function(){var e=this.getAggregation("_addSectionButtons")||[];if(!this.getSections().length&&e.length&&this.getEdit()){return e[0].getFocusDomRef()}return this.getDomRef()};f.prototype.setEnableSectionReordering=function(e){if(e===undefined||this.getEnableSectionReordering()===e){return this}this.setProperty("enableSectionReordering",!!e,true);if(e){this.addDragDropConfig(this._oDragDropInfo)}else{this.removeDragDropConfig(this._oDragDropInfo)}return this};f.prototype.setNoSectionsText=function(e){if(e===undefined||this.getNoSectionsText()===e){return this}this.setProperty("noSectionsText",e,true);var t=this.getAggregation("_noSectionText");t.setText(e||u.i18n.getText("Page.NoSectionText"));return this};f.prototype._focusVisualization=function(e){if(!e){return}else if(e.isA("sap.ushell.ui.launchpad.VizInstanceLink")){e.focus()}else{e.getDomRef().parentElement.focus()}};f.prototype._focusNextVisualization=function(e){var t=this.getSections();var i=this.indexOfSection(e.section);var n=e.event.getParameter?e.event.getParameter("event"):e.event;var o=n.target.firstElementChild;var s,a;while(true){if(e.direction==="up"){i--}else{i++}s=t[i];if(!s){return}a=s.focusVisualization({keycode:n.keyCode,ref:o});if(a){n.preventDefault();return}}};f.prototype._handleKeyboardPageNavigation=function(e){if(this._isFocusInInput()){return}var t=this.getSections();for(var i=0;i<t.length;i++){var n=t[i].getDomRef();if(n.contains(window.document.activeElement)){this._focusNextVisualization({event:e,section:t[i],direction:e.type==="sappagedown"?"down":"up",prefIndex:0});return}}};f.prototype._handleKeyboardArrowNavigation=function(e,t){if(e&&!this.getEnableSectionReordering()||e&&!t.ctrlKey){return}var i=this.getSections();var n,o,s;for(var a=0;a<i.length;a++){n=i[a-1];o=i[a];s=i[a+1];if(window.document.activeElement===o.getFocusDomRef()){if(t.type==="sapup"&&n){n.focus()}else if(t.type==="sapdown"&&s){s.focus()}else if(t.type==="sapupmodifiers"&&n){if(n.getDefault()){return}this.fireSectionDrop({draggedControl:o,droppedControl:n,dropPosition:"Before"});t.preventDefault();t.stopPropagation()}else if(t.type==="sapdownmodifiers"&&s){if(o.getDefault()){return}this.fireSectionDrop({draggedControl:o,droppedControl:s,dropPosition:"After"});t.preventDefault();t.stopPropagation()}return}}};f.prototype._isFocusInInput=function(){var e=(document.activeElement||{}).tagName;return e==="INPUT"||e==="TEXTAREA"};f.prototype._handleKeyboardHomeEndNavigation=function(e){if(this._isFocusInInput()){return}var t,i;var n=false;if(e.type==="saphome"){i=this._getSectionAreaItems(e.srcControl)}else if(e.type==="saphomemodifiers"){t=this._getFirstVisibleSection(true)}else if(e.type==="sapend"){i=this._getSectionAreaItems(e.srcControl);n=true}else if(e.type==="sapendmodifiers"){t=this._getLastVisibleSection(true);n=true}if(t){i=t.getAllItems()}if(n){this._focusVisualization(i[i.length-1])}else{this._focusVisualization(i[0])}e.preventDefault();e.stopPropagation()};f.prototype._getFirstVisibleSection=function(e){var t=this.getSections();return t.find(function(t){return this._isSectionVisible(t,e)}.bind(this))};f.prototype._getLastVisibleSection=function(e){var t=this.getSections().reverse();return t.find(function(t){return this._isSectionVisible(t,e)}.bind(this))};f.prototype._isSectionVisible=function(e,t){var i=t?false:this.getEdit();return i||e.getVisualizations().length>0&&e.getDomRef()&&e.getShowSection()};f.prototype._getSectionAreaItems=function(e){var t,i;var n=e.getBindingContext();if(n){i=n.getProperty("displayFormatHint")}var o=this.getSections();var s=o.find(function(t){var i=t.getDomRef();return i&&i.contains(e.getDomRef())});if(s){switch(i){case h.Compact:return s.getCompactItems();case h.Standard:case h.StandardWide:return s.getDefaultItems();case h.Flat:case h.FlatWide:return s.getFlatItems();default:t=s.getDefaultItems();if(t.length>0){return t}t=s.getFlatItems();if(t.length>0){return t}t=s.getCompactItems();return t}}return[]};f.prototype._getCurrentlyFocusedSection=function(){var e=this.getSections();var t=window.document.activeElement;return e.find(function(e){return e.getDomRef().contains(t)})};f.prototype._handleSectionBorderReached=function(e){this._focusNextVisualization(e.getParameters())};f.prototype.addAggregation=function(e,t){n.prototype.addAggregation.apply(this,arguments);if(e==="sections"){t.attachEvent("borderReached",this._handleSectionBorderReached.bind(this))}return this};f.prototype.insertAggregation=function(e,t){n.prototype.insertAggregation.apply(this,arguments);if(e==="sections"){t.attachEvent("borderReached",this._handleSectionBorderReached.bind(this))}return this};f.prototype.announceMove=function(){var e=u.i18n.getText("PageRuntime.Message.SectionMoved");this._oInvisibleMessageInstance.announce(e,g.Polite)};return f});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/PageRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,t){var a=t.getSections();var i=a.length;var r=t.getDataHelpId();var n=t.getTitle();var o;var s;e.openStart("div",t);e.class("sapUshellPage");e.class("sapContrastPlus");e.attr("aria-label",n);e.attr("data-sap-ui-customfastnavgroup","true");if(r){e.attr("data-help-id",r)}e.openEnd();if(t.getEdit()&&t.getAggregation("messageStrip")){e.renderControl(t.getAggregation("messageStrip"))}e.openStart("h2",t.getId()+"-title");e.class("sapMTitle");e.class("sapUshellPageTitle");if(!t.getShowTitle()){e.class("sapUiPseudoInvisibleText")}e.attr("aria-level","2");e.openEnd();e.text(n);e.close("h2");if(t.getEdit()&&!i){e.renderControl(t.getAggregation("_addSectionButtons")[0])}if(!i&&t.getShowNoSectionsText()){e.renderControl(t.getAggregation("_noSectionText"))}for(s=0;s<i;s++){o=a[s];if(t.getEdit()||o.getShowSection()&&o.getVisible()){e.openStart("div");e.class("sapUshellPageSection");e.openEnd();e.renderControl(o);if(t.getEdit()){e.renderControl(t.getAggregation("_addSectionButtons")[s+1])}e.close("div")}}e.close("div")};return e});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/PlusTile", ["sap/ui/core/Icon","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/PlusTileRenderer","sap/ushell/ui/launchpad/Tile"],function(e,t,o,i,s){"use strict";var n=s.extend("sap.ushell.ui.launchpad.PlusTile",{metadata:{library:"sap.ushell",properties:{groupId:{type:"string",group:"Misc",defaultValue:""},enableHelp:{type:"boolean",group:"Misc",defaultValue:false}},events:{press:{}}}});n.prototype.init=function(){this.oIcon=new e({src:"sap-icon://add",tooltip:o.i18n.getText("openAppFinder_tooltip")})};n.prototype.exit=function(){if(this.oIcon){this.oIcon.destroy()}};n.prototype.onclick=function(){var e=this.getParent().getBindingContext().getObject();if(!e.object){return}this.firePress()};n.prototype.onsapspace=n.onclick;n.prototype.onsapenter=n.onclick;return n});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/PlusTileRenderer", ["sap/ushell/resources","sap/ushell/Config"],function(l,s){"use strict";var e={apiVersion:2,render:function(e,a){e.openStart("li",a);e.attr("tabindex","-1");e.class("sapUshellTile");e.class("sapUshellPlusTile");e.class("sapContrastPlus");e.class("sapMGT");if(s.last("/core/home/sizeBehavior")==="Small"){e.class("sapUshellSmall")}if(a.getEnableHelp()){e.class("help-id-plusTile")}e.attr("aria-label",l.i18n.getText("TilePlus_label"));e.openEnd();e.renderControl(a.oIcon);e.close("li")}};return e},true);
//Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/Section", ["sap/base/Log","sap/base/util/deepClone","sap/f/GridContainerItemLayoutData","sap/m/library","sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ui/core/XMLComposite","sap/ui/events/KeyCodes","sap/ui/model/Filter","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/ui/launchpad/ExtendedChangeDetection","sap/ushell/library","sap/f/dnd/GridDropInfo","sap/f/GridContainer","sap/ushell/ui/launchpad/section/CompactArea"],function(t,e,a,i,r,o,n,s,l,jQuery,u,p,d,g,f,h){"use strict";var c=i.TileSizeBehavior;var m=o.InvisibleMessageMode;var y=d.DisplayFormat;function v(t,e,a){if(!Array.isArray(e)||!e.length){return null}if(t&&t.getDomRef){t=t.getDomRef()}if(!t){return e[a?e.length-1:0]}function i(t,e){var a=t.left+t.right-e.left-e.right;var i=t.top+t.bottom-e.top-e.bottom;return a*a+i*i}function r(t){var e=t.querySelector(".sapMGTLineStyleHelper");return(e||t).getBoundingClientRect()}var o=r(t);var n=null;var s=0;var l;var u;var p;for(var d=e.length-1;d>=0;d--){u=e[d].getDomRef();if(u){l=r(u);if(!l.width&&!l.height){continue}if(a&&l.top>=o.top||!a&&l.bottom<=o.bottom){continue}p=i(l,o);if(!n||p<s){n=e[d];s=p}}}return n}var b=n.extend("sap.ushell.ui.launchpad.Section",{metadata:{library:"sap.ushell",properties:{editable:{type:"boolean",group:"Misc",defaultValue:false},dataHelpId:{type:"string",group:"Misc",defaultValue:""},default:{type:"boolean",group:"Misc",defaultValue:false},enableAddButton:{type:"boolean",group:"Behavior",defaultValue:true},enableDeleteButton:{type:"boolean",group:"Behavior",defaultValue:true},enableGridBreakpoints:{type:"boolean",group:"Appearance",defaultValue:false},enableGridContainerQuery:{type:"boolean",group:"Appearance",defaultValue:false},enableResetButton:{type:"boolean",group:"Behavior",defaultValue:true},enableShowHideButton:{type:"boolean",group:"Behavior",defaultValue:true},enableVisualizationReordering:{type:"boolean",group:"Behavior",defaultValue:false},noVisualizationsText:{type:"string",group:"Appearance",defaultValue:u.i18n.getText("Section.NoVisualizationsText")},title:{type:"string",group:"Appearance",defaultValue:""},showNoVisualizationsText:{type:"boolean",group:"Behavior",defaultValue:false},showSection:{type:"boolean",group:"Misc",defaultValue:true},showLinks:{type:"boolean",group:"Behavior",defaultValue:true},sizeBehavior:{type:"sap.m.TileSizeBehavior",group:"Misc",defaultValue:c.Responsive},gridContainerGap:{type:"string",group:"Appearance",defaultValue:"0.5rem"},gridContainerGapXS:{type:"string",group:"Appearance",defaultValue:"0.475rem"},gridContainerGapS:{type:"string",group:"Appearance",defaultValue:"0.475rem"},gridContainerGapM:{type:"string",group:"Appearance",defaultValue:"0.5rem"},gridContainerGapL:{type:"string",group:"Appearance",defaultValue:"0.5rem"},gridContainerGapXL:{type:"string",group:"Appearance",defaultValue:"0.5rem"},gridContainerRowSize:{type:"string",group:"Appearance",defaultValue:"5.25rem"},gridContainerRowSizeXS:{type:"string",group:"Appearance",defaultValue:"4.375rem"},gridContainerRowSizeS:{type:"string",group:"Appearance",defaultValue:"5.25rem"},gridContainerRowSizeM:{type:"string",group:"Appearance",defaultValue:"5.25rem"},gridContainerRowSizeL:{type:"string",group:"Appearance",defaultValue:"5.25rem"},gridContainerRowSizeXL:{type:"string",group:"Appearance",defaultValue:"5.25rem"},_duringDrag:{type:"boolean",group:"Behavior",defaultValue:false}},defaultAggregation:"visualizations",aggregations:{visualizations:{type:"sap.ui.core.Control",bindable:"bindable",multiple:true},defaultItems:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"--defaultArea",aggregation:"items",forwardBinding:false},dnd:true},flatItems:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"--flatArea",aggregation:"items",forwardBinding:false},dnd:true},compactItems:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"--compactArea",aggregation:"items",forwardBinding:false},dnd:true}},events:{add:{},delete:{},reset:{},titleChange:{},visualizationDrop:{parameters:{draggedControl:{type:"sap.ui.core.Control"},droppedControl:{type:"sap.ui.core.Control"},dropPosition:{type:"string"}}},areaDragEnter:{parameters:{originalEvent:{type:"sap.ui.base.Event"},dragControl:{type:"sap.ui.core.Control"},sourceArea:{type:"string"},targetArea:{type:"string"}}},sectionVisibilityChange:{parameters:{visible:{type:"boolean"}}},borderReached:{parameters:{event:{type:"jQuery.Event"}}}}},resourceModel:u.i18nModel});function C(e){for(var a in y){if(e.displayFormatHint===y[a]){return y[a]}}if(e.displayFormatHint&&e.displayFormatHint!=="tile"){t.error("DisplayFormat '"+e.displayFormatHint+"' not valid - 'standard' is used")}return y.Standard}function A(){return new l({path:"",caseSensitive:true,test:function(t){var e=C(t);return e===y.Standard||e===y.StandardWide}})}function I(){return new l({path:"",caseSensitive:true,test:function(t){var e=C(t);return e===y.Flat||e===y.FlatWide}})}function V(){return new l({path:"",caseSensitive:true,test:function(t){return C(t)===y.Compact}})}b.prototype.bindAggregation=function(a,i){if(a==="visualizations"){if(i.filters){t.error("bind visualizations with pre-existing filters is not implemented.")}var r=e(i);r.filters=A();n.prototype.bindAggregation.call(this,"defaultItems",r);var o=e(i);o.filters=I();n.prototype.bindAggregation.call(this,"flatItems",o);var s=e(i);s.filters=V();n.prototype.bindAggregation.call(this,"compactItems",s)}else{n.prototype.bindAggregation.call(this,a,i)}return this};b.prototype.getAllItems=function(){return this.getDefaultItems().concat(this.getFlatItems(),this.getCompactItems())};b.prototype.getVisualizations=function(){var t=this.getAllItems();t.sort(function(t,e){var a=t.getBindingContext().getPath();var i=parseInt(a.split("/").pop(),10);a=e.getBindingContext().getPath();var r=parseInt(a.split("/").pop(),10);return i<r?-1:1});return t};b.prototype.filterVisualizations=function(t){var e=t?new l({filters:[A(),t],and:true}):A();var a=t?new l({filters:[I(),t],and:true}):I();var i=t?new l({filters:[V(),t],and:true}):V();this.getBinding("defaultItems").filter(e);this.getBinding("flatItems").filter(a);this.getBinding("compactItems").filter(i)};b.prototype.indexOfVisualization=function(t){return this.getVisualizations().indexOf(t)};b.prototype.addVisualization=function(e,a){t.error("Section.prototype.addVisualization should not be called");return this.addAggregation("visualizations",e,a)};b.prototype.insertVisualization=function(e,a,i){t.error("Section.prototype.insertVisualization should not be called");return this.insertAggregation("visualizations",e,a,i)};b.prototype.removeVisualization=function(e,a){t.error("Section.prototype.removeVisualization should not be called");return this.removeAggregation("visualizations",e,a)};b.prototype.onBorderReached=function(t){var e;var a=t.getParameter("event");var i=a.keyCode;var r=a.type;var o=jQuery(a.target.firstElementChild).control(0);switch(i){case s.ARROW_UP:e=this.getClosestVizualization(o,true);break;case s.ARROW_DOWN:e=this.getClosestVizualization(o,false);break;case s.ARROW_LEFT:case s.ARROW_RIGHT:return;default:break}if(e){this._focusItem(this.getItemPosition(e));a.preventDefault()}else{this.fireBorderReached({event:t,section:this,direction:r==="sapnext"?"down":"up"})}};b.prototype.handleEmptyContentAreas=function(){var t=!!this.getDefaultItems().length,e=!!this.getFlatItems().length,a=!!this.getCompactItems().length,i=!t&&!a&&!e;this.oVBox.toggleStyleClass("sapUshellSectionNoVisualizations",i);this.oDefaultArea.toggleStyleClass("sapUshellSectionDefaultArea",t);this.oFlatArea.toggleStyleClass("sapUshellSectionFlatArea",e);var r=this.oVBox.getDomRef&&this.oVBox.getDomRef();if(r&&this.getEditable()&&this.getShowNoVisualizationsText()&&i){r.setAttribute("aria-describedBy",this.byId("noVisualizationsText").getId())}else if(r){r.removeAttribute("aria-describedBy")}};b.prototype.init=function(){this.oVBox=this.byId("content");this.oDefaultArea=this.byId("defaultArea");this.oFlatArea=this.byId("flatArea");this.oCompactArea=this.byId("compactArea");this.oNoVisualizationsText=this.byId("noVisualizationsText");this.oCompactArea.setVisible(true);var t=function(){var t=this.oVBox.getDomRef();if(t){var e;if(this.getTitle().trim()){e=u.i18n.getText("Section.Description",this.getTitle())}else{e=u.i18n.getText("Section.Description.EmptySectionTitle")}t.setAttribute("aria-label",e)}}.bind(this);this.oVBox.addEventDelegate({onBeforeRendering:function(){this.byId("title-edit").detachChange(t)}.bind(this),onAfterRendering:function(){var e=this.oVBox.getDomRef();if(this.getEditable()){e.setAttribute("tabindex","0")}t();e.setAttribute("role","group");this.byId("title-edit").attachChange(t)}.bind(this)});this.oDefaultArea.addEventDelegate({onAfterRendering:this.handleEmptyContentAreas.bind(this)});this.oFlatArea.addEventDelegate({onAfterRendering:this.handleEmptyContentAreas.bind(this)});this.oCompactArea.addEventDelegate({onAfterRendering:this.handleEmptyContentAreas.bind(this)});this.oDefaultArea.attachBorderReached(this.onBorderReached.bind(this));this.oFlatArea.attachBorderReached(this.onBorderReached.bind(this));this.oCompactArea.attachBorderReached(this.onBorderReached.bind(this));this._oInvisibleMessageInstance=r.getInstance();this._oDefaultItemsChangeDetection=new p("defaultItems",this,["flatItems","compactItems"]);this._oFlatItemsChangeDetection=new p("flatItems",this,["defaultItems","compactItems"]);this._oCompactItemsChangeDetection=new p("compactItems",this,["defaultItems","flatItems"]);this._fnGlobalDragStart=function(){this.setProperty("_duringDrag",true)}.bind(this);this._fnGlobalDragEnd=function(){this.setProperty("_duringDrag",false)}.bind(this);document.addEventListener("dragstart",this._fnGlobalDragStart,false);document.addEventListener("dragend",this._fnGlobalDragEnd,false)};b.prototype.destroy=function(){n.prototype.destroy.apply(this,arguments);this._oDefaultItemsChangeDetection.destroy();this._oFlatItemsChangeDetection.destroy();this._oCompactItemsChangeDetection.destroy();document.removeEventListener("dragstart",this._fnGlobalDragStart,false);document.removeEventListener("dragend",this._fnGlobalDragEnd,false);if(this.oCompactItemsNavigation){this.oCompactArea.removeDelegate(this.oCompactItemsNavigation);this.oCompactItemsNavigation.destroy();this.oCompactItemsNavigation=null}if(this._oInvisibleMessageInstance){this._oInvisibleMessageInstance.destroy()}n.prototype.destroy.apply(this,arguments)};b.prototype.setEditable=function(t){if(t===undefined||this.getEditable()===t){return this}this.setProperty("editable",!!t,true);this.oVBox.toggleStyleClass("sapUshellSectionEdit",!!t);return this};b.prototype._showHidePressed=function(t){var e=sap.ui.getCore().getLibraryResourceBundle("sap.m");this._oInvisibleMessageInstance.announce([u.i18n.getText(t?"Section.nowBeingShown":"Section.nowBeingHidden"),u.i18n.getText("Section.ButtonLabelChanged"),u.i18n.getText(t?"Section.Button.Hide":"Section.Button.Show"),e.getText("ACC_CTR_TYPE_BUTTON")].join(" "),m.Polite);this.setShowSection(t)};b.prototype.setShowSection=function(t){if(t===undefined||this.getShowSection()===t){return this}this.setProperty("showSection",t,true);this.oVBox.toggleStyleClass("sapUshellSectionHidden",!t);this.fireSectionVisibilityChange({visible:t});return this};b.prototype._reorderVisualizations=function(t){this.fireVisualizationDrop(t.getParameters())};b.prototype.getClosestVizualization=function(t,e){var a=this.getAllItems();return v(t,a,e)};b.prototype.getClosestVizIndex=function(t,e){var a=this.getClosestVizualization(t,e);return a?this.indexOfVisualization(a):-1};b.prototype.getClosestCompactItemIndex=function(t,e){var a=v(t,this.getCompactItems(),e);if(a){return this.indexOfVisualization(a)}return e?this.getVisualizations().length:0};b.prototype._onDragEnter=function(t){var e=t.getParameter("dragSession");var a=e.getDragControl();var i=a.getParent();var r=e.getDropControl&&e.getDropControl();if(!r){return}if(!r.data("area")){r=r.getParent()}if(r.data("default")&&!i.data("default")){t.preventDefault()}this.fireAreaDragEnter({originalEvent:t,dragControl:a,sourceArea:i.data("area"),targetArea:r.data("area")})};b.prototype.addAggregation=function(t,e){if(t==="defaultItems"||t==="flatItems"){this._addVisualizationLayoutData(e)}n.prototype.addAggregation.apply(this,arguments);this.handleEmptyContentAreas();return this};b.prototype.insertAggregation=function(t,e){if(t==="defaultItems"||t==="flatItems"){this._addVisualizationLayoutData(e,t)}n.prototype.insertAggregation.apply(this,arguments);this.handleEmptyContentAreas();return this};b.prototype._getVisualizationLayoutData=function(t){if(t.getLayout){return t.getLayout()}return{rows:2,columns:2}};b.prototype._getFlatVisualizationLayoutData=function(t){if(t.getLayout){return t.getLayout()}return{rows:1,columns:2}};b.prototype._addVisualizationLayoutData=function(t,e){if(!t.getLayoutData()){var i=e==="defaultItems"?this._getVisualizationLayoutData(t):this._getFlatVisualizationLayoutData(t);t.setLayoutData(new a(i))}};b.prototype._getDefaultDropIndicatorSize=function(t){return this._getDropIndicatorSize(t,y.Standard)};b.prototype._getFlatDropIndicatorSize=function(t){return this._getDropIndicatorSize(t,y.Flat)};b.prototype._getDropIndicatorSize=function(t,e){var a=t.getParent();var i=a&&a.data("area");if(e===i&&t.getLayoutData){var r=t.getLayoutData();return{rows:r.getRows(),columns:r.getColumns()}}var o={};var n=[];if(t.getSupportedDisplayFormats){n=t.getSupportedDisplayFormats()}if(e===y.Flat){o.rows=1;o.columns=2;if(!n.includes(y.Flat)&&n.includes(y.FlatWide)){o.columns=4}}else{o.rows=2;o.columns=2;if(!n.includes(y.Standard)&&n.includes(y.StandardWide)){o.columns=4}}return o};b.prototype.getItemPosition=function(t){if(isFinite(t)){t=this.getVisualizations()[t]}var e=this.oDefaultArea.getItems().indexOf(t);if(e>=0){return{index:e,area:y.Standard}}e=this.oFlatArea.getItems().indexOf(t);if(e>=0){return{index:e,area:y.Flat}}e=this.oCompactArea.getItems().indexOf(t);if(e>=0){return{index:e,area:y.Compact}}return{index:-1,area:y.Standard}};b.prototype._focusItem=function(t){window.setTimeout(function(){var e=t&&t.area?t.area:y.Standard;var a=t&&t.index?t.index:t;var i=this.oDefaultArea.getItems().length;var r=this.oFlatArea.getItems().length;var o=this.oCompactArea.getItems().length;if(isNaN(a)||a<0){a=0}if(e===y.Standard&&i===0){e=y.Flat}if(e===y.Flat&&r===0){e=y.Compact}if(e===y.Compact&&o===0){e=y.Standard}if(i+r+o===0){e="section"}switch(e){case"section":this.focus();break;case y.Flat:if(a>=r){a=r-1}this.oFlatArea.focusItem(a);break;case y.Compact:this.oCompactArea.focusItem(a);break;default:if(a>=i){a=i-1}this.oDefaultArea.focusItem(a);break}}.bind(this),0)};b.prototype.focusVisualization=function(t){var e;if(!this.getShowSection()&&!this.getEditable()){return false}var a=this.getAllItems();if(!a.length){return false}if(t&&t.area){this._focusItem(t);return true}if(t&&t.getMetadata){e=t}if(!e&&t&&t.keycode){switch(t.keycode){case s.ARROW_UP:e=this.getClosestVizualization(t.ref,true);break;case s.ARROW_DOWN:e=this.getClosestVizualization(t.ref,false);break;case s.ARROW_LEFT:t=-1;break;default:break}}if(!e&&t===-1){e=a[a.length-1]}if(!e){e=a[0]}this._focusItem(this.getItemPosition(e));return true};return b});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileContainer", ["sap/base/Log","sap/m/Input","sap/m/library","sap/m/Text","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/Icon","sap/ushell/override","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/PlusTile","sap/ushell/utils","sap/ushell/ui/launchpad/TileContainerRenderer"],function(e,t,i,o,s,a,r,l,n,u,p,d){"use strict";var f=i.HeaderLevel;var h=a.extend("sap.ushell.ui.launchpad.TileContainer",{metadata:{library:"sap.ushell",properties:{scrollType:{type:"string",group:"Misc",defaultValue:"item"},animationSpeed:{type:"int",group:"Misc",defaultValue:500},groupId:{type:"string",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:true},showPlaceholder:{type:"boolean",group:"Misc",defaultValue:true},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},isLastGroup:{type:"boolean",group:"Misc",defaultValue:false},headerText:{type:"string",group:"Misc",defaultValue:null},headerLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:f.H2},groupHeaderLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:f.H4},showGroupHeader:{type:"boolean",group:"Misc",defaultValue:true},homePageGroupDisplay:{type:"string",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},sortable:{type:"boolean",group:"Misc",defaultValue:true},showNoData:{type:"boolean",group:"Misc",defaultValue:false},noDataText:{type:"string",group:"Misc",defaultValue:u.i18n.getText("noFilteredItems")},isGroupLocked:{type:"boolean",group:"Misc",defaultValue:null},isGroupSelected:{type:"boolean",group:"Misc",defaultValue:false},editMode:{type:"boolean",group:"Misc",defaultValue:false},showBackground:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"string",group:"Misc",defaultValue:"sap-icon://locked"},showIcon:{type:"boolean",group:"Misc",defaultValue:false},deluminate:{type:"boolean",group:"Misc",defaultValue:false},showMobileActions:{type:"boolean",group:"Misc",defaultValue:false},enableHelp:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},hidden:{type:"boolean",group:"Misc",defaultValue:false},transformationError:{type:"boolean",group:"Misc",defaultValue:false},supportLinkPersonalization:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tiles:{type:"sap.ui.core.Control",multiple:true,singularName:"tile"},links:{type:"sap.ui.core.Control",multiple:true,singularName:"link"},beforeContent:{type:"sap.ui.core.Control",multiple:true,singularName:"beforeContent"},afterContent:{type:"sap.ui.core.Control",multiple:true,singularName:"afterContent"},headerActions:{type:"sap.ui.core.Control",multiple:true,singularName:"headerAction"}},events:{afterRendering:{},add:{},titleChange:{}}}});h.prototype.init=function(){this.bIsFirstTitleChange=true;this._sDefaultValue=u.i18n.getText("new_group_name");this.oNoLinksText=new o({text:u.i18n.getText("emptyLinkContainerInEditMode")}).addStyleClass("sapUshellNoLinksAreaPresentTextInner");this.oTransformationErrorText=new o({text:u.i18n.getText("transformationErrorText")}).addStyleClass("sapUshellTransformationErrorText");this.oTransformationErrorIcon=new r({src:"sap-icon://message-error"}).addStyleClass("sapUshellTransformationErrorIcon");this.oIcon=new r({src:this.getIcon()}).addStyleClass("sapUshellContainerIcon");this.oPlusTile=new p({groupId:this.getGroupId(),enableHelp:this.getEnableHelp(),press:[this.fireAdd,this]}).setParent(this);var e=function(){this.getDomRef("groupheader").focus();this._stopEdit();var t=this.oEditInputField.getDomRef();if(t){t.removeEventListener("focusout",e)}}.bind(this);this.oEditInputField=new t({placeholder:this._sDefaultValue,value:this.getHeaderText()}).addEventDelegate({onBeforeRendering:function(){var t=this.oEditInputField.getDomRef();if(t){t.removeEventListener("focusout",e)}}.bind(this),onAfterRendering:function(){var t=this.oEditInputField.$("inner");t.focus();t.selectText(0,t.val().length);var i=this.oEditInputField.getDomRef();if(i){i.addEventListener("focusout",e)}}.bind(this)}).addStyleClass("sapUshellTileContainerTitleInput");if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(e){if(e.isLinkPersonalizationSupported()){h.prototype.isLinkPersonalizationOveride()}})}this.fnTitleTextClickHandler=this._titleTextClickHandler.bind(this)};h.prototype.onBeforeRendering=function(){var e=this.getDomRef("titleText");if(e){e.removeEventListener("click",this.fnTitleTextClickHandler)}var t=this.getTiles();var i=this.getLinks();var o=t.concat(i);o.forEach(function(e){var t=e.getDomRef();if(t){var i=t.getAttribute("data-oldTabindex");if(i){t.setAttribute("tabindex",i);t.removeAttribute("data-oldTabindex")}else{t.removeAttribute("tabindex")}}})};h.prototype.onAfterRendering=function(){var e=this.getDomRef("titleText");if(e){e.addEventListener("click",this.fnTitleTextClickHandler)}var t=this.getTiles();var i=this.getLinks();var o=t.concat(i);o.forEach(function(e){var t=e.getDomRef();if(t){var i=t.getAttribute("tabindex");if(i){t.setAttribute("data-oldTabindex",i)}t.setAttribute("tabindex","-1")}});var s=t.filter(function(e){return e.isA("sap.ui.integration.widgets.Card")});this._resizeCards(s);var a=sap.ui.getCore().getEventBus();a.publish("launchpad","GroupHeaderVisibility");this.fireAfterRendering()};h.prototype._titleTextClickHandler=function(){var e=this.getModel()&&this.getModel().getProperty("/enableRenameLockedGroup"),t=(e||!this.getIsGroupLocked())&&!this.getDefaultGroup()&&this.getTileActionModeActive();this.setEditMode(t)};h.prototype.updateAggregation=l.updateAggregation;h.prototype.setGroupId=function(e,t){this.setProperty("groupId",e,t);this.oPlusTile.setGroupId(e,t);return this};h.prototype.setShowIcon=function(e,t){this.setProperty("showIcon",e,t);this.oIcon.toggleStyleClass("sapUshellContainerIconHidden",!e);return this};h.prototype.groupHasTiles=function(){var e="",t=this.getTiles(),i=[];if(this.getBindingContext()){e=this.getBindingContext().sPath;t=this.getModel().getProperty(e).tiles}return d.groupHasVisibleTiles(t,i)};h.prototype.getInnerContainersDomRefs=function(){var e=this.getDomRef();if(!e){return null}return[e.querySelector(".sapUshellTilesContainer-sortable"),e.querySelector(".sapUshellLineModeContainer")]};h.prototype.isLinkPersonalizationOveride=function(){h.prototype.updateLinks=function(e){var t=this.getParent(),i=t&&t.getDisplayMode&&t.getDisplayMode()==="tabs";if(i&&!this.getTileActionModeActive()){t.removeLinksFromUnselectedGroups()}if(this.getLinks().length>0){this.removeAllLinks()}s.prototype.updateAggregation.call(this,"links")};h.prototype.destroyLinks=function(t){e.debug("link is destroyed because: "+t,null,"sap.ushell.ui.launchpad.TileContainer")}};h.prototype._resizeCards=function(e){var t,i,o=5.5,s=.4375,a,r,l,n;for(var u=0;u<e.length;u++){t=e[u];i=t.getManifest();a=i["sap.flp"].rows;r=i["sap.flp"].columns;l=r*o+(r-3)*s+"rem";n=a*o+(a-1)*s+"rem";t.setHeight(n);t.setWidth(l)}};h.prototype.setEditMode=function(e,t){this.setProperty("editMode",e,t);if(e){this.oEditInputField.setValue(this.getHeaderText())}var i=this.getModel();if(i){i.setProperty("/editTitle",e)}};h.prototype._stopEdit=function(){var e=this.getHeaderText();var t=this.oEditInputField.getValue(),i;t=t.substring(0,256).trim()||this._sDefaultValue;i=t!==e;if(this.bIsFirstTitleChange&&t===this.oEditInputField.getPlaceholder()){i=true}this.bIsFirstTitleChange=false;if(this.getModel()&&this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",false,false)}if(i){this.fireTitleChange({newTitle:t});this.setHeaderText(t)}this.setEditMode(false)};h.prototype.exit=function(){if(this.oNoLinksText){this.oNoLinksText.destroy()}if(this.oTransformationErrorText){this.oTransformationErrorText.destroy()}if(this.oTransformationErrorIcon){this.oTransformationErrorIcon.destroy()}if(this.oIcon){this.oIcon.destroy()}if(this.oPlusTile){this.oPlusTile.destroy()}if(this.oEditInputField){this.oEditInputField.destroy()}var e=this.getDomRef("titleText");if(e){e.removeEventListener("click",this.fnTitleTextClickHandler)}if(a.prototype.exit){a.prototype.exit.apply(this,arguments)}};return h});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileContainerRenderer", ["sap/ushell/resources","sap/ushell/utils","sap/ushell/bootstrap/common/common.load.model","sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/core/CustomData"],function(e,t,s,a,o,i){"use strict";var r={apiVersion:2};r.oModel=s.getModel();r.render=function(s,a){var r=a.getHeaderActions(),n=a.getBeforeContent(),l=a.getAfterContent(),d=a.getLinks(),c=d.length,p=this;s.openStart("div",a);s.class("sapUshellTileContainer");if(!a.getVisible()){s.class("sapUshellHidden")}if(a.getDeluminate()){s.class("sapUshellDisableLockedGroupDuringDrag")}if(a.getEditMode()){s.class("sapUshellEditing")}if(a.getHidden()){s.class("sapUshellTileContainerEditModeHidden")}if(!a.getShowEmptyLinksArea()){s.class("sapUshellLinksAreaHidden")}if(a.getShowEmptyLinksAreaPlaceHolder()){s.class("sapUshellTileContainerEditMode");s.class("sapUshellTileContainerTabsModeEmptyLinksArea")}else{s.class("sapUshellEmptyLinksAreaPlaceHolder")}s.openEnd();if(n.length&&a.getTileActionModeActive()){s.openStart("div");s.class("sapUshellTileContainerBeforeContent");s.class("sapContrastPlus");s.openEnd();n.forEach(function(e){s.renderControl(e)});s.close("div")}s.openStart("div");s.class("sapUshellTileContainerContent");if(a.getIsGroupLocked()){s.class("sapUshellTileContainerLocked")}if(a.getDefaultGroup()){s.class("sapUshellTileContainerDefault")}if(a.getShowBackground()){s.class("sapUshellTileContainerEditMode")}s.openEnd();if(a.getShowBackground()){s.openStart("div");s.class("sapUshellGroupBackgroundContainer");s.class("sapContrastPlus");s.openEnd();s.close("div")}if(a.getShowHeader()){s.openStart("div",a.getId()+"-groupheader");s.class("sapUshellTileContainerHeader");s.class("sapContrastPlus");if(!a.getShowGroupHeader()){s.class("sapUshellFirstGroupHeaderHidden");s.class("sapUiPseudoInvisibleText")}if(a.getTileActionModeActive()){s.attr("tabindex","0")}var g;if(a.getDefaultGroup()){g=e.i18n.getText("ariaLabelEditModeGroupDefault",a.getHeaderText())}else if(a.getIsGroupLocked()){g=e.i18n.getText("ariaLabelEditModeGroupLocked",a.getHeaderText())}else{g=e.i18n.getText("ariaLabelEditModeGroup",a.getHeaderText())}s.attr("aria-label",g);s.openEnd();s.openStart("div",a.getId()+"-title");s.class("sapUshellContainerTitleFlex");s.openEnd();if(a.getEditMode()){s.renderControl(a.oEditInputField)}else{var u=a.getHeaderLevel().toLowerCase();s.openStart(u,a.getId()+"-titleText");s.class("sapUshellContainerTitle");s.attr("title",a.getHeaderText());s.attr("data-role","group");if(a.getTileActionModeActive()&&!a.getIsGroupLocked()&&!a.getDefaultGroup()){s.attr("tabindex","0")}s.openEnd();s.text(a.getHeaderText());s.close(u)}if(a.getIsGroupLocked()){s.renderControl(a.oIcon)}else if(a.getTileActionModeActive()){s.openStart("div");s.class("sapUshellContainerHeaderActions");s.openEnd();r.forEach(function(e){s.renderControl(e)});s.close("div")}s.close("div");s.close("div")}s.openStart("ul");s.class("sapUshellTilesContainer-sortable");s.class("sapUshellInner");s.openEnd();var f=false;a.getTiles().forEach(function(e){if(e.getVisible()){f=true}if(p._isUserActivityCard(e)){p._updateUserActivityCardVisibility(e)}s.renderControl(e)});if(a.getShowPlaceholder()){s.renderControl(a.oPlusTile)}if(a.getShowNoData()){this.renderNoData(s,a,!f)}s.close("ul");var h=a.getSupportLinkPersonalization();if(c>0||h){s.openStart("div");s.class("sapUshellLineModeContainer");if(!c&&h){s.class("sapUshellNoLinksAreaPresent");if(a.getTransformationError()){s.class("sapUshellNoLinksAreaPresentError")}s.openEnd();s.openStart("div");s.class("sapUshellNoLinksAreaPresentText");s.openEnd();s.renderControl(a.oNoLinksText);s.close("div")}else{s.openEnd()}if(h){if(a.getTransformationError()){s.openStart("div");s.class("sapUshellTransformationError");if(!a.transformationError){s.style("display","none")}s.openEnd();s.openStart("div");s.class("sapUshellTransformationErrorInnerWrapper");s.openEnd();s.renderControl(a.oTransformationErrorIcon);s.renderControl(a.oTransformationErrorText);s.close("div");s.close("div")}s.openStart("div");s.class("sapUshellLinksInnerContainer");s.openEnd();var C,v,T,E;d.forEach(function(e,t){C=e.getCustomData();v=false;T=false;E=false;C.forEach(function(s){if(s.getKey()==="aria-posinset"){s.setValue((t+1).toString());s.setWriteToDom(true);v=true}else if(s.getKey()==="aria-setsize"){s.setValue(c.toString());s.setWriteToDom(true);T=true}else if(s.getKey()==="help-id"){s.setValue(e.getBindingContext()&&e.getBindingContext().getProperty("tileCatalogId"));s.setWriteToDom(true);E=true}});if(!v){e.addCustomData(new o({key:"aria-posinset",value:(t+1).toString(),writeToDom:true}))}if(!T){e.addCustomData(new o({key:"aria-setsize",value:c.toString(),writeToDom:true}))}if(e.getModel()&&e.getModel().getProperty("/enableHelp")&&!E){e.addCustomData(new i({key:"help-id",value:e.getBindingContext()&&e.getBindingContext().getProperty("tileCatalogId"),writeToDom:true}))}e.addStyleClass("sapUshellLinkTile");if(a.getIsGroupLocked()){e.addStyleClass("sapUshellLockedTile")}s.renderControl(e)});s.close("div")}else{d.forEach(function(e){s.renderControl(e)})}s.close("div")}s.close("div");if(l.length&&a.getTileActionModeActive()){s.openStart("div");s.class("sapUshellTileContainerAfterContent");s.class("sapContrastPlus");s.openEnd();l.forEach(function(e){s.renderControl(e)});s.close("div")}s.close("div");t.setPerformanceMark("FLP -- tile container renderer")};r.renderNoData=function(e,t,s){e.openStart("div",t.getId()+"-listNoData");e.class("sapUshellNoFilteredItems");e.class("sapUiStrongBackgroundTextColor");e.openEnd();e.text(s?t.getNoDataText():"");e.close("div")};r._isUserActivityCard=function(t){if(typeof t.getManifest!=="function"){return false}var s=t.getManifest();var a=s&&s["sap.card"]&&s["sap.card"].header&&s["sap.card"].header.title;return a===e.i18n.getText("recentActivities")||a===e.i18n.getText("frequentActivities")};r._updateUserActivityCardVisibility=function(e){e.setVisible(a.last("/core/shell/model/enableTrackingActivity"));a.on("/core/shell/model/enableTrackingActivity").do(function(t){e.setVisible(t)})};return r},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileContainerUtils", ["sap/base/util/uid"],function(e){"use strict";var n={};n.showHideTilesAndHeaders=function(e,n){var t,r,i,a=0,s=0;for(t in e.onScreenPathIndexMap){if(e.onScreenPathIndexMap.hasOwnProperty(t)){i=e.onScreenPathIndexMap[t];r=n[i.aItemsRefrenceIndex];if(r.getVisible()&&!i.isVisible){s++}r.setVisible(i.isVisible);if(i.isVisible){a++}}}return{nCountVisibElelemnts:a,nCountFilteredElement:s}};n.applyFilterOnItem=function(e,n,t,r){var i;for(i in n){if(n.hasOwnProperty(i)){n[i](e)}}if(t){t(e,r)}};n.createNewItem=function(n,t){var r=this.mBindingInfos[t],i=r.factory,a=function(n){var t=this.getId()+"-"+e(),a=i(t,n);a.setBindingContext(n,r.model);return a}.bind(this);return a(n)};n.addNewItem=function(e,n){var t=this.getMetadata().getJSONKeys()[n];this[t._sMutator](e);return true};n.createMissingElementsInOnScreenElements=function(e,t,r,i,a,s,l){var f,o,u=t.length;for(o=r;o<u;o++){f=t[o].getPath();if(!e.onScreenPathIndexMap[f]){if(i(t[o],l)==false){return false}n.applyFilterOnItem(t[o],s)}else{throw true}}return true};n.createMissingElementsInOnScreenElementsSearchCatalog=function(e,t,r,i,a,s,l,f){var o,u,h=t.length;for(u=0;u<h;u++){o=t[u].getPath();if(!e.onScreenPathIndexMap[o]){if(i(t[u],l)==false){return false}}n.applyFilterOnItem(t[u],s,f,l)}return true};n.applyFilterOnAllItems=function(e,t,r){var i;var a=e.binding,s;if(!a){return}s=a.getContexts();for(i=0;i<s.length;i++){n.applyFilterOnItem(s[i],t,r)}};n.validateOrder=function(e,n,t){var r,i,a,s,l,f,o,u;if(e[t]&&n.length>0){r=n[n.length-1].getBindingContext().getPath();i=e[t].getPath();s=r.split("/");l=i.split("/");for(f=0;f<s.length&&f<l.length;f++){o=s[f];u=l[f];if(!!parseInt(o,10)&&!!parseInt(u,10)){if(parseInt(o,10)>parseInt(u,10)){return false}else if(parseInt(o,10)<parseInt(u,10)){return true}}else{for(a=0;a<u.length&&a<o.length;a++){if(o[a].charCodeAt()>u[a].charCodeAt()){return false}else if(o[a].charCodeAt()<u[a].charCodeAt()){return true}}}}}return true};n.markVisibleOnScreenElements=function(e,n,t){var r=0,i,a=e.length;for(r=0;r<a;r++){i=e[r].getPath();if(n.onScreenPathIndexMap[i]){if(t){n.onScreenPathIndexMap[i].isVisible=true}}else{return r}}return r};n.markVisibleOnScreenElementsSearchCatalog=function(e,n,t){var r=0,i,a=e.length;for(r=0;r<a;r++){i=e[r].getPath();if(n.onScreenPathIndexMap[i]){if(t){n.onScreenPathIndexMap[i].isVisible=true}}}return r};n.indexOnScreenElements=function(e,n){var t,r,i={onScreenPathIndexMap:{}},a=e.length,s,l=true;if(n===false){l=false}for(r=0;r<a;r++){s=e[r];if(s.getBindingContext()){t=s.getBindingContext().getPath();if(!i.onScreenPathIndexMap[t]){i.onScreenPathIndexMap[t]={aItemsRefrenceIndex:r,isVisible:l}}}}return i};return n},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileState", ["sap/ui/core/Control","sap/ui/core/Icon","sap/ushell/resources","sap/ui/core/HTML","sap/ushell/library","./TileStateRenderer"],function(t,e,i,s){"use strict";var n=t.extend("sap.ushell.ui.launchpad.TileState",{metadata:{library:"sap.ushell",properties:{state:{type:"string",group:"Misc",defaultValue:"Loaded"}},events:{press:{}}}});n.prototype.init=function(){this._rb=i.i18n;this._sFailedToLoad=this._rb.getText("cannotLoadTile");this._oWarningIcon=new e(this.getId()+"-warn-icon",{src:"sap-icon://notification",size:"1.37rem"}).addStyleClass("sapSuiteGTFtrFldIcnMrk");this.attachPress(this._onPress)};n.prototype.onclick=function(){this.firePress()};n.prototype._onPress=function(t){if(this.getState()!=="Failed"){return}if(!this.FailedTileDialog){sap.ui.require(["sap/ushell/ui/launchpad/FailedTileDialog"],function(e){this.FailedTileDialog=new e;this._onPress(t)}.bind(this))}else{this.FailedTileDialog.openFor(this)}};n.prototype._getBusyContainer=function(){if(!this._oBusyContainer){this._oBusyContainer=new s({content:"<div class='sapUshellTileStateLoading'><div>"});this._oBusyContainer.setBusyIndicatorDelay(0);this._oBusyContainer.setBusy(true)}return this._oBusyContainer};n.prototype.exit=function(){this._oWarningIcon.destroy();if(this._oBusyContainer){this._oBusyContainer.destroy()}};n.prototype.setState=function(t,e){this.setProperty("state",t,e);return this};return n});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileStateRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,t){e.openStart("div",t);e.class("sapUshellGT");e.openEnd();var a=t.getState();e.openStart("div",t.getId()+"-overlay");e.class("sapUshellOverlay");if(a==="Failed"){e.attr("title",t._sFailedToLoad)}e.openEnd();switch(a){case"Loading":var l=t._getBusyContainer();e.renderControl(l);break;case"Failed":e.openStart("div",t.getId()+"-failed-ftr");e.class("sapUshellTileStateFtrFld");e.openEnd();e.openStart("div",t.getId()+"-failed-icon");e.class("sapUshellTileStateFtrFldIcn");e.openEnd();e.renderControl(t._oWarningIcon);e.close("div");e.openStart("div",t.getId()+"-failed-text");e.class("sapUshellTileStateFtrFldTxt");e.openEnd();e.text(t._sFailedToLoad);e.close("div");e.close("div");break;default:}e.close("div");e.close("div")};return e},true);
//Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/section/CompactArea", ["sap/ui/core/Control","sap/ui/events/KeyCodes","sap/ushell/library","./CompactAreaRenderer"],function(e,t,o){"use strict";var r=e.extend("sap.ushell.ui.launchpad.section.CompactArea",{metadata:{library:"sap.ushell",properties:{showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},enableLinkReordering:{type:"boolean",group:"Behavior",defaultValue:false}},dnd:{draggable:false,droppable:true},aggregations:{items:{type:"sap.ui.core.Control",singularName:"item",multiple:true,dnd:true}},events:{borderReached:{parameters:{event:{type:"jQuery.Event"}}},itemDrop:{parameters:{draggedControl:{type:"sap.ui.core.Control"},droppedControl:{type:"sap.ui.core.Control"},dropPosition:{type:"string"}}}}}});r.prototype.onBorderReached=this.fireBorderReached;r.prototype.onsapnext=function(e){e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===t.ARROW_RIGHT){var o=this.getFocusedItemIndex();if(o>=0&&o<this.getItems().length-1){this.focusItem(o+1);return}}this.fireBorderReached({event:e})};r.prototype.onsapprevious=function(e){e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===t.ARROW_LEFT){var o=this.getFocusedItemIndex();if(o>0){this.focusItem(o-1);return}}this.fireBorderReached({event:e})};r.prototype.onsapnextmodifiers=function(e){if(!this.getEnableLinkReordering()){return}var o=this.getFocusedItemIndex();var r=this.getItems();e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===t.ARROW_RIGHT&&o>-1&&o<r.length-1){this.fireItemDrop({draggedControl:r[o],droppedControl:r[o+1],dropPosition:"After",browserEvent:e})}if(e.keyCode===t.ARROW_DOWN&&o>-1){this.fireItemDrop({draggedControl:r[o],droppedControl:null,dropPosition:"After",browserEvent:e})}};r.prototype.onsappreviousmodifiers=function(e){if(!this.getEnableLinkReordering()){return}var o=this.getFocusedItemIndex();var r=this.getItems();e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===t.ARROW_LEFT&&o>0){this.fireItemDrop({draggedControl:r[o],droppedControl:r[o-1],dropPosition:"Before",browserEvent:e})}if(e.keyCode===t.ARROW_UP&&o>-1){this.fireItemDrop({draggedControl:r[o],droppedControl:null,dropPosition:"Before",browserEvent:e})}};r.prototype.focusItem=function(e){e=e||0;var t=this.getItems();if(e===-1||e>=t.length){e=t.length-1}if(e>=0){var o=t[e].getFocusDomRef()||t[e].getDomRef();(o.querySelector("a")||o).focus()}else{this.focus()}};r.prototype.onmousedown=function(e){var t=this.getDOMItemIndex(e.srcControl.getDomRef());var o=this.getFocusedItemIndex();if(o<0){o=0}if(t<0){window.setTimeout(function(){this.focusItem(o)}.bind(this),0)}};r.prototype.getDOMItemIndex=function(e){var t=-1;this.getItems().forEach(function(o,r){var n=o.getDomRef();if(n&&n.contains(e)){t=r}});return t};r.prototype.onfocusin=function(e){if(document.activeElement===this.getDomRef()){this.focusItem(0)}};r.prototype.getFocusedItemIndex=function(){return this.getDOMItemIndex(document.activeElement)};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/section/CompactAreaRenderer", ["sap/ushell/resources"],function(e){"use strict";var t={apiVersion:2};t.render=function(t,r){t.openStart("div",r);if(!r.getVisible()){t.style("display","none")}t.attr("role","group");t.attr("aria-label",e.i18n.getText("Section.CompactArea.Description"));t.style("width","100%");t.class("sapUshellSectionCompactArea");t.openEnd();r.getItems().forEach(t.renderControl);t.close("div")};return t},true);
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/DynamicTileRenderer", ["sap/ui/core/Renderer","sap/ui/core/format/NumberFormat","../../library","./TileBaseRenderer","sap/ushell/resources"],function(e,t,a,i,r){"use strict";var s=a.ui.tile.State;var l=a.ui.tile.StateArrow;var n=r.i18n;var o=e.extend(i);o.apiVersion=2;o.renderPart=function(e,a){var i=a.getNumberValue(),r=a.getNumberFactor(),o=i.toString(),c=a.getIcon()?4:5,u=this._shouldProcessDigits(o,a);if(o.length>c||u){var m=this._normalizeNumber(i,c,r,a);r=m.numberFactor;o=m.displayNumber}else if(o!==""){var d=t.getFloatInstance({maxFractionDigits:c});o=d.format(i)}e.openStart("div");e.class("sapUshellDynamicTile");e.openEnd();e.openStart("div");e.class("sapUshellDynamicTileData");e.class(s[a.getNumberState()]?"sapUshellDynamicTileData"+a.getNumberState():"sapUshellDynamicTileData"+s.Neutral);e.openEnd();e.openStart("div");e.class("sapUshellDynamicTileIndication");e.openEnd();if(l[a.getStateArrow()]){e.openStart("div");e.class("sapUshellDynamicTileStateArrow");e.class("sapUshellDynamicTileData"+l[a.getStateArrow()]);e.openEnd();e.close("div")}e.voidStart("br");e.voidEnd();e.openStart("div");e.class("sapUshellDynamicTileNumberFactor");e.accessibilityState(a,{label:n.getText("TileUnits_lable")+r});e.openEnd();e.text(r);e.close("div");e.close("div");e.openStart("div");e.class("sapUshellDynamicTileNumber");if(o&&o!==""){e.accessibilityState(a,{label:n.getText("TileValue_lable")+o});e.openEnd();e.text(o)}else{e.openEnd();e.text(a.getNumberValue())}e.close("div");e.close("div");e.close("div")};o._normalizeNumber=function(e,a,i,r){var s;if(isNaN(e)){s=e}else{var l=t.getFloatInstance({maxFractionDigits:r.getNumberDigits()});if(!i){var n=Math.abs(e);if(n>=1e9){i="B";e/=1e9}else if(n>=1e6){i="M";e/=1e6}else if(n>=1e3){i="K";e/=1e3}}s=l.format(e)}var o=s;var c=o[a-1];a-=c==="."||c===","?1:0;o=o.substring(0,a);return{displayNumber:o,numberFactor:i}};o._shouldProcessDigits=function(e,t){var a=t.getNumberDigits(),i;if(e.indexOf(".")!==-1){i=e.split(".")[1].length;if(i>a){return true}}return false};o.getInfoPrefix=function(e){return e.getNumberUnit()};return o});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/StaticTileRenderer", ["sap/ui/core/Renderer","./TileBaseRenderer"],function(e,n){"use strict";var r=e.extend(n);r.apiVersion=2;r.renderPart=function(e,n){e.openStart("span");e.class("sapUshellStaticTile");e.openEnd();e.close("span")};return r});
// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/tile/TileBaseRenderer", ["sap/ushell/resources","sap/base/security/encodeXML","sap/ui/core/Icon"],function(e,t,l){"use strict";var i={apiVersion:2};var s=e.i18n;i.highlight=function(e,l){var i,s,a=t(l).replace(/&#xa;/g,"<br>");if(e&&e.length&&e.length>0){for(i=0;i<e.length;i=i+1){s=new RegExp("("+t(e[i]).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")+")","gi");a=a.replace(s,"<b>$1</b>")}}return a};i.render=function(e,t){var i,a;e.openStart("div",t);if(t.getTargetURL()){e.attr("data-targeturl",t.getTargetURL())}e.class("sapUshellTileBase");e.openEnd();e.openStart("div");e.class("sapUshellTileBaseHeader");e.openEnd();e.openStart("h3");e.class("sapUshellTileBaseTitle");e.accessibilityState(t,{label:s.getText("tileTypeListItem")+s.getText("TileDetails_lable")+s.getText("TileTitle_lable")+t.getTitle(),level:"3"});e.openEnd();e.unsafeHtml(this.highlight(t.getHighlightTerms(),t.getTitle()||""));e.close("h3");if(t.getSubtitle()){e.openStart("h4");e.class("sapUshellTileBaseSubtitle");e.accessibilityState(t,{label:s.getText("TileSubTitle_lable")+t.getSubtitle(),level:"4"});e.openEnd();e.unsafeHtml(this.highlight(t.getHighlightTerms(),t.getSubtitle()));e.close("h4")}e.close("div");if(typeof this.renderPart==="function"){this.renderPart(e,t)}if(t.getIcon()){a=new l({src:t.getIcon()});a.addStyleClass("sapUshellTileBaseIcon");e.renderControl(a)}if(t.getInfo()||typeof this.getInfoPrefix==="function"&&this.getInfoPrefix(t)){e.openStart("div");e.class("sapUshellTileBaseInfo");e.class(t.getInfoState()?"sapUshellTileBase"+t.getInfoState():"sapUshellTileBase"+sap.ushell.ui.tile.State.Neutral);e.accessibilityState(t,{label:s.getText("TileInfo_lable")+t.getInfo()});e.openEnd();if(typeof this.getInfoPrefix==="function"){i=this.getInfoPrefix(t);e.text(i)}if(t.getInfo()){if(i){e.text(", ")}e.unsafeHtml(this.highlight(t.getHighlightTerms(),t.getInfo()))}e.close("div")}e.close("div")};return i});
sap.ui.require.preload({
	"sap/ushell/ui/launchpad/Section.control.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:dnd="sap.ui.core.dnd"\n    xmlns:f="sap.f"\n    xmlns:fdnd="sap.f.dnd"\n    xmlns:section="sap.ushell.ui.launchpad.section"\n    core:require="{\n        ushellLibrary: \'sap/ushell/library\'\n    }"><VBox id="content" class="sapUshellSection"><items><Title\n                id="title"\n                class="sapUshellSectionTitle sapContrastPlus"\n                text="{$this>title}"\n                level="H3"\n                visible="{= !${$this>editable} &amp;&amp; ${$this>showSection}}" /><OverflowToolbar id="header" class="sapUshellSectionHeader" visible="{$this>editable}"><Text\n                    id="titleLabel"\n                    text="{$this>title}"\n                    visible="{= ${$this>editable} &amp;&amp; ${$this>default}}"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" /></layoutData></Text><Label\n                    id="label"\n                    text="{$this.i18n>Section.Label.Title}"\n                    labelFor="title-edit"\n                    visible="{= ${$this>editable} &amp;&amp; !${$this>default}}"\n                    showColon="true"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" /></layoutData></Label><Input\n                    id="title-edit"\n                    value="{$this>title}"\n                    editable="{= !${$this>default}}"\n                    visible="{= !${$this>default}}"\n                    placeholder="{$this.i18n>Section.TitlePlaceholder}"\n                    valueLiveUpdate="true"\n                    maxLength="100"\n                    change=".fireTitleChange"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" shrinkable="true" minWidth="10rem" maxWidth="40rem" /></layoutData></Input><ToolbarSpacer /><Button\n                    id="addVisualization"\n                    text="{$this.i18n>Section.Button.AddVisualization}"\n                    type="Transparent"\n                    press=".fireAdd"\n                    visible="{= ${$this>enableAddButton} &amp;&amp; !${$this>default}}" /><Button id="showHide"\n                    text="{= ${$this>showSection} ? ${$this.i18n>Section.Button.Hide} : ${$this.i18n>Section.Button.Show}}"\n                    type="Transparent"\n                    press="._showHidePressed(!${$this>showSection})"\n                    visible="{= ${$this>enableShowHideButton} &amp;&amp; !${$this>default}}" /><Button id="reset"\n                    text="{$this.i18n>Section.Button.Reset}"\n                    type="Transparent"\n                    press=".fireReset"\n                    visible="{= ${$this>enableResetButton} &amp;&amp; !${$this>default}}" /><Button\n                    id="delete"\n                    text="{$this.i18n>Section.Button.Delete}"\n                    type="Transparent"\n                    press=".fireDelete"\n                    visible="{= ${$this>enableDeleteButton} &amp;&amp; !${$this>default}}" /></OverflowToolbar><Text id="noVisualizationsText"\n                class="sapUshellSectionNoVisualizationsText"\n                text="{$this>noVisualizationsText}"\n                textAlign="Center"\n                visible="{= ${$this>editable} &amp;&amp; ${$this>showNoVisualizationsText}}" /><f:GridContainer\n                id="defaultArea"\n                class="sapUshellSectionGridContainer"\n                containerQuery="{$this>enableGridContainerQuery}"\n                minHeight="0"\n                visible="{= ${$this>editable} || ${$this>showSection} }"><f:customData><core:CustomData key="default" value="{$this>default}" /><core:CustomData key="area" value="{= ushellLibrary.DisplayFormat.Standard}" /></f:customData><f:layout><f:GridContainerSettings\n                        rowSize="{= ${$this>gridContainerRowSize}}"\n                        columnSize="{= ${$this>gridContainerRowSize}}"\n                        gap="{= ${$this>gridContainerGap}}" /></f:layout><f:layoutXS><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? 4 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeXS}}"\n                        columnSize="{= ${$this>gridContainerRowSizeXS}}"\n                        gap="{= ${$this>gridContainerGapXS}}" /></f:layoutXS><f:layoutS><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? 4 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeS}}"\n                        columnSize="{= ${$this>gridContainerRowSizeS}}"\n                        gap="{= ${$this>gridContainerGapS}}" /></f:layoutS><f:layoutM><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? 6 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeM}}"\n                        columnSize="{= ${$this>gridContainerRowSizeM}}"\n                        gap="{= ${$this>gridContainerGapM}}" /></f:layoutM><f:layoutL><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? ${$this>sizeBehavior} === \'Small\' ? 12 : 10 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeL}}"\n                        columnSize="{= ${$this>gridContainerRowSizeL}}"\n                        gap="{= ${$this>gridContainerGapL}}" /></f:layoutL><f:layoutXL><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? ${$this>sizeBehavior} === \'Small\' ? 16 : 14 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeXL}}"\n                        columnSize="{= ${$this>gridContainerRowSizeXL}}"\n                        gap="{= ${$this>gridContainerGapXL}}" /></f:layoutXL><f:dragDropConfig><dnd:DragInfo enabled="{$this>enableVisualizationReordering}" groupName="Section" sourceAggregation="items" /><fdnd:GridDropInfo\n                        enabled="{$this>enableVisualizationReordering}"\n                        groupName="Section"\n                        dropLayout="Horizontal"\n                        dropPosition="Between"\n                        targetAggregation="items"\n                        dropIndicatorSize="._getDefaultDropIndicatorSize"\n                        dragEnter="._onDragEnter"\n                        drop="._reorderVisualizations" /></f:dragDropConfig></f:GridContainer><f:GridContainer\n                id="flatArea"\n                class="sapUshellSectionGridContainer"\n                containerQuery="{$this>enableGridContainerQuery}"\n                minHeight="0"\n                visible="{= ${$this>editable} || ${$this>showSection} }"><f:customData><core:CustomData key="default" value="{$this>default}" /><core:CustomData key="area" value="{= ushellLibrary.DisplayFormat.Flat}" /></f:customData><f:layout><f:GridContainerSettings\n                        rowSize="{= ${$this>gridContainerRowSize}}"\n                        columnSize="{= ${$this>gridContainerRowSize}}"\n                        gap="{= ${$this>gridContainerGap}}" /></f:layout><f:layoutXS><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? 4 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeXS}}"\n                        columnSize="{= ${$this>gridContainerRowSizeXS}}"\n                        gap="0.5rem" /></f:layoutXS><f:layoutS><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? 4 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeS}}"\n                        columnSize="{= ${$this>gridContainerRowSizeS}}"\n                        gap="0.5rem" /></f:layoutS><f:layoutM><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? 6 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeM}}"\n                        columnSize="{= ${$this>gridContainerRowSizeM}}"\n                        gap="{= ${$this>gridContainerGapM}}" /></f:layoutM><f:layoutL><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? ${$this>sizeBehavior} === \'Small\' ? 12 : 10 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeL}}"\n                        columnSize="{= ${$this>gridContainerRowSizeL}}"\n                        gap="{= ${$this>gridContainerGapL}}" /></f:layoutL><f:layoutXL><f:GridContainerSettings\n                        columns="{= ${$this>enableGridBreakpoints} ? ${$this>sizeBehavior} === \'Small\' ? 16 : 14 : 0 }"\n                        rowSize="{= ${$this>gridContainerRowSizeXL}}"\n                        columnSize="{= ${$this>gridContainerRowSizeXL}}"\n                        gap="{= ${$this>gridContainerGapXL}}" /></f:layoutXL><f:dragDropConfig><dnd:DragInfo\n                        enabled="{$this>enableVisualizationReordering}"\n                        groupName="{= ${$this>_duringDrag} ? \'Section\' : \'FlatArea\'}"\n                        sourceAggregation="items" /><fdnd:GridDropInfo\n                        enabled="{$this>enableVisualizationReordering}"\n                        groupName="{= ${$this>_duringDrag} ? \'Section\' : \'FlatArea\'}"\n                        dropLayout="Horizontal"\n                        dropPosition="Between"\n                        targetAggregation="items"\n                        dropIndicatorSize="._getFlatDropIndicatorSize"\n                        dragEnter="._onDragEnter"\n                        drop="._reorderVisualizations" /></f:dragDropConfig></f:GridContainer><section:CompactArea\n                id="compactArea"\n                class="sapUshellSectionGridContainer"\n                visible="{= ${$this>editable} || ${$this>showSection} }"\n                itemDrop="._reorderVisualizations"\n                enableLinkReordering="{$this>enableVisualizationReordering}"><section:customData><core:CustomData key="default" value="{$this>default}" /><core:CustomData key="area" value="{= ushellLibrary.DisplayFormat.Compact}" /></section:customData><section:dragDropConfig><dnd:DragInfo\n                        enabled="{$this>enableVisualizationReordering}"\n                        groupName="{= ${$this>_duringDrag} ? \'Section\' : \'CompactArea\'}"\n                        sourceAggregation="items" /><dnd:DropInfo\n                        enabled="{$this>enableVisualizationReordering}"\n                        groupName="{= ${$this>_duringDrag} ? \'Section\' : \'CompactArea\'}"\n                        dropLayout="Horizontal"\n                        dropPosition="Between"\n                        targetAggregation="items"\n                        dragEnter="._onDragEnter"\n                        drop="._reorderVisualizations" /><dnd:DropInfo\n                        enabled="{$this>enableVisualizationReordering}"\n                        groupName="{= ${$this>_duringDrag} ? \'Section\' : \'CompactArea\'}"\n                        dragEnter="._onDragEnter"\n                        drop="._reorderVisualizations" /></section:dragDropConfig></section:CompactArea></items><customData><core:CustomData\n                key="help-id"\n                value="{= ${$this>default} ? \'recently-added-apps\' : ${$this>dataHelpId}}"\n                writeToDom="{= ${$this>default} || !!${$this>dataHelpId}}" /></customData></VBox></core:FragmentDefinition>\n'
});
//# sourceMappingURL=homepage-af-dep.js.map
