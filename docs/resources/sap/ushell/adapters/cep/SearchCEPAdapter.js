// Copyright (c) 2009-2022 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/UriParameters","sap/ushell/Config"],function(e,t,a){"use strict";var r=function(e,t,a){this._oConfig=a&&a.config||{};this._oConfig.searchProvider=this._oConfig.searchProvider||"/navigation/search/api/v1/lookupTargets"};r.prototype.execSearch=function(r){var i=this._oConfig.searchProvider,s=sap.ushell.Container.getFLPPlatform(true),n=new t(document.URL),o=a.last("/core/site/siteId"),c=sap.ui.getCore().getConfiguration().getLanguageTag();if(typeof r==="string"&&r.length>0){i+="?query="+encodeURIComponent(r)}if(typeof o==="string"&&o.length>0){i+=i.indexOf("?")>0?"&":"?";i+="siteId="+encodeURIComponent(o)}if(s==="MYHOME"){i+=i.indexOf("?")>0?"&":"?";i+="genLink=true"}if(e.getLevel()>=e.Level.DEBUG){e.debug("Navigation service search triggered","url: "+i,"sap.ushell.adapters.cep.SearchCEPAdapter::execSearch")}if(n.get("sap-statistics")==="true"||window.localStorage.getItem("sap-ui-statistics")==="X"){i+=i.indexOf("?")>0?"&":"?";i+="sap-statistics=true"}return fetch(i,{method:"GET",headers:{"Content-Type":"application/json; utf-8",Accept:"application/json","Accept-Language":c}}).then(function(t){if(t.ok===false){e.error("Navigation service search adapter failed","error: "+t.status+","+t.statusText+"\nurl: "+i,"sap.ushell.adapters.cep.SearchCEPAdapter::execSearch");return Promise.reject(t.statusText)}return t.json()}).then(function(t){if(e.getLevel()>=e.Level.DEBUG){e.debug("Navigation service search adapter success","url: "+i+"\n\n"+JSON.stringify(t||{},null,2),"sap.ushell.adapters.cep.SearchCEPAdapter::execSearch")}return t})};return r},false);
//# sourceMappingURL=SearchCEPAdapter.js.map