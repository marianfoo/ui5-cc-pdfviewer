{"version":3,"file":"CommonDataModelAdapter.js","names":["sap","ui","define","URI","Log","Version","UriParameters","jQuery","CommonDataModelAdapter","oUnused","sParameter","oAdapterConfiguration","this","config","siteData","oCdmSiteDataRequestPromise","Deferred","resolve","siteDataPromise","sSiteUrl","_identifySiteUrlFromConfig","sAbsoluteSiteUrl","_normalizeUrl","location","href","_requestSiteData","prototype","sUrl","oSiteDataRequestDeferred","reject","ajax","type","dataType","url","done","oResponseData","fail","oError","error","responseText","promise","sCurrentURL","indexOf","oBaseTag","document","getElementsByTagName","absoluteTo","toString","getSite","oDeferred","oSiteData","oSiteWithoutPers","extend","personalization","sMessage","getPersonalization","that","oSiteDataCopy","sSiteVersion","_version","sPersonalizationVersion","ignoreSiteDataPersonalization","Object","keys","length","_isPersonalizationVersionValid","_readPersonalizationDataFromStorage","oPersonalizationData","siteVersion","personalizationVersion","iSiteVersionMajor","getMajor","oPersonalizationVersion","setPersonalization","oPersonalizationDeferred","ushell","Container","getServiceAsync","then","oPersonalizationService","oComponent","oScope","keyCategory","constants","FIXED_KEY","writeFrequency","LOW","clientStorageAllowed","oPersId","container","item","oCdmSiteVersion","version","inRange","oPersonalizer","getPersonalizer","setPersData","info","cdmSiteVersion","oVersion","getPersData","oParams","fromQuery","window","search","sSiteURL","get","oConfig","allowSiteSourceFromURLParameter","siteDataUrl","cdmSiteUrl","sCdmSiteUrl"],"sources":["CommonDataModelAdapter-dbg.js"],"mappings":";AAQAA,IAAIC,GAAGC,OAAO,CACV,wBACA,eACA,wBACA,8BACA,4BACD,SAAUC,EAAKC,EAAKC,EAASC,EAAeC,QAC3C,aAqBA,IAAIC,EAAyB,SAAUC,EAASC,EAAYC,GACxDC,KAAKD,sBAAwBA,EAC7B,GAAIA,GAAyBA,EAAsBE,QAAUF,EAAsBE,OAAOC,SAAU,CAChGF,KAAKG,4BAA6B,IAAIR,OAAOS,UAAWC,QAAQN,EAAsBE,OAAOC,SACjG,MAAO,GAAIH,GAAyBA,EAAsBE,QAAUF,EAAsBE,OAAOK,gBAAiB,CAC9GN,KAAKG,2BAA6BJ,EAAsBE,OAAOK,eACnE,KAAO,CACH,IAAIC,EAAWP,KAAKQ,2BAA2BT,GAC/C,IAAIU,EAAmBT,KAAKU,cAAcH,EAAUI,SAASC,MAE7DZ,KAAKG,2BAA6BH,KAAKa,iBAAiBJ,EAC5D,CACJ,EAYAb,EAAuBkB,UAAUD,iBAAmB,SAAUE,GAC1D,IAAIC,EAA2B,IAAIrB,OAAOS,SAE1C,IAAKW,EAAM,CACP,OAAOC,EAAyBC,OAC5B,gGACR,CAEAtB,OAAOuB,KAAK,CACRC,KAAM,MACNC,SAAU,OACVC,IAAKN,IACNO,KAAK,SAAUC,GACdP,EAAyBX,QAAQkB,EACrC,GAAGC,KAAK,SAAUC,GACdjC,EAAIkC,MAAMD,EAAOE,cACjBX,EAAyBC,OAAO,kDACpC,GAEA,OAAOD,EAAyBY,SACpC,EAgBAhC,EAAuBkB,UAAUJ,cAAgB,SAAUK,EAAMc,GAC7D,UAAWd,IAAS,SAAU,CAC1B,OAAOA,CACX,CAEA,GAAIA,EAAKe,QAAQ,UAAY,EAAG,CAC5B,OAAOf,CACX,CAKA,IAAIgB,EAAWC,SAASC,qBAAqB,QAAQ,GACrD,OAAQ,IAAI1C,EAAIwB,EAAMgB,GAAUG,WAAWL,GAAcM,UAC7D,EAWAvC,EAAuBkB,UAAUsB,QAAU,WACvC,IAAIC,EAAY,IAAI1C,OAAOS,SAE3BJ,KAAKG,2BAA2BmB,KAAK,SAAUgB,GAC3C,IAAIC,EAAmB5C,OAAO6C,OAAO,CAAC,EAAGF,UAElCC,EAAiBE,gBACxBJ,EAAUhC,QAAQkC,EACtB,GAAGf,KAAK,SAAUkB,GACdL,EAAUpB,OAAOyB,EACrB,GAEA,OAAOL,EAAUT,SACrB,EAUAhC,EAAuBkB,UAAU6B,mBAAqB,WAClD,IAAIN,EAAY,IAAI1C,OAAOS,SACvBwC,EAAO5C,KAEXA,KAAKG,2BAA2BmB,KAAK,SAAUgB,GAC3C,IAAIO,EAAgBlD,OAAO6C,OAAO,CAAC,EAAGF,GAClCQ,EAAeD,EAAcE,SAC7BC,EAEJ,GAAIJ,EAAK7C,uBAAyB6C,EAAK7C,sBAAsBE,QAAU2C,EAAK7C,sBAAsBE,OAAOgD,8BAA+B,QAC7HJ,EAAcJ,eACzB,CACA,GAAII,EAAcJ,gBAAiB,CAC/BO,EAA0BH,EAAcJ,gBAAgBM,SACxD,GAAIG,OAAOC,KAAKN,EAAcJ,iBAAiBW,OAAS,IAAMR,EAAKS,+BAA+BP,EAAcE,GAA0B,CACtIxD,EAAIkC,MAAM,wFACJ,yFAA2FsB,EAA0B,mBAAqBF,GAChJT,EAAUhC,UACV,MACJ,CACAgC,EAAUhC,QAAQwC,EAAcJ,gBACpC,KAAO,CACHG,EAAKU,oCAAoCR,GACpCxB,KAAK,SAAUiC,GACZP,EAA0BO,EAAqBR,SAC/C,GAAIG,OAAOC,KAAKI,GAAsBH,OAAS,IAAMR,EAAKS,+BAA+BP,EAAcE,GAA0B,CAC7HxD,EAAIkC,MAAM,wFACJ,yFAA2FsB,EAA0B,mBAAqBF,GAChJT,EAAUhC,UACV,MACJ,CACAgC,EAAUhC,QAAQkD,EACtB,GACC/B,KAAK,SAAUkB,GACZL,EAAUpB,OAAOyB,EACrB,EACR,CACJ,GAAGlB,KAAK,SAAUkB,GACdL,EAAUpB,OAAOyB,EACrB,GAEA,OAAOL,EAAUT,SACrB,EAmBAhC,EAAuBkB,UAAUuC,+BAAiC,SAAUG,EAAaC,GACrF,IAAKD,EAAa,CACd,OAAO,KACX,CAEA,IAAIE,EAAoB,IAAIjE,EAAQ+D,GAAaG,WAC7CC,EAA0B,IAAInE,EAAQgE,GAE1C,GAAIC,GAAqB,EAAG,CACxB,OAAOE,EAAwBD,aAAeD,CAClD,CACA,OAAOE,EAAwBD,WAAa,CAChD,EAYA/D,EAAuBkB,UAAU+C,mBAAqB,SAAUN,GAC5D,IAAIO,EAA2B,IAAInE,OAAOS,SAE1ChB,IAAI2E,OAAOC,UAAUC,gBAAgB,mBAAmBC,KAAK,SAAUC,GACnE,IAAIC,EACAC,EAAS,CACLC,YAAaH,EAAwBI,UAAUD,YAAYE,UAC3DC,eAAgBN,EAAwBI,UAAUE,eAAeC,IACjEC,qBAAsB,MAE1BC,EAAU,CACNC,UAAW,iCACXC,KAAM,QAEVC,EAAkB,IAAItF,EAAQ8D,EAAqByB,SAEvD,GAAID,EAAgBE,QAAQ,QAAS,SAAU,CAC3CL,EAAU,CACNC,UAAW,oCACXC,KAAM,OAEd,CACA,IAAII,EAAgBf,EAAwBgB,gBAAgBP,EAASP,EAAQD,GAE7Ec,EAAcE,YAAY7B,GACrBjC,KAAK,WACF9B,EAAI6F,KAAK,sDACTvB,EAAyBzD,SAC7B,GACCmB,KAAK,WACFsC,EAAyB7C,OAAO,uCACpC,EACR,GAEA,OAAO6C,EAAyBlC,SACpC,EAcAhC,EAAuBkB,UAAUwC,oCAAsC,SAAUgC,GAC7E,IAAIxB,EAA2B,IAAInE,OAAOS,SAE1ChB,IAAI2E,OAAOC,UAAUC,gBAAgB,mBAAmBC,KAAK,SAAUC,GACnE,IAAIE,EAAS,CACTC,YAAaH,EAAwBI,UAAUD,YAAYE,UAC3DC,eAAgBN,EAAwBI,UAAUE,eAAeC,IACjEC,qBAAsB,MAE1B,IAAIC,EAAU,CACVC,UAAW,iCACXC,KAAM,QAGV,GAAIQ,EAAgB,CAChB,IAAIC,EAAW,IAAI9F,EAAQ6F,GAE3B,GAAIC,GAAYA,EAASN,QAAQ,QAAS,SAAU,CAChDL,EAAU,CACNC,UAAW,oCACXC,KAAM,OAEd,CACJ,CAEAX,EAAwBgB,gBAAgBP,EAASP,GAAQmB,cACpDlE,KAAK,SAAUiC,GACZO,EAAyBzD,QAAQkD,GAAwB,CAAC,EAC9D,GACC/B,KAAK,WACFsC,EAAyB7C,OAAO,wCACpC,EACR,GACA,OAAO6C,EAAyBlC,SACpC,EAeAhC,EAAuBkB,UAAUN,2BAA6B,SAAUT,GACpE,IAAI0F,EAAU/F,EAAcgG,UAAUC,OAAOhF,SAASiF,QACtD,IAAIC,EAAWJ,EAAQK,IAAI,2BAC3B,IAAIC,EAAUhG,GAAyBA,EAAsBE,OAG7D,GAAK8F,IAAYA,EAAQC,iCAAoCH,EAAU,CACnEA,EAAW,IACf,CACA,GAAIE,IAAYF,EAAU,CAItBA,EAAWE,EAAQE,aAAeF,EAAQG,UAC9C,CACAlG,KAAKmG,YAAcN,EACnB,OAAOA,CACX,EAEA,OAAOjG,CACX,EAAe"}