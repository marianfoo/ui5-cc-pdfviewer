/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["sap/ui/core/InvisibleText","sap/m/Button","sap/m/library","sap/m/Menu","sap/m/MenuItem","sap/m/FlexBox","sap/m/FlexItemData","sap/esh/search/ui/controls/SearchInput","sap/esh/search/ui/controls/SearchButton","sap/ui/core/Control","./SearchSelect","./SearchSelectQuickSelectDataSource","sap/ui/core/IconPool","sap/m/MessagePopover","sap/ui/model/BindingMode","sap/m/MessageItem","sap/m/OverflowToolbarLayoutData","../i18n"],function(t,e,i,n,o,s,r,a,u,c,l,h,p,g,f,d,v,y){function B(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}function m(t,e){var i=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=A(t))||e&&t&&typeof t.length==="number"){if(i)t=i;var n=0;var o=function(){};return{s:o,n:function(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,r=false,a;return{s:function(){i=i.call(t)},n:function(){var t=i.next();s=t.done;return t},e:function(t){r=true;a=t},f:function(){try{if(!s&&i.return!=null)i.return()}finally{if(r)throw a}}}}function A(t,e){if(!t)return;if(typeof t==="string")return M(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor)i=t.constructor.name;if(i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return M(t,e)}function M(t,e){if(e==null||e>t.length)e=t.length;for(var i=0,n=new Array(e);i<e;i++){n[i]=t[i]}return n}var x=i["ButtonType"];var b=i["FlexAlignItems"];var S=B(l);var w=B(h);var P=i["PlacementType"];var D=i["OverflowToolbarPriority"];var I=B(y);var F=c.extend("sap.esh.search.ui.controls.SearchFieldGroup",{renderer:{apiVersion:2,render:function t(e,i){e.openStart("div",i);e["class"]("SearchFieldGroup");e.openEnd();e.renderControl(i.getAggregation("_topFlexBox"));e.renderControl(i.getAggregation("_flexBox"));e.renderControl(i.getAggregation("_buttonAriaText"));e.close("div")}},metadata:{properties:{selectActive:{defaultValue:true,type:"boolean"},selectQsDsActive:{defaultValue:false,type:"boolean"},inputActive:{defaultValue:true,type:"boolean"},buttonActive:{defaultValue:true,type:"boolean"},cancelButtonActive:{defaultValue:true,type:"boolean"},messagesButtonActive:{defaultValue:false,type:"boolean"},actionsMenuButtonActive:{defaultValue:false,type:"boolean"}},aggregations:{_topFlexBox:{type:"sap.m.FlexBox",multiple:false,visibility:"hidden"},_flexBox:{type:"sap.m.FlexBox",multiple:false,visibility:"hidden"},_buttonAriaText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}}},constructor:function t(e,i){c.prototype.constructor.call(this,e,i);this.initSelect();this.initSelectQsDs();this.initInput();this.initButton();this.initCancelButton();this.initMessagesButton();this.initActionsMenuButton();this.initFlexBox()},setCancelButtonActive:function t(e){if(e===this.getProperty("cancelButtonActive")){return}this.setProperty("cancelButtonActive",e);this.initFlexBox()},setMessagesButtonActive:function t(e){if(e===this.getProperty("messagesButtonActive")){return}this.setProperty("messagesButtonActive",e);this.initFlexBox()},setActionsMenuButtonActive:function t(e){if(e===this.getProperty("actionsMenuButtonActive")){return}this.setProperty("actionsMenuButtonActive",e);this.initFlexBox()},setSelectQsDsActive:function t(e){if(e===this.getProperty("selectQsDsActive")){return}this.setProperty("selectQsDsActive",e);this.initFlexBox()},initFlexBox:function t(){if(!this.select){return}if(!this.selectQsDs){return}var e=[];var i=[];if(this.getProperty("selectActive")){this.select.setLayoutData(new r("",{growFactor:0}));i.push(this.select)}if(this.getProperty("selectQsDsActive")){this.selectQsDs.setLayoutData(new r("",{growFactor:1}));e.push(this.selectQsDs)}if(this.getProperty("inputActive")){this.input.setLayoutData(new r("",{growFactor:1}));i.push(this.input)}if(this.getProperty("buttonActive")){this.button.setLayoutData(new r("",{growFactor:0}));i.push(this.button)}if(this.getProperty("cancelButtonActive")){this.cancelButton.setLayoutData(new r("",{growFactor:0}));i.push(this.cancelButton)}if(this.getProperty("actionsMenuButtonActive")){this.actionsMenuButton.setLayoutData(new r("",{growFactor:0}));i.push(this.actionsMenuButton)}if(this.getProperty("messagesButtonActive")){this.messagesButton.setLayoutData(new r("",{growFactor:0}));i.push(this.messagesButton)}if(this.getProperty("selectQsDsActive")){var n=this.getAggregation("_topFlexBox");if(!n){n=new s("",{items:e});this.setAggregation("_topFlexBox",n)}else{n.removeAllAggregation("items");var o=m(e),a;try{for(o.s();!(a=o.n()).done;){var u=a.value;n.addItem(u)}}catch(t){o.e(t)}finally{o.f()}}}var c=this.getAggregation("_flexBox");if(!c){c=new s("",{alignItems:b.Start,items:i});this.setAggregation("_flexBox",c)}else{c.removeAllAggregation("items");var l=m(i),h;try{for(l.s();!(h=l.n()).done;){var p=h.value;c.addItem(p)}}catch(t){l.e(t)}finally{l.f()}}},initSelect:function t(){this.select=new S(this.getId()+"-select",{});this.select.attachChange(function(){if(this.getAggregation("input")){var t=this.getAggregation("input");t.destroySuggestionRows()}})},initSelectQsDs:function t(){this.selectQsDs=new w(this.getId()+"-selectQsDs",{});this.selectQsDs.attachChange(function(){if(this.getAggregation("input")){var t=this.getAggregation("input");t.destroySuggestionRows()}})},initInput:function t(){this.input=new a(this.getId()+"-input")},initButton:function e(){var i=this;this.button=new u(this.getId()+"-button",{tooltip:{parts:[{path:"/searchButtonStatus"}],formatter:function t(e){return I.getText("searchButtonStatus_"+e)}},press:function t(e){var n=i.button.getModel();if(!n.config.odataProvider&&n.config.isUshell){if(i.input.getValue()===""&&n.getDataSource()===n.getDefaultDataSource()){return}}n.invalidateQuery();i.input.destroySuggestionRows();i.input.triggerSearch()}});var n=new t(this.getId()+"-buttonAriaText",{text:{parts:[{path:"/searchButtonStatus"}],formatter:function t(e){return I.getText("searchButtonStatus_"+e)}}});this.setAggregation("_buttonAriaText",n);this.button.addAriaLabelledBy(this.getAggregation("_buttonAriaText"))},initCancelButton:function t(){this.cancelButton=new e(this.getId()+"-buttonCancel",{text:"{i18n>cancelBtn}"});this.cancelButton.addStyleClass("sapUshellSearchCancelButton")},initMessagesButton:function t(){var i=this;this.errorPopover=new g(this.getId()+"-searchMessagePopover",{placement:P.Bottom});this.errorPopover.bindAggregation("items",{path:"/errors",factory:function t(){var e=new d("",{title:"{title}",description:"{description}"});return e}});this.messagesButton=new e(this.getId()+"-searchErrorButton",{icon:p.getIconURI("alert"),text:{parts:[{path:"/errors/length"}],formatter:function t(e){return e}},visible:{parts:[{path:"/errors/length"}],formatter:function t(e){return e>0},mode:f.OneWay},type:x.Emphasized,tooltip:"{i18n>errorBtn}",press:function t(){if(!i.errorPopover.getModel()){i.errorPopover.setModel(i.getModel())}if(i.errorPopover.isOpen()){i.errorPopover.close()}else{i.errorPopover.setVisible(true);i.errorPopover.openBy(i.messagesButton)}}});this.messagesButton.addStyleClass("sapUiTinyMarginBegin");this.messagesButton["addDelegate"]({onAfterRendering:function t(){var e=i.getModel();e.setProperty("/messagePopoverControlId",i.errorPopover.getId());if(!e.getProperty("/isErrorPopovered")){i.messagesButton.firePress();e.setProperty("/isErrorPopovered",true)}}});this.messagesButton.setLayoutData(new v("",{priority:D.NeverOverflow}));this.messagesButton.addStyleClass("sapUshellSearchMessagesButton")},initActionsMenuButton:function t(){var i=this;this.actionsMenuButton=new e(this.getId()+"-actionsMenuButton",{icon:"sap-icon://overflow",type:x.Emphasized,press:function t(){var e=[];var s=new o({text:"{i18n>actionsMenuSort}",icon:"sap-icon://sort",press:function t(){var e=document.querySelectorAll(".sapUshellSearchTableSortButton")[0];var i=sap.ui.getCore().byId(e.id);i.firePress()}});e.push(s);var r=new o({text:"{i18n>actionsMenuFilter}",icon:"sap-icon://filter",press:function t(){var e=document.querySelectorAll(".sapUshellSearchFacetShowMoreLink")[0];e.focus();e.click()}});e.push(r);i.actionsMenu=new n({items:e});i.actionsMenu.setModel(i.getModel("i18n"),"i18n");i.actionsMenu.openBy(i.actionsMenuButton,true)},visible:{parts:[{path:"/facets"},{path:"/facetVisibility"}],formatter:function t(e,i){if((e===null||e===void 0?void 0:e.length)>0&&e.filter(function(t){return t.facetType==="attribute"||t.facetType==="hierarchy"||t.facetType==="hierarchyStatic"}).length>0&&i){return true}else{return false}}}});this.actionsMenuButton.addStyleClass("sapUiTinyMarginBegin")},setModel:function t(e,i){this.select.setModel(e,i);this.input.setModel(e,i);this.button.setModel(e,i);this.cancelButton.setModel(e,i);this.messagesButton.setModel(e,i);this.errorPopover.setModel(e,i);this.actionsMenuButton.setModel(e,i);this.getAggregation("_buttonAriaText").setModel(e,i);return this},destroy:function t(){c.prototype.destroy.call(this);if(this.select){this.select.destroy()}if(this.selectQsDs){this.selectQsDs.destroy()}if(this.cancelButton){this.cancelButton.destroy()}if(this.messagesButton){this.messagesButton.destroy()}if(this.errorPopover){this.errorPopover.destroy()}if(this.actionsMenuButton){this.actionsMenuButton.destroy()}if(this.actionsMenu){this.actionsMenu.destroy()}}});return F})})();
//# sourceMappingURL=SearchFieldGroup.js.map