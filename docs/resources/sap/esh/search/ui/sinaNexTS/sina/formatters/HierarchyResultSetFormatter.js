/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../ComparisonOperator","../ComplexCondition","../Filter","../HierarchyDisplayType","../LogicalOperator","../SimpleCondition","./Formatter"],function(r,e,t,n,o,a,i){function u(r,e){if(!(r instanceof e)){throw new TypeError("Cannot call a class as a function")}}function c(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(r,n.key,n)}}function f(r,e,t){if(e)c(r.prototype,e);if(t)c(r,t);Object.defineProperty(r,"prototype",{writable:false});return r}function l(r,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:true,configurable:true}});Object.defineProperty(r,"prototype",{writable:false});if(e)s(r,e)}function s(r,e){s=Object.setPrototypeOf||function r(e,t){e.__proto__=t;return e};return s(r,e)}function p(r){var e=h();return function t(){var n=d(r),o;if(e){var a=d(this).constructor;o=Reflect.construct(n,arguments,a)}else{o=n.apply(this,arguments)}return v(this,o)}}function v(r,e){if(e&&(typeof e==="object"||typeof e==="function")){return e}else if(e!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return y(r)}function y(r){if(r===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return r}function h(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(r){return false}}function d(r){d=Object.setPrototypeOf?Object.getPrototypeOf:function r(e){return e.__proto__||Object.getPrototypeOf(e)};return d(r)}
/*!
   * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
   */var b=r["ComparisonOperator"];var m=e["ComplexCondition"];var g=t["Filter"];var w=n["HierarchyDisplayType"];var O=o["LogicalOperator"];var j=a["SimpleCondition"];var C=i["Formatter"];function P(r,e,t){if(t){return e?e(r):r}if(!r||!r.then){r=Promise.resolve(r)}return e?r.then(e):r}function _(r,e,t){if(t){return e?e(r()):r()}try{var n=Promise.resolve(r());return e?n.then(e):n}catch(r){return Promise.reject(r)}}var S=function(r){l(t,r);var e=p(t);function t(){u(this,t);return e.apply(this,arguments)}f(t,[{key:"initAsync",value:function r(){return Promise.resolve()}},{key:"format",value:function r(e){return e}},{key:"formatAsync",value:function r(e){return _(function(){var r=function r(e,t,n){var o=[];if(t.length&&e){var a=e.getBusinessObjectDataSources();a.forEach(function(r){if(r.hierarchyName===n){return}r.attributesMetadata.forEach(function(e){if(e.hierarchyName===n&&e.hierarchyDisplayType===w.HierarchyResultView){o.push(r)}})})}return o};var t=function r(e){var t=[];e.titleAttributes.forEach(function(r){if(r.value.startsWith("sap-icon://")!==true){t.push(r.valueFormatted)}});return t.join("; ")};var n=function r(e,t,n,a){var i=new j({attribute:t,operator:b.ChildOf,value:n,valueLabel:a});var u=new m({operator:O.And,conditions:[i]});var c=new m({operator:O.And,conditions:[u]});var f=new g({dataSource:e.dataSource,searchTerm:"*",rootCondition:c,sina:e.sina});e.defaultNavigationTarget=o(f,e.sina)};var o=function r(e,t,n){var o={top:10,filter:encodeURIComponent(JSON.stringify(e.toJson()))};var a=t.configuration.renderSearchUrl(o);return t._createNavigationTarget({targetUrl:a,label:n||a,target:"_self"})};var a=function r(e,t,n,a){var i=new j({attribute:t,operator:b.DescendantOf,value:n,valueLabel:a});var c=new m({operator:O.And,conditions:[i]});var f=new m({operator:O.And,conditions:[c]});u.forEach(function(r){var t=new g({dataSource:r,searchTerm:"*",rootCondition:f,sina:e.sina});e.navigationTargets.push(o(t,e.sina,r.labelPlural))})};if(e.sina.configuration.FF_hierarchyBreadcrumbs!==true||e.query.filter.dataSource.isHierarchyDefinition!==true){return P(e)}var i=e.query.filter.dataSource;var u=r(i.sina,i.hierarchyAttribute,i.hierarchyName);if(u.length===0){return P(e)}e.items.forEach(function(r){var e="";var o="";var u="";var c=t(r);var f=r.attributes.find(function(r){return r.id===i.hierarchyAttribute});e=f.id;o=f.value;u=c||f.value;n(r,e,o,u);a(r,e,o,u)});return P(e)})}}]);return t}(C);var T={__esModule:true};T.HierarchyResultSetFormatter=S;return T})})();
//# sourceMappingURL=HierarchyResultSetFormatter.js.map