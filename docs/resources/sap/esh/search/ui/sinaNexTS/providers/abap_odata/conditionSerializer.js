/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["../../sina/ComparisonOperator","./typeConverter","../../sina/ComplexCondition","../../sina/SimpleCondition","../../core/errors","./ComparisonOperator","../../sina/LogicalOperator"],function(e,r,t,i,n,o,a){function s(e,r){if(!(e instanceof r)){throw new TypeError("Cannot call a class as a function")}}function u(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function c(e,r,t){if(r)u(e.prototype,r);if(t)u(e,t);Object.defineProperty(e,"prototype",{writable:false});return e}
/*!
   * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
   */var p=e["ComparisonOperator"];var l=t["ComplexCondition"];var d=i["SimpleCondition"];var v=n["InBetweenConditionInConsistent"];var f=n["UnknownComparisonOperatorError"];var C=o["ABAPODataComparisonOperator"];var O=a["LogicalOperator"];var y=function(){function e(r){s(this,e);this.dataSource=r}c(e,[{key:"convertSinaToOdataOperator",value:function e(r){switch(r){case p.Eq:return"EQ";case p.Lt:return"LT";case p.Gt:return"GT";case p.Le:return"LE";case p.Ge:return"GE";case p.Co:return"EQ";case p.Bw:return"EQ";case p.Ew:return"EQ";case O.And:return"AND";case O.Or:return"OR";default:throw new f("Unknown comparison operator "+r)}}},{key:"serializeComplexCondition",value:function e(r){var t={ActAsQueryPart:false,Id:1,OperatorType:this.convertSinaToOdataOperator(r.operator),SubFilters:[]};var i="Schema[Namespace=ESH_SEARCH_SRV]>EntityType[Name=SearchFilter]>Property[Name=ActAsQueryPart]";if(r.sina.provider.isQueryPropertySupported(i)){t.ActAsQueryPart=true}var n=r.conditions;for(var o=0;o<n.length;++o){var a=n[o];t.SubFilters.push(this.serialize(a))}return t}},{key:"serializeSimpleCondition",value:function e(t){var i=this.dataSource.getAttributeMetadata(t.attribute);var n=i.type;var o={ConditionAttribute:t.attribute,ConditionOperator:this.convertSinaToOdataOperator(t.operator),ConditionValue:r.sina2Odata(n,t.value,{operator:t.operator}),SubFilters:[]};return o}},{key:"serializeBetweenCondition",value:function e(t){var i;var n;var o=t.conditions[0];var a=t.conditions[1];if(o instanceof d&&a instanceof d){var s=this.dataSource.getAttributeMetadata(o.attribute);var u=s.type;if(o.operator===p.Ge){i=o.value;n=a.value}else{i=a.value;n=o.value}var c={ConditionAttribute:o.attribute,ConditionOperator:C.Bt,ConditionValue:r.sina2Odata(u,i),ConditionValueHigh:r.sina2Odata(u,n),SubFilters:[]};return c}throw new v}},{key:"serialize",value:function e(r){if(r instanceof l){if(r.operator===O.And&&r.conditions[0]&&(r.conditions[0].operator===p.Ge||r.conditions[0].operator===p.Gt||r.conditions[0].operator===p.Le||r.conditions[0].operator===p.Lt)){if(r.conditions.length===1){return this.serializeSimpleCondition(r.conditions[0])}return this.serializeBetweenCondition(r)}return this.serializeComplexCondition(r)}if(r instanceof d){return this.serializeSimpleCondition(r)}}}]);return e}();function h(e,r){var t=new y(e);return t.serialize(r)}var m={__esModule:true};m.serialize=h;return m})})();
//# sourceMappingURL=conditionSerializer.js.map