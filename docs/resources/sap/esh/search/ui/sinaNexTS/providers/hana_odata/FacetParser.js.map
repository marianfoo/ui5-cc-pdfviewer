{"version":3,"file":"FacetParser.js","names":["sap","ui","define","____sina_SearchQuery","typeConverter","____sina_LogicalOperator","____sina_ComparisonOperator","____core_Log","____core_errors","___HierarchyParser","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","SearchQuery","LogicalOperator","ComparisonOperator","Log","FacetsParseError","InternalServerError","HierarchyParser","_call","body","then","direct","result","Promise","resolve","e","reject","FacetParser","provider","this","sina","log","value","parse","query","data","_this","hierarchyParser","error","message","warn","facets","facetData","resultSet","filter","dataSource","getAllDataSource","parseDataSourceFacet","e1","type","DataSourceType","Category","Dimensions","PropertyType","attributeMetadata","parseFacetAttribute","isHierarchy","parseHierarchyFacet","parseChartFacet","itemsInString","Items","Array","isArray","JSON","stringify","push","all","dataSourceQuery","createDataSourceQuery","clone","items","cell","getDataSource","scope","createDataSource","id","ValueLow","label","Description","_createDataSourceResultSetItem","dimensionValueFormatted","labelPlural","measureValue","_Count","measureValueFormatted","toString","_createDataSourceResultSet","title","_setResultSet","createAttributeFilterCondition","attributeId","metadata","hasOwnProperty","call","finalCondition","createComplexCondition","attributeLabel","valueLabel","formatFacetValue","operator","And","conditions","lowBoundCondition","upperBoundCondition","From","createSimpleCondition","attribute","Le","odata2Sina","To","Ge","textElementValue","startsWith","initialValue","dimension","PropertyName","getAttributeMetadata","_attributeMetadata$us","_attributeMetadata$us2","chartQuery","setDataSource","setRootCondition","rootCondition","createChartQuery","iconPropertyName","usage","AdvancedSearch","iconUrlAttributeName","isIconContained","findIndex","item","_item$iconPropertyNam","icon","_attributeMetadata$us3","_attributeMetadata$us4","_attributeMetadata$us5","_attributeMetadata$us6","_createChartResultSetItem","filterCondition","_createChartResultSet","__exports","__esModule"],"sources":["FacetParser-dbg.js"],"mappings":"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"}