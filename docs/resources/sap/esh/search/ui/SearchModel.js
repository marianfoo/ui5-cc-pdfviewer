/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["./i18n","sap/base/Log","./error/ErrorHandler","sap/esh/search/ui/SearchHelper","sap/ui/model/json/JSONModel","sap/esh/search/ui/SearchResultListFormatter","sap/esh/search/ui/SearchTabStripsFormatter","sap/esh/search/ui/SearchResultTableFormatter","sap/esh/search/ui/SearchFacetsFormatter","sap/esh/search/ui/BreadcrumbsFormatter","sap/esh/search/ui/suggestions/SuggestionHandler","sap/esh/search/ui/SearchConfiguration","sap/esh/search/ui/personalization/PersonalizationStorage","sap/esh/search/ui/personalization/keyValueStoreFactory","sap/esh/search/ui/sinaNexTS/providers/abap_odata/UserEventLogger","sap/esh/search/ui/eventlogging/EventLogger","sap/esh/search/ui/SearchUrlParser","sap/esh/search/ui/cFLPUtil","sap/esh/search/ui/usercategories/UserCategoryManager","sap/esh/search/ui/error/errors","sap/esh/search/ui/RecentlyUsedStorage","./sinaNexTS/sina/SinaConfiguration","./sinaNexTS/sina/sinaFactory","./sinaNexTS/core/Log","./SearchResultItemMemory","./FolderModeUtils","sap/ui/core/library","./sinaNexTS/sina/HierarchyDisplayType","./UIEvents","./SearchShellHelperHorizonTheme"],function(e,t,r,i,s,a,o,n,u,l,c,h,f,y,p,g,d,v,S,P,b,m,C,T,F,D,R,w,A,k){function _(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}function M(e){return x(e)||E(e)||B(e)||O()}function O(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function x(e){if(Array.isArray(e))return L(e)}function V(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=B(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var i=0;var s=function(){};return{s:s,n:function(){if(i>=e.length)return{done:true};return{done:false,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,o=false,n;return{s:function(){r=r.call(e)},n:function(){var e=r.next();a=e.done;return e},e:function(e){o=true;n=e},f:function(){try{if(!a&&r.return!=null)r.return()}finally{if(o)throw n}}}}function B(e,t){if(!e)return;if(typeof e==="string")return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}function L(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function I(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function N(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function j(e,t,r){if(t)N(e.prototype,t);if(r)N(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function q(){if(typeof Reflect!=="undefined"&&Reflect.get){q=Reflect.get}else{q=function e(t,r,i){var s=U(t,r);if(!s)return;var a=Object.getOwnPropertyDescriptor(s,r);if(a.get){return a.get.call(arguments.length<3?t:i)}return a.value}}return q.apply(this,arguments)}function U(e,t){while(!Object.prototype.hasOwnProperty.call(e,t)){e=J(e);if(e===null)break}return e}function H(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(t)z(e,t)}function z(e,t){z=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return z(e,t)}function Q(e){var t=$();return function r(){var i=J(e),s;if(t){var a=J(this).constructor;s=Reflect.construct(i,arguments,a)}else{s=i.apply(this,arguments)}return G(this,s)}}function G(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}else if(t!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return W(e)}function W(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function $(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function J(e){J=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return J(e)}function K(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var Y=_(e);var X=t["Level"];var Z=_(r);var ee=o["Formatter"];var te=p["UserEventType"];var re=m["AvailableProviders"];var ie=T["Severity"];var se=_(F);var ae=D["FolderModeResultViewTypeCalculator"];var oe=R["MessageType"];var ne=w["HierarchyDisplayType"];var ue=_(A);var le=_(k);function ce(e,t,r){if(r){return t?t(e):e}if(!e||!e.then){e=Promise.resolve(e)}return t?e.then(t):e}function he(){}function fe(e,t){if(!t){return e&&e.then?e.then(he):Promise.resolve()}}function ye(e,t){try{var r=e()}catch(e){return t(e)}if(r&&r.then){return r.then(void 0,t)}return r}function pe(e){var t=e();if(t&&t.then){return t.then(he)}}function ge(e,t){return e&&e.then?e.then(t):t(e)}function de(e,t){var r=e();if(r&&r.then){return r.then(t)}return t(r)}function ve(e,t,r){if(r){return t?t(e()):e()}try{var i=Promise.resolve(e());return t?i.then(t):i}catch(e){return Promise.reject(e)}}var Se=function(e){H(s,e);var r=Q(s);function s(e){var a;var o;I(this,s);o=r.call(this,[]);K(W(o),"searchTermHandlers",[]);K(W(o),"logger",t.getLogger("sap.esh.search.ui.SearchModel"));var n=e||{};o.config=new h(n===null||n===void 0?void 0:n.configuration);o.searchResultSetItemMemory=new se;o.setSizeLimit(1e3);o._suggestionHandler=new c({model:W(o)});o.folderModeResultViewTypeCalculator=new ae(W(o));o._performanceLoggerSearchMethods=[];o._errorHandler=new Z({model:W(o)});o._searchApplicationsRefuseOutdatedReq=i.refuseOutdatedRequests(o.searchApplications.bind(W(o)),"search");o.pageSize=o.config.pageSize||10;o.appTopDefault=20;o.boTopDefault=o.pageSize;o.filterChanged=false;o.setProperty("/isQueryInvalidated",true);o.setProperty("/isBusy",false);o.setProperty("/busyDelay",0);o.setProperty("/tableColumns",[]);o.setProperty("/sortableAttributes",[]);o.setProperty("/tableRows",[]);o.setProperty("/results",[]);o.setProperty("/appResults",[]);o.setProperty("/boResults",[]);o.setProperty("/breadcrumbsHierarchyNodePaths",[]);o.setProperty("/breadcrumbsHierarchyAttribute","");o.setProperty("/hierarchyNodePaths",[]);o.setProperty("/origBoResults",[]);o.setProperty("/count",0);o.setProperty("/countText","");o.setProperty("/boCount",0);o.setProperty("/appCount",0);o.setProperty("/facets",[]);o.setProperty("/dataSources",[o.allDataSource,o.appDataSource]);o.setProperty("/appSearchDataSource",null);o.setProperty("/currentPersoServiceProvider",null);o.setProperty("/businessObjSearchEnabled",true);o.setProperty("/initializingObjSearch",false);o.setProperty("/suggestions",[]);o.setProperty("/resultViewTypes",[]);o.setProperty("/resultViewType","");o.setProperty("/resultViewSwitchVisibility",false);o.setProperty("/documentTitle","Search");o.setProperty("/top",o.boTopDefault);o.setProperty("/orderBy",{});o.setProperty("/facetVisibility",false);o.setProperty("/focusIndex",0);o.setProperty("/errors",[]);o.setProperty("/isErrorPopovered",false);o.setProperty("/nlqSuccess",false);o.setProperty("/nlqDescription","");o.setProperty("/firstSearchWasExecuted",false);o.setProperty("/multiSelectionAvailable",false);o.setProperty("/multiSelectionEnabled",false);o.setProperty("/multiSelection/actions",[]);o.setProperty("/multiSelectionSelected",false);o.setProperty("/multiSelectionObjects",[]);o.setProperty("/singleSelectionSelected",false);o.setProperty("/inputHelpSelectedItems",null);o.setProperty("/inputHelp",null);o.setProperty("/config",o.config);o.setProperty("/searchInLabel","");o.setProperty("/searchInIcon","sap-icon://none");o._subscribers=[];o.searchUrlParser=new d({model:W(o)});o._userCategoryManagerPromise=null;o._tempDataSources=[];if(n!==null&&n!==void 0&&(a=n.searchModel)!==null&&a!==void 0&&a.initAsyncPromise){o.initAsyncPromise=n.searchModel.initAsyncPromise;o.oFacetFormatter=new u(W(o))}o.initAsyncPromise=o.initAsync();return o}j(s,[{key:"initAsync",value:function e(){var t=this;return ve(function(){var e=false;if(t.initAsyncPromise){return ce(t.initAsyncPromise)}t.setProperty("/initializingObjSearch",true);t.setProperty("/isBusy",true);var r={label:Y.getText("genericLoading"),labelPlural:Y.getText("genericLoading"),enabled:false,id:"$$Loading$$"};t.setProperty("/dataSource",r);t.setProperty("/dataSources",[r]);return ce(ge(ye(function(){return ce(y.create(t.config.personalizationStorage,t.config.isUshell,t.config.id),function(e){t._personalizationStorage=new f(e,t);if(t.config.bRecentSearches){t.recentlyUsedStorage=new b({personalizationStorage:t._personalizationStorage,searchModel:t})}t.initFacetVisibility();return ce(t.createSina(),function(e){t.sinaNext=e;t.createAllAndAppDataSource();return de(function(){if(t.isMyFavoritesAvailable()){return ce(S.create({sina:t.sinaNext,personalizationStorage:t._personalizationStorage}),function(e){t.userCategoryManager=e})}},function(){var e={sinaNext:t.sinaNext};if(typeof t.config.usageCollectionService!=="undefined"){e["usageCollectionService"]=t.config.usageCollectionService}t.eventLogger=new g(e);Object.assign(t.eventLogger,p.UserEventType);var r={type:t.eventLogger["SESSION_START"]};t.eventLogger.logEvent(r);t.setProperty("/defaultDataSource",t.calculateDefaultDataSource());if(t.sinaNext.provider.id==="dummy"){t.setProperty("/defaultDataSource",t.appDataSource);t.setProperty("/businessObjSearchEnabled",false);t.config.searchBusinessObjects=false;t.setFacetVisibility(false,false)}if(t.sinaNext.provider.id==="inav2"&&t.config.isUshell){sap.ui.require(["sap/ushell/System"],function(e){sap.ushell.Container.addRemoteSystem(new e({alias:"ENTERPRISE_SEARCH",platform:"abap",baseUrl:"/ENTERPRISE_SEARCH"}))})}t.setProperty("/uiFilter",t.sinaNext.createFilter());t.loadDataSources();t.resetDataSource(false);t.resetAllFilterConditions(false);t.query=t.sinaNext.createSearchQuery();if(t.config.multiSelect){t.query.setMultiSelectFacets(true)}t.oFacetFormatter=new u(t);t._tabStripFormatter=new ee(t.allDataSource,t);t._breadcrumbsFormatter=new l.Formatter(t);t.dataSourceTree=t._tabStripFormatter.tree;t.setSearchBoxTerm(t.config.searchTerm,false);if(t.config.dataSource){t.setDataSourceById(t.config.dataSource,false,false)}if(t.config.filterRootCondition){t.setFilterRootCondition(t.config.filterRootCondition)}t.setProperty("/initializingObjSearch",false);t.setProperty("/isBusy",false);return ge(ye(function(){return fe(t.config.initAsync(t))},function(e){t.logger.warning("initAsync() which was passed to SearchConfiguration threw an error: "+e)}),function(){return pe(function(){var e,r;if((e=sap)!==null&&e!==void 0&&(r=e.ushell)!==null&&r!==void 0&&r.Container){return ce(sap.ushell.Container.getServiceAsync("VisualizationInstantiation"),function(e){t.uShellVisualizationInstantiationService=e})}})})})})})},function(r){t._errorHandler.onError(r);var i=Promise.reject(r);e=true;return i}),function(t){return e?t:Promise.resolve()}))})}},{key:"createSina",value:function e(){var t=this;return ve(function(){if(!t.config.searchBusinessObjects){return ce(C.createAsync("dummy"))}var e=[];if(window.location.href.indexOf("demo/FioriLaunchpad.")!==-1){e=[re.SAMPLE]}else{e=[re.ABAP_ODATA,re.INAV2,re.DUMMY]}return ce(v.readCFlpConfiguration(e),function(r){e=r;if(t.config.sinaConfiguration){e=[t.config.sinaConfiguration]}e=t.mixinSearchConfigurationIntoSinaConfiguration(e);return C.createByTrialAsync(e)})})}},{key:"mixinSearchConfigurationIntoSinaConfiguration",value:function e(r){var i=[];for(var s=0;s<r.length;++s){var a=r[s];if(typeof a==="string"){a={provider:a,url:""}}for(var o in this.config.urlParameterMetaData){var n=this.config.urlParameterMetaData[o];if(!n.isSinaParameter){continue}if(!a[o]){a[o]=this.config[o]}}var u=t.getLogger("sap.esh.search.ui.eshclient");a.logTarget={debug:u.debug,info:u.info,warn:u.warning,error:u.error};var l=ie.ERROR;switch(u.getLevel()){case X.ALL:case X.TRACE:case X.DEBUG:l=ie.DEBUG;break;case X.INFO:l=ie.INFO;break;case X.WARNING:l=ie.WARN;break}a.logLevel=l;i.push(a)}return i}},{key:"initBusinessObjSearch",value:function e(){var t=this;return ve(function(){return ce(t.initAsync())})}},{key:"calculateDefaultDataSource",value:function e(){var t=this.allDataSource;if(this.config.defaultSearchScopeApps){t=this.appDataSource}if(this.config.defaultDataSource){t=this.sinaNext.getDataSource(this.config.defaultDataSource)}if(this.userCategoryManager&&this.userCategoryManager.isFavActive()){t=this.userCategoryManager.getCategory("MyFavorites")}return t}},{key:"initFacetVisibility",value:function e(){if(typeof this.config.facetVisibility!=="undefined"){this.setFacetVisibility(this.config.facetVisibility,false);return}var t=false;try{t=this._personalizationStorage.getItem("search-facet-panel-button-state")}catch(e){}this.setFacetVisibility(t,false)}},{key:"isBusinessObjSearchConfigured",value:function e(){try{var t=window["sap-ushell-config"].renderers.fiori2.componentData.config;return t.searchBusinessObjects!=="hidden"}catch(e){return true}}},{key:"isBusinessObjSearchEnabled",value:function e(){return this.getProperty("/businessObjSearchEnabled")}},{key:"setProperty",value:function e(t,r,i,a){try{var o=q(J(s.prototype),"setProperty",this).call(this,t,r,i,a);switch(t){case"/boResults":case"/appResults":this.calculateResultList();break;case"/appCount":case"/boCount":o=this.setProperty("/count",this.getProperty("/appCount")+this.getProperty("/boCount"));break;case"/count":o=this.setProperty("/countText",this._calculateCountText());break;case"expanded":if(i&&i.getPath().startsWith("/results/")){var n=i.getObject();if(n.key&&typeof r==="boolean"){var u=n;this.searchResultSetItemMemory.setExpanded(u.key,r)}}break;default:break}return o}catch(e){this._errorHandler.onError(e)}}},{key:"_calculateCountText",value:function e(){var t=this.getProperty("/count");if(t>0){if(this.getProperty("/nlqSuccess")){return this.getProperty("/nlqDescription")}if(typeof t!=="number"){return""}var r=i.formatInteger(t);if(this.getProperty("/searchInLabel")){return(this.getProperty("/searchInLabel")||Y.getText("results"))+" ("+r+")"}return Y.getText("results")+" ("+r+")"}return""}},{key:"getPersonalizationStorageInstance",value:function e(){return this._personalizationStorage}},{key:"getSearchBoxTerm",value:function e(){return this.getProperty("/uiFilter/searchTerm")||""}},{key:"setSearchBoxTerm",value:function e(t,r){t=t||"";var i=t.replace(/^\s+/,"");this.setProperty("/uiFilter/searchTerm",i);this.calculateSearchButtonStatus();if(r||typeof r==="undefined"){this._firePerspectiveQuery()}}},{key:"getLastSearchTerm",value:function e(){return this.query.getSearchTerm()}},{key:"setFacetVisibility",value:function e(t,r){if(sap.ui.Device.system.phone){t=false}this.setProperty("/facetVisibility",t);try{this._personalizationStorage.setItem("search-facet-panel-button-state",t)}catch(e){}if(r||typeof r==="undefined"){this._firePerspectiveQuery({preserveFormerResults:true})}}},{key:"getFacetVisibility",value:function e(){return this.getProperty("/facetVisibility")}},{key:"getTop",value:function e(){return this.getProperty("/top")}},{key:"setTop",value:function e(t,r){this.setProperty("/top",t);if(r||typeof r==="undefined"){this._firePerspectiveQuery({preserveFormerResults:true})}}},{key:"resetTop",value:function e(){this.setProperty("/focusIndex",0);if(this.isAppCategory()||this.isUserCategory()&&this.userCategoryManager&&this.userCategoryManager.getCategory("MyFavorites").subDataSources.length===0){this.setTop(this.appTopDefault,false)}else{this.setTop(this.boTopDefault,false)}}},{key:"getOrderBy",value:function e(){return this.getProperty("/orderBy")}},{key:"setOrderBy",value:function e(t,r){this.setProperty("/orderBy",t);this.updateSortableAttributesSelection(t.orderBy);if(r||typeof r==="undefined"){this._firePerspectiveQuery({preserveFormerResults:true})}}},{key:"resetOrderBy",value:function e(t){this.setProperty("/orderBy",{});this.updateSortableAttributesSelection();if(t||typeof t==="undefined"){this._firePerspectiveQuery({preserveFormerResults:true})}}},{key:"updateSortableAttributesSelection",value:function e(t){var r=this.getProperty("/sortableAttributes");if(r.length===0){return}for(var i=0;i<r.length;i++){r[i].selected=false}var s=t===undefined?"DEFAULT_SORT_ATTRIBUTE":t;for(var a=0;a<r.length;a++){if(r[a].attributeId===s){r[a].selected=true}}this.setProperty("/sortableAttributes",r)}},{key:"isEqualOrderBy",value:function e(t,r){if(!t.orderBy){return r.length===0}if(r.length!==1){return false}var i=r[0];if(i.id!==t.orderBy){return false}if(t.sortOrder==="ASC"){return i.order===this.sinaNext.SortOrder.Ascending}return i.order===this.sinaNext.SortOrder.Descending}},{key:"isMyFavoritesAvailable",value:function e(){var t=false;if(this.sinaNext.provider.id==="abap_odata"){t=true}if(this.sinaNext.provider.id==="multi"&&this.config.userDefinedDatasourcesMulti){t=true}return t}},{key:"getDocumentTitle",value:function e(){var t=this.getSearchBoxTerm();var r=this.getDataSource().labelPlural||this.getDataSource().label;var i;if(this.getDataSource()===this.allDataSource){i=Y.getText("searchTileTitleProposalAll",[t])}else{i=Y.getText("searchTileTitleProposal",[t,r])}return i}},{key:"resetQuery",value:function e(){if(this.getProperty("/initializingObjSearch")){return}i.hasher.reset();this.resetTop();this.setSearchBoxTerm("",false);this.resetDataSource(false);this.resetAllFilterConditions(false);this.query.resetConditions();this.query.setSearchTerm("random-jgfhfdskjghrtekjhg");this.setProperty("/facets",[]);this.setProperty("/results",[]);this.setProperty("/appResults",[]);this.setProperty("/boResults",[]);this.setProperty("/breadcrumbsHierarchyNodePaths",[]);this.setProperty("/breadcrumbsHierarchyAttribute","");this.setProperty("/hierarchyNodePaths",[]);this.setProperty("/origBoResults",[]);this.setProperty("/count",0);this.setProperty("/boCount",0);this.setProperty("/appCount",0)}},{key:"resetSearchResultItemMemory",value:function e(){this.searchResultSetItemMemory.reset()}},{key:"createAllAndAppDataSource",value:function e(){this.allDataSource=this.sinaNext.getAllDataSource();this.allDataSource.label=Y.getText("label_all");this.allDataSource.labelPlural=Y.getText("label_all");this.appDataSource=this.sinaNext._createDataSource({id:"$$APPS$$",label:Y.getText("label_apps"),labelPlural:Y.getText("label_apps"),type:this.sinaNext.DataSourceType.Category});this.setProperty("/appSearchDataSource",this.appDataSource)}},{key:"getUserCategoryManager",value:function e(){var t=this;return ve(function(){if(t._userCategoryManagerPromise){return ce(t._userCategoryManagerPromise)}t._userCategoryManagerPromise=t.initAsync().then(function(){return t.userCategoryManager});return ce(t._userCategoryManagerPromise)})}},{key:"loadDataSources",value:function e(){var t=this.sinaNext.getBusinessObjectDataSources();t=t.slice();var r=[];t.forEach(function(e){if(!e.usage.appSearch){r.push(e)}});if(this.userCategoryManager&&this.userCategoryManager.isFavActive()){r.splice(0,0,this.userCategoryManager.getCategory("MyFavorites"));this.favDataSource=this.userCategoryManager.getCategory("MyFavorites")}if(!this.config.odataProvider&&this.config.isUshell){r.splice(0,0,this.appDataSource)}if(!this.config.searchScopeWithoutAll){r.splice(0,0,this.allDataSource)}else{if(!this.config.defaultDataSource&&(!this.userCategoryManager||this.userCategoryManager&&!this.userCategoryManager.isFavActive())){this.setProperty("/defaultDataSource",r[0])}}this.setProperty("/dataSources",r);this.setProperty("/searchTermPlaceholder",this.calculatePlaceholder())}},{key:"resetDataSource",value:function e(t){this.setDataSource(this.getDefaultDataSource(),t)}},{key:"isAllCategory",value:function e(){var t=this.getProperty("/uiFilter/dataSource");return t===this.allDataSource}},{key:"isOtherCategory",value:function e(){var t=this.getProperty("/uiFilter/dataSource");return(t.type===this.sinaNext.DataSourceType.Category||t.type===this.sinaNext.DataSourceType.UserCategory)&&!this.isAllCategory()}},{key:"isAppCategory",value:function e(){var t=this.getProperty("/uiFilter/dataSource");return t===this.appDataSource}},{key:"isUserCategory",value:function e(){var t=this.getProperty("/uiFilter/dataSource");return t.type===this.sinaNext.DataSourceType.UserCategory}},{key:"isBusinessObject",value:function e(){return this.getProperty("/uiFilter/dataSource").type===this.sinaNext.DataSourceType.BusinessObject}},{key:"isUserCategoryAppSearchOnlyWithoutBOs",value:function e(){return this.isUserCategory()&&this.userCategoryManager&&this.userCategoryManager.getCategory("MyFavorites").subDataSources.length===0}},{key:"getDataSource",value:function e(){return this.getProperty("/uiFilter/dataSource")}},{key:"getDefaultDataSource",value:function e(){return this.getProperty("/defaultDataSource")}},{key:"setDataSourceById",value:function e(t,r,i){var s=this.sinaNext.getDataSource(t);if(s&&s.id&&s.id===t){this.setDataSource(s,r,i);return}throw"Could not set data source with id "+t+" because it was not in the list of loaded data sources"}},{key:"setDataSource",value:function e(t,r,i){if(this.getDataSource()!==t){var s={type:this.eventLogger["DATASOURCE_CHANGE"],dataSourceId:t.id};this.eventLogger.logEvent(s)}this.updateDataSourceList(t);this.getProperty("/uiFilter").setDataSource(t);if(i||i===undefined){this.resetTop()}this.setProperty("/searchTermPlaceholder",this.calculatePlaceholder());this.calculateSearchButtonStatus();if(r||r===undefined){this._firePerspectiveQuery()}}},{key:"notifyFilterChanged",value:function e(){jQuery.each(this["aBindings"],function(e,t){if(t.sPath==="/uiFilter/rootCondition"){t.checkUpdate(true)}})}},{key:"getFilterRootCondition",value:function e(){var t;if(this.getProperty("/uiFilter")){t=this.getProperty("/uiFilter").rootCondition}return t}},{key:"setFilterRootCondition",value:function e(t,r){if(t.type!=="Complex"){throw new Error("filter root condition must be of type ComplexCondition")}for(var i=0;i<t.conditions.length;i++){var s=t.conditions[i];if(s.type!=="Complex"){throw new Error("filters of root condition must be of type ComplexCondition")}for(var a=0;a<s.conditions.length;a++){var o=s.conditions[a];if(o.type!=="Simple"){throw new Error("filters of the lowest level must be of type SimpleCondition")}}}this.getProperty("/uiFilter").setRootCondition(t);if(r||typeof r==="undefined"){this._firePerspectiveQuery({preserveFormerResults:false})}this.notifyFilterChanged()}},{key:"addFilterCondition",value:function e(t,r){try{var i=this.getProperty("/uiFilter");if(typeof this.config.cleanUpSpaceFilters==="function"){this.config.cleanUpSpaceFilters(this,t)}if(t.attribute||t.conditions){i.autoInsertCondition(t)}else{this.setDataSource(t,false)}if(r||typeof r==="undefined"){this._firePerspectiveQuery({preserveFormerResults:false})}this.notifyFilterChanged()}catch(e){this._errorHandler.onError(e)}}},{key:"removeFilterCondition",value:function e(t,r){if(t.attribute||t.conditions){this.getProperty("/uiFilter").autoRemoveCondition(t)}else{this.setDataSource(t,false)}if(r||typeof r==="undefined"){this._firePerspectiveQuery({preserveFormerResults:true})}this.notifyFilterChanged()}},{key:"resetAllFilterConditions",value:function e(t){this.getProperty("/uiFilter").resetConditions();if(t||typeof t==="undefined"){this._firePerspectiveQuery()}this.notifyFilterChanged()}},{key:"resetFilterByFilterConditions",value:function e(t){var r=this._getNonFilterByFilterConditions();var i=[];var s=this.config.searchInAttibuteFacetPostion;if(s){for(var a in s){var o=this.getProperty("/uiFilter").rootCondition.getAttributeConditions(a);for(var n=0;n<o.length;n++){i.push(o[n])}}}this.getProperty("/uiFilter").resetConditions();if(r.length>0){var u=V(r),l;try{for(u.s();!(l=u.n()).done;){var c=l.value;this.getProperty("/uiFilter").autoInsertCondition(c)}}catch(e){u.e(e)}finally{u.f()}}if(i.length>0){for(var h=0;h<i.length;h++){var f=i[h];this.getProperty("/uiFilter").autoInsertCondition(f)}}if(t||typeof t==="undefined"){this._firePerspectiveQuery()}this.notifyFilterChanged()}},{key:"setFilter",value:function e(t){this.setDataSource(t.dataSource,false);this.setSearchBoxTerm(t.searchTerm,false);var r=this.getProperty("/uiFilter");r.setRootCondition(t.rootCondition);this._firePerspectiveQuery()}},{key:"filterWithoutFilterByConditions",value:function e(){var t=this._getNonFilterByFilterConditions();return t.length>0&&t.length===this.getProperty("/uiFilter").rootCondition.conditions.length}},{key:"_getNonFilterByFilterConditions",value:function e(){var t=[];var r=V(this.getProperty("/uiFilter").rootCondition.getAttributes()),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;var a=this.getProperty("/uiFilter").dataSource.attributeMetadataMap[s];if(a&&a.isHierarchy===true&&a.hierarchyDisplayType===ne.StaticHierarchyFacet){var o=V(this.getProperty("/uiFilter").rootCondition.getAttributeConditions(s)),n;try{for(o.s();!(n=o.n()).done;){var u=n.value;t.push(u)}}catch(e){o.e(e)}finally{o.f()}}}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"doSuggestion",value:function e(){this._suggestionHandler.doSuggestion(this.getProperty("/uiFilter").clone())}},{key:"abortSuggestions",value:function e(){this._suggestionHandler.abortSuggestions()}},{key:"_firePerspectiveQuery",value:function e(t,r){var i=this;return ve(function(){return ce(i.initAsync(),function(){return i._doFirePerspectiveQuery(t,r)})})}},{key:"_doFirePerspectiveQuery",value:function e(t,r){var s=this;var a,o;if(jQuery.isPlainObject(t)){a=t.deserialization;o=t.preserveFormerResults}else{a=t||undefined;o=r||undefined}var n=this.getProperty("/uiFilter");if(n.equals(this.query.filter)&&this.getTop()===this.query.top&&this.isEqualOrderBy(this.getOrderBy(),this.query.sortOrder)&&this.getCalculateFacetsFlag()===this.query.calculateFacets&&!this.getProperty("/isQueryInvalidated")){return Promise.resolve()}if(i.getUrlParameter("nlq")==="true"){this.query.setNlq(true)}if(this.query.filter.dataSource&&n.dataSource!==this.query.filter.dataSource||this.query.filter.searchTerm&&n.searchTerm!==this.query.filter.searchTerm){this.resetOrderBy(false)}if(this.query.filter.dataSource&&n.dataSource!==this.query.filter.dataSource){this.oFacetFormatter.handleDataSourceChanged()}if(!a&&!o){if(!n.equals(this.query.filter)){this.resetTop()}}if(n.searchTerm!==this.query.filter.searchTerm||!n.rootCondition.equals(this.query.filter.rootCondition)){this._tabStripFormatter.invalidate(this.getDataSource())}if(this.getProperty("/isQueryInvalidated")===true){this.query.resetResultSet();this.setProperty("/isQueryInvalidated",false)}this.query.setFilter(this.getProperty("/uiFilter").clone());this.query.setTop(this.getTop());this.query.setSortOrder(this.assembleSortOrder());this.query.setCalculateFacets(this.getCalculateFacetsFlag());this.setProperty("/queryFilter",this.query.filter);this.notifySubscribers(ue.ESHSearchStarted);sap.ui.getCore().getEventBus().publish(ue.ESHSearchStarted);if(a){this.setProperty("/busyDelay",0)}else{this.setProperty("/busyDelay",600)}this.setProperty("/isBusy",true);this.abortSuggestions();this.updateSearchURLSilently(a);if(!a){this.resetSearchResultItemMemory()}var u={type:this.eventLogger[te.SEARCH_REQUEST],searchTerm:this.getProperty("/uiFilter/searchTerm"),dataSourceKey:this.getProperty("/uiFilter/dataSource").id};this.eventLogger.logEvent(u);var l="Search for '".concat(this.getSearchBoxTerm(),"' (logId:").concat(this.config.performanceLogger.getUniqueId(),")");this._performanceLoggerSearchMethods.push(l);this.config.performanceLogger.enterMethod({name:l},{isSearch:true,comments:"Top: ".concat(this.getTop(),", searchbox term: ").concat(this.getSearchBoxTerm())});return Promise.all([this.normalSearch(o),this.appSearch()]).then(function(){var e;s.calculateResultViewSwitchVisibility();s.setProperty("/tabStrips",s._tabStripFormatter.format(s.getDataSource(),s._perspective,s));s.setProperty("/breadcrumbsHierarchyNodePaths",s._breadcrumbsFormatter.formatNodePaths(s._perspective));s.setProperty("/breadcrumbsHierarchyAttribute",s._breadcrumbsFormatter.formatHierarchyAttribute(s._perspective));s.setProperty("/hierarchyNodePaths",(e=s._perspective)===null||e===void 0?void 0:e.hierarchyNodePaths);if(s.config.bRecentSearches&&s.recentlyUsedStorage){s.recentlyUsedStorage.addItem()}return s.oFacetFormatter.getFacets(s.getDataSource(),s._perspective,s)["catch"](function(e){var t=V(s._performanceLoggerSearchMethods),r;try{for(t.s();!(r=t.n()).done;){var i=r.value;s.config.performanceLogger.leaveMethod({name:i})}}catch(e){t.e(e)}finally{t.f()}s._performanceLoggerSearchMethods=[];return s._errorHandler.onErrorDeferred(e)}).then(function(e){if((e===null||e===void 0?void 0:e.length)>0){e[0].change=jQuery["sap"].now();s.setProperty("/facets",e);e.forEach(function(e){return e.handleModelUpdate&&e.handleModelUpdate()})}})})["catch"](function(e){var t=V(s._performanceLoggerSearchMethods),r;try{for(t.s();!(r=t.n()).done;){var i=r.value;s.config.performanceLogger.leaveMethod({name:i})}}catch(e){t.e(e)}finally{t.f()}s._performanceLoggerSearchMethods=[];return s._errorHandler.onErrorDeferred(e)})["finally"](function(){if(s.config&&s.config.browserTitleOverwritten===true){document.title=s.getDocumentTitle()}var e=V(s._performanceLoggerSearchMethods),t;try{for(e.s();!(t=e.n()).done;){var r=t.value;s.config.performanceLogger.leaveMethod({name:r})}}catch(t){e.e(t)}finally{e.f()}s._performanceLoggerSearchMethods=[];s.notifySubscribers(ue.ESHSearchFinished);sap.ui.getCore().getEventBus().publish(ue.ESHSearchFinished);s.setProperty("/isBusy",false);s.setProperty("/firstSearchWasExecuted",true);s.notifyFilterChanged();s.updateMultiSelectionSelected()})}},{key:"assembleSortOrder",value:function e(){var t=this.getOrderBy();if(!t.orderBy){return[]}var r=this.sinaNext.SortOrder.Ascending;if(t.sortOrder==="DESC"){r=this.sinaNext.SortOrder.Descending}return[{id:t.orderBy,order:r}]}},{key:"getCalculateFacetsFlag",value:function e(){if(this.getDataSource().type===this.sinaNext.DataSourceType.Category||this.getFacetVisibility()){return true}return false}},{key:"appSearch",value:function e(){var t=this;if(this.config.bNoAppSearch===true){return Promise.resolve(true)}this.setProperty("/appResults",[]);this.setProperty("/appCount",0);if(this.isBusinessObject()||this.isOtherCategory()&&!this.isAppCategory()&&!this.isUserCategory()||this.isUserCategory()&&this.userCategoryManager&&!this.userCategoryManager.getCategory("MyFavorites").includeApps){return Promise.resolve(true)}var r=this.query.filter.dataSource===this.allDataSource?this.appTopDefault:this.query.top;return this._searchApplicationsRefuseOutdatedReq(this.query.filter.searchTerm,r,0).then(function(e){t.setProperty("/appCount",e.totalResults);t.setProperty("/appResults",e.getElements())},function(e){return t._errorHandler.onErrorDeferred(e)})}},{key:"searchApplications",value:function e(t,r,i){if(this.config.isUshell){return sap.ushell.Container.getServiceAsync("Search").then(function(e){return e.queryApplications({searchTerm:t,top:r,skip:i})})}else{return Promise.resolve({totalResults:0,searchTerm:t,getElements:function e(){return[]}})}}},{key:"normalSearch",value:function e(t){var r=this;if(!t){this.resetAndDisableMultiSelection()}if(!this.isBusinessObjSearchEnabled()||this.isAppCategory()||this.isUserCategory()&&this.userCategoryManager&&this.userCategoryManager.getCategory("MyFavorites").subDataSources.length===0){this.setProperty("/boResults",[]);this.setProperty("/breadcrumbsHierarchyNodePaths",[]);this.setProperty("/breadcrumbsHierarchyAttribute","");this.setProperty("/hierarchyNodePaths",[]);this.setProperty("/origBoResults",[]);this.setProperty("/boCount",0);this.setProperty("/nlqSuccess",false);this.setProperty("/nlqDescription","");this._perspective=null;return Promise.resolve(true)}var i=function e(t){r._perspective=t;r.setProperty("/nlqSuccess",false);if(t.nlqSuccess){r.setProperty("/nlqSuccess",true);r.setProperty("/nlqDescription",t.title)}return r._afterSearchPrepareResultList(r._perspective)};this.setDataSource(this.getDataSource(),false,false);this.query.setCalculateFacets(this.getCalculateFacetsFlag());return this.query.getResultSetAsync().then(function(e){var t=e;return i(t)},function(e){return r._errorHandler.onErrorDeferred(e)})}},{key:"_afterSearchPrepareResultList",value:function e(t){var r=this;this.setProperty("/boResults",[]);this.setProperty("/breadcrumbsHierarchyNodePaths",[]);this.setProperty("/breadcrumbsHierarchyAttribute","");this.setProperty("/hierarchyNodePaths",[]);this.setProperty("/origBoResults",t.items);this.setProperty("/boCount",0);var i=new a(this);var s=i.format(t,this.query.filter.searchTerm);this.setProperty("/sortableAttributes",i.formatSortAttributes());if(this.isHomogenousResult()&&t.totalCount>0){var o=new n(this);this.setProperty("/tableColumns",o.formatColumns(s));var u=o.formatRows(s);for(var l=0;l<u.length;l++){s[l].cells=u[l].cells}this.setProperty("/tableRows",s)}this.restoreResultSetItemExpansion(s);var c;var h=[];var f=[];for(var y=0;y<s.length;y++){c=s[y];h.push(c.dataSource);f.push({isDocumentConnector:c.isDocumentConnector})}var p=this.config.loadCustomModulesForDataSourcesAsync(h,f);var g=Promise.all([Promise.resolve(t),p]).then(function(e){var t=e[0];if(r.config&&typeof r.config.setSearchInLabelIconBindings==="function"){r.config.setSearchInLabelIconBindings(r,t.facets)}r.setProperty("/boCount",t.totalCount);r.setProperty("/boResults",s);r.enableOrDisableMultiSelection();return Promise.resolve()});return g}},{key:"restoreResultSetItemExpansion",value:function e(t){var r=V(t),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;var a=this.searchResultSetItemMemory.getExpanded(s.key);if(typeof a!=="undefined"){s.expanded=a}}}catch(e){r.e(e)}finally{r.f()}}},{key:"resetAndDisableMultiSelection",value:function e(){this.setProperty("/multiSelectionAvailable",false);this.setProperty("/multiSelectionEnabled",false);this.setProperty("/multiSelectionSelected",false);this.setProperty("/singleSelectionSelected",false)}},{key:"enableOrDisableMultiSelection",value:function e(){if(this.config.enableMultiSelectionResultItems){this.setProperty("/multiSelectionAvailable",true);this.setProperty("/multiSelectionEnabled",true);return}var t=this.getDataSource();var r=this.config.getDataSourceConfig(t);var i=new r.searchResultListSelectionHandlerControl;if(i){this.setProperty("/multiSelectionAvailable",i.isMultiSelectionAvailable())}else{this.setProperty("/multiSelectionAvailable",false)}}},{key:"updateMultiSelectionSelected",value:function e(){var t;if(this.getResultViewType()==="searchResultTable"){t=this.getProperty("/tableRows")}else{t=this.getProperty("/results")}var r=0;var i=[];for(var s=0;s<t.length;s++){if(t[s].selected){r++;i.push(t[s])}}if(r>0){this.setProperty("/multiSelectionSelected",true);this.setProperty("/multiSelectionObjects",i)}else{this.setProperty("/multiSelectionSelected",false);this.setProperty("/multiSelectionObjects",[])}if(r===1){this.setProperty("/singleSelectionSelected",true)}else{this.setProperty("/singleSelectionSelected",false)}this.config.selectionChange(this)}},{key:"_endWith",value:function e(t,r){return t.indexOf(r,t.length-r.length)!==-1}},{key:"calculatePlaceholder",value:function e(){var t=this.getDataSource().labelPlural;if(this.config.FF_bOptimizedQuickSelectDataSourceLabels===true){var r;if(typeof this.config.getFirstSpaceCondition==="function"){var i=this.config.getFirstSpaceCondition(this.getProperty("/uiFilter"));if(i&&i.attributeLabel){r=true;t=i.valueLabel||i.value}}if(!r&&this.getDataSource().id==="SEARCH_DESIGN"&&typeof this.config.getPlaceholderLabelForDatasourceAll==="function"){t=this.config.getPlaceholderLabelForDatasourceAll()}}else if(this.isAllCategory()||this.config.bPlaceHolderFixedValue===true){return Y.getText("search")}else if(this.getDataSource().id==="SEARCH_DESIGN"&&typeof this.config.getPlaceholderLabelForDatasourceAll==="function"){t=this.config.getPlaceholderLabelForDatasourceAll()}return Y.getText("searchInPlaceholder",[t])}},{key:"updateDataSourceList",value:function e(t){var r=this.getProperty("/dataSources");this.removeTempDataSources();if(t===this.allDataSource||t===this.appDataSource){return}if(t&&t.id){if(t.id.indexOf("~")>=0){return}}for(var i=0;i<r.length;++i){var s=r[i];if(s===t){return}}r.unshift(t);this._tempDataSources.push(t);this.setProperty("/dataSources",r)}},{key:"removeTempDataSources",value:function e(){var t=this.getProperty("/dataSources");this._tempDataSources.forEach(function(e,r,i){var s=t.indexOf(e);if(s<0){var a=new Error("could not find temp DataSource in DataSources");throw new P.ProgramError(a)}t.splice(s,1);i.splice(r,1)})}},{key:"invalidateQuery",value:function e(){i.hasher.reset();this.setProperty("/isQueryInvalidated",true)}},{key:"autoStartApp",value:function e(){var t=this.getProperty("/uiFilter/searchTerm");if(this.getProperty("/appCount")&&this.getProperty("/appCount")===1&&this.getProperty("/count")&&this.getProperty("/count")===1){var r=this.getProperty("/appResults");if(r&&r.length>0&&r[0]&&r[0].url&&t&&r[0].tooltip&&t.toLowerCase().trim()===r[0].tooltip.toLowerCase().trim()){if(r[0].url[0]==="#"){window.location.href=r[0].url}else{window.open(r[0].url,"_blank","noopener,noreferrer")}return}}}},{key:"isHomogenousResult",value:function e(){if(this.isAllCategory()){return false}if(this.isOtherCategory()){return false}if(this.isAppCategory()){return false}return true}},{key:"getResultViewTypes",value:function e(){return this.getProperty("/resultViewTypes")}},{key:"setResultViewTypes",value:function e(t){this.setProperty("/resultViewTypes",t)}},{key:"getResultViewType",value:function e(){return this.getProperty("/resultViewType")}},{key:"setResultViewType",value:function e(t){this.setProperty("/resultViewType",t);if(this.isAppCategory()){return}else if(this.isAllCategory()||this.isOtherCategory()){try{this._personalizationStorage.setItem("resultViewTypeForAllAndCategorySearch",t)}catch(e){}}else{try{this._personalizationStorage.setItem("resultViewTypeForBusinessObjectSearch",t)}catch(e){}}}},{key:"calculateResultViewSwitchVisibility",value:function e(t){this.validateResultViewSettings(t);if(t!==undefined){this.setResultViewTypes(t.resultViewTypes);this.setResultViewType(t.resultViewType);this.setProperty("/resultViewSwitchVisibility",t.resultViewTypes.length>1);return}var r;var i;if(this.isAppCategory()||this.isUserCategory()&&this.userCategoryManager&&this.userCategoryManager.getCategory("MyFavorites").subDataSources.length===0){r=["appSearchResult"];i="appSearchResult";this.setResultViewTypes(r);this.setResultViewType(i);this.setProperty("/resultViewSwitchVisibility",r.length>1);return}if(this.isAllCategory()||this.isOtherCategory()){if(this.config.isUshell){r=["searchResultList"];i="searchResultList"}else{r=["searchResultList","searchResultGrid"];try{i=this._personalizationStorage.getItem("resultViewTypeForAllAndCategorySearch")}catch(e){}if(i===undefined||i===null||i.length===0||!r.includes(i)){i="searchResultList"}}this.setResultViewTypes(r);this.setResultViewType(i);this.setProperty("/resultViewSwitchVisibility",r.length>1);return}r=this.config.resultViewTypes;try{if(this._personalizationStorage instanceof f)i=this._personalizationStorage.getItem("resultViewTypeForBusinessObjectSearch")}catch(e){}if(i===undefined||i===null||i.length===0||!r.includes(i)){i=this.config.fallbackResultViewType}i=this.folderModeResultViewTypeCalculator.calculate(r,i,this.getProperty("/uiFilter"));this.setResultViewTypes(r);this.setResultViewType(i);this.setProperty("/resultViewSwitchVisibility",r.length>1)}},{key:"validateResultViewSettings",value:function e(t){var r;var s;var a;var o;var n;var u;if(typeof t==="undefined"){r=true}else{r=false}if(r){s=["searchResultList","searchResultTable","searchResultGrid"];a=this.config.resultViewTypes;o=this.config.fallbackResultViewType;n="\nERROR: Search Result View Settings of SearchConfiguration:\n\n";u=". \n Please check the validation and compatibility of resultViewTypes of SearchConfiguration!"}else{if(this.isAppCategory()){s=["appSearchResult"]}else if(this.isAllCategory()||this.isOtherCategory()){s=["searchResultList","searchResultGrid"]}else{s=["searchResultList","searchResultTable","searchResultGrid"]}a=t.resultViewTypes;o=t.resultViewType;n="\nERROR: Search Result View Settings of SearchCompositeControl\n\n";u=". \n Please check the validation and compatibility of resultViewTypes, resultViewType of SearchCompositeControl!"}if(!Array.isArray(a)||a.length===0){throw Error(n+"resultViewTypes should be non-empty array"+u)}var l=a;l=l.filter(function(e,t){return l.indexOf(e)===t});if(l.length!==a.length){throw Error(n+"resultViewTypes ("+a.toString()+") should not have duplicated value"+u)}if(!i.isSubsetOf(a,s)){throw Error(n+"resultViewTypes ("+a.toString()+") contains invalid value. Possible values are ("+s.toString()+")"+u)}if(typeof o==="undefined"&&r){o=a[0];this.config.fallbackResultViewType=a[0]}if(typeof o!=="string"){throw Error(n+"resultViewType should be of string"+u)}if(!a.includes(o)){throw Error(n+"resultViewTypes ("+a.toString()+") doesn't contain resultViewType ("+o+")"+u)}}},{key:"calculateSearchButtonStatus",value:function e(){if(this.getDataSource()===this.getProperty("/defaultDataSource")&&this.getSearchBoxTerm().length===0){if(le.isSearchFieldExpandedByDefault()){this.setProperty("/searchButtonStatus","Focus")}else{this.setProperty("/searchButtonStatus","Close")}}else{this.setProperty("/searchButtonStatus","Search")}}},{key:"calculateResultList",value:function e(){var t=[];var r=this.getProperty("/boResults");if(r&&r.length){var i;(i=t).push.apply(i,M(r))}var s=this.getProperty("/appResults");if(s&&s.length>0){var a={type:"appcontainer",tiles:s};if(t.length>0){if(t.length>3){t.splice(3,0,a)}else{t.push(a)}}else{t=[a]}}this.setProperty("/results",t)}},{key:"pushUIMessage",value:function e(t){t.title=t.title==="[object Object]"?Y.getText("searchError"):t.title;t.type=t.type!==undefined?t.type:oe.Error;var r=this.getProperty("/errors");r.push(t);var i=this.removeAdjacentDuplicateMessages(r);this.setProperty("/errors",i)}},{key:"removeAdjacentDuplicateMessages",value:function e(t){var r=[];var i;var s=V(t),a;try{for(s.s();!(a=s.n()).done;){var o=a.value;if(typeof i==="undefined"){r.push(o)}else if(i.title!==o.title||i.description!==o.description||i.type!==o.type){r.push(o)}i=o}}catch(e){s.e(e)}finally{s.f()}return r}},{key:"updateSearchURLSilently",value:function e(t){if(t){i.hasher.init()}else{var r=this.renderSearchURL();if(this.config.updateUrl){i.hasher.setHash(r)}}}},{key:"renderSearchURL",value:function e(){return this.searchUrlParser.render()}},{key:"parseURL",value:function e(){this.searchUrlParser.parse()}},{key:"subscribe",value:function e(t,r,i){this._subscribers.push({eventId:t||"",callback:r,listener:i||this})}},{key:"unsubscribe",value:function e(t,r,i){t=t||"";i=i||this;for(var s=0;s<this._subscribers.length;s++){var a=this._subscribers[s];if(a.eventId===t&&a.callback===r&&a.listener===i){this._subscribers.splice(s,1)}}}},{key:"notifySubscribers",value:function e(t){var r=V(this._subscribers),i;try{for(r.s();!(i=r.n()).done;){var s=i.value;if(s.eventId===t){s.callback.apply(s.listener,[t])}}}catch(e){r.e(e)}finally{r.f()}}}],[{key:"getModelSingleton",value:function e(t,r){var i=r||"default";if(!s._searchModels[i]){t.isUshell=i==="flp"?true:false;s._searchModels[i]=new s({configuration:t})}return s._searchModels[i]}}]);return s}(s);K(Se,"_searchModels",{});sap.esh.search.ui.getModelSingleton=Se.getModelSingleton;return Se})})();
//# sourceMappingURL=SearchModel.js.map