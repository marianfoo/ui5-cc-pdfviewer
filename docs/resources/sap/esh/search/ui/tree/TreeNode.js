/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["./tmpData"],function(e){function t(e){"@babel/helpers - typeof";return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var i=0;var a=function(){};return{s:a,n:function(){if(i>=e.length)return{done:true};return{done:false,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,d=false,l;return{s:function(){r=r.call(e)},n:function(){var e=r.next();o=e.done;return e},e:function(e){d=true;l=e},f:function(){try{if(!o&&r.return!=null)r.return()}finally{if(d)throw l}}}}function n(e,t){if(!e)return;if(typeof e==="string")return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}function i(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function d(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function l(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var u=e["createTmpData"];var f=e["deleteTmpData"];var s=e["getTmpData"];function h(e,t,r){if(r){return t?t(e):e}if(!e||!e.then){e=Promise.resolve(e)}return t?e.then(t):e}function c(e,t){var r=e();if(r&&r.then){return r.then(t)}return t(r)}function v(e,t,r){if(r){return t?t(e()):e()}try{var n=Promise.resolve(e());return t?n.then(t):n}catch(e){return Promise.reject(e)}}function y(e,t){if(e)throw t;return t}function N(e,t){try{var r=e()}catch(e){return t(true,e)}if(r&&r.then){return r.then(t.bind(null,false),t.bind(null,true))}return t(false,r)}function T(){}function p(e,t){if(!t){return e&&e.then?e.then(T):Promise.resolve()}}var m=typeof Symbol!=="undefined"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function b(e,t,r){if(!e.s){if(r instanceof g){if(r.s){if(t&1){t=r.s}r=r.v}else{r.o=b.bind(null,e,t);return}}if(r&&r.then){r.then(b.bind(null,e,t),b.bind(null,e,2));return}e.s=t;e.v=r;var n=e.o;if(n){n(e)}}}var g=function(){function e(){}e.prototype.then=function(t,r){var n=new e;var i=this.s;if(i){var a=i&1?t:r;if(a){try{b(n,1,a(this.v))}catch(e){b(n,2,e)}return n}else{return this}}this.o=function(e){try{var i=e.v;if(e.s&1){b(n,1,t?t(i):i)}else if(r){b(n,1,r(i))}else{b(n,2,i)}}catch(e){b(n,2,e)}};return n};return e}();function C(e){return e instanceof g&&e.s&1}function x(e,t,r){var n=-1,i,a;function o(d){try{while(++n<e.length&&(!r||!r())){d=t(n);if(d&&d.then){if(C(d)){d=d.v}else{d.then(o,a||(a=b.bind(null,i=new g,2)));return}}}if(i){b(i,1,d)}else{i=d}}catch(e){b(i||(i=new g),2,e)}}o();return i}function P(e,t,r){if(typeof e[m]==="function"){var n=function e(n){try{while(!(a=i.next()).done&&(!r||!r())){n=t(a.value);if(n&&n.then){if(C(n)){n=n.v}else{n.then(e,d||(d=b.bind(null,o=new g,2)));return}}}if(o){b(o,1,n)}else{o=n}}catch(e){b(o||(o=new g),2,e)}};var i=e[m](),a,o,d;n();if(i["return"]){var l=function e(t){try{if(!a.done){i["return"]()}}catch(e){}return t};if(o&&o.then){return o.then(l,function(e){throw l(e)})}l()}return o}if(!("length"in e)){throw new TypeError("Object is not iterable")}var u=[];for(var f=0;f<e.length;f++){u.push(e[f])}return x(u,function(e){return t(u[e])},r)}function k(e){if(e&&e.then){return e.then(T)}}var w=function(){function e(t){var r,n;a(this,e);l(this,"childTreeNodes",[]);this.id=t.id;this.label=t.label;this.expanded=(r=t.expanded)!==null&&r!==void 0?r:false;this.expandable=(n=t.expandable)!==null&&n!==void 0?n:false;this.adjustPlaceholderChildTreeNode()}d(e,[{key:"setTreeNodeFactory",value:function e(t){this.getData().treeNodeFactory=t}},{key:"getTreeNodeFactory",value:function e(){return this.getData().treeNodeFactory}},{key:"hasPlaceholderTreeNode",value:function e(){return this.childTreeNodes.find(function(e){return e.id==="dummy"})!==undefined}},{key:"adjustPlaceholderChildTreeNode",value:function e(){if(this.expandable){if(this.childTreeNodes.length===0){this.addPlaceholderTreeNode()}}else{if(this.hasPlaceholderTreeNode()){this.removePlaceHolderChildTreeNode()}}}},{key:"addPlaceholderTreeNode",value:function e(){if(this.hasPlaceholderTreeNode()){return}this.childTreeNodes.push({id:"dummy"})}},{key:"removePlaceHolderChildTreeNode",value:function e(){if(!this.hasPlaceholderTreeNode()){return}this.childTreeNodes.splice(0,1)}},{key:"getChildTreeNodeById",value:function e(t){var n=r(this.childTreeNodes),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.id===t){return a}}}catch(e){n.e(e)}finally{n.f()}}},{key:"addChildTreeNode",value:function e(t){this.expandable=true;this.removePlaceHolderChildTreeNode();this.childTreeNodes.push(t);t.getData().parentTreeNode=this;t.register()}},{key:"addChildTreeNodes",value:function e(t){var n=r(t),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;this.addChildTreeNode(a)}}catch(e){n.e(e)}finally{n.f()}}},{key:"addChildTreeNodeAtIndex",value:function e(t,r){this.expandable=true;this.removePlaceHolderChildTreeNode();this.childTreeNodes.splice(r,0,t);t.getData().parentTreeNode=this;t.register()}},{key:"removeChildTreeNode",value:function e(t){var r=this.childTreeNodes.indexOf(t);if(r<0){return}this.childTreeNodes.splice(r,1);t.getData().parentTreeNode=null;t.deRegister();this.adjustPlaceholderChildTreeNode()}},{key:"delete",value:function e(){var t=r(this.childTreeNodes.slice()),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;if(i.id==="dummy"){continue}i["delete"]()}}catch(e){t.e(e)}finally{t.f()}var a=this.getData().parentTreeNode;if(a){a.removeChildTreeNode(this)}if(this.tmpDataId){f(this.tmpDataId)}}},{key:"deleteChildTreeNodes",value:function e(){var t=r(this.childTreeNodes.slice()),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;if(i.id==="dummy"){continue}i["delete"]()}}catch(e){t.e(e)}finally{t.f()}}},{key:"register",value:function e(){var t=this.getData().parentTreeNode;if(!t.getTreeNodeFactory()){return}t.getTreeNodeFactory().registerTreeNode(this);var n=r(this.childTreeNodes),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.id==="dummy"){continue}a.register()}}catch(e){n.e(e)}finally{n.f()}}},{key:"deRegister",value:function e(){if(!this.getTreeNodeFactory()){return}this.getTreeNodeFactory().deRegisterTreeNode(this);var t=r(this.childTreeNodes),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;if(i.id==="dummy"){continue}i.deRegister()}}catch(e){t.e(e)}finally{t.f()}}},{key:"getData",value:function e(){if(!this.tmpDataId){var t=u();this.tmpDataId=t.tmpDataId;return t}return s(this.tmpDataId)}},{key:"setExpanded",value:function e(t,r){var n=this;return v(function(){n.expanded=t;return n.getTreeNodeFactory().testMode?h():h(c(function(){if(n.expanded){n.deleteChildTreeNodes();return h(n.internalFetchChildTreeNodes(),function(e){n.addChildTreeNodes(e)})}else{n.deleteChildTreeNodes()}},function(){if(r){n.getTreeNodeFactory().updateUI()}}))})}},{key:"internalFetchChildTreeNodes",value:function e(){var t=this;return v(function(){t.getTreeNodeFactory().setBusy(true);return h(N(function(){return h(t.fetchChildTreeNodes())},function(e,r){t.getTreeNodeFactory().setBusy(false);return y(e,r)}))})}},{key:"fetchChildTreeNodes",value:function e(){return Promise.resolve([])}},{key:"setExpandable",value:function e(t){this.expandable=t;this.adjustPlaceholderChildTreeNode()}},{key:"updateRecursively",value:function e(){var t=this;return v(function(){return h(t.internalFetchChildTreeNodes(),function(e){t.updateChildren(e);return k(P(t.childTreeNodes,function(e){if(e.id==="dummy"){return}if(!e.expanded){return}return p(e.updateRecursively())}))})})}},{key:"updateChildren",value:function e(t){var r;for(var n=0;n<t.length;++n){var i=t[n];if(n<=this.childTreeNodes.length-1){r=this.childTreeNodes[n];if(r.id===i.id){}else{r=this.getChildTreeNodeById(i.id);if(r){this.removeChildTreeNode(r);this.addChildTreeNodeAtIndex(r,n)}else{r=i;this.addChildTreeNodeAtIndex(r,n)}}}else{r=i;this.addChildTreeNode(r)}this.updateTreeNodeProperties(r,i);Object.assign(r.getData(),i.getData());if(r.expandable!==i.expandable){if(i.expandable){r.expandable=true;r.adjustPlaceholderChildTreeNode()}else{r.deleteChildTreeNodes();r.expandable=false;r.adjustPlaceholderChildTreeNode()}}if(r!==i){i["delete"]()}}while(this.childTreeNodes.length>t.length){r=this.childTreeNodes[this.childTreeNodes.length-1];r["delete"]()}}},{key:"updateTreeNodeProperties",value:function e(r,n){var i=["id","expanded","expandable","childTreeNodes","tmpDataId"];for(var a in n){if(i.indexOf(a)>=0){continue}var o=n[a];if(["number","string","boolean"].indexOf(t(o))<0){continue}r[a]=o}}},{key:"visitChildNodesRecursively",value:function e(t){var n=r(this.childTreeNodes),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a.id==="dummy"){continue}t(a);a.visitChildNodesRecursively(t)}}catch(e){n.e(e)}finally{n.f()}}},{key:"visitParentNodesRecursively",value:function e(t){var r=this.getParentTreeNode();if(r){t(r);r.visitParentNodesRecursively(t)}}},{key:"getParentTreeNode",value:function e(){return this.getData().parentTreeNode}},{key:"isVisible",value:function e(){var t=function e(t){if(!t.expanded){return false}var r=t.getParentTreeNode();if(!r){return true}return e(r)};var r=this.getParentTreeNode();if(!r){return true}return t(r)}},{key:"hasChildNodes",value:function e(){var t=r(this.childTreeNodes),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;if(i.id==="dummy"){continue}return true}}catch(e){t.e(e)}finally{t.f()}return false}},{key:"hasExpandedChildNode",value:function e(){var t=r(this.childTreeNodes),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;if(i.id==="dummy"){continue}if(i.expanded||i.hasExpandedChildNode()){return true}}}catch(e){t.e(e)}finally{t.f()}return false}}]);return e}();return w})})();
//# sourceMappingURL=TreeNode.js.map