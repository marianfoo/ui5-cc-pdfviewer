/*!
 * SAPUI5
 * (c) Copyright 2009-2022 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/chart/coloring/ColoringUtils","sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureUtils","sap/chart/ChartLog","sap/ui/thirdparty/jquery"],function(e,r,n,jQuery){"use strict";var a={};var i=["SingleColorScheme","DivergingColorScheme","TargetColorScheme"];var t=function(a,t,o,s){if(!s.bMBC){throw new n("error","colorings.Gradation",'"RankedMeasureValues" only applys to Heatmap.')}e.checkColoringMeasure(t,o.aMsr,a);t.forEach(function(e){var t=Object.keys(a[e]).filter(function(e){return i.indexOf(e)>-1});if(t.length>1){throw new n("error","colorings.Gradation.RankedMeasureValues",'One and only one of "'+i.join('" or "')+'" can be applied to the measure, '+e+".")}else{var o=t[0]||i[0];if(r[o].validate){r[o].validate(a,e)}}})};a.qualify=function(a,o,s,l){t(a,o,s,l);var u=[],c=s.aDim.map(function(e){return e.getName()}).sort();jQuery.each(a,function(t,g){if(o.length&&o.indexOf(t)===-1){return}var f=e.find(t,s.aMsr);if(Object.keys(g).length===0){g["SingleColorScheme"]={}}Object.keys(g).forEach(function(e){if(i.indexOf(e)===-1){return}u.sMethod=e;var o=null,s=null;var h=Array.isArray(g[e].RankingPerAggregationLevel)?g[e].RankingPerAggregationLevel:[];h.forEach(function(e){if(e&&e.VisibleDimensions){if(Array.isArray(e.VisibleDimensions)&&e.VisibleDimensions.sort().join(",")===c.join(",")){o=e}}else{s=e}});o=o||s;if(o||h.length===0&&e==="SingleColorScheme"){if(r[e].levels){r[e].levels(a,t,o)}u.push({type:e,msr:f,settings:g,byAggregation:l.bFiltered?null:o})}else{throw new n("error","colorings.Gradation.RankedMeasureValues",'No aggregation level in "'+e+'" of the measure, '+t+",  matched with current visible dimensions.")}})});return u};a.parse=function(e){var n={msr:e.msr,legend:{}};r[e.type].parse(e,n);return n};a.createScales=function(e){return r[e.sMethod].createScales(e)};a.getContextHandler=function(e){var r=e[0];var n=r.msr.getName();var a=r.parsed.legend;return function(e){var r=e.getProperty(n);a.min=Math.min(a.min,r);a.max=Math.max(a.max,r)}};return a});
//# sourceMappingURL=RankedMeasureValues.js.map