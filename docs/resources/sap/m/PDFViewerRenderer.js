/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Device","sap/base/Log","sap/base/security/URLListValidator"],function(e,r,t){"use strict";function i(e){return(!!e.getTitle()||e._isDisplayDownloadButton())&&!e._bIsPopupOpen}var n=Object.freeze(["application/pdf","application/x-google-chrome-pdf"]);var a={apiVersion:2};a._isSupportedMimeType=function(e){var r=n.indexOf(e);return r>-1};a._isPdfPluginEnabled=function(){var r=true;if(e.browser.firefox){return r}if(typeof navigator.pdfViewerEnabled!=="undefined"){if(navigator.pdfViewerEnabled||/HeadlessChrome/.test(window.navigator.userAgent)){return r}else{r=false}}else{var t=navigator.mimeTypes;r=n.some(function(e){var r=t.namedItem(e);return r!==null})}return r};a.render=function(e,r){e.openStart("div",r);e.style("width",r._getRenderWidth());e.style("height",r._getRenderHeight());this._writeAccessibilityTags(e,r);e.openEnd();if(i(r)){e.renderControl(r._objectsRegister.getOverflowToolbarControl())}if(!r._isDisplayTypeLink()&&!this._isPdfPluginEnabled()){this.renderErrorContent(e,r)}else if(r._isEmbeddedModeAllowed()&&this._isPdfPluginEnabled()){this.renderPdfContent(e,r)}e.close("div")};a._writeAccessibilityTags=function(e,r){e.attr("role","document");e.attr("aria-label",r._getLibraryResourceBundle().getText("PDF_VIEWER_ACCESSIBILITY_LABEL"))};a.renderPdfContent=function(r,n){if(n._shouldRenderPdfContent()&&!/HeadlessChrome/.test(window.navigator.userAgent)){r.openStart("iframe",n.getId()+"-iframe");var a=n.getSource();var o=n.getSource().indexOf("#");if(o>-1){a=a.substr(0,o)}if(!(e.browser.safari&&a.startsWith("blob:"))){a+="#view=FitH"}if(!t.validate(a)){a=encodeURI(a)}if(t.validate(a)){r.attr("src",a)}else{n._fireErrorEvent()}r.class("sapMPDFViewerContent");r.class("sapMPDFViewerLoading");r.attr("aria-label",n._getLibraryResourceBundle().getText("PDF_VIEWER_CONTENT_ACCESSIBILITY_LABEL"));if(i(n)){r.class("sapMPDFViewerReducedContent")}r.openEnd();r.close("iframe")}else{this.renderErrorContent(r,n)}};a.renderErrorContent=function(e,t){var i=t.getErrorPlaceholder()?t.getErrorPlaceholder():t._objectsRegister.getPlaceholderMessagePageControl();e.openStart("div");e.class("sapMPDFViewerError");if(!t._bIsPopupOpen){e.class("sapMPDFViewerEmbeddedContent")}e.openEnd();e.renderControl(i);e.close("div");if(!a._isPdfPluginEnabled()){r.warning("Either Inline viewing of pdf is disabled or pdf plug-in is unavailable on this device.");t.fireEvent("error",{},true)}};return a},true);
//# sourceMappingURL=PDFViewerRenderer.js.map