{"version":3,"file":"TimelineDataHandler.js","names":["sap","ui","define","Log","BaseObject","jQuery","FilterType","TimelineDataHandler","extend","constructor","oBusinessObjectMap","oJamDataHandler","oSMIntegrationDataHandler","oServiceDataHandler","oTimelineTermsUtility","iPageSize","bSocialFeaturesEnabled","bBackendFeaturesEnabled","this","_oLogger","getLogger","_oFilterConstants","_oBusinessObjectMap","_oJamDataHandler","_oServiceDataHandler","_oTimelineTermsUtility","_oSMIntegrationDataHandler","_bSocialFeaturesEnabled","_bBackendFeaturesEnabled","_iPageSize","_iTimelineEntriesPageSize","_iTimelineEntriesSkip","_iFeedEntriesPageSize","_sBusinessObjectKey","_sFeedEntriesNextLink","_fCustomActionCallBack","customActionCallback","_aTimelineEntries","_aFeedEntries","_oExternalBO","_oMemberDataBuffer","_oExternalBOMapping","setBusinessObject","oObject","_setBusinessObjectValues","_resetBusinessObjectData","getExternalBOMapping","reset","getTimelineData","oFilter","oBusinessObject","oPromise","Deferred","that","type","FILTER_TYPE","feedUpdates","then","_getExternalObjectJamOnlyFeedEntries","_getExternalObjectFeedEntries","systemUpdates","custom","_getTimelineEntries","error","resolve","promise","oInternalBO","appContext","applicationContext","collection","name","_sBusinessObjectName","key","odataServicePath","servicePath","mapInternalBOToExternalBO","oExternalBOMapping","Name","bind","_oTimelineEntriesReadRequest","abort","_oFeedEntriesReadRequest","getExternalObject","oExternalBO","undefined","gettingFeedEntries","results","request","getFeedEntries","Id","oGettingFeedEntries","oFeedEntries","__next","aFeedEntries","_mapFeedEntriesToTimelineItems","fnGetFeeds","getExternalObjectByExidAndObjectType","oExternalObject","FeedEntries","sBackendFilter","value","readingTimelineEntries","readTimelineEntries","gettingTimelineEntries","TLData","aTimelineEntries","length","_mapTimelineEntriesToTimelineItems","aTimelineItems","_fillPicturesForTimelineItems","aEmails","forEach","oTimelineItem","timelineItemData","userPicture","push","userEmail","aUniqueEmails","filter","element","index","indexOf","gettingUserInfoBatch","getUserInfoBatch","done","aUserInfo","aUserInfoFiltered","grep","oUserInfo","addUserInfoToBuffer","oTLItem","getUserPicture","fail","oError","_getAtMentions","oFeedEntry","oAtMentions","gettingAtMentions","getAtMentions","oJamResults","response","aJamResults","i","oTimelineItems","_mapFeedEntryToTimelineItem","_feedEntryData","ConsolidatedCount","_consolidatedUrl","POST_ICON","getUserInfoFromBuffer","Creator","Email","feedId","dateTime","CreatedAt","userName","FullName","title","Action","text","Text","textWithPlaceholders","TextWithPlaceholders","replyCount","RepliesCount","icon","aTimelineEntriesData","oTimelineEntry","_mapTimelineEntryToTimelineItem","aCustomActions","bCustomActionsOK","Array","isArray","JSON","stringify","oDataEntry","customActionData","oTimelineEntryFields","getTimelineEntryFields","TimeStamp","ActorName","ActorExtID","toLowerCase","ActionText","SummaryText","Icon","timelineEntryDetails","_processTimelineEntryDetails","TimelineDetailNavigationPath","aTimelineEntryDetails","sEntityCollection","aTimelineEntryDetailsView","oTimelineEntryDetailFields","getTimelineEntryDetailFields","oTimelineEntryDetail","oDetail","afterValue","AfterValue","beforeValue","BeforeValue","changeType","ChangeType","propertyLabel","PropertyLabel","sUserEmail","oMember","picture","buildImageUrl","_oCollabModel","sServiceUrl","__metadata","uri","sUserEmailLC","email","fullname","id","address","MemberProfile","Address","Title","role","Role","getCurrentExternalBO"],"sources":["TimelineDataHandler-dbg.js"],"mappings":"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"}