/* SAP CVOM 4.0 Â© <2012-2014> SAP SE. All rights reserved. Build Version 1.9.1, Build context N/A */
(function(e){sap.viz.moduleloader.originalDefine=e.define;sap.viz.moduleloader.originalRequire=e.require;sap.viz.moduleloader.originalRequirejs=e.requirejs;e.define=sap.viz.moduleloader.define;e.require=sap.viz.moduleloader.require.config({context:"lw-vizframe",exportMap:{"sap/viz/vizframe/frame/VizFrame":"sap.viz.vizframe.VizFrame","sap/viz/vizframe/common/Version":"sap.viz.vizframe.VERSION"}});e.requirejs=require})(this);define("sap/viz/vizframe/common/Version",["exports"],function(){return"1.9.1"});define("sap/viz/vizframe/api/Version",["sap/viz/vizframe/common/Version","require"],function(e){sap.viz.vizframe.VERSION=e;return e});define("sap/viz/vizframe/api/APIUtil",[],function(){var e={};function t(e,t,i){i.split(/\s+/).forEach(function(i){e[i]=function(){return r(this[t][i].apply(this[t],arguments))}})}function i(e,t,i){i.split(/\s+/).forEach(function(i){Object.defineProperty(e,i,{enumerable:true,configurable:true,get:function(){return this[t][i]},set:function(e){return this[t][i]=e}})})}function n(t,i){e[t]=i}function r(t){if(t==null){return t}if(t.__wrapper__){return t.__wrapper__}if(t.__className&&e[t.__className]){return new e[t.__className](t)}return t}return{buildProxyMethods:t,buildProxyProperty:i,wrap:r,setWrapping:n}});define("jquery",[],function(){return jQuery});define("sap/viz/vizframe/common/LanguageLoader",[],function(){sap.viz.extapi.env.Language.register({id:"language",value:{VIZ_FRAME_CONTROL_LOAD_ERROR:"Failed to load the control object {0}.",VIZ_FRAME_INVALID:"Invalid VizFrame instance.",VIZ_FRAME_DESTORYED:"VizFrame instance was destroyed."}})});define("sap/viz/vizframe/common/utils/OOUtil",[],function(){var e={};e.extend=function(e,t){var i=e.prototype;e.superclass=t.prototype;var n=function(){};n.prototype=t.prototype;e.prototype=new n;for(var r in i){if(i.hasOwnProperty(r)){e.prototype[r]=i[r]}}e.prototype.constructor=e;if(t.prototype.constructor==Object.prototype.constructor){t.prototype.constructor=t}return e};return e});define("sap/viz/vizframe/common/utils/utils",[],function(){var e={};var t=Object.prototype.hasOwnProperty;var i={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"};e.type=function(e){return e==null?String(e):i[Object.prototype.toString.call(e)]||"object"};e.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&&!!e};e.isFunction=function(t){return e.type(t)==="function"};e.isBoolean=function(t){return e.type(t)==="boolean"};e.isString=function(t){return e.type(t)==="string"};e.isArray=function(t){return e.type(t)==="array"};e.isNumber=function(t){return e.type(t)==="number"};e.isObject=function(t){return e.type(t)==="object"};e.isPlainObject=function(i){if(!i||e.type(i)!=="object"||i.nodeType||i&&typeof i==="object"&&"setInterval"in i){return false}if(i.constructor&&!t.call(i,"constructor")&&!t.call(i.constructor.prototype,"isPrototypeOf")){return false}var n;for(n in i){}return n===undefined||t.call(i,n)},e.isEmptyObject=function(t){for(var i in t){if(t.hasOwnProperty(i)){return false}}return e.isPlainObject(t)},e.isRegExp=function(t){return e.type(t)==="regexp"};e.noop=function(){};e.substitute=function(e,t){if(!e){return""}for(var i=1;i<arguments.length;i++){e=e.replace(new RegExp("\\{"+(i-1)+"\\}","g"),arguments[i])}return e};e.deepEqual=function(t,i){if(typeof t==="object"&&typeof i==="object"&&e.isExist(t)&&e.isExist(i)){var n=null;for(n in t){if(t.hasOwnProperty(n)){if(!i.hasOwnProperty(n)){return false}else if(!e.deepEqual(t[n],i[n])){return false}}}for(n in i){if(i.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){return false}}}return true}else{return t===i}};e.isExist=function(e){if(typeof e==="undefined"||e===null){return false}return true};return e});define("sap/viz/vizframe/common/events/Event",[],function(){var e=function(e,t,i){this.__className="sap.viz.vizframe.common.events.Event";this._type=e;this._target=t;this.data=i};e.prototype.type=function(){return this._type};e.prototype.target=function(){return this._target};return e});define("sap/viz/vizframe/common/events/EventDispatcher",["sap/viz/vizframe/common/utils/utils"],function(e){var t=function(){this.__className="sap.viz.vizframe.common.events.EventDispatcher";this._enableDispatchEvent=true};t.prototype.addEventListener=function(e,t,i,n){if(!n){n=0}var r=this._findEventListener(e,t,i);if(r){return}r={type:e,scope:i,listener:t,priority:n};var s=this.listeners()[e];if(!s){this.listeners()[e]=s=[r]}else{var o=false;for(var a=0;a<s.length;++a){var c=s[a];if(n>c.priority){s.splice(a,0,r);o=true;break}}if(o===false){s.push(r)}}};t.prototype.removeEventListener=function(e,t,i){var n=this._findEventListener(e,t,i);if(n){var r=this.listeners()[e];r.splice(r.indexOf(n),1)}};t.prototype.removeEventListeners=function(e){this.listeners()[e]=[]};t.prototype.removeAllEventListeners=function(){this._listeners={}};t.prototype.hasEventListener=function(e,t,i){var n=this._findEventListener(e,t,i);return n!==null};t.prototype.hasEventListeners=function(e){var t=this.listeners()[e];if(t){return t.length>0}return false};t.prototype._dispatchEvent=function(e){if(this._enableDispatchEvent===undefined){this._enableDispatchEvent=true}if(this._enableDispatchEvent){var t=e.type();var i=this.listeners()[t];if(i){var n=i.slice(0);for(var r=0;r<n.length;++r){var s=n[r];s.listener.call(s.scope,e)}}}};t.prototype.enableDispatchEvent=function(t){if(this._enableDispatchEvent===undefined){this._enableDispatchEvent=true}if(arguments.length>=1){if(e.isBoolean(t)){this._enableDispatchEvent=t}return this}else{return this._enableDispatchEvent}};t.prototype._findEventListener=function(e,t,i){var n=this.listeners()[e];if(!n){return null}for(var r=0;r<n.length;++r){var s=n[r];if(s.listener===t&&s.scope===i){return s}}return null};t.prototype.listeners=function(){if(this._listeners===undefined){this._listeners={}}return this._listeners};return t});define("sap/viz/vizframe/common/UIControl",["jquery","sap/viz/vizframe/common/utils/OOUtil","sap/viz/vizframe/common/events/EventDispatcher"],function(e,t,i){var n=function t(i){t.superclass.constructor.apply(this,arguments);this.__className="sap.viz.vizframe.common.UIControl";this._dom=i;this._dom$=e(i)};t.extend(n,i);n.prototype.dom$=function(){return this._dom$};n.prototype.destroy=function(){this.removeAllEventListeners();if(this._dom$){this._dom$.empty().removeData().off()}this._dom=null;this._dom$=null};return n});define("sap/viz/vizframe/frame/viz/VizUtil",["jquery"],function(e){var t={};var i=["data","bindings","customizations","template","size","sharedRuntimeScales"];t.mergeOptions=function(t,n){for(var r=0;r<i.length;++r){if(n[i[r]]){t[i[r]]=n[i[r]]}}if(n.properties){t.properties=sap.viz.vizservices.__internal__.PropertyService.mergeProperties(t.type,t.properties,n.properties)}if(n.scales){if(n.scalesOption){t.scalesOption=e.extend({},n.scalesOption)}t.scales=sap.viz.vizservices.__internal__.ScaleService.mergeScales(t.type,t.scales,n.scales)}return t};return t});define("sap/viz/vizframe/frame/viz/VizCache",["sap/viz/vizframe/frame/viz/VizUtil"],function(e){var t=function(e){this.__className="sap.viz.vizframe.frame.viz.VizCache";this._options=e};t.generateFromVizInstance=function(e,i){var n=i.scalesOption&&i.scalesOption.level==="user"&&i.scalesOption.replace;var r={data:e.data(),bindings:e.bindings(),scales:e.scales([],{level:"user",isRender:false,replace:n}),properties:e.properties({},{level:"user",isRender:false}),customizations:e.customizations(),template:e.template()};var s=e.size();if(!s.auto){r.size=s}return new t(r)};t.generateFromOptions=function(e){return new t(e)};t.prototype.options=function(e){if(arguments.length){this._options=e}else{return this._options}};t.prototype.update=function(t){e.mergeOptions(this._options,t)};return t});define("sap/viz/vizframe/frame/viz/Viz",["sap/viz/vizframe/common/utils/OOUtil","sap/viz/vizframe/common/UIControl","sap/viz/vizframe/frame/viz/VizCache","sap/viz/vizframe/frame/viz/VizUtil"],function(e,t,i,n){var r=function(e,t,i){r.superclass.constructor.apply(this,arguments);this.__className="sap.viz.vizframe.frame.viz.Viz";this._onCaches=[];this._type=null;this._vizInstance=null;this._vizCache=null;this._beforeRenderCallback=t;this._afterRenderCallback=i};e.extend(r,t);r.prototype._getDataRange=function(e,t){return this._vizInstance&&this._vizInstance._getDataRange(e,t)};r.prototype.update=function(e){this._beforeRenderCallback();try{if(!this._vizInstance){this._createVizInstance(e)}else{if(e.type!==undefined&&e.type!==this._type){this._vizCache=i.generateFromVizInstance(this._vizInstance,e);this._clearVizInstance();this._createVizInstance(e)}else{this._updateVizInstance(e)}}}catch(e){this._afterRenderCallback();throw e}};r.prototype.type=function(){return this._type};r.prototype.save=function(){if(this._vizInstance){return sap.viz.api.core.exportViz(this._vizInstance)}else{return{type:"vizCache",options:this._vizCache.options()}}};r.prototype.load=function(e){this._clearVizInstance();if(e.type==="vizCache"){this._vizCache=i.generateFromOptions(e.options)}else{this._vizCache=null;this._beforeRenderCallback();try{this._vizInstance=sap.viz.api.core.loadViz(e,this._dom);this._initVizInstance();this._type=e.type}finally{this._afterRenderCallback()}}};r.prototype.destroy=function(){this._clearVizInstance();this._vizCache=null;this._onCaches=null};["data","bindings","properties","scales","sharedRuntimeScales","customizations","template"].forEach(function(e){(function(e){r.prototype[e]=function(){var t={};var i;if(arguments.length>=2){t[e]=arguments[0];t[e+"Option"]=arguments[1];if(this._vizInstance){this._beforeRenderCallback();i=this._vizInstance[e](t[e],t[e+"Option"]);this._afterRenderCallback()}else{this._vizCache.update(t);return this._vizCache.options()[e]}}else if(arguments.length===1){t[e]=arguments[0];this.update(t);return this}else{if(this._vizInstance){return this._vizInstance[e]()}else{return this._vizCache.options()[e]}}return i===this._vizInstance?this:i}})(e)});["selection","propertyZone","feedingZone","runtimeScales","size"].forEach(function(e){(function(e){r.prototype[e]=function(){if(this._vizInstance){return this._vizInstance[e].apply(this._vizInstance,arguments)}else{return[]}}})(e)});["states","exportToSVGString"].forEach(function(e){(function(e){r.prototype[e]=function(){var t;if(this._vizInstance){t=this._vizInstance[e].apply(this._vizInstance,arguments)}return t===this._vizInstance?this:t}})(e)});r.prototype.on=function(e,t){if(this._vizInstance){this._vizInstance.on(e,t)}this._onCaches.push({type:e,callback:t})};r.prototype.off=function(e){if(this._vizInstance){this._vizInstance.off(e)}this._onCaches=this._onCaches.filter(function(t){return e!==t.type})};r.prototype.zoom=function(e){if(this._vizInstance){this._vizInstance.states({zoomInOut:e})}};r.prototype._createVizInstance=function(e){try{if(e.type){this._type=e.type}var t=null;if(this._vizCache){t={type:this._type};n.mergeOptions(t,this._vizCache.options());n.mergeOptions(t,e)}else{t=e}t.container=this._dom;this._vizInstance=sap.viz.api.core.createViz(t);this._initVizInstance();this._vizCache=null}catch(n){if(this._vizCache){this._vizCache.options(t)}else{this._vizCache=i.generateFromOptions(e)}this._clearVizInstance();throw n}};r.prototype._updateVizInstance=function(e){try{if(e.type){this._type=e.type}this._vizInstance.update(e)}catch(t){this._vizCache=i.generateFromVizInstance(this._vizInstance,e);this._vizCache.update(e);this._clearVizInstance();throw t}};r.prototype._initVizInstance=function(){this._vizInstance.on("renderComplete",function(){this._afterRenderCallback()}.bind(this));this._onCaches.forEach(function(e){this._vizInstance.on(e.type,e.callback)}.bind(this))};r.prototype._clearVizInstance=function(){if(this._vizInstance){this._vizInstance.destroy()}this._vizInstance=null};return r});define("sap/viz/vizframe/frame/VizFrameEvent",["sap/viz/vizframe/common/utils/OOUtil","sap/viz/vizframe/common/events/Event"],function(e,t){var i=function(e,t,n){i.superclass.constructor.apply(this,arguments);this.__className="sap.viz.vizframe.common.events.VizFrameEvent"};e.extend(i,t);i.BEFORE_RENDER="beforeRender";i.AFTER_RENDER="afterRender";return i});define("sap/viz/vizframe/frame/VizFrameConfig",[],function(){var e={};e.instance=function(){return JSON.parse(JSON.stringify({controls:{morpher:{enabled:true}}}))};return e});define("sap/viz/vizframe/frame/VizFrameProxy",["jquery","sap/viz/vizframe/common/utils/OOUtil","sap/viz/vizframe/common/events/EventDispatcher"],function(e,t,i){var n=function e(t){this._vizframe=t};n.prototype.dataset=function(){try{return this._vizframe.data.apply(this._vizframe,arguments)}catch(e){return null}};n.prototype.vizType=function(){try{return this._vizframe.type.apply(this._vizframe,arguments)}catch(e){return null}};n.prototype.feedingZone=function(){try{return this._vizframe.feedingZone.apply(this._vizframe,arguments)}catch(e){return null}};n.prototype.addEventListener=function(){this._vizframe.addEventListener.apply(this._vizframe,arguments)};n.prototype.removeEventListener=function(){this._vizframe.removeEventListener.apply(this._vizframe,arguments)};return n});define("sap/viz/vizframe/frame/ControlFactory",["require"],function(e){var t=function(){this.__className="sap.viz.vizframe.frame.ControlFactory"};var i={morpher:"sap/viz/vizframe/controls/morpher/Morpher"};t.createControl=function(t,n,r,s){var o=null;try{if(i[t]){var a=e(i[t]);o=new a(n,r,s)}}catch(e){}return o};return t});define("sap/viz/vizframe/frame/VizFrame",["jquery","sap/viz/vizframe/common/LanguageLoader","sap/viz/vizframe/common/utils/OOUtil","sap/viz/vizframe/common/utils/utils","sap/viz/vizframe/common/events/Event","sap/viz/vizframe/common/events/EventDispatcher","sap/viz/vizframe/frame/viz/Viz","sap/viz/vizframe/frame/VizFrameEvent","sap/viz/vizframe/frame/VizFrameConfig","sap/viz/vizframe/frame/VizFrameProxy","sap/viz/vizframe/frame/ControlFactory","exports"],function(e,t,i,n,r,s,o,a,c,p,f){var l=function(t,i){l.superclass.constructor.call(this);this.__className="sap.viz.vizframe.frame.VizFrame";this._dom=t.container,this._dom$=e(this._dom);this._config=e.extend(true,c.instance(),i);this._destroyed=false;this._vizInstanceContainer=document.createElement("div");e(this._vizInstanceContainer).appendTo(this._dom$).css({width:"100%",height:"100%"});this._viz=new o(this._vizInstanceContainer,function(){this._dispatchEvent(new a(a.BEFORE_RENDER,this))}.bind(this),function(){this._dispatchEvent(new a(a.AFTER_RENDER,this))}.bind(this));this._controlsContainer=document.createElement("div");e(this._controlsContainer).appendTo(this._dom$);this._controls={};var n=null;for(n in this._config.controls){if(this._config.controls[n].enabled!==false){try{this._enableControl(n,this._config.controls[n].config)}catch(e){if(i&&i.controls&&i.controls[n]&&i.controls[n].hasOwnProperty("enabled")&&i.controls[n].enabled!==false){throw e}}}}try{this._viz.update(t)}catch(e){if(this._config.throwError===true){throw e}}};i.extend(l,s);["data","bindings","properties","scales","sharedRuntimeScales","runtimeScales","customizations","template","exportToSVGString","states","size","update","selection","propertyZone","feedingZone","on","off"].forEach(function(e){(function(e){l.prototype[e]=function(){this._validateLifecycle();var t=this._viz[e].apply(this._viz,arguments);return t===this._viz?this:t}})(e)});l.prototype._getDataRange=function(e,t){return this._viz._getDataRange(e,t)};l.prototype.getControl=function(e){return this._controls[e]};l.prototype.enableControl=function(e,t){this._validateLifecycle();return this._enableControl.apply(this,arguments)};l.prototype.disableControl=function(e){this._validateLifecycle();return this._disableControl.apply(this,arguments)};l.prototype.destroy=function(){this._validateLifecycle();for(var e in this._controls){this._disableControl(e)}if(this._viz){this._viz.destroy()}this.removeAllEventListeners();if(this._dom$){this._dom$.empty().removeData().off()}this._dom=null;this._dom$=null;this._destroyed=true};l.prototype.type=function(e){this._validateLifecycle();if(arguments.length>0){this.update({type:e});return this}else{return this._viz.type()}};l.prototype.save=function(){this._validateLifecycle();return this._viz.save()};l.prototype.load=function(e){this._validateLifecycle();this._viz.load(e)};l.prototype.zoom=function(e){this._viz.zoom(e)};l.prototype._validateLifecycle=function(e){if(this._destroyed){throw n.substitute(sap.viz.extapi.env.Language.getResourceString("VIZ_FRAME_DESTORYED"))}};l.prototype._enableControl=function(e,t){if(this.getControl(e)){return}var i=this._attachControl(e);var r=f.createControl(e,i,t,new p(this));if(r){if(e==="morpher"){r.bindVizInstanceContainer(this._vizInstanceContainer)}this._controls[e]=r}else{throw n.substitute(sap.viz.extapi.env.Language.getResourceString("VIZ_FRAME_CONTROL_LOAD_ERROR"),e)}};l.prototype._disableControl=function(e){var t=this._controls[e];if(!t){return}if(t.dom$()){t.dom$().detach()}t.destroy();delete this._controls[e]};l.prototype._attachControl=function(t){var i=null;if(t==="morpher"){i=e(document.createElement("div")).appendTo(this._controlsContainer);i.css({position:"absolute",left:"0px",top:"0px"})}return i?i.get(0):null};return l});define("sap/viz/vizframe/api/VizFrame",["sap/viz/vizframe/api/APIUtil","sap/viz/vizframe/frame/VizFrame","require"],function(e,t){var i=sap.viz.vizframe.VizFrame=function(e,i){this.__internal_reference_VizFrame__=new t(e,i);this.__internal_reference_VizFrame__.__wrapper__=this};e.setWrapping("sap.viz.vizframe.VizFrame",i);e.buildProxyMethods(i.prototype,"__internal_reference_VizFrame__",["enableControl","disableControl","destroy","on","off","type","update","data","bindings","properties","scales","customizations","template","selection","propertyZone","feedingZone","size","save","load","exportToSVGString","sharedRuntimeScales","runtimeScales","states","zoom","_getDataRange"].join(" "));return i});(function(){var e=define&&define.__autoLoad;if(e&&e.length){define.__autoLoad=[];require(e)}})();(function(e){e.define=sap.viz.moduleloader.originalDefine;e.require=sap.viz.moduleloader.originalRequire;e.requirejs=sap.viz.moduleloader.originalRequirejs})(this);
//# sourceMappingURL=sap-viz-vizframe.js.map