/* SAP CVOM 4.0 Â© <2012-2014> SAP SE. All rights reserved. Build Version 1.9.1, Build context N/A */
(function(e){sap.viz.moduleloader.originalDefine=e.define;sap.viz.moduleloader.originalRequire=e.require;sap.viz.moduleloader.originalRequirejs=e.requirejs;e.define=sap.viz.moduleloader.define;e.require=sap.viz.moduleloader.require.config({context:"lw-vizservices",exportMap:{"sap/viz/vizservices/service/bvr/BVRService":"sap.viz.vizservices.BVRService","sap/viz/vizservices/service/feed/FeedService":"sap.viz.vizservices.FeedService","sap/viz/vizservices/service/binding/BindingService":"sap.viz.vizservices.__internal__.BindingService","sap/viz/vizservices/service/property/PropertyService":"sap.viz.vizservices.__internal__.PropertyService","sap/viz/vizservices/service/scale/ScaleService":"sap.viz.vizservices.__internal__.ScaleService","sap/viz/vizservices/common/Version":"sap.viz.vizservices.VERSION"}});e.requirejs=require})(this);define("sap/viz/vizservices/common/feed/FeedConst",[],function(){var e={};e.ID_TRELLIS_ROW="trellisRow";e.ID_TRELLIS_COLUMN="trellisColumn";e.ID_DATAFRAME="dataFrame";e.ID_TIME_AXIS="timeAxis";e.ID_MND="MND";e.TYPE_DIMENSION="Dimension";e.TYPE_MEASURE="Measure";e.TYPE_MND="MND";e.DATA_TYPE_STRING="String";e.DATA_TYPE_NUMBER="Number";e.DATA_TYPE_DATE="Date";return e});define("sap/viz/vizservices/common/utils/OOUtil",[],function(){var e={};e.extend=function(e,i){var r=e.prototype;e.superclass=i.prototype;var t=function(){};t.prototype=i.prototype;e.prototype=new t;for(var a in r){if(r.hasOwnProperty(a)){e.prototype[a]=r[a]}}e.prototype.constructor=e;if(i.prototype.constructor==Object.prototype.constructor){i.prototype.constructor=i}return e};return e});define("sap/viz/vizservices/common/data/DatasetTypeConst",[],function(){var e={};e.FLAT_TABLE="FlatTableDataset";e.CROSS_TABLE="CrossTableDataset";e.RAW="RawDataset";e.ARRAY_FLAT_TABLE="ArrayOfFlatTableDataset";return e});define("sap/viz/vizservices/common/metadata/MetadataBase",["sap/viz/vizservices/common/data/DatasetTypeConst"],function(e){var i=function(i){this._raw=i;this._support={dataset:{}};this._support.dataset[e.CROSS_TABLE]=false;this._support.dataset[e.FLAT_TABLE]=false;this._bindingDefs=null};i.prototype.raw=function(){return this._raw};i.prototype.support=function(){return this._support};i.prototype.removeInvalidProperty=function(e){var i=this.getRawPropertiesDef();var r=this._raw.type;this._removeInvalidProperty(e,i)};i.prototype.dataType=function(){if(!this._raw){return null}if(this._raw.dataType==="sap.viz.api.data.CrosstableDataset"){return e.CROSS_TABLE}else if(this._raw.dataType==="sap.viz.api.data.FlatTableDataset"){return e.FLAT_TABLE}else if(this._raw.dataType==="raw"){return e.RAW}else{return null}};return i});define("sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst",[],function(){var e={};e.TYPE_DIMENSION="Dimension";e.TYPE_MEASURE="Measure";e.MND_MODE_NONE="none";e.MND_MODE_SUPPORT_EXCLUSIVELY="supportExclusively",e.MND_MODE_SUPPORT="support";e.MND_MODE_ONLY="mndOnly";return e});define("sap/viz/vizservices/common/metadata/bindingdef/BindingDef",["sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst"],function(e){var i=function(i){this._id=i.id;this._name=i.name;this._type=i.type;this._min=i.min||0;this._max=i.max||Infinity;this._mndEnumerable=i.mndEnumerable!==undefined?i.mndEnumerable:false;this._mndMode=i.mndMode||e.MND_MODE_NONE;this._bvrPriority=i.bvrPriority!==undefined?i.bvrPriority:Number.POSITIVE_INFINITY;this._bvrMNDPriority=i.bvrMNDPriority!==undefined?i.bvrMNDPriority:Number.POSITIVE_INFINITY};i.prototype.id=function(){return this._id};i.prototype.name=function(){return this._name};i.prototype.type=function(){return this._type};i.prototype.min=function(){return this._min};i.prototype.max=function(){return this._max};i.prototype.mndEnumerable=function(){return this._mndEnumerable};i.prototype.mndMode=function(){return this._mndMode};i.prototype.bvrPriority=function(){return this._bvrPriority};i.prototype.bvrMNDPriority=function(){return this._bvrMNDPriority};i.prototype.equal=function(e){var i=true;i=i&&this._id===e.id();i=i&&this._name===e.name();i=i&&this._type===e.type();i=i&&this._min===e.min();i=i&&this._max===e.max();i=i&&this._mndMode===e.mndMode();i=i&&this._bvrPriority===e.bvrPriority();i=i&&this._bvrMNDPriority===e.bvrMNDPriority();return i};return i});define("sap/viz/vizservices/common/metadata/bindingdef/InfoBindingDefAdaptor",["sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/metadata/bindingdef/BindingDef","sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst"],function(e,i,r){var t=["layout","mark","trellis","frame"];var a=["mark","layout","trellis","frame"];return{adapt:function(e,n){var s=e.slice(0).sort(function(e,i){if(e.role==="trellis.rowCategory"&&i.role==="trellis.columnCategory"){return-1}else if(e.role==="trellis.columnCategory"&&i.role==="trellis.rowCategory"){return 1}else{return t.indexOf(e.role.split(".")[0])-t.indexOf(i.role.split(".")[0])}});var o=[];e.forEach(function(e){var t={};t.id=e.id;t.name=e.name;t.type=e.type;t.min=e.min;t.max=e.max;t.mndEnumerable=e.type===r.TYPE_MEASURE&&e.role.split(".")[0]==="layout";if(e.acceptMND){if(e.MNDOnly){t.mndMode=r.MND_MODE_ONLY}else{t.mndMode=r.MND_MODE_SUPPORT}}else{t.mndMode=r.MND_MODE_NONE}t.bvrPriority=s.indexOf(e);t.bvrMNDPriority=a.indexOf(e.role.split(".")[0])*1e3+s.indexOf(e);o.push(new i(t))});return o}}});define("sap/viz/vizservices/common/metadata/InfoMetadata",["sap/viz/vizservices/common/utils/OOUtil","sap/viz/vizservices/common/metadata/MetadataBase","sap/viz/vizservices/common/metadata/bindingdef/InfoBindingDefAdaptor","sap/viz/vizservices/common/data/DatasetTypeConst","require"],function(e,i,r,t){var a=function(e){a.superclass.constructor.apply(this,arguments);this._support.dataset[t.FLAT_TABLE]=true};e.extend(a,i);a.prototype.getBindingDefs=function(){if(!this._bindingDefs){this._bindingDefs=r.adapt(this._raw.bindings,this._raw.type)}return this._bindingDefs};a.prototype.getBindingDefsWithBVRSorting=function(){if(!this._bindingDefsWithBVRSorting){this._bindingDefsWithBVRSorting=this.getBindingDefs().slice(0).sort(function(e,i){return e.bvrPriority()-i.bvrPriority()})}return this._bindingDefsWithBVRSorting};a.prototype.getRawPropertiesDef=function(){return this._raw.properties};a.prototype.getPropertiesDef=function(){if(!this._propertiesDef){this._propertiesDef=a._adaptInfoPropertiesDef(this._raw.properties)}return this._propertiesDef};a._adaptInfoPropertiesDef=function(e){var i={};for(var r in e){if(e.hasOwnProperty(r)){var t=e[r];if(t.hasOwnProperty("children")){i[r]=a._adaptInfoPropertiesDef(t.children)}else{i[r]=null}}}return i};a.prototype.isBuiltIn=function(){return this._raw.isBuiltIn};a.prototype.getName=function(){return this._raw.name||this._raw.type};a.prototype._removeInvalidProperty=function(e,i){if(!i){return}var r;for(r in e){if(!i.hasOwnProperty(r)){delete e[r]}else if(!i[r].supportedValueType){var t=i[r].children;if(t){this._removeInvalidProperty(e[r],t)}}}};a.prototype.dataScale=function(){return this._raw.scales};a.prototype.dataType=function(){var e=a.superclass.dataType.apply(this);if(e){return e}else{return t.FLAT_TABLE}};return a});define("sap/viz/vizservices/common/metadata/bindingdef/VizFeedingDefAdaptor",["sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/metadata/bindingdef/BindingDef","sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst"],function(e,i,r){var t={};t.adapt=function(e){var i=[];e.forEach(function(e,t,o){if(e.id==="multiplier"){i=i.concat(s(e))}else if(e.type===r.TYPE_DIMENSION){i.push(n(e))}else if(e.type===r.TYPE_MEASURE){i.push(a(e))}});return i};var a=function(e){return new i({id:e.id,name:e.name,type:r.TYPE_MEASURE,min:e.min,max:e.max,mndEnumerable:true,mndMode:r.MND_MODE_NONE,bvrPriority:e.mgIndex,bvrMNDPriority:undefined})};var n=function(e){var t=e.minStackedDims!==undefined?e.minStackedDims:e.min;var a=e.maxStackedDims!==undefined?e.maxStackedDims:Number.POSITIVE_INFINITY;var n=o(e);return new i({id:e.id,name:e.name,type:r.TYPE_DIMENSION,min:t,max:a,mndMode:n.mode,bvrPriority:e.aaIndex,bvrMNDPriority:n.priority})};var s=function(t){var a=o(t);return[new i({id:e.ID_TRELLIS_ROW,name:t.name,type:r.TYPE_DIMENSION,min:0,max:3,mndMode:a.mode,bvrPriority:Number.POSITIVE_INFINITY,bvrMNDPriority:a.priority}),new i({id:e.ID_TRELLIS_COLUMN,name:t.name,type:r.TYPE_DIMENSION,min:0,max:3,mndMode:a.mode,bvrPriority:Number.POSITIVE_INFINITY,bvrMNDPriority:a.priority})]};var o=function(e){var i,t;if(e.acceptMND!==undefined&&e.acceptMND!==-1&&e.acceptMND!==false){i=e.max===1?r.MND_MODE_SUPPORT_EXCLUSIVELY:r.MND_MODE_SUPPORT;t=e.acceptMND*-1}else{i=r.MND_MODE_NONE;t=undefined}return{mode:i,priority:t}};return t});define("sap/viz/vizservices/common/metadata/VizMetadata",["sap/viz/vizservices/common/utils/OOUtil","sap/viz/vizservices/common/metadata/MetadataBase","sap/viz/vizservices/common/metadata/bindingdef/VizFeedingDefAdaptor","sap/viz/vizservices/common/data/DatasetTypeConst"],function(e,i,r,t){var a=function(){a.superclass.constructor.apply(this,arguments);this._support.dataset[t.CROSS_TABLE]=true};e.extend(a,i);a.prototype.getBindingDefs=function(){if(!this._bindingDefs){this._bindingDefs=r.adapt(this._raw.allFeeds())}return this._bindingDefs};a.prototype.getBindingDefsWithBVRSorting=function(){if(!this._bindingDefsWithBVRSorting){this._bindingDefsWithBVRSorting=this.getBindingDefs().slice(0).sort(function(e,i){return e.bvrPriority()-i.bvrPriority()})}return this._bindingDefsWithBVRSorting};a.prototype.getRawPropertiesDef=function(){return this._raw.allProperties()};a.prototype.getPropertiesDef=function(){if(!this._propertiesDef){this._propertiesDef=a._adaptVizPropertiesDef(this._raw.allProperties())}return this._propertiesDef};a._adaptVizPropertiesDef=function(e){var i={};for(var r in e){if(e.hasOwnProperty(r)){var t=e[r];if(t.hasOwnProperty("name")){i[r]=null}else{i[r]=a._adaptVizPropertiesDef(t)}}}return i};a.prototype.isBuiltIn=function(){return this._raw.isBuiltIn};a.prototype.getCategoryAxis=function(){return this._raw.categoryAxis};a.prototype.getValueAxis=function(){return this._raw.valueAxis};a.prototype.getName=function(){return this._raw.name};a.prototype._removeInvalidProperty=function(e,i){var r;for(r in e){if(!i.hasOwnProperty(r)){delete e[r]}else if(!i[r].supportedValueType){this._removeInvalidProperty(e[r],i[r])}}};a.prototype.dataScale=function(){return this._raw.dataScale};a.prototype.dataType=function(){var e=a.superclass.dataType.apply(this);if(e){return e}else{return t.CROSS_TABLE}};return a});define("sap/viz/vizservices/common/metadata/MetadataFactory",["sap/viz/vizservices/common/metadata/InfoMetadata","sap/viz/vizservices/common/metadata/VizMetadata"],function(e,i){var r={};return{get:function(t){if(r[t]!==undefined){return r[t]}var a,n=null;try{a=sap.viz.api.metadata.Viz.get(t);if(a&&a.type){n=new e(a)}}catch(e){}if(!n){try{a=sap.viz.api.manifest.Viz.get(t);if(a&&a[0]){n=new i(a[0])}}catch(e){}}return r[t]=n}}});define("sap/viz/vizservices/common/metadata/bindingdef/BindingDefUtils",["sap/viz/vizservices/common/metadata/MetadataFactory","sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst","sap/viz/vizservices/common/feed/FeedConst"],function(e,i,r){var t={};t.supportMND=function(r){var t=false;var a=e.get(r).getBindingDefs();a.forEach(function(e){t=t||e.mndMode()!==i.MND_MODE_NONE});return t};t.equal=function(i,r){if(i===r){return true}var t=e.get(i),a=e.get(r);if(t&&a){var n=t.getBindingDefs(),s=a.getBindingDefs();if(n.length!==s.length){return false}var o=true;n.forEach(function(e,i,r){o=o&&e.equal(s[i])});return o}else{return false}};t.has=function(e,i){return!!t.get(e,i)};t.get=function(i,r){var t;var a=e.get(i).getBindingDefs();a.forEach(function(e){if(!t&&e.id()===r){t=e}});return t};t.support=function(e,t){if(!t){return false}if(e.type()===i.TYPE_DIMENSION){if(e.id()===r.ID_TIME_AXIS&&t.dataType!==r.DATA_TYPE_DATE){return false}else{if(e.mndMode()===i.MND_MODE_NONE){return t.type===r.TYPE_DIMENSION}else if(e.mndMode()===i.MND_MODE_ONLY){return t.type===r.TYPE_MND}else{return t.type===r.TYPE_DIMENSION||t.type===r.TYPE_MND}}}else if(e.type()===i.TYPE_MEASURE){return t.type===r.TYPE_MEASURE}else{return false}};return t});define("sap/viz/vizservices/common/utils/Utils",[],function(){var e={};var i=0;var r=Object.prototype.hasOwnProperty;e.genUID=function(){if(!i){i=0}return"vcgen_"+i++};var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"};e.encodingToken="_encoded_";e.applyObjectProperty=function(i,r,t){try{if(e.isFunction(i[r])){i[r](t)}else{i[r]=t}}catch(e){}};e.applyProperties=function(i,r){if(r){var t=r.length;for(var a=0;a<t;a++){var n=r[a];if(n){e.applyObjectProperty(i,n.name,n.value)}}}};e.getObjectProperty=function(i,r){try{if(e.isFunction(i[r])){return i[r]()}else if(i.hasOwnProperty(r)){return i[r]}}catch(e){}};e.type=function(e){return e==null?String(e):t[Object.prototype.toString.call(e)]||"object"};e.isObject=function(e){var i=typeof e;return i==="function"||i==="object"&&!!e};e.isFunction=function(i){return e.type(i)==="function"};e.isBoolean=function(i){return e.type(i)==="boolean"};e.isString=function(i){return e.type(i)==="string"};e.isArray=function(i){return e.type(i)==="array"};e.isNumber=function(i){return e.type(i)==="number"};e.isObject=function(i){return e.type(i)==="object"};e.isPlainObject=function(i){if(!i||e.type(i)!=="object"||i.nodeType||i&&typeof i==="object"&&"setInterval"in i){return false}if(i.constructor&&!r.call(i,"constructor")&&!r.call(i.constructor.prototype,"isPrototypeOf")){return false}var t;for(t in i){}return t===undefined||r.call(i,t)},e.isEmptyObject=function(i){for(var r in i){if(i.hasOwnProperty(r)){return false}}return e.isPlainObject(i)},e.isRegExp=function(i){return e.type(i)==="regexp"};e.sortArrayOn=function(i,r,t){if(e.isArray(i)&&e.isString(r)){i.sort(function(e,i){return t?(e[r]<i[r])-(e[r]>i[r]):(e[r]>i[r])-(e[r]<i[r])})}};e.noop=function(){};e.delay=function(e,i){return setTimeout(function(){return e.apply(null)},i)};e.defer=function(i){return e.delay.call(null,i,1)};e.getEventPosition=function(e){var i=null;var r=null;if(e.originalEvent&&e.originalEvent.targetTouches&&e.originalEvent.targetTouches.length!==0){i=e.originalEvent.targetTouches[0].pageX;r=e.originalEvent.targetTouches[0].pageY}else{i=e.pageX;r=e.pageY}var t={};t.pageX=i;t.pageY=r;return t};function a(i){if(i===null||typeof i!=="object"){return i}if(typeof i==="object"&&i.clone&&e.isFunction(i.clone)){return i.clone()}var r=e.isArray(i)?[]:{};for(var t in i){if(i.hasOwnProperty(t)){r[t]=a(i[t])}}return r}e.clone=a;e.toJSON=function(i,r){if(e.isArray(i)){var t=[];for(var a=0;a<i.length;a++){t.push(r.call(null,i[a]))}return t}else if(i){return r.call(null,i)}else{return null}};e.fromJSON=function(i,r){if(e.isArray(i)){var t=[];for(var a=0;a<i.length;a++){t.push(r.call(null,i[a]))}return t}else if(i){return r.call(null,i)}else{return undefined}};e.updateJSON=function(i,r){var t=e.clone(i);t=t||{};var a=function(i){var a=e.getPropValue(r,i);if(a){e.setPropValue(t,i,a)}};a("plotArea.window.start.categoryAxis");a("plotArea.window.end.categoryAxis");var n=function(i,r){for(var t in r){if(r.hasOwnProperty(t)){var a=r[t];if(a!==undefined){if(typeof a!=="object"||a instanceof Array||a===null){i[t]=a}else{var s=i[t];if(!s){if(a===null){s=a}else{s=i[t]={}}}else if(!e.isObject(s)){s=i[t]={}}n(s,a)}}}}};n(t,r);return t};e.substitute=function(e,i){if(!e){return""}for(var r=1;r<arguments.length;r++){e=e.replace(new RegExp("\\{"+(r-1)+"\\}","g"),arguments[r])}return e};e.invert=function(e){var i={};for(var r in e){var t=e[r];i[t]=r}return i};e.encode=function(i,r){if(i.indexOf(e.encodingToken)>-1){return i}else{var t=i+e.encodingToken+r;return t}};e.decode=function(i){var r=i.split(e.encodingToken);return r};e.deepEqual=function(i,r){if(typeof i==="object"&&typeof r==="object"&&e.isExist(i)&&e.isExist(r)){var t=null;for(t in i){if(i.hasOwnProperty(t)){if(!r.hasOwnProperty(t)){return false}else if(!e.deepEqual(i[t],r[t])){return false}}}for(t in r){if(r.hasOwnProperty(t)){if(!i.hasOwnProperty(t)){return false}}}return true}else{return i===r}};e.hasCommonKeyValue=function(i,r){if(typeof i==="object"&&typeof r==="object"){var t=null;for(t in i){if(i.hasOwnProperty(t)){if(r.hasOwnProperty(t)&&e.deepEqual(i[t],r[t])){return true}}}return false}};e.isExist=function(e){if(typeof e==="undefined"||e===null){return false}return true};var n=e.genGetterSetter=function(e){return function(i){if(arguments.length>0){this[e]=i;return this}else{return this[e]}}};e.genGetterSetters=function(e,i){i.forEach(function(i){e[i.substring(1)]=n(i)})};e.currying=function(e){var i=Array.prototype.slice.call(arguments,1);return function(){return e.apply(this,i.concat(Array.prototype.slice.call(arguments)))}};e.getPropValue=function(e,i){if(e==null){return undefined}var r=i.split("."),t=r.pop(),a,n,s=e;for(a=0,n=r.length;a<n;a++){s=s[r[a]];if(s==null){return undefined}}return s[t]};e.setPropValue=function(e,i,r){var t=i.split("."),a=t.pop(),n,s,o,l,u=e;for(o=0,l=t.length;o<l;o++){n=t[o];s=typeof u[n];if(s!=="object"&&s!=="function"){u[n]={}}u=u[n]}u[a]=r;return e};e.deletePropValue=function(e,i){var r=i.split("."),t,a,n=e;for(a=0;a<r.length;a++){t=r[a];if(n.hasOwnProperty(t)){if(a===r.length-1){delete n[t];break}n=n[t]}else{return e}}return e};e.checkArgs=function(i,r){if(!r){return true}else{var t,a;for(var n=0;n<r.length;n++){t=i[n];a=r[n];if(e.checkArg(t,a)===false){return false}}return true}};e.checkArg=function(e,i){if(!i.typeValidator){return true}else{if(e==null){if(i.isOptional){return true}else{return false}}return i.typeValidator(e)}};e.isArrayOf=function(i,r){if(!e.isArray(i)){return false}for(var t=i.length-1;t>=0;t--){if(!r(i[t])){return false}}return true};return e});define("sap/viz/vizservices/common/feed/FeedUtil",["sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/metadata/MetadataFactory","sap/viz/vizservices/common/metadata/bindingdef/BindingDefUtils","sap/viz/vizservices/common/utils/Utils"],function(e,i,r,t){var a={};a.genFeedItem=function(e,i){return{id:e,values:i}};a.genAnalysisObject=function(e,i,r){return{id:e,type:i,dataType:r}};a.hasMND=function(i){return a.countAnalyses(i,e.TYPE_MND)>0};a.countAnalyses=function(e,i){var r=0;for(var t=0;t<e.length;t++){var a=e[t];var n=a.values;if(i){for(var s=0;s<n.length;s++){var o=n[s];if(o.type===i){r++}}}else{r+=n.length}}return r};a.hasMNDInValues=function(e){return a.indexOfMNDInValues(e)!==-1};a.indexOfMNDInValues=function(i){if(!i||!i.length){return-1}var r=-1;for(var t=0;t<i.length;t++){var a=i[t];if(a.type===e.TYPE_MND){r=t;break}}return r};a.buildEmptyFeeds=function(e){var r=i.get(e);var t=r.getBindingDefs();var n=[];t.forEach(function(e){n.push(a.genFeedItem(e.id(),[]))});return n};a.merge=function(e,i){var r=a._getFeedsValuesMap(i);for(var t=0;t<e.length;t++){var n=e[t];if(r[n.id]){n.values=n.values.concat(r[n.id])}}return e};a._getFeedsValuesMap=function(e){var i={};for(var r=0;r<e.length;r++){var t=e[r];var a=t.id;if(!i[a]){i[a]=t.values}else{i[a]=i[a].concat(t.values)}}return i};a.getFeed=function(e,i){for(var r=0;r<e.length;r++){var t=e[r];if(t.id===i){return t}}return null};a.getFeedValues=function(e,i){var r=a.getFeed(e,i);return r?r.values:null};function n(e,i){if(!e||!i){return false}if(e.length!==i.length){return false}var r=i.every(function(i){return e.indexOf(i)>-1});return r}a.getMNDEnumeration=function(e){var r=i.get(e);var t=r.getBindingDefs();var a=[];t.forEach(function(e){if(e.mndEnumerable()){a.push(e.id())}});return a};a.validateMND=function(e,i){if(!i.hasOwnProperty("measureNames")){return true}return i.hasOwnProperty("measureNames")&&n(i.measureNames,a.getMNDEnumeration(e))};a.validateMndAddMeasureNames=function(e,i){var r=a.validateMND(e,i);if(r&&!i.hasOwnProperty("measureNames")){i.measureNames=a.getMNDEnumeration(e)}return r};a.spliceAnalysisObjects=function(e,i,r,t,n,s){var o=Array.prototype.slice.call(arguments,2);var l=false;e.forEach(function(e){if(e.id===i){var r=e.values||[];r.splice.apply(r,o);l=true}});if(!l&&n){var u=[];u.splice.apply(u,o);e.push(a.genFeedItem(i,u))}return e};a.cloneFeeds=function(e){return JSON.parse(JSON.stringify(e))};a.hasInvalidFeeds=function(e,i){for(var t=0;t<i.length;t++){var a=r.get(e,i[t].id);if(!a){return true}}return false};a.removeInvalid=function(i,t){return t.filter(function(t){var n=r.get(i,t.id);if(!n){return false}else{t.values=t.values.filter(function(t){var s=r.support(n,t);return t.type===e.TYPE_MND?s&&a.validateMND(i,t):s});return true}})};a.isAnalysisDataType=function(i){if(i===e.DATA_TYPE_STRING||i===e.DATA_TYPE_NUMBER||i===e.DATA_TYPE_DATE){return true}else{return false}};a.isAnalysisObject=function(e){return e&&t.checkArg(e.id,{typeValidator:t.isString})&&t.checkArg(e.type,{typeValidator:t.isString})&&t.checkArg(e.dataType,{typeValidator:a.isAnalysisDataType,isOptional:true})};a.isArrayOfAnalysisObject=function(e){return t.isArrayOf(e,a.isAnalysisObject)};a.isFeedItem=function(e){return e&&t.checkArg(e.id,{typeValidator:t.isString})&&t.checkArg(e.values,{typeValidator:a.isArrayOfAnalysisObject})};a.isArrayOfFeedItem=function(e){return t.isArrayOf(e,a.isFeedItem)};return a});define("sap/viz/vizservices/service/bvr/feeders/MNDFeeder",["sap/viz/vizservices/common/metadata/MetadataFactory","sap/viz/vizservices/common/feed/FeedUtil","sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst","sap/viz/vizservices/common/feed/FeedConst"],function(e,i,r,t){var a={};function n(e,i){var r=e.length-1;for(;r>=0&&e[r].inResult;--r){}e.splice(r+1,0,i)}a.feed=function(a,s,o){var l,u;var c=i.indexOfMNDInValues(o);if(c===-1||i.hasMND(s)){return}var f=o.splice(c,1)[0],v;var d=e.get(a).getBindingDefs();d=d.slice(0).sort(function(e,i){return e.bvrMNDPriority()-i.bvrMNDPriority()});for(l=0;l<d.length;l++){u=d[l];v=i.getFeedValues(s,u.id());if(v&&u.mndMode()!==r.MND_MODE_NONE&&u.min()>v.length){if(u.mndMode()===r.MND_MODE_SUPPORT||u.mndMode()===r.MND_MODE_ONLY){n(v,f);return}}}var _=i.getFeed(s,t.ID_TRELLIS_ROW),p=i.getFeed(s,t.ID_TRELLIS_COLUMN);if(_&&p&&_.values.length===0&&p.values.length===0){n(_.values,f);return}for(l=0;l<d.length;l++){u=d[l];v=i.getFeedValues(s,u.id());if(v&&u.mndMode()!==r.MND_MODE_NONE&&v.length===0){n(v,f);return}}var m=false,E=0;for(l=0;!m&&l<d.length;l++){u=d[l];if(u.type()==="Measure"){E++;v=i.getFeedValues(s,u.id());m=E>1||v&&v.length>1}}if(!m){return}for(l=0;l<d.length;l++){u=d[l];v=i.getFeedValues(s,u.id());if(v&&u.mndMode()===r.MND_MODE_SUPPORT){n(v,f);return}}};return a});define("sap/viz/vizservices/common/viz/ChartConst",[],function(){var e={};e.TYPE_BAR="info/bar";e.TYPE_STACKED_BAR="info/stacked_bar";e.TYPE_100_STACKED_BAR="info/100_stacked_bar";e.TYPE_DUAL_BAR="info/dual_bar";e.TYPE_DUAL_STACKED_BAR="info/dual_stacked_bar";e.TYPE_100_DUAL_STACKED_BAR="info/100_dual_stacked_bar";e.TYPE_TRELLIS_BAR="info/trellis_bar";e.TYPE_TRELLIS_STACKED_BAR="info/trellis_stacked_bar";e.TYPE_TRELLIS_100_STACKED_BAR="info/trellis_100_stacked_bar";e.TYPE_TRELLIS_DUAL_BAR="info/trellis_dual_bar";e.TYPE_TRELLIS_DUAL_STACKED_BAR="info/trellis_dual_stacked_bar";e.TYPE_TRELLIS_100_DUAL_STACKED_BAR="info/trellis_100_dual_stacked_bar";e.TYPE_COLUMN="info/column";e.TYPE_STACKED_COLUMN="info/stacked_column";e.TYPE_100_STACKED_COLUMN="info/100_stacked_column";e.TYPE_DUAL_COLUMN="info/dual_column";e.TYPE_DUAL_STACKED_COLUMN="info/dual_stacked_column";e.TYPE_100_DUAL_STACKED_COLUMN="info/100_dual_stacked_column";e.TYPE_TRELLIS_COLUMN="info/trellis_column";e.TYPE_TRELLIS_STACKED_COLUMN="info/trellis_stacked_column";e.TYPE_TRELLIS_100_STACKED_COLUMN="info/trellis_100_stacked_column";e.TYPE_TRELLIS_DUAL_COLUMN="info/trellis_dual_column";e.TYPE_TRELLIS_DUAL_STACKED_COLUMN="info/trellis_dual_stacked_column";e.TYPE_TRELLIS_100_DUAL_STACKED_COLUMN="info/trellis_100_dual_stacked_column";e.TYPE_TIMESERIES_LINE="info/timeseries_line";e.TYPE_TIMESERIES_SCATTER="info/timeseries_scatter";e.TYPE_TIMESERIES_BUBBLE="info/timeseries_bubble";e.TYPE_TIMESERIES_COMBINATION="info/timeseries_combination";e.TYPE_DUAL_TIMESERIES_COMBINATION="info/dual_timeseries_combination";e.TYPE_LINE="info/line";e.TYPE_HORIZONTAL_LINE="info/horizontal_line";e.TYPE_DUAL_LINE="info/dual_line";e.TYPE_DUAL_HORIZONTAL_LINE="info/dual_horizontal_line";e.TYPE_TRELLIS_LINE="info/trellis_line";e.TYPE_TRELLIS_HORIZONTAL_LINE="info/trellis_horizontal_line";e.TYPE_TRELLIS_DUAL_LINE="info/trellis_dual_line";e.TYPE_TRELLIS_DUAL_HORIZONTAL_LINE="info/trellis_dual_horizontal_line";e.TYPE_AREA="info/area";e.TYPE_HORIZONTAL_AREA="info/horizontal_area";e.TYPE_100_AREA="info/100_area";e.TYPE_100_HORIZONTAL_AREA="info/100_horizontal_area";e.TYPE_TRELLIS_AREA="info/trellis_area";e.TYPE_TRELLIS_HORIZONTAL_AREA="info/trellis_horizontal_area";e.TYPE_TRELLIS_100_AREA="info/trellis_100_area";e.TYPE_TRELLIS_100_HORIZONTAL_AREA="info/trellis_100_horizontal_area";e.TYPE_WATERFALL="info/waterfall";e.TYPE_HORIZONTAL_WATERFALL="info/horizontal_waterfall";e.TYPE_STACKED_WATERFALL="info/stacked_waterfall";e.TYPE_HORIZONTAL_STACKED_WATERFALL="info/horizontal_stacked_waterfall";e.TYPE_COMBINATION="info/combination";e.TYPE_HORIZONTAL_COMBINATION="info/horizontal_combination";e.TYPE_DUAL_COMBINATION="info/dual_combination";e.TYPE_DUAL_HORIZONTAL_COMBINATION="info/dual_horizontal_combination";e.TYPE_STACKED_COMBINATION="info/stacked_combination";e.TYPE_HORIZONTAL_STACKED_COMBINATION="info/horizontal_stacked_combination";e.TYPE_DUAL_STACKED_COMBINATION="info/dual_stacked_combination";e.TYPE_DUAL_HORIZONTAL_STACKED_COMBINATION="info/dual_horizontal_stacked_combination";e.TYPE_MEKKO="info/mekko";e.TYPE_100_MEKKO="info/100_mekko";e.TYPE_HORIZONTAL_MEKKO="info/horizontal_mekko";e.TYPE_100_HORIZONTAL_MEKKO="info/100_horizontal_mekko";e.TYPE_PIE="info/pie";e.TYPE_TRELLIS_PIE="info/trellis_pie";e.TYPE_DONUT="info/donut";e.TYPE_TRELLIS_DONUT="info/trellis_donut";e.TYPE_SCATTER="info/scatter";e.TYPE_TRELLIS_SCATTER="info/trellis_scatter";e.TYPE_BUBBLE="info/bubble";e.TYPE_TRELLIS_BUBBLE="info/trellis_bubble";e.TYPE_HEATMAP="info/heatmap";e.TYPE_TREEMAP="info/treemap";e.TYPE_RADAR="info/radar";e.TYPE_TRELLIS_RADAR="info/trellis_radar";e.TYPE_TAG_CLOUD="info/tagcloud";e.TYPE_NUMBER="info/number";e.TYPE_BULLET="info/bullet";e.TYPE_VERTICALBULLET="info/vertical_bullet";e.DIRECTION_HORIZONTAL="horizontal";e.DIRECTION_VERTICAL="vertical";e.STACKING_FULL="full";e.STACKING_NORMAL="normal";e.FEEDING_PRIMARY_VALUES="primaryValues";e.FEEDING_SECONDARY_VALUES="secondaryValues";e.FEEDING_AXIS_LABELS="axisLabels";e.MEASURE_NAMES_DIMENSION="measureNamesDimension";e.MEASURE_VALUES_GROUP="measureValuesGroup";e.ANALYSIS_AXIS="analysisAxis";e.VALUE_AXIS="valueAxis";e.SECOND_VALUE_AXIS="valueAxis2";e.CATEGORY_AXIS="categoryAxis";e.TIME_AXIS="timeAxis";e.SIZE="size";e.WEIGHT="weight";e.INVALID="Invalid";e.AXIS_XAXIS="xAxis";e.AXIS_XAXIS1="xAxis1";e.AXIS_XAXIS2="xAxis2";e.AXIS_YAXIS="yAxis";e.AXIS_YAXIS1="yAxis1";e.AXIS_YAXIS2="yAxis2";e.COLOR="color";e.DATA_FRAME="dataFrame";e.TEMPLATE_INCOMPLETE="incomplete_ghost";e.TEMPLATE_DEFAULT="default";e.TEMPLATE_EMPTY="empty_ghost";e.PLAY_FIELD="playField";e.SHAPE="shape";e.TITLE="title";e.KEY_COUNT="__keysCount";e.TRELLIS_NONE=0;e.TRELLIS_COLUMN=1;e.TRELLIS_ROW=2;e.TRELLIS_COLUMN_AND_ROW=3;return e});define("sap/viz/vizservices/service/bvr/feeders/TimeFeeder",["sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/metadata/MetadataFactory","sap/viz/vizservices/common/metadata/bindingdef/BindingDefUtils","sap/viz/vizservices/common/viz/ChartConst"],function(e,i,r,t){function a(e){return[t.TYPE_TIMESERIES_LINE,t.TYPE_TIMESERIES_SCATTER,t.TYPE_TIMESERIES_BUBBLE,t.TYPE_TIMESERIES_COMBINATION,t.TYPE_DUAL_TIMESERIES_COMBINATION].indexOf(e)>=0}var n={};n.feed=function(i,t,n){if(!a(i)){return}var s,o;for(o=0;o<t.length;o++){if(t[o].id===e.ID_TIME_AXIS){s=t[o]}}if(!s){return}var l=r.get(i,s.id);if(s.values.length>=l.max()){return}for(o=0;o<n.length;o++){if(n[o].dataType===e.DATA_TYPE_DATE){s.values=[n[o]];n.splice(o,1);break}}};return n});define("jquery",[],function(){return jQuery});define("sap/viz/vizservices/service/feed/validators/AAValidator",["sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/feed/FeedUtil","sap/viz/vizservices/common/viz/ChartConst","sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst"],function(e,i,r,t){var a={};a.validate=function(e,r){var a=0;e.forEach(function(e){if(e.type()===t.TYPE_DIMENSION){var n=i.getFeedValues(r,e.id())||[];if(n.length===0&&e.min()>0){if(e.mndMode()===t.MND_MODE_NONE||i.hasMND(r)){a++}}}});return{valid:n(r)+a<=2}};var n=function(i){var r=0;var t=0;for(var a=0;a<i.length;a++){var n=i[a];if(s(n)){if(n.id===e.ID_TRELLIS_ROW||n.id===e.ID_TRELLIS_COLUMN){t=Math.min(1,t+1)}else{r++}}}return t+r};var s=function(e){if(!e||!(e.values&&e.values.length>0)||e.id===r.DATA_FRAME){return 0}var i=e.values;return o(i)};var o=function(r){if(!r||!r.length){return 0}var t=i.hasMNDInValues(r);if(r[0].type===e.TYPE_MND&&r.length===1){return 0}else if(r[0].type===e.TYPE_DIMENSION||r[0].type===e.TYPE_MND){return 1}else{return 0}};return a});define("sap/viz/vizservices/service/feed/validators/DuplicateValidator",["sap/viz/vizservices/common/feed/FeedUtil"],function(e){var i={};i.validate=function(i,t){var a={valid:true,results:{bindings:{}}};var n;i.forEach(function(i){var s=e.getFeedValues(t,i.id())||[];n=r(i,s);if(n){a.valid=false;a.results.bindings[i.id()]=n}});return a};var r=function(e,i){var r={},t;i.forEach(function(e){var i=e.id;if(r[i]){if(!t){t={incorrect:[]}}t.incorrect.push(e)}r[i]=true});return t};return i});define("sap/viz/vizservices/service/feed/validators/TypeValidator",["sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/feed/FeedUtil","sap/viz/vizservices/common/metadata/bindingdef/BindingDefUtils"],function(e,i,r){var t={};t.validate=function(e,r){var t={valid:true,results:{bindings:{}}};var n;e.forEach(function(e){var s=i.getFeedValues(r,e.id())||[];n=a(e,s);if(n){t.valid=false;t.results.bindings[e.id()]=n}});return t};var a=function(i,t){var a;t.forEach(function(t){if(!r.support(i,t)||i.id()===e.ID_TIME_AXIS&&t.dataType!==e.DATA_TYPE_DATE){if(!a){a={incorrect:[]}}a.incorrect.push(t)}});return a};return t});define("sap/viz/vizservices/service/feed/validators/MaxValidator",["sap/viz/vizservices/common/feed/FeedUtil"],function(e){var i={};i.validate=function(i,t){var a={valid:true,results:{bindings:{}}};var n;var s=e.countAnalyses(t);i.forEach(function(i){var o=e.getFeedValues(t,i.id())||[];n=r(i,o);if(n){a.valid=false;a.results.bindings[i.id()]=n}s-=o.length});a.valid=a.valid&&s===0;return a};var r=function(i,r){var t=r.length,a;if(e.hasMNDInValues(r)){t=t-1}if(t>i.max()){a={exceed:t-i.max()}}return a};return i});define("sap/viz/vizservices/service/feed/validators/MinValidator",["sap/viz/vizservices/common/feed/FeedUtil","sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst","sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/utils/Utils"],function(e,i,r,t){var a={};a.validate=function(a,s){var o={valid:true,results:{bindings:{}}};var l=e.hasMND(s);var u,c,f=[],v=false;a.forEach(function(t){var a=e.getFeedValues(s,t.id())||[];u=n(t,a);if(t.id()===r.ID_TRELLIS_ROW||t.id()===r.ID_TRELLIS_COLUMN){if(!u){v=true}}if(u){o.valid=false;if(t.type()===r.TYPE_DIMENSION){if(t.mndMode()===i.MND_MODE_SUPPORT||t.mndMode()===i.MND_MODE_ONLY){c=!l}else if(t.mndMode()===i.MND_MODE_SUPPORT_EXCLUSIVELY){c=(a.length>0?false:true)&&!l}else{c=false}u.allowMND=c}o.results.bindings[t.id()]=u}});if(v){if(!o.valid){delete o.results.bindings[r.ID_TRELLIS_ROW];delete o.results.bindings[r.ID_TRELLIS_COLUMN];if(t.isEmptyObject(o.results.bindings)){o.valid=true}}}return o};var n=function(e,i){var t=i.length,a;var n=e.min();if(e.id()===r.ID_TRELLIS_ROW||e.id()===r.ID_TRELLIS_COLUMN){n=1}if(t<n){a={missing:n-t};if(e.id()===r.ID_TRELLIS_ROW){a.associate=r.ID_TRELLIS_COLUMN}else if(e.id()===r.ID_TRELLIS_COLUMN){a.associate=r.ID_TRELLIS_ROW}}return a};return a});define("sap/viz/vizservices/service/feed/validators/MNDValidator",["sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/feed/FeedUtil","sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst"],function(e,i,r){var t={};t.validate=function(t,n,s){var o={valid:true,results:{bindings:{}}};var l=0;n.forEach(function(e){if(e.mndEnumerable()){var r=i.getFeedValues(s,e.id())||[];l+=r.length}});l=l>0?1:0;var u=[],c;var f;n.forEach(function(n){if(n.type()===r.TYPE_DIMENSION){var v=i.getFeedValues(s,n.id())||[];var d=i.indexOfMNDInValues(v);if(d!==-1){if(!l){o.valid=false;o.results.bindings[n.id()]={incorrect:[v[d]]};return}else{l--}}if(n.id()===e.ID_TRELLIS_ROW||n.id()===e.ID_TRELLIS_COLUMN){u=u.concat(v);c=n}else{f=a(n,v,t);if(f){o.valid=false;if(!o.results.bindings[n.id()]){o.results.bindings[n.id()]={incorrect:[f]}}}}}});if(c){f=a(c,u,t);if(f){o.valid=false;if(f){if(!o.results[c.id()]){o.results.bindings[c.id()]={incorrect:[f]}}}}}return o};var a=function(e,t,a){var n;var s=i.indexOfMNDInValues(t);if(s!==-1&&(e.mndMode()===r.MND_MODE_NONE||e.mndMode()===r.MND_MODE_SUPPORT_EXCLUSIVELY&&t.length>1||!i.validateMndAddMeasureNames(a,t[s]))){n=t[s]}return n};return t});define("sap/viz/vizservices/service/feed/validators/MissingMNDValidator",["sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/feed/FeedUtil","sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst","sap/viz/vizservices/common/utils/Utils","sap/viz/vizservices/common/viz/ChartConst"],function(e,i,r,t,a){var n={};n.validate=function(r,t,a){var n={valid:true,results:{bindings:{}}};if(l.indexOf(r)<0){return n}var u=i.hasMND(a);if(!u&&s(t,a)>1){n.valid=false;n.results.missingMND=true;t.forEach(function(r){if(r.type()===e.TYPE_DIMENSION){var t=i.getFeedValues(a,r.id())||[];var s=o(r,t);if(s.allowMND){n.results.bindings[r.id()]=s}}})}return n};var s=function(r,t){var a=0;r.forEach(function(r){var n=i.getFeedValues(t,r.id())||[];if(r.type()===e.TYPE_MEASURE){a+=Math.min(r.max(),n.length)}});return a};var o=function(e,i){var t={};if(e.mndMode()===r.MND_MODE_SUPPORT||e.mndMode()===r.MND_MODE_ONLY){t.allowMND=true}else if(e.mndMode()===r.MND_MODE_SUPPORT_EXCLUSIVELY){t.allowMND=i.length>0?false:true}else{t.allowMND=false}return t};var l=[a.TYPE_BAR,a.TYPE_TRELLIS_BAR,a.TYPE_DUAL_BAR,a.TYPE_TRELLIS_DUAL_BAR,a.TYPE_STACKED_BAR,a.TYPE_100_STACKED_BAR,a.TYPE_TRELLIS_STACKED_BAR,a.TYPE_TRELLIS_100_STACKED_BAR,a.TYPE_DUAL_STACKED_BAR,a.TYPE_100_DUAL_STACKED_BAR,a.TYPE_TRELLIS_DUAL_STACKED_BAR,a.TYPE_TRELLIS_100_DUAL_STACKED_BAR,a.TYPE_COLUMN,a.TYPE_TRELLIS_COLUMN,a.TYPE_DUAL_COLUMN,a.TYPE_TRELLIS_DUAL_COLUMN,a.TYPE_STACKED_COLUMN,a.TYPE_100_STACKED_COLUMN,a.TYPE_TRELLIS_STACKED_COLUMN,a.TYPE_TRELLIS_100_STACKED_COLUMN,a.TYPE_DUAL_STACKED_COLUMN,a.TYPE_100_DUAL_STACKED_COLUMN,a.TYPE_TRELLIS_DUAL_STACKED_COLUMN,a.TYPE_TRELLIS_100_DUAL_STACKED_COLUMN,a.TYPE_LINE,a.TYPE_TRELLIS_LINE,a.TYPE_HORIZONTAL_LINE,a.TYPE_TRELLIS_HORIZONTAL_LINE,a.TYPE_DUAL_LINE,a.TYPE_DUAL_HORIZONTAL_LINE,a.TYPE_TRELLIS_DUAL_LINE,a.TYPE_TRELLIS_DUAL_HORIZONTAL_LINE,a.TYPE_AREA,a.TYPE_HORIZONTAL_AREA,a.TYPE_100_AREA,a.TYPE_100_HORIZONTAL_AREA,a.TYPE_TRELLIS_AREA,a.TYPE_TRELLIS_HORIZONTAL_AREA,a.TYPE_TRELLIS_100_AREA,a.TYPE_TRELLIS_100_HORIZONTAL_AREA,a.TYPE_COMBINATION,a.TYPE_HORIZONTAL_COMBINATION,a.TYPE_DUAL_COMBINATION,a.TYPE_DUAL_HORIZONTAL_COMBINATION,a.TYPE_STACKED_COMBINATION,a.TYPE_HORIZONTAL_STACKED_COMBINATION,a.TYPE_DUAL_STACKED_COMBINATION,a.TYPE_DUAL_HORIZONTAL_STACKED_COMBINATION,a.TYPE_TIMESERIES_LINE,a.TYPE_TIMESERIES_COLUMN,a.TYPE_TIMESERIES_COMBINATION,a.TYPE_DUAL_TIMESERIES_COMBINATION,a.TYPE_STACKED_WATERFALL,a.TYPE_HORIZONTAL_STACKED_WATERFALL,a.TYPE_RADAR,a.TYPE_TRELLIS_RADAR];return n});define("sap/viz/vizservices/service/feed/FeedService",["jquery","sap/viz/vizservices/common/metadata/bindingdef/BindingDefUtils","sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst","sap/viz/vizservices/common/feed/FeedUtil","sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/data/DatasetTypeConst","sap/viz/vizservices/common/metadata/MetadataFactory","sap/viz/vizservices/service/feed/validators/AAValidator","sap/viz/vizservices/service/feed/validators/DuplicateValidator","sap/viz/vizservices/service/feed/validators/TypeValidator","sap/viz/vizservices/service/feed/validators/MaxValidator","sap/viz/vizservices/service/feed/validators/MinValidator","sap/viz/vizservices/service/feed/validators/MNDValidator","sap/viz/vizservices/service/feed/validators/MissingMNDValidator","sap/viz/vizservices/common/utils/Utils","sap/viz/vizservices/common/metadata/VizMetadata","exports"],function(e,i,r,t,a,n,s,o,l,u,c,f,v,d,_,p){var m={};m.validate=function(e,i){var r=[{typeValidator:_.isString},{typeValidator:t.isArrayOfFeedItem}];if(!_.checkArgs(arguments,r)||s.get(e)===null){throw _.substitute(sap.viz.extapi.env.Language.getResourceString("VIZ_SERVICES_INVALID_PARAMETER"))}if(t.hasInvalidFeeds(e,i)){return{valid:false}}var a=s.get(e);var n=a.getBindingDefs();if(a instanceof p){var m=o.validate(n,i);if(!m.valid){return m}}var T={valid:true};T=E(T,l.validate(n,i));T=E(T,u.validate(n,i));T=E(T,f.validate(n,i));T=E(T,c.validate(n,i));T=E(T,v.validate(e,n,i));T=E(T,d.validate(e,n,i));return T};var E=function(i,r){if(!r.valid){i.valid=false;if(!i.results){i.results={}}for(var t=0;t<r.results.bindings.length;t++){var a=r.results.bindings[t];var n=i.results.bindings[t];var s=a.incorrect;var o=n.incorrect;if(s&&o){n.incorrect=o.concat(s);e.unique(n.incorrect);delete a.incorrect}}e.extend(true,i.results,r.results)}return i};m.addable=function(e,n,s,o){if(!o){var l=t.getFeed(n,s);var u,c;if(i.get(e,l.id).type()===r.TYPE_DIMENSION){u=a.TYPE_DIMENSION}else{u=a.TYPE_MEASURE}if(s===a.ID_TIME_AXIS){c=a.DATA_TYPE_DATE}else{c=undefined}var f="__sapVizServicesReserved_"+u+"_"+T++;o=t.genAnalysisObject(f,u,c)}var v=t.spliceAnalysisObjects(t.cloneFeeds(n),s,0,0,o);return m.validateOverflow(e,v)};m.validateOverflow=function(e,i){var r=s.get(e);var t=r.getBindingDefs();var a=true;a=a&&l.validate(t,i).valid;a=a&&u.validate(t,i).valid;if(r.support().dataset[n.CROSS_TABLE]&&!r.support().dataset[n.FLAT_TABLE]){a=a&&o.validate(t,i).valid}a=a&&c.validate(t,i).valid;a=a&&v.validate(e,t,i).valid;return a};m.switchable=function(e,i,r,a){var n=t.spliceAnalysisObjects(t.cloneFeeds(i),r,0,0,a);return m.validateSwitching(e,n)};m.validateSwitching=function(e,i){var r=s.get(e);var t=r.getBindingDefs();var a=true;a=a&&c.validate(t,i).valid;a=a&&v.validate(e,t,i).valid;a=a&&u.validate(t,i).valid;return a};var T=0;return m});define("sap/viz/vizservices/service/bvr/feeders/CommonFeeder",["sap/viz/vizservices/common/metadata/MetadataFactory","sap/viz/vizservices/common/feed/FeedUtil","sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/service/feed/FeedService"],function(e,i,r,t){var a={};a.feed=function(t,a,s,o){o=o||a;var l=s.slice(0),u,c;var f=e.get(t).getBindingDefsWithBVRSorting();var v,d;for(v=0;v<f.length&&s.length>0;v++){d=f[v],u=i.getFeed(o,d.id()),c=true;while(c&&u&&d.min()>u.values.length){c=n(t,a,u,s)}}var _=i.getFeed(o,r.ID_TRELLIS_ROW),p=i.getFeed(o,r.ID_TRELLIS_COLUMN);if(_&&p&&_.values.length===0&&p.values.length===0){n(t,a,_,s)}for(v=0;v<f.length&&s.length>0;v++){d=f[v],u=i.getFeed(o,d.id()),c=true;if(u&&u.values.length===0){n(t,a,u,s)}}for(v=0;v<f.length&&s.length>0;v++){d=f[v],u=i.getFeed(o,d.id()),c=true;while(c&&u&&d.max()>u.values.length){c=n(t,a,u,s)}}};var n=function(e,i,r,a){for(var n=0;n<a.length;n++){var s=a[n];if(t.addable(e,i,r.id,s)){r.values.push(s);a.splice(n,1);return true}}return false};return a});define("sap/viz/vizservices/service/bvr/switch/AliasMapping",["sap/viz/vizservices/common/feed/FeedUtil","sap/viz/vizservices/service/feed/FeedService","sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/metadata/bindingdef/BindingDefUtils","sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst"],function(e,i,r,t,a){var n={};var s={XY:{mapTo:["TimeScatter","Pie","Scatter","Bubble","TreeMap","HeatMap","TagCloud","Numeric","Bullet"],categoryAxis:{"Bullet,HeatMap":"categoryAxis","Bubble,Pie,Scatter,TimeScatter":"color",TreeMap:"title",TagCloud:"text"},color:{Bullet:"color","Bubble,Scatter,TimeScatter":"shape",HeatMap:"categoryAxis2"},valueAxis:{"Bubble,Scatter,TimeScatter":"valueAxis",Pie:"size","TreeMap,TagCloud":"weight",HeatMap:"color",Numeric:"value",Bullet:"actualValues"},dataFrame:{"Bubble,Pie,Scatter,TagCloud":"dataFrame"},trellisRow:{"Bubble,Scatter,Pie":"trellisRow"},trellisColumn:{"Bubble,Scatter,Pie":"trellisColumn"}},Pie:{mapTo:["XYY","Scatter","Bubble","TreeMap","HeatMap","TagCloud","TimeLine","TimeScatter","Numeric","Radar","Bullet","Waterfall","StackedWaterfall","HichertVariance","TimeCombination"],size:{"XYY,Scatter,Bubble,Radar,Waterfall,StackedWaterfall,TimeLine,TimeScatter,HichertVariance,TimeCombination":"valueAxis",Numeric:"value",Bullet:"actualValues","TreeMap,TagCloud":"weight",HeatMap:"color"},color:{"XYY,Bullet,HeatMap,Radar,Waterfall,StackedWaterfall,HichertVariance":"categoryAxis",TreeMap:"title",TagCloud:"text","Scatter,Bubble,TimeLine,TimeScatter,TimeCombination":"color"},dataFrame:{"XYY,Scatter,Bubble,TagCloud,Radar":"dataFrame"},trellisRow:{"XYY,Scatter,Bubble,Radar":"trellisRow"},trellisColumn:{"XYY,Scatter,Bubble,Radar":"trellisColumn"}},XYY:{mapTo:["TreeMap","HeatMap","TagCloud","Numeric","Bullet","Bubble","Scatter","TimeScatter"],categoryAxis:{"Bullet,HeatMap":"categoryAxis",TreeMap:"title",TagCloud:"text","Bubble,Scatter,TimeScatter":"color"},color:{Bullet:"color",HeatMap:"categoryAxis2","Bubble,Scatter,TimeScatter":"shape"},valueAxis:{"TreeMap,TagCloud":"weight",HeatMap:"color",Numeric:"value",Bullet:"actualValues","Bubble,Scatter,TimeScatter":"valueAxis"},valueAxis2:{Bullet:"targetValues","Bubble,Scatter":"valueAxis2"},dataFrame:{TagCloud:"dataFrame","Bubble,Scatter":"dataFrame"}},TimeLine:{mapTo:["TagCloud","TreeMap","HeatMap","Bullet","Radar","Waterfall","StackedWaterfall","Numeric","HichertVariance"],valueAxis:{"Radar,Waterfall,StackedWaterfall":"valueAxis",HeatMap:"color",Bullet:"actualValues","TreeMap,TagCloud":"weight",Numeric:"value"},color:{"HeatMap,Bullet,Radar,Waterfall,StackedWaterfall,HichertVariance":"categoryAxis",TreeMap:"title",TagCloud:"text"},timeAxis:{TimeCombination:"timeAxis"}},TimeCombination:{mapTo:["XY","TagCloud","TreeMap","HeatMap","Bullet","Radar","Waterfall","StackedWaterfall","Numeric","HichertVariance"],color:{"XY,Bullet,HeatMap,Radar,Waterfall,StackedWaterfall,HichertVariance":"categoryAxis",TagCloud:"text",TreeMap:"title"},valueAxis:{"TagCloud,TreeMap":"weight",HeatMap:"color",Bullet:"actualValues",Numeric:"value"},valueAxis2:{"TagCloud,TreeMap":"color"}},TimeScatter:{mapTo:["Scatter","TagCloud","TreeMap","HeatMap","Bullet","Radar","Waterfall","StackedWaterfall","Numeric","HichertVariance"],valueAxis:{"Scatter,Radar,Waterfall,StackedWaterfall":"valueAxis",HeatMap:"color",Bullet:"actualValues","TreeMap,TagCloud":"weight",Numeric:"value"},color:{Scatter:"color","HeatMap,Bullet,Radar,Waterfall,StackedWaterfall,HichertVariance":"categoryAxis",TreeMap:"title",TagCloud:"text"},shape:{Scatter:"shape",HeatMap:"categoryAxis2","Bullet,Radar,StackedWaterfall":"color"},bubbleWidth:{"Scatter,HichertVariance":"valueAxis2","TagCloud,TreeMap":"color",Bullet:"targetValues"}},Bubble:{mapTo:["TreeMap","HeatMap","TagCloud","Numeric","Radar","Bullet","Waterfall","StackedWaterfall","HichertVariance"],valueAxis:{"Radar,Waterfall,StackedWaterfall":"valueAxis",HeatMap:"color",Bullet:"actualValues","TreeMap,TagCloud":"weight",Numeric:"value"},valueAxis2:{Bullet:"targetValues","TreeMap,TagCloud":"color"},shape:{"Bullet,Radar,StackedWaterfall":"color",HeatMap:"categoryAxis2"},color:{"HeatMap,Bullet,Radar,Waterfall,StackedWaterfall,HichertVariance":"categoryAxis",TreeMap:"title",TagCloud:"text"},bubbleWidth:{Bullet:"additionalValues"},dataFrame:{"TagCloud,Radar":"dataFrame"},trellisRow:{Radar:"trellisRow"},trellisColumn:{Radar:"trellisColumn"}},Scatter:{mapTo:["TreeMap","HeatMap","TagCloud","Numeric","Radar","Bullet","Waterfall","StackedWaterfall","HichertVariance"],valueAxis:{"Radar,Waterfall,StackedWaterfall":"valueAxis",HeatMap:"color",Bullet:"actualValues","TreeMap,TagCloud":"weight",Numeric:"value"},valueAxis2:{Bullet:"targetValues","TreeMap,TagCloud":"color"},shape:{"Bullet,Radar,StackedWaterfall":"color",HeatMap:"categoryAxis2"},color:{"Bullet,HeatMap,Radar,Waterfall,StackedWaterfall,HichertVariance":"categoryAxis",TreeMap:"title",TagCloud:"text"},dataFrame:{"Pie,TagCloud,Radar":"dataFrame"},trellisRow:{Radar:"trellisRow"},trellisColumn:{Radar:"trellisColumn"}},TreeMap:{mapTo:["HeatMap","TagCloud","Numeric","Radar","Bullet","Waterfall","StackedWaterfall","HichertVariance"],title:{"Bullet,HeatMap,Radar,Waterfall,StackedWaterfall,HichertVariance":"categoryAxis",TagCloud:"text"},color:{"HeatMap,TagCloud":"color",Bullet:"targetValues",HichertVariance:"valueAxis2"},weight:{"Radar,Waterfall,StackedWaterfall,HichertVariance":"valueAxis",Bullet:"actualValues",Numeric:"value",TagCloud:"weight"}},TagCloud:{mapTo:["Numeric","Radar","Bullet","HeatMap","Waterfall","StackedWaterfall","HichertVariance"],text:{"Bullet,Radar,HeatMap,Waterfall,StackedWaterfall,HichertVariance":"categoryAxis"},color:{HeatMap:"color",Bullet:"targetValues",HichertVariance:"valueAxis2"},weight:{"Waterfall,Radar,StackedWaterfall,HichertVariance":"valueAxis",Bullet:"actualValues",Numeric:"value"},dataFrame:{Radar:"dataFrame"}},HeatMap:{mapTo:["Numeric","Radar","Bullet","Waterfall","StackedWaterfall","HichertVariance"],categoryAxis:{"Bullet,Radar,Waterfall,StackedWaterfall,HichertVariance":"categoryAxis"},color:{"Radar,Waterfall,StackedWaterfall,HichertVariance":"valueAxis",Numeric:"value",Bullet:"actualValues"},categoryAxis2:{"Bullet,Radar,StackedWaterfall":"color"}},Bullet:{mapTo:["Numeric","Radar","Waterfall","StackedWaterfall","HichertVariance"],categoryAxis:{"Radar,Waterfall,StackedWaterfall,HichertVariance":"categoryAxis"},color:{"Radar,StackedWaterfall":"color"},actualValues:{"Radar,Waterfall,StackedWaterfall,HichertVariance":"valueAxis",Numeric:"value"},targetValues:{HichertVariance:"valueAxis2"},additionalValues:{HichertVariance:"variance1"},forecastValues:{HichertVariance:"variance2"}},Radar:{mapTo:["Numeric"],valueAxis:{Numeric:"value"}},Waterfall:{mapTo:["Numeric"],valueAxis:{Numeric:"value"}},StackedWaterfall:{mapTo:["Numeric"],valueAxis:{Numeric:"value"}},HichertVariance:{mapTo:["Numeric"],valueAxis:{Numeric:"value"}}};var o=function(e,i){if(!e||!i){return}if(!s.hasOwnProperty(i)){s[i]={mapTo:[e]}}else{var r=s[i].mapTo||[];if(r.indexOf(e)===-1){r.push(e)}s[i].mapTo=r}};var l=function(e){if(arguments.length===1){return e}var i=arguments[1];if(!e.hasOwnProperty(i)){e[i]={}}var r=Array.prototype.slice.call(arguments,0);r.splice(0,2,e[i]);return l.apply(null,r)};var u=function(e,i,r,t){if(!e||!r||e===r){return}var a=l(s,e,i);var n=Object.keys(a).some(function(e){if(a[e]===t){if(e.split(",").indexOf(r)<0){a[e+","+r]=t;delete a[e]}return true}});if(!n){a[r]=t}};var c,f,v,d,_;for(c in s){for(v in s[c]){if(v==="mapTo"){s[c][v].forEach(function(e){o(c,e)});continue}for(f in s[c][v]){d=s[c][v][f];_=f.split(",");_.forEach(function(e){u(e,d,c,v)})}}}n.aliasExisted=function(e,i){if(!e||!i){return false}var r=s[e]?s[e].mapTo||[]:[];return r.indexOf(i)===-1?false:true};var p=function(a,n,o,l,u,c,f,v){var d=Object.keys(s[a]);var _=e.getMNDEnumeration(l);u.forEach(function(e){if(t.get(o,e.id).type()!==f){return}var u=false;if(d.indexOf(e.id)!==-1){var _=e.id;var p=m(s[a][_],n);if(p){u=true;var E=e.values;if(E){var T={id:p,values:[]};c.push(T);E.forEach(function(e){if(e.type===r.TYPE_MND&&e.measureNames){delete e.measureNames}if(i.switchable(l,c,T.id,e)){T.values.push(e)}else{v&&v.push(e)}})}}}if(!u&&v&&e.values){e.values.forEach(function(e){v.push(e)})}});return c};n.map=function(e,i,r,t,n,s){if(!e||!i){return[]}var o=[];o=p(e,i,r,t,n,o,a.TYPE_MEASURE,s);o=p(e,i,r,t,n,o,a.TYPE_DIMENSION,s);return o};var m=function(e,i){for(var r in e){if(r.split(",").indexOf(i)!==-1){return e[r]}}return null};return n});define("sap/viz/vizservices/service/bvr/switch/ChartCategories",[],function(){var e={};var i={XY:["info/bar","info/column","info/stacked_bar","info/stacked_column","info/100_stacked_bar","info/100_stacked_column","info/line","info/horizontal_line","info/combination","info/horizontal_combination","info/area","info/horizontal_area","info/100_area","info/100_horizontal_area","info/mekko","info/100_mekko","info/horizontal_mekko","info/100_horizontal_mekko","info/trellis_bar","info/trellis_column","info/trellis_stacked_bar","info/trellis_stacked_column","info/trellis_100_stacked_bar","info/trellis_100_stacked_column","info/trellis_line","info/trellis_horizontal_line","info/trellis_combination","info/trellis_horizontal_combination","info/trellis_area","info/trellis_horizontal_area","info/trellis_100_area","info/trellis_100_horizontal_area"],XYY:["info/dual_bar","info/dual_column","info/dual_line","info/dual_horizontal_line","info/dual_combination","info/dual_horizontal_combination","info/dual_stacked_combination","info/dual_horizontal_stacked_combination","info/trellis_dual_bar","info/trellis_dual_column","info/trellis_dual_line","info/trellis_dual_horizontal_line"],Bubble:["info/bubble","info/trellis_bubble"],Pie:["info/pie","info/donut","info/trellis_donut","info/trellis_pie"],Scatter:["info/scatter","info/trellis_scatter"],Bullet:["info/bullet","info/vertical_bullet"],TreeMap:["info/treemap"],HeatMap:["info/heatmap"],TagCloud:["info/tagcloud"],TimeLine:["info/timeseries_line"],TimeScatter:["info/timeseries_scatter","info/timeseries_bubble"],TimeCombination:["info/timeseries_combination","info/dual_timeseries_combination"],Numeric:["info/number"],Radar:["info/radar","info/trellis_radar"],Waterfall:["info/waterfall","info/horizontal_waterfall"],StackedWaterfall:["info/stacked_waterfall","info/horizontal_stacked_waterfall"],HichertVariance:["info/hichert_column","info/hichert_bar"]};e.findCategory=function(e){for(var r in i){if(i.hasOwnProperty(r)){if(i[r].indexOf(e)>=0){return r}}}};return e});define("sap/viz/vizservices/service/bvr/switch/NameMapping",["sap/viz/vizservices/common/feed/FeedUtil","sap/viz/vizservices/service/feed/FeedService","sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/metadata/bindingdef/BindingDefUtils","sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst","sap/viz/vizservices/common/metadata/MetadataFactory"],function(e,i,r,t,a,n){var s={};var o=function(a,n,s,o,l,u){var c=e.buildEmptyFeeds(n);s.forEach(function(e){if(t.get(a,e.id).type()!==l){return}var s=false;c.forEach(function(t){if(e.id==t.id){s=true;var a=e.values;if(a){var l={id:e.id,values:[]};o.push(l);a.forEach(function(e){if(e.type===r.TYPE_MND&&e.measureNames){delete e.measureNames}if(i.switchable(n,o,l.id,e)){l.values.push(e)}else{u&&u.push(e)}})}}});if(!s&&u&&e.values){e.values.forEach(function(e){u.push(e)})}});return o};s.map=function(e,i,r,t){var n=[];n=o(e,i,r,n,a.TYPE_MEASURE,t);n=o(e,i,r,n,a.TYPE_DIMENSION,t);return n};return s});define("sap/viz/vizservices/common/LanguageLoader",[],function(){sap.viz.extapi.env.Language.register({id:"language",value:{VIZ_SERVICES_INVALID_PARAMETER:"Invalid Parameter."}})});define("sap/viz/vizservices/service/bvr/BVRService",["sap/viz/vizservices/common/feed/FeedUtil","sap/viz/vizservices/common/metadata/bindingdef/BindingDefUtils","sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/service/bvr/feeders/MNDFeeder","sap/viz/vizservices/service/bvr/feeders/TimeFeeder","sap/viz/vizservices/service/bvr/feeders/CommonFeeder","sap/viz/vizservices/service/bvr/switch/AliasMapping","sap/viz/vizservices/service/bvr/switch/ChartCategories","sap/viz/vizservices/service/bvr/switch/NameMapping","sap/viz/vizservices/common/utils/Utils","sap/viz/vizservices/common/metadata/MetadataFactory","sap/viz/vizservices/common/LanguageLoader","sap/viz/vizservices/service/feed/FeedService","exports"],function(e,i,r,t,a,n,s,o,l,u,c,f,v){var d={};d.switchFeeds=function(i,t,a,n){var f=[{typeValidator:u.isString},{typeValidator:e.isArrayOfFeedItem},{typeValidator:u.isString}];if(!u.checkArgs(arguments,f)||c.get(i)===null||c.get(a)===null){throw u.substitute(sap.viz.extapi.env.Language.getResourceString("VIZ_SERVICES_INVALID_PARAMETER"))}t=e.removeInvalid(i,t);var v=c.get(i).getBindingDefsWithBVRSorting();var d=v.map(function(i){return e.getFeed(t,i.id())}).filter(function(e){return!!e});var E=e.buildEmptyFeeds(a);var g=o.findCategory(i);var A=o.findCategory(a);var h=[];if(g&&A&&s.aliasExisted(g,A)){E=e.merge(E,s.map(g,A,i,a,d,h))}else{E=e.merge(E,l.map(i,a,d,h))}var D=h.slice(0);var S=[];S.push("dataFrame");var M=!n||n.suggestOptionalFeed!==false;var z=m(a,S,M);E=p(a,E,h,z).feedItems;if(i!==a){E=I(a,E,D)}var N=[];d.forEach(function(e){e&&e.values&&e.values.forEach(function(e){if(e.type!==r.TYPE_MND&&D.indexOf(e)!==-1){N.push(e)}})});T(a,E,N);var y={type:a,feedItems:E};if((!n||n.considerMND!==false)&&_(y)){E=p(y.type,y.feedItems,[{id:r.ID_MND,type:r.TYPE_MND,measureNames:e.getMNDEnumeration(y.type)}],z).feedItems}return{type:a,feedItems:E}};d.suggestFeeds=function(i,t,a,n){var s=[{typeValidator:u.isString},{typeValidator:e.isArrayOfFeedItem},{typeValidator:e.isArrayOfAnalysisObject},{typeValidator:u.isObject,isOptional:true}];if(!u.checkArgs(arguments,s)||c.get(i)===null){throw u.substitute(sap.viz.extapi.env.Language.getResourceString("VIZ_SERVICES_INVALID_PARAMETER"))}t=e.removeInvalid(i,t);var o=e.buildEmptyFeeds(i);t=e.merge(o,t);t=e.cloneFeeds(t);var l=[];l.push("dataFrame");var f=!n||n.suggestOptionalFeed!==false;var v=m(i,l,f);var d=a.slice(0);var E=p(i,t,a,v);var g=e.indexOfMNDInValues(d);if(g!==-1){d.splice(g,1)}T(i,t,d);if((!n||n.considerMND!==false)&&_(E)){E=p(E.type,E.feedItems,[{id:r.ID_MND,type:r.TYPE_MND,measureNames:e.getMNDEnumeration(i)}],v)}return E};var _=function(e){var i=v.validate(e.type,e.feedItems);if(!i.valid){var r=0;var t=[];var a=false;var n=i.results.bindings;for(var s in n){if(n[s].missing){if(!n[s].associate||t.indexOf(n[s].associate)<0){t.push(s);r+=n[s].missing}}else if(n[s].allowMND){a=true}}if(a&&r===0||r===1&&n[t[0]].allowMND){return true}}return false};var p=function(e,i,r,t){var a;if(t&&t.length){a=[];i.forEach(function(e){if(t.indexOf(e.id)!==-1){a.push(e)}})}else{a=i}E(e,i,r.slice(0),a);return{type:e,feedItems:i}};var m=function(e,i,t){t=t!==false;var a=c.get(e).getBindingDefs();return a.filter(function(e){var a=i.indexOf(e.id())!==-1;var n=!e.min()&&e.id()!==r.ID_TRELLIS_ROW&&e.id()!==r.ID_TRELLIS_COLUMN;return!a&&(t||!n)}).map(function(e){return e.id()})};var E=function(i,r,s,o){o=o||r;a.feed(i,o,s);var l=e.indexOfMNDInValues(s);if(l===-1){n.feed(i,r,s,o)}else{var u=s;s=s.splice(l);var c=s.splice(1);var f=s;n.feed(i,r,u,o);t.feed(i,o,f);n.feed(i,r,c,o)}};var T=function(e,i,r){var t=[],a={};i.forEach(function(e){a[e.id]=[];e.values.forEach(function(i,n){if(r.indexOf(i)!==-1){t.push(i);a[e.id].push(n)}})});var n=[];r.forEach(function(e){if(t.indexOf(e)!==-1){n.push(e)}});t=n;var s,o,l;for(s=0;s<t.length;s++){o=t[s];l=D(i,o);g(e,i,a,function(e,i){if(i===o){return true}if(i.id==o.id&&i!==o&&t.indexOf(i)>s){A(l,o,e,i);return true}})}for(s=0;s<t.length;s++){o=t[s];l=D(i,o);g(e,i,a,function(i,r){if(r===o){return true}var a=h(e,i,o)&&h(e,l,r);if((i.id===l.id||a)&&t.indexOf(r)>s){A(l,o,i,r);return true}})}};var g=function(i,r,t,a){var n=c.get(i).getBindingDefsWithBVRSorting();for(var s=0;s<n.length;s++){var o=n[s],l=e.getFeed(r,o.id());if(l==null){continue}var u=false;var f=t[l.id]||[];for(var v=0;v<f.length;v++){var d=f[v];var _=l.values[d];var p=a(l,_);if(p){return}}}};var A=function(e,i,r,t){var a=e.values.indexOf(i);var n=r.values.indexOf(t);if(a!=-1&&n!=-1){var s=e.values[a];e.values[a]=r.values[n];r.values[n]=s}};var h=function(e,r,t){if(!i.support(i.get(e,r.id),t)){return false}var a=r.values;for(var n=0;n<a.length;n++){var s=a[n];if(s.id==t.id){return false}}return true};var D=function(e,i){var r;for(r in e){if(e[r].values.indexOf(i)!=-1){return e[r]}}return null};var I=function(t,a,n){var s=false;var o=e.getFeed(a,r.ID_TRELLIS_ROW),l=e.getFeed(a,r.ID_TRELLIS_COLUMN);if(o&&l&&o.values.length===0&&l.values.length===0){s=true}var u=c.get(t).getBindingDefsWithBVRSorting();for(var f=0;f<u.length;f++){var d=u[f],_=e.getFeed(a,d.id());var p=_.values.length<d.min()||s&&_===o&&!_.values.length;for(var m=0;p&&m<u.length;m++){var E=u[m];var T=e.getFeed(a,E.id());if(i.get(t,_.id).type()!=i.get(t,T.id).type()){continue}var g=T.values.length-1;var A=E.min()>1?E.min():1;while(g>=0&&_.id!==r.ID_DATAFRAME&&p&&T.values.length>A){var h=T.values.splice(g,1)[0];if(h.type!==r.TYPE_MND&&v.addable(t,a,_.id,h)){_.values.push(h);n&&n.push(h)}else{T.values.splice(g,0,h)}g--;p=_.values.length<d.min()||s&&_===o&&!_.values.length}}}return a};return d});define("sap/viz/vizservices/api/BVRService",["sap/viz/vizservices/service/bvr/BVRService","require"],function(e){var i=sap.viz.vizservices.BVRService={};i.suggestFeeds=function(i,r,t,a){return e.suggestFeeds(i,r,t,a)};i.switchFeeds=function(i,r,t,a){return e.switchFeeds(i,r,t,a)};return i});define("sap/viz/vizservices/common/Version",[],function(){return"1.9.1"});define("sap/viz/vizservices/api/Version",["sap/viz/vizservices/common/Version","require"],function(e){sap.viz.vizservices.VERSION=e;return e});define("sap/viz/vizservices/common/binding/generators/BindingGeneratorBase",["sap/viz/vizservices/common/metadata/MetadataFactory"],function(e){var i=function(i){this._visualizationType=i.visualizationType;this._bindingDefs=e.get(i.visualizationType).getBindingDefs()};i.prototype.generate=function(e){};return i});define("sap/viz/vizservices/common/binding/generators/FTBindingGenerator",["sap/viz/vizservices/common/utils/OOUtil","sap/viz/vizservices/common/metadata/bindingdef/BindingDefUtils","sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/viz/ChartConst","sap/viz/vizservices/common/binding/generators/BindingGeneratorBase"],function(e,i,r,t,a){var n=function(e){n.superclass.constructor.apply(this,arguments)};e.extend(n,a);function s(e,r){return r.reduce(function(r,t){if(t.values.length){var a=i.get(e,t.id);if(a&&a.mndEnumerable()){r.push(t.id)}}return r},[])}n.prototype.generate=function(e){var i=s(this._visualizationType,e);var t=this._visualizationType;var a=[];e.forEach(function(e){var t=e.values||[];var n=[];if(t.length===0){return}for(var s=0;s<t.length;s++){var o=t[s];if(o.type===r.TYPE_MND){n.push({measureNames:i})}else{n.push(o.id)}}a.push({feed:e.id,source:n})});return a};return n});define("sap/viz/vizservices/common/binding/BindingConst",[],function(){var e={};e.ANALYSIS_AXIS="analysisAxis";e.MEASURE_VALUES_GROUP="measureValuesGroup";e.MEASURE_NAMES_DIMENSION="measureNamesDimension";return e});define("sap/viz/vizservices/common/binding/generators/XTBindingGenerator",["sap/viz/vizservices/common/utils/OOUtil","sap/viz/vizservices/common/viz/ChartConst","sap/viz/vizservices/common/feed/FeedConst","sap/viz/vizservices/common/metadata/bindingdef/BindingDefConst","sap/viz/vizservices/common/binding/BindingConst","sap/viz/vizservices/common/binding/generators/BindingGeneratorBase","sap/viz/vizservices/common/utils/Utils"],function(e,i,r,t,a,n,s){var o=function(e){o.superclass.constructor.apply(this,arguments)};e.extend(o,n);o.prototype.generate=function(e){var i=l(e);return u(this._bindingDefs,i)};var l=function(e){var i={};e.forEach(function(e){var t=e.values;if(t.length===0){return}var a=e.id.indexOf("multiplier")!==-1?e.id.split(".")[0]:e.id;i[a]=[];for(var n=0;n<t.length;++n){var s=t[n];var o;if(s.type===r.TYPE_MND){o=":mnd"}else{o=s.id}i[a].push(o)}});return i};var u=function(e,i){var r=[],n=[t.TYPE_MEASURE,t.TYPE_DIMENSION],s=1,o=1;e=e.map(function(e){return{id:e.id(),name:e.name(),type:e.type(),min:e.min(),max:e.max(),mndMode:e.mndMode(),bvrPriority:e.bvrPriority(),bvrMNDPriority:e.bvrMNDPriority()}}).sort(function(e,i){if(e.type!==i.type){return n.indexOf(e.type)-n.indexOf(i.type)}else{return e.bvrPriority-i.bvrPriority}});e.filter(function(e){if(e.type!==t.TYPE_MEASURE){return true}var n=i[e.id];if(!n){return false}r.push({feed:e.id,source:[{type:a.MEASURE_VALUES_GROUP,index:s++}]});return false}).filter(function(e){if(e.type!==t.TYPE_DIMENSION){return true}var n=i[e.id];if(!n){return false}r.push({feed:e.id,source:[{type:a.ANALYSIS_AXIS,index:o++}]});if(n.indexOf(":mnd")>-1){if(n[0]===":mnd"){r[r.length-1].source.unshift({type:a.MEASURE_NAMES_DIMENSION})}else{r[r.length-1].source.push({type:a.MEASURE_NAMES_DIMENSION})}}return false});return r};return o});define("sap/viz/vizservices/common/binding/BindingGeneratorFactory",["sap/viz/vizservices/common/binding/generators/FTBindingGenerator","sap/viz/vizservices/common/binding/generators/XTBindingGenerator"],function(e,i,r){var t={create:function(r,t){var a;var n={visualizationType:r};if("FlatTableDataset"===t){a=new e(n)}else if("CrossTableDataset"===t){a=new i(n)}return a}};return t});define("sap/viz/vizservices/service/binding/BindingService",["sap/viz/vizservices/common/binding/BindingGeneratorFactory","exports"],function(e){var i={};i.generateBindings=function(i,r,t){var a=e.create(i,t);return a.generate(r)};return i});define("sap/viz/vizservices/common/viz/VizUtils",["jquery","sap/viz/vizservices/common/metadata/MetadataFactory","sap/viz/vizservices/common/utils/Utils"],function(e,i,r){var t={};t.getValidProperties=function(e,t){var a=r.clone(e);i.get(t).removeInvalidProperty(a);return a};t.getPropertiesDef=function(e){var r=e&&i.get(e);var t;if(r){t=r.getPropertiesDef()}return t};t.mergeProperties=function(e,i,r){var a=t.getPropertiesDef(e);i=i||{};for(var n=2;n<arguments.length;n++){var s=arguments[n];t._mergePropertiesByDef(a,i,s)}return i};t.mergeScales=function(e,i){e=e||[];var r=[];var t=false;for(var a in i){t=false;for(var n in e){if(e[n].feed===i[a].feed){e[n]=i[a];t=true;break}}if(!t){r.push(i[a])}}if(r.length>0){e=e.concat(r)}return e};t._mergePropertiesByDef=function(i,r,a){for(var n in a){var s=a[n];var o=i?i[n]:i;if(s!==undefined){if(o===null||!e.isPlainObject(s)){r[n]=s}else{var l=r[n];if(!l||!e.isPlainObject(l)){l=r[n]={}}t._mergePropertiesByDef(o,l,s)}}}};return t});define("sap/viz/vizservices/service/property/PropertyService",["sap/viz/vizservices/common/viz/VizUtils","exports"],function(e){var i={};i.removeInvalid=function(i,r){return e.getValidProperties(r,i)};i.mergeProperties=function(i,r,t,a){return e.mergeProperties.apply(null,arguments)};i.getPropertiesDef=e.getPropertiesDef;return i});define("sap/viz/vizservices/service/scale/ScaleService",["sap/viz/vizservices/common/viz/VizUtils","exports"],function(e){var i={};i.mergeScales=function(i,r,t){return e.mergeScales(r,t)};return i});(function(){var e=define&&define.__autoLoad;if(e&&e.length){define.__autoLoad=[];require(e)}})();(function(e){e.define=sap.viz.moduleloader.originalDefine;e.require=sap.viz.moduleloader.originalRequire;e.requirejs=sap.viz.moduleloader.originalRequirejs})(this);
//# sourceMappingURL=sap-viz-vizservices.js.map