/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","./SvgBase","sap/ui/base/ManagedObject","sap/ui/core/theming/Parameters","sap/m/CheckBox","sap/m/library"],function(jQuery,t,e,r,i,o,n){"use strict";var s=n.ValueCSSColor,a=t.networkgraph.ElementStatus,u=t.networkgraph.HeaderCheckboxState;var c=e.extend("sap.suite.ui.commons.networkgraph.ElementBase",{metadata:{properties:{title:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},status:{type:"string",group:"Appearance",defaultValue:a.Standard}},aggregations:{attributes:{type:"sap.suite.ui.commons.networkgraph.ElementAttribute",multiple:true,singularName:"attribute"}}},renderer:{}});c.prototype.scrollToElement=function(){var t=this.getParent();if(t){t._scrollToElement(this)}};c.prototype._afterRenderingBase=function(){var t=this.getParent(),e,r;var i=t&&t._isUseNodeHtml()&&this.isA("sap.suite.ui.commons.networkgraph.Node"),o=this.isA("sap.suite.ui.commons.networkgraph.Group");if(!i&&!o){if(this._cannotAppendInnerHtml()){e=this.$().parent();r=this._convertToSvg(jQuery.parseHTML(this._render()));e[0].replaceChild(r,this.$()[0])}else{this.$()[0].outerHTML=this._render()}}this._afterRendering()};c.prototype._removeFromInvalidatedControls=function(){try{this.getUIArea()._onControlRendered(this)}catch(t){}};c.prototype._setFocus=function(t){var e=t?"addClass":"removeClass";this.$()[e](this.FOCUS_CLASS)};c.prototype._replaceId=function(t,e){if(t.attr("id")){t.attr("id",t.attr("id")+e)}t.removeAttr("data-sap-ui");var r=t.children();if(r.length===0){return}r.each(function(t,r){this._replaceId(jQuery(r),e)}.bind(this))};c.prototype._useInLayout=function(){return true};c.prototype._hasFocus=function(){return this.$().hasClass(this.FOCUS_CLASS)};c.prototype._hasDefaultStatus=function(t){t=t||this.getStatus();return t===a.Error||t===a.Information||t===a.Warning||t===a.Success};c.prototype._hasCustomStatus=function(t){t=t||this.getStatus();if(t===a.Standard||this._hasDefaultStatus(t)){return false}return!!t};c.prototype._isCustomStatusColor=function(t){return t!==c.ColorType.BorderWidth&&t!==c.ColorType.BorderStyle};c.prototype._getElementId=function(t){return t?this.getId()+t:this.getId()};c.prototype._getColor=function(t,e){var r=this.getParent(),o,n,a="";var u=function(){if(typeof this.getSelected==="function"&&this.getSelected()){if(t===c.ColorType.Background||t===c.ColorType.Content||t===c.ColorType.Border){t="Selected"+t}if(t==c.ColorType.HeaderContent&&this._isBox()){t=c.ColorType.Content}}}.bind(this);e=e||this.getStatus();if(!this._hasCustomStatus(e)){return""}if(!r||!t){return""}n=r._oStatuses[e];if(n){if(t.indexOf("Focus")!==-1){if(!n.getUseFocusColorAsContentColor()){return""}t=t.replace("Focus","Content")}u();o="get"+t+"Color";var l=n[o]();if(l){var a=i.get(l);if(!a&&l&&s.isValid(l)){a=l}}}return a?a:""};c.prototype._getStatusValue=function(t,e){var r=this.getParent(),i;e=e||this.getStatus();if(!this._hasCustomStatus(e)){return""}if(!r||!t){return""}i=r._oStatuses[e];if(i){return i["get"+t]()}return""};c.prototype._getStatusStyle=function(t,e){var r="";if(!this._hasCustomStatus()){return""}Object.keys(t).forEach(function(e){var i=this._isCustomStatusColor(t[e])?this._getColor(t[e]):this._getStatusValue(t[e]);if(i){if(r){r+=";"}r+=e+":"+i}},this);if(e&&r){r='style="'+r+'"'}return r};c.prototype._checkForProcessData=function(){var t=this.getParent();if(t&&t._bRequiresDataProcessing){t._processData()}};c.prototype.getStyleObject=function(t){var e={};if(t){var r=t.split(";");for(var i=0;i<r.length;i++){if(r[i]){var o=r[i].split(":");e[o.splice(0,1)[0]]=o.join(":")}}}return e};c.prototype.applyStyles=function(t,e){Object.keys(e).forEach(function(r){t.style(r,e[r])})};c.prototype.getVisibleAttributes=function(){return this.getAttributes().filter(function(t){return t.getVisible()})};c.prototype.setProperty=function(t,e,i){var o=Object.getPrototypeOf(this).aProcessRequiredProperties;r.prototype.setProperty.call(this,t,e,i);if(o&&o.indexOf(t)!==-1&&this.getParent()){this.getParent()._bRequiresDataProcessing=true}};c.prototype.toString=function(){return this.getMetadata()._sClassName+" - "+this.getTitle()};c.prototype._correctTitle=function(t){if(this.getTitle()){var e=this.$().find("."+t);if(e[0]){var r=e[0].getBBox().width,i=parseInt(e.attr("maxwidth"),10);if(r>i){this._createText(e[0],{text:this.getTitle(),hCenter:true})}}}};c.prototype._renderTitle=function(t){var e=10;var r=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-title-clip)"},false);r+=this._renderText({attributes:{style:t.style,class:t.class,x:t.x,y:t.y,maxWidth:t.maxWidth},text:t.title,height:e});r+="</g>";return r};c.prototype._renderClipPath=function(t){var e=this._renderControl("clipPath",{id:t.id},false);e+=this._renderControl("rect",{x:t.x,y:t.y,width:t.width||this._iWidth,height:t.height||this._iHeight,direction:t.direction||""});e+="</clipPath>";return e};c.prototype._renderClonedControl=function(t,e){if(t.mapRender){var r=e.$().clone();this._replaceId(r,t.idSufix);t.renderManager.unsafeHtml(r[0].outerHTML)}else{t.renderManager.renderControl(e)}};c.prototype._appendActionButton=function(t,e){var r=t.id?'id="'+t.id+'"':"";var i="<div "+r+' title="'+t.title+'"class="sapSuiteUiCommonsNetworkGraphDivActionButtonBackground">';i+='<div class="sapSuiteUiCommonsNetworkGraphDivActionButton ';if(!t.enable){i+='sapSuiteUiCommonsNetworkGraphDivActionButtonDisabled"';i+='style = " display: none'}i+='">';i+=this._renderHtmlIcon(t.icon,t.class||"");i+="</div>";i+='<div class="sapSuiteUiCommonsNetworkActionButtonFocusCircle"></div>';i+="</div>";var o=jQuery(i);if(t.enable&&t.click){o.on("click",t.click);o.on("click",function(t){if(this.getParent()){this.getParent().setFocus({item:this,button:o[0]},true)}}.bind(this))}e.append(o)};c._isRectOnScreen=function(t,e,r,i,o,n,s,a){return Math.max(t,e)>o&&Math.min(t,e)<n&&Math.max(r,i)>s&&Math.min(r,i)<a};c.prototype._isOnScreen=function(t,e,r,i){return false};c.prototype._setHeaderCheckBoxState=function(t){if(t!==u.Hidden){this._getHeaderCheckbox().setSelected(t===u.Checked);this._getHeaderCheckbox().setVisible(true)}else if(this.getAggregation("_checkBox")){this._getHeaderCheckbox().setVisible(false)}this.setProperty("headerCheckBoxState",t)};c.prototype.setVisible=function(t){var e=this.getParent();this.setProperty("visible",t);if(e){e.setFocus(null);e._setupKeyboardNavigation()}return this};c.prototype.setStatus=function(t){var e=this.getParent();this.setProperty("status",t);if(e&&e._bIsLayedOut){e.updateLegend()}return this};c.ColorType=Object.freeze({BorderStyle:"BorderStyle",BorderWidth:"BorderWidth",Background:"Background",Border:"Border",Content:"Content",HeaderContent:"HeaderContent",SelectedBorder:"SelectedBorder",SelectedBackground:"SelectedBackground",SelectedContent:"SelectedContent",HoverBackground:"HoverBackground",HoverBorder:"HoverBorder",HoverContent:"HoverContent",Focus:"Focus",HoverFocus:"HoverFocus",SelectedFocus:"SelectedFocus"});return c});
//# sourceMappingURL=ElementBase.js.map