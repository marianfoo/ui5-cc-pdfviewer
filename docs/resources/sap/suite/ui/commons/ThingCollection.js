/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","sap/ui/commons/Link","sap/ui/commons/library","sap/ui/events/jquery/EventSimulation","./ThingCollectionRenderer"],function(jQuery,e,t,i,r,n,o){"use strict";var s=t.extend("sap.suite.ui.commons.ThingCollection",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"100%"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"100%"},minWidth:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},minHeight:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null}},aggregations:{content:{type:"sap.ui.ux3.ThingViewer",multiple:true,singularName:"content"}}}});s.prototype.init=function(){this._iCenterNum=0;this._bScrollDisabled=false;this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._oRemoveButton=new i({id:this.getId()+"-remove-button",tooltip:this._rb.getText("THINGCOLLECTION_BUTTON_REMOVE_TOOLTIP"),press:[this._removeCenterContent,this]});this._oRemoveButton.addStyleClass("sapUiUx3OverlayCloseButton");this._initTouchEvents()};s.prototype.exit=function(){this._oRemoveButton.destroy()};s.prototype.onBeforeRendering=function(){this._oCenterControl=this.getContent()[this._iCenterNum]||null};s.prototype.onAfterRendering=function(){var e=this;jQuery(document.getElementById(this.getId()+"-nav-prev")).on("click",function(){e.shiftPrev()});jQuery(document.getElementById(this.getId()+"-nav-next")).on("click",function(){e.shiftNext()});this._updateArrows();if(this.getContent().length<=1){this._hideRemoveButton()}jQuery(document.getElementById(this._oRemoveButton.getId())).attr("role","button");jQuery(document.getElementById(this._oRemoveButton.getId())).attr("aria-disabled","false")};s.prototype.addContent=function(e){this.addAggregation("content",e,true);this._updateArrows();this._showRemoveButton();return this};s.prototype.addNextContent=function(e){this.insertAggregation("content",e,this._iCenterNum+1,true);this._updateArrows();this._showRemoveButton();return this};s.prototype.shiftPrev=function(){if(this._isShiftPrevForbidden()){return}var e=this;this._hideRemoveButton();this._bScrollDisabled=true;var t="#"+this.getId()+"-container";var i=jQuery(t+">.sapSuiteTcPrev");var r=jQuery(t+">.sapSuiteTcCenter");var n=jQuery(t+">.sapSuiteTcNext");var o=sap.ui.getCore().createRenderManager();var s=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";this._iCenterNum--;var a={};a[s]="+=110%";this._renderPrevPanel(o,this.getContent()[this._iCenterNum]);r.animate(a,800);i.animate(a,800,function(){n.css(s,"-110%");e._renderNextPanel(o);o.destroy();e._bScrollDisabled=false;e._updateArrows();e._showRemoveButton();jQuery(t).focus();r.show()});i.removeClass("sapSuiteTcPrev").addClass("sapSuiteTcCenter").attr("aria-hidden","false");r.removeClass("sapSuiteTcCenter").addClass("sapSuiteTcNext").attr("aria-hidden","true");n.removeClass("sapSuiteTcNext").addClass("sapSuiteTcPrev")};s.prototype.shiftNext=function(){if(this._isShiftNextForbidden()){return}var e=this;this._hideRemoveButton();this._bScrollDisabled=true;var t="#"+this.getId()+"-container";var i=jQuery(t+">.sapSuiteTcPrev");var r=jQuery(t+">.sapSuiteTcCenter");var n=jQuery(t+">.sapSuiteTcNext");var o=sap.ui.getCore().createRenderManager();var s=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";this._iCenterNum++;var a={};a[s]="-=110%";this._renderNextPanel(o,this.getContent()[this._iCenterNum]);r.animate(a,800);n.animate(a,800,function(){i.css(s,"110%");e._renderPrevPanel(o);o.destroy();e._bScrollDisabled=false;e._updateArrows();e._showRemoveButton();jQuery(t).focus();r.show()});i.removeClass("sapSuiteTcPrev").addClass("sapSuiteTcNext");r.removeClass("sapSuiteTcCenter").addClass("sapSuiteTcPrev").attr("aria-hidden","true");n.removeClass("sapSuiteTcNext").addClass("sapSuiteTcCenter").attr("aria-hidden","false")};s.prototype.onsapprevious=function(e){this.shiftPrev();e.preventDefault()};s.prototype.onsapnext=function(e){this.shiftNext();e.preventDefault()};s.prototype._initTouchEvents=function(){if(n.touchEventMode!=="OFF"){var e=this;this.onswipeleft=function(t){t.preventDefault();e.shiftNext()};this.onswiperight=function(t){t.preventDefault();e.shiftPrev()}}};s.prototype._removeCenterContent=function(){this._hideRemoveButton();this.removeAggregation("content",this.getContent()[this._iCenterNum],true);var e=this;var t=this.getContent().length;var i=jQuery("#"+this.getId()+"-container>.sapSuiteTcCenter");i.hide(600);if(e._iCenterNum>=t){e._iCenterNum=t;e.shiftPrev()}else{e._iCenterNum-=1;e.shiftNext()}};s.prototype._showRemoveButton=function(){if(this.getContent().length>1){jQuery(document.getElementById(this.getId()+"-remove-button")).show()}};s.prototype._hideRemoveButton=function(){jQuery(document.getElementById(this.getId()+"-remove-button")).hide()};s.prototype._updateArrows=function(){var e=jQuery(document.getElementById(this.getId()+"-nav-prev"));var t=jQuery(document.getElementById(this.getId()+"-nav-next"));var i="";var r="";if(this._isShiftPrevForbidden()){e.removeClass("sapSuiteTcNavPrevArrow")}else{e.addClass("sapSuiteTcNavPrevArrow");i=this._rb.getText("THINGCOLLECTION_BUTTON_PREVIOUS_TOOLTIP")}e.attr("title",i);if(this._isShiftNextForbidden()){t.removeClass("sapSuiteTcNavNextArrow")}else{t.addClass("sapSuiteTcNavNextArrow");r=this._rb.getText("THINGCOLLECTION_BUTTON_NEXT_TOOLTIP")}t.attr("title",r)};s.prototype._isShiftPrevForbidden=function(){return this._bScrollDisabled||this._iCenterNum<=0};s.prototype._isShiftNextForbidden=function(){return this._bScrollDisabled||this._iCenterNum>=this.getContent().length-1};s.prototype._renderPrevPanel=function(e,t){this._renderPanel(e,t,true)};s.prototype._renderNextPanel=function(e,t){this._renderPanel(e,t,false)};s.prototype._renderPanel=function(e,t,i){var r="#"+this.getId()+"-container>"+(i?".sapSuiteTcPrev":".sapSuiteTcNext");var n=jQuery(r);if(n.length>0){if(t){e.renderControl(t)}else{e.write("")}e.flush(n[0])}};return s});
//# sourceMappingURL=ThingCollection.js.map