sap.ui.define(["sap/ui/base/Object","sap/base/util/extend","sap/ui/core/message/Message","sap/suite/ui/generic/template/genericUtilities/FeLogger"],function(e,t,a,r){"use strict";var n="lib.MessageStripHelper";var s=new r(n);var i=s.getLogger();var o=sap.ui.getCore().getMessageManager();function g(e,t,r,n){var s;var g=t.getOwnerComponent().getModel();var u=r.oComponentUtils.getTemplatePrivateModel();function l(){if(n){var t=e[s];var a="/"+n;var r=t&&t.getPresentationControlHandler();var i=r&&r.getDataStateIndicator&&r.getDataStateIndicator();u.setProperty(a,i&&t.message?t.message.type:null)}}function f(e){var t=e&&e.getPresentationControlHandler();var a=t&&t.getDataStateIndicator&&t.getDataStateIndicator();if(a){e.message.target=e.bindingPath;e.message.fullTarget=e.bindingPath;o.addMessages(e.message);e.isAddedToMessageManager=true}}function c(t,r,n){var i=t&&function(){(n||Function.prototype)()};for(var u in e){if(r&&(Array.isArray(r)?r.indexOf(u)<0:r!==u)){continue}var c=e[u];c.onClose=i;if(c.isAddedToMessageManager){if(t&&t.message===c.message.message&&t.type===c.message.type){continue}o.removeMessages(c.message);c.isAddedToMessageManager=false}c.message=null;if(t){c.message=new a({message:t.message,type:t.type,processor:g,persistent:true});if(c.bindingPath){f(c)}}if(u===s){l()}}}function v(){var t=e[s];var a=t&&t.getPresentationControlHandler();var r=a&&a.getDataStateIndicator&&a.getDataStateIndicator();if(r){i.info("Refresh data state indicator for table "+r.getParent().getId());r.refresh()}}function d(e){if(e===s){return}s=e;v();l()}function m(t,a){var r=e[s];return!!r&&r.message===t}function p(t,a){var n=a.getSource().getPath();var s=r.oComponentUtils.getBindingPath();if(s){n=s+"/"+n}for(var i in e){var g=e[i];if(t===g.getPresentationControlHandler()&&n!==g.bindingPath){g.bindingPath=n;if(g.message){o.removeMessages(g.message);f(g)}}}}function C(e){var t=e.getSource();var a=r.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(t);var n=e.getParameters().bindingParams;var s=n.events.change||Function.prototype;n.events.change=function(e){s.call(this,e);p(a,e)}}function M(t){for(var a in e){var r=e[a];if(r.message===t){return true}}return false}function P(){var t=e[s];return t&&t.message}function b(){var t=e[s];if(!t.onClose){return}var a=t.onClose;for(var r in e){var n=e[r];if(n.onClose===a){o.removeMessages(n.message);n.message=null;n.isAddedToMessageManager=false;n.onClose=null}}a();l()}return{setCurrentTab:d,setCustomMessage:c,dataStateFilter:m,onBeforeRebindControl:C,isCustomMessage:M,getCurrentCustomMessage:P,refresh:v,onClose:b}}return e.extend("sap.suite.ui.generic.template.lib.MessageStripHelper",{constructor:function(e,a,r,n){var s=Object.create(null);for(var i in e){var o={getPresentationControlHandler:e[i]};s[i]=o}t(this,g(s,a,r,n));r.oServices.oApplication.registerCustomMessageProvider(this)}})});
//# sourceMappingURL=MessageStripHelper.js.map