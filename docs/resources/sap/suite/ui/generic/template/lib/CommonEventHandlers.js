sap.ui.define(["sap/ui/base/Object","sap/ui/base/Event","sap/m/MessageBox","sap/ui/model/Sorter","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/genericUtilities/expressionHelper","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/ui/model/json/JSONModel","sap/suite/ui/generic/template/js/AnnotationHelper","sap/ui/core/mvc/Controller","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/suite/ui/generic/template/lib/MessageUtils","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/deepExtend","sap/suite/ui/generic/template/lib/CRUDHelper","sap/ui/core/mvc/XMLView","sap/ui/comp/util/FormatUtil","sap/suite/ui/generic/template/genericUtilities/FeError","sap/ui/unified/FileUploaderParameter","sap/ui/core/IconPool","sap/ui/generic/app/library","sap/suite/ui/generic/template/genericUtilities/polyFill"],function(e,t,a,n,r,i,o,s,l,g,c,u,d,f,v,p,E,m,C,T,h){"use strict";var y=new c("lib.CommonEventHandlers").getLogger();function P(e,c,C,P){function b(e){var t=P.getOwnerControl(e.getSource());return r.isSmartTable(t)?t:t.getParent()}function S(e){var t={};for(var a in e){var n=e[a];if(typeof n==="string"){t[a]=n}else if(typeof n==="object"){if(n.value){t[a]=S(n).value}else{t[a]=n}}}return t}function I(e){if(e instanceof sap.ui.generic.app.navigation.service.NavError){if(e.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){sap.m.MessageBox.show(P.getText("ST_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:P.getText("ST_GENERIC_ERROR_TITLE")})}else{sap.m.MessageBox.show(e.getErrorCode(),{title:P.getText("ST_GENERIC_ERROR_TITLE")})}}}var x=Object.create(null);function D(t,a,n){var r=P.getOwnerPresentationControl(t);var i=C.oPresentationControlHandlerFactory.getPresentationControlHandler(r);var o=i.getCurrentContexts();if(!o){return null}o=P.filterActiveContexts(o);var s=i.getBinding();var l;var g=a.getBindingContext().getPath();if(!o.some(function(e,t){if(e&&e.getPath()===g){l=t;return true}})){return null}var c=i.isMTable&&i.isMTable();var u=Object.create(null);if(c){var d=r.getTable().getSelectedItems();d.forEach(function(e){u[e.getBindingContext().getPath()]=e})}var f=i.getThreshold&&i.getThreshold();var v=a.getParent();var p=v.getId();var E=function(t,r){var i=t.getPath();var o=u[i];if(!o){var s=x[p];if(!s){var l=a.isSelected&&a.isSelected();s=a.clone();s.setParent(v);if(l){a.setSelected(true)}x[p]=s}s.setBindingContext(t);o=s}var g=e.getOwnerComponent();var c=!!g.getEditFlow&&g.getEditFlow()==="direct";ee(o,n,t,true,c,r)};return{listBinding:s,growingThreshold:f,selectedRelativeIndex:l,objectPageNavigationContexts:o,paginate:E}}function _(e,t){var a=P.getOwnerControl(e);if(a.getTable){a=a.getTable()}var n=r.isAnalyticalTable(a);c.setPaginatorInfo(n?null:D(a,e,t))}function O(e){var t=e.getSource(),a=t.getParent();P.setEnabledToolbarButtons(a)}var A;function N(e){A=e;return P.getDialogFragmentAsync("sap.suite.ui.generic.template.ListReport.view.fragments.DeleteConfirmation",{onCancel:function(e){var t=e.getSource().getParent();t.close()},onDelete:function(e){var t=e.getSource().getParent();var n=t.getModel("delete");var r=n.getProperty("/items");var i=[];var o=[];var s=[];var l=[];for(var g=0;g<r.length;g++){if(!r[g].draftStatus.locked&&r[g].deletable){if(!r[g].draftStatus.draft){if(r[g].draftStatus.draftActive){s.push(r[g].context.sPath)}else if(r.length===n.getProperty("/unsavedChangesItemsCount")||!r[g].draftStatus.unsavedChanges||n.getProperty("/unsavedChangesCheckboxSelected")){i.push(r[g].context.sPath)}}else{o.push(r[g].context.sPath);l.push(r[g].context.sPath)}}}o=o.concat(i).concat(s);var c={smartTable:A,pathes:o,onlyOneDraftPlusActive:o.length===2&&l.length===1&&s.length===1,suppressRefreshAllComponents:!(R()||L()),withWarningDialog:true};var d=C.oCRUDManager.deleteEntities(c);d.then(function(e){var t=0;var n=[];var r=e.some(function(e){return e.isWarning});for(var i=0;i<e.length;i++){n.push("/"+e[i].sPath.split("/")[1]);if(s.indexOf(n[i])!==-1){t=t+1}}var l=o.length-s.length;var g=e.length-t;var d=l-g;if(g>0){var f=!c.onlyOneDraftPlusActive&&l!==1;if(f){var v="";if(d>0){v+=P.getText("ST_GENERIC_NOT_DELETED_RECORDS",[g,l])}else{v=g>1?P.getText("ST_GENERIC_DELETE_ERROR_PLURAL"):P.getText("ST_GENERIC_DELETE_ERROR")}if(r){v+="\n";if(g===1){v+=P.getText("ST_GENERIC_DELETE_WITH_WARNING_SUGGESTION_SINGULAR")}else{v+=P.getText("ST_GENERIC_DELETE_WITH_WARNING_SUGGESTION_PLURAL")}}C.oApplication.removeTransientMessages();a.error(v)}}else{var p="";p=d>1?P.getText("ST_GENERIC_DELETE_SUCCESS_PLURAL"):P.getText("ST_GENERIC_OBJECT_DELETED");u.showSuccessMessageIfRequired(p,C)}},Function.prototype);t.close()}},"delete")}function R(){return c.getFclProxy()&&c.getFclProxy().isNextObjectLoadedAfterDelete()}function L(){return!!(c&&c.getSettings()&&c.getSettings().quickVariantSelectionX)}function F(e,t){return new Promise(function(a,n){t.read(e+"/SiblingEntity",{success:function(e){var n="/"+t.getKey(e);a(n)},error:function(e){var t="Error";a(t)}})})}function M(t,a){var n=e.getView().getModel();var r=n.getMetaModel();var i=r.getODataEntitySet(e.getOwnerComponent().getEntitySet());var o=i["Org.OData.Capabilities.V1.DeleteRestrictions"];var s=o&&o.Deletable&&o.Deletable.Path?o.Deletable.Path:"";var l={items:undefined,itemsCount:t.length,text:{title:undefined,text:undefined,unsavedChanges:undefined,longText:undefined,undeletableText:undefined},lockedItemsCount:0,unsavedChangesItemsCount:0,undeletableCount:0,unsavedChangesCheckboxSelected:true,unsavedChangesCheckboxVisible:true,undeletableLocked:0,tableMode:""};var g=[];var c=[];var u,d,f,v,p,E;var m=[];for(var C=0;C<t.length;C++){u=n.getObject(t[C].getPath());if(!u.IsActiveEntity){if(u.HasActiveEntity){m.push(F(t[C].getPath(),n))}}}var T=0;return new Promise(function(e,r){Promise.all(m).then(function(r){for(var i=0;i<t.length;i++){u=n.getObject(t[i].getPath());d={};f={};v=true;p={};E=false;if(s){if(n.getProperty(s,t[i])===false){v=false;l.undeletableCount++}}if(!u.IsActiveEntity){d.draft=true;if(u.HasActiveEntity){f.draft=false;f.draftActive=true;if(r[T]!="Error"){p["oModel"]=t[0].getModel();p["sPath"]=r[T++]}if(p.sPath&&v&&n.getProperty(s,n.getContext(p.sPath))===false){v=false;l.undeletableCount++}}}else if(u.HasDraftEntity){var o=n.getProperty("DraftAdministrativeData/CreatedByUserDescription",t[i])||n.getProperty("DraftAdministrativeData/CreatedByUser",t[i]);E=n.getProperty("DraftAdministrativeData/InProcessByUser",t[i]);if(E){if(v===false){l.undeletableLocked++}d.locked=true;d.user=o;l.lockedItemsCount++}else if(v){d.unsavedChanges=true;d.user=o;l.unsavedChangesItemsCount++}}g.push({context:t[i],draftStatus:d,deletable:v});if(!u.IsActiveEntity&&u.HasActiveEntity){c.push({context:p,draftStatus:f,deletable:v})}}if(c.length>0){g=g.concat(c)}l.items=g;l.text.unsavedChanges=P.getText("ST_GENERIC_UNSAVED_CHANGES_CHECKBOX");if(l.itemsCount>1){var m=0;if(l.lockedItemsCount===l.itemsCount){l.text.text=P.getText("ST_GENERIC_DELETE_LOCKED_PLURAL")}else if(l.unsavedChangesItemsCount===l.itemsCount&&l.undeletableCount===0){l.text.text=P.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES_PLURAL")}else if(l.lockedItemsCount>0){m=l.itemsCount-l.lockedItemsCount;l.text.text=B(l.lockedItemsCount,"ST_GENERIC_CURRENTLY_LOCKED_PLURAL","ST_GENERIC_CURRENTLY_LOCKED",[l.lockedItemsCount,l.itemsCount]);l.text.text+="\n";l.undeletableCount=l.undeletableLocked>0?l.undeletableCount-l.undeletableLocked:l.undeletableCount;if(l.undeletableCount>0&&m>=l.undeletableCount){l.text.text+=P.getText("ST_GENERIC_DELETE_UNDELETABLE",[l.undeletableCount,l.itemsCount]);m=m-l.undeletableCount;l.text.text+="\n"}if(l.unsavedChangesItemsCount&&m===l.unsavedChangesItemsCount){l.text.text+=B(m,"ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES_PLURAL","ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES");m=0}}else if(l.undeletableCount>0){m=l.itemsCount-l.undeletableCount;l.text.text=P.getText("ST_GENERIC_DELETE_UNDELETABLE",[l.undeletableCount,l.itemsCount]);l.text.text+="\n";if(l.unsavedChangesItemsCount&&m===l.unsavedChangesItemsCount||l.itemsCount===l.unsavedChangesItemsCount){l.text.text+=B(m,"ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES_PLURAL","ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES");m=0}}else{l.text.text=P.getText("ST_GENERIC_DELETE_SELECTED_PLURAL")}if(m>0){l.text.text+=m>1?P.getText("ST_GENERIC_DELETE_REMAINING_PLURAL",[m]):P.getText("ST_GENERIC_DELETE_REMAINING")}}else{var C;if("getMode"in a.getTable()){C=a.getTable().getMode()}if(l.lockedItemsCount>0){l.text.text=P.getText("ST_GENERIC_DELETE_LOCKED",[" ",l.items[0].draftStatus.user])}else if(l.undeletableCount>0){if(C==="Delete"){l.tableMode=C}l.text.text=P.getText("ST_GENERIC_NOT_DELETABLE")}else if(l.unsavedChangesItemsCount>0){l.text.text=P.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES",[" ",l.items[0].draftStatus.user])}else{l.text.text=w(a,t[0])}}if(l.lockedItemsCount===l.itemsCount){l.text.title=P.getText("ST_GENERIC_ERROR_TITLE")}else if(l.itemsCount&&l.lockedItemsCount+l.undeletableCount===l.itemsCount){l.text.title=P.getText("WARNING")}else{l.text.title=l.text.title=l.itemsCount>1?P.getText("ST_GENERIC_DELETE_TITLE_WITH_COUNT",[l.itemsCount]):P.getText("ST_GENERIC_DELETE_TITLE")}if(l.unsavedChangesItemsCount>0){if(l.unsavedChangesItemsCount!==l.itemsCount){if(l.lockedItemsCount>0){if(l.undeletableCount>0){if(l.itemsCount-l.lockedItemsCount-l.undeletableCount===l.unsavedChangesItemsCount){l.unsavedChangesCheckboxVisible=false}}else if(l.itemsCount-l.lockedItemsCount===l.unsavedChangesItemsCount){l.unsavedChangesCheckboxVisible=false}}else if(l.undeletableCount>0&&l.itemsCount-l.undeletableCount===l.unsavedChangesItemsCount){l.unsavedChangesCheckboxVisible=false}}else{l.unsavedChangesCheckboxVisible=false}}else{l.unsavedChangesCheckboxVisible=false}e(l)})})}function B(e,t,a,n){var r;if(!n){r=e>1?P.getText(t):P.getText(a)}else if(e>1&&n.length>1){r=P.getText(t,[n[0],n[1]])}else if(n){r=P.getText(a,[n[1]])}return r}function w(t,a,n){var r;var o;var s;var l;var g=a.getModel();var c=g.oData;var u=t.getCustomData();var d=t.getModel("@i18n")&&t.getModel("@i18n").getResourceBundle();for(var f in u){if(u[f].getKey()&&u[f].getKey()==="headerInfo"&&u[f].getValue()&&u[f].getValue()["headerTitle"]){r=a.getPath().split("/")[1];l=u[f].getValue();o=l["headerTitle"];s=l["headerSubTitle"];if(l["isHeaderTitlePath"]){o=c[r]&&c[r][o]||""}else if(o.match(/{@i18n>.+}/gi)){o=d.getText(o.substring(o.indexOf(">")+1,o.length-1))}if(s&&l["isHeaderSubTitlePath"]){s=c[r]&&c[r][s]||""}else if(s.match(/{@i18n>.+}/gi)){s=d.getText(s.substring(s.indexOf(">")+1,s.length-1))}break}}if(t){var v=i.getAnnotationFormatter(g,t.getEntitySet(),"/com.sap.vocabularies.UI.v1.HeaderInfo/Title/Value",d);o=v.format(a);v.done();var p=e.getOwnerComponent().getAppComponent().getConfig();var E=p.settings&&p.settings.flexibleColumnLayout?true:false;if(E){var m=e.getOwnerComponent().getModel("_templPrivGlobal");if(!m.getProperty("/generic/FCL/isVisuallyFullScreen")){v=i.getAnnotationFormatter(g,t.getEntitySet(),"/com.sap.vocabularies.UI.v1.HeaderInfo/Description/Value",d);s=v.format(a);v.done()}}}return Re(o,s,n,false,t)}function H(t){if(!t){return t}var a=e.getOwnerComponent().getModel().getMetaModel();var n=a.getMetaContext(t.getPath()).getObject();var r=Object.create(Object.prototype);var i=t.getObject();n.property.forEach(function(e){if(i&&i[e.name]!==undefined){if((!e["com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext"]||e["com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext"].Bool==="false")&&(!e["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]||e["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"].Bool==="false")){r[e.name]=i[e.name]}}});return r}function G(e,t,a,n){var r=C.oApplication.getNavigationHandler();var i={};var o={};t.parameters=S(t.parameters);for(var s in t.parameters){if(f(t.parameters[s])){i[s]=t.parameters[s]}else{o[s]=t.parameters[s]}}r.mixAttributesAndSelectionVariant(Object.create(Object.prototype),a).getSelectOptionsPropertyNames().forEach(function(e){delete i[e]});var l=H(e);return d({},i,l,n,o)}function U(e,t,a,n){var r;switch(t.length){case 0:r=[G(a,e,n,Object.create(Object.prototype))];break;case 1:r=[G(a,e,n,H(t[0]))];break;default:r=t.map(H);break}var i=C.oApplication.getNavigationHandler();return i.mixAttributesAndSelectionVariant(r,n)}function V(t,a,n,r){var i,o;if(n){i=n.getUiState().getSelectionVariant();if(typeof i!=="string"){i=JSON.stringify(i)}}o=U(t,a,e.getView().getBindingContext(),i);var s={semanticObject:t.semanticObject,action:t.action};e.adaptNavigationParameterExtension(o,s);if(!r){P.setComponentRefreshBehaviour(t)}C.oApplication.navigateExternal(t.semanticObject,t.action,o.toJSONString(),null,I)}function k(t,a){var n=C.oApplication.getNavigationHandler();var r={semanticObject:t.semanticObject,action:t.action};var i=n.mixAttributesAndSelectionVariant(t.semanticAttributes);P.removePropertiesFromNavigationContext(i,a);e.adaptNavigationParameterExtension(i,r);P.setComponentRefreshBehaviour(t);C.oApplication.navigateExternal(t.semanticObject,t.action,i.toJSONString(),null,I)}function j(e,t){var a=e.byId("icon");var n=a&&a.getSrc();if(n===""){n=undefined}var r=e.byId("title");var i=r&&r.getText();if(i===""){i=undefined}var o=e.byId("description");var s=o&&o.getText();if(s===""){s=undefined}for(var g=0;g<t.length;g++){var c=t[g];var u=l.getStableIdPartFromFacet(c)+"::contactTitleAreaIcon";var d=e.byId(u);var f=l.getStableIdPartFromFacet(c)+"::contactTitleAreaTitle";var v=e.byId(f);var p=l.getStableIdPartFromFacet(c)+"::contactTitleAreaDescription";var E=e.byId(p);var m=d&&d.getSrc();if(m===""){m=undefined}var C=v&&v.getText();if(C===""){C=undefined}var T=E&&E.getText();if(T===""){T=undefined}if(n&&m&&i&&C&&s&&T){if((n===m||!m)&&(i===C||!C)&&(s===T||!T)){var h=l.getStableIdPartFromFacet(c)+"::contactTitleArea";var y=e.byId(h);if(y&&y.setVisible){y.setVisible(false)}}}}}function W(t,a,n,r){var i=e.getOwnerComponent().getAppComponent().getManifestEntry("sap.app");var o=i.crossNavigation.outbounds[t.data("CrossNavigation")];V(o,a?[a]:[],n,r)}function J(e,t){var a=v({},e);P.fnProcessDataLossOrDraftDiscardConfirmation(function(){var e=a.data("SemanticObject");var t=a.data("Action");var n=a.data("SemanticAttributes");if(e&&t){var r={semanticObject:e,action:t};if(n){n="{"+n+"}";r.semanticAttributes=JSON.parse(n)}k(r,a)}},Function.prototype,"LeaveApp")}function K(t,a,n,r,i){var o,u;var d=e.getOwnerComponent().getModel().getMetaModel();var f=d.getODataEntitySet(t);var v=function(){var t=function(){var t=n.originalId;var a=e.getView().byId(t);if(!a){var r=document.querySelector("#"+t.replace(/(:|\.|\[|\]|,|=)/g,"\\$1"));if(r){var i=r.closest("[data-sap-ui]");if(i){a=sap.ui.getCore().byId(i.id)}}}return a};var a=c.getParameterModelForTemplating().oData.templateSpecific.targetEntities[f.entityType].mTargetEntities;u=t();o=u&&u.mProperties.fieldName;if(a[o]){var r=a[o].entityType;var i=d.getODataEntityContainer().entitySet.find(function(e){return e.entityType==r}).name;var s={navigation:a[o].navName,entitySet:i,entityType:r};var l=d.getODataEntityType(r);if(l&&l["com.sap.vocabularies.UI.v1.HeaderInfo"]){var g=d.getODataEntityType(r,true)+"/com.sap.vocabularies.UI.v1.HeaderInfo";s.headerInfoPath=g}if(l&&l["com.sap.vocabularies.UI.v1.QuickViewFacets"]){var v=d.getODataEntityType(r,true)+"/com.sap.vocabularies.UI.v1.QuickViewFacets";s.quickViewFacetODataPath=v}if(s.headerInfoPath||s.quickViewFacetODataPath){return s}}};var p=v();var C=false;var T=false;var h=false;var y=[];if(p){if(p.quickViewFacetODataPath){var P=d.createBindingContext(p.quickViewFacetODataPath,true);var b=P&&P.getModel().getObject(P.getPath());if(b){C=true;for(var S=0;S<b.length;S++){var I=b[S];if(I&&I.Target&&I.Target.AnnotationPath){if(I.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")>-1){T=true}else if(I.Target.AnnotationPath.indexOf("com.sap.vocabularies.Communication.v1.Contact")>-1){h=true;y.push(I)}}}}}}var x=n.mainNavigation;if(C){var D,_;D=d.getODataEntitySet(t);_=d.getODataEntityType(D.entityType);var O=p.headerInfoPath&&d.createBindingContext(p.headerInfoPath,true);var A=n.semanticObject;var N,R;if(A&&x){var L=x.getTarget&&x.getTarget()||"";var F=x.getKey&&x.getKey();if(F){var M=F.split(A+"-");N=M&&M[1];if(A&&N){R={Target:L,SemanticObject:A,Action:N}}if(n.semanticAttributes){R.SemanticAttributes=n.semanticAttributes;for(var B in n.semanticAttributes){var w=n.semanticAttributes[B];if(w.indexOf('{"__deferred":')>-1){delete R.SemanticAttributes[B]}if(w.indexOf('{"__ref":')>-1){delete R.SemanticAttributes[B]}}if(R.SemanticAttributes){var H=JSON.stringify(R.SemanticAttributes);if(H&&H.length>1){R.SemanticAttributes=H.substring(1,H.length-1)}}}}}var G=d.getODataProperty(_,o);var U=new s({sourceClickedField:G,sourceEntityType:_,showFieldGroup:T,showContact:h,ignoredFields:a,navigationPath:p.navigation,mainNavigation:R});U.setDefaultBindingMode("OneWay");var V;var k=g.extend("",{oState:r,_templateEventHandlers:{onSemanticObjectLinkNavigationPressed:e._templateEventHandlers.onSemanticObjectLinkNavigationPressed.bind(e._templateEventHandlers),onDataFieldWithIntentBasedNavigation:e._templateEventHandlers.onDataFieldWithIntentBasedNavigation.bind(e._templateEventHandlers)},onInit:function(){},onExit:function(){},onAfterRendering:function(){var e=this.oView;var t=e.getParent().getParent().getParent();t.setBusy(false)}});V=new k;k.connectToView=e.connectToView.bind(V);var W=function(e){var t=e.getSource();if(t){var a=t.getParent().getParent().getParent();a.setBusy(true);a.setBusyIndicatorDelay(10)}};E.create({preprocessors:{xml:{bindingContexts:{sourceEntitySet:d.createBindingContext(d.getODataEntitySet(t,true)),entitySet:d.createBindingContext(d.getODataEntitySet(p.entitySet,true)),header:O,facetCollection:P},models:{sourceEntitySet:d,entitySet:d,header:d,facetCollection:d,quickView:U,parameter:c.getParameterModelForTemplating()}}},controller:V,viewName:"sap.suite.ui.generic.template.fragments.QuickViewSmartForm",height:"100%"}).then(function(e){n.show(undefined,undefined,undefined,e);e.attachBeforeRendering(W.bind(this));var t=function(e){var t=e.getSource();if(t){var a=t.byId("ownTitleArea");if(a){var n=t.getParent();if(n&&n.getItems){var r=n.getItems()&&n.getItems()[0];if(r&&r!=t){r.setVisible(false)}}}if(h&&y&&a){j(t,y)}}};e.attachAfterRendering(t.bind(this))}.bind(this))}else{if(u.getFieldName){var J=d.getODataEntityType(f.entityType);var K=J.property.find(function(e){return e.name===o});var q="descriptionAndId";if(K){q=l.getTextArrangement(J,K)}var Y=u.getBinding("text").getValue();if(Array.isArray(Y)){var z=m.getTextsFromDisplayBehaviour(q,Y[0],Y[1]);if(x){x.setDescription(z.secondText)}i=z.firstText}}n.show(i,x,undefined,undefined)}}function q(e){return new Promise(function(t){P.fnProcessDataLossOrDraftDiscardConfirmation(function(){P.setComponentRefreshBehaviour({semanticObject:e.semanticObject,action:e.href.split("?")[0].split("-")[1]});t(true)},function(){t(false)},"LeaveApp")})}function Y(e,t){var a=e.getView&&e.getView().getBindingContext();var n=a.getObject();var r=e.getOwnerComponent().getModel().getMetaModel();var i=r.getODataEntitySet(e.getOwnerComponent().getEntitySet());var o=r.getODataEntityType(i.entityType);var s=o["com.sap.vocabularies.Common.v1.SemanticKey"];var l={};if(s&&s.length>0){for(var g=0;g<s.length;g++){var c=s[g].PropertyPath;if(!l[c]){l[c]=[];l[c].push(n[c])}}}else{for(var u in o.key.propertyRef){var d=o.key.propertyRef[u].name;if(!l[d]){l[d]=[];l[d].push(n[d])}}}return l}function z(e,t,a,n){if(e[t].entitySet==a&&n===e[t].navigationProperty&&e[t].navigation&&e[t].navigation["display"]&&(e[t].component&&e[t].component.settings&&e[t].component.settings.hideChevronForUnauthorizedExtNav===true)){return e[t].navigation.display.target}else if(e[t].entitySet==a&&e[t].navigation&&e[t].navigation["display"]&&(e[t].component&&e[t].component.settings&&e[t].component.settings.hideChevronForUnauthorizedExtNav===true)){return e[t].navigation.display.target}else if(e[t].pages){for(var r=0;r<e[t].pages.length;r++){var i=z(e[t].pages,r,a,n);if(i!==undefined&&i!==null){return i}}}}function Q(t){var a=t.getTable();var n=t.getEntitySet();var i=t.getTableBindingPath();var o=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService&&sap.ushell.Container.getService("CrossApplicationNavigation");var s=e.getOwnerComponent().getAppComponent().getConfig().pages;var l=z(s,0,n,i);if(l!==undefined&&l!==null&&o){var g=e.getOwnerComponent().getAppComponent().getManifestEntry("sap.app").crossNavigation.outbounds[l];if(g){var c=g.semanticObject;var u=g.action;var v=e.getView().getModel("_templPriv");var p=v.getProperty("/generic/supportedIntents/");var E=i===""?n:n+"::"+i;var m=v.getProperty("/generic/supportedIntents/"+c+"/"+u+"/"+E);if(!m){var C={},T;var h=e.getOwnerComponent().getAppComponent();for(var y in g.parameters){if(!f(g.parameters[y])){C[y]=g.parameters[y]}}if(e.getMetadata().getName()==="sap.suite.ui.generic.template.ObjectPage.view.Details"){T=Y(e,h)}var P={semanticObject:c,action:u};var b=d({},T,C);var S={target:P,params:b};var I=o.isNavigationSupported([S],h);I.done(function(e){var t=v.getProperty("/generic/supportedIntents/"+c);if(!t){p[c]={};p[c][u]={};p[c][u][E]={supported:e[0].supported}}else if(!t[u]){t[u]={};t[u][E]={supported:e[0].supported}}else{t[u][E]={supported:e[0].supported}}v.updateBindings();if(e[0].supported&&r.isUiTable(a)){var n=a.getRowActionTemplate();n.getItems()[0].setVisible(true);a.setRowActionTemplate(n)}})}}}}function X(e){if(r.isSmartTable(e)){P.setEnabledToolbarButtons(e);Q(e)}}function $(t,a){var i=t.getSource();var o=i.getTable();var s=r.isMTable(o);var l=o.getColumns();if(!a||a&&a.isPopinWithoutHeader&&s){for(var g=0;g<l.length;g++){var c=l[g].data("p13nData")&&l[g].data("p13nData").columnKey;if(c&&(c.search("template::DataFieldForIntentBasedNavigation")>-1||c.search("template::DataFieldForAction")>-1)){l[g].setPopinDisplay("WithoutHeader")}}}var u=t.getParameter("bindingParams");u.parameters=u.parameters||{};var d=a.getSearchString&&a.getSearchString();if(d){u.parameters.custom={search:d}}var f=i.getCustomData();var v={};for(var p=0;p<f.length;p++){v[f[p].getKey()]=f[p].getValue()}var E=v.InitialExpansionLevel;if(E){u.parameters.numberOfExpandedLevels=parseInt(E,10)}var m=[];var T=[];function h(e,t,n,r,i){for(var o=0;o<e.length;o++){var s=e[o];if(s){var l=t.getODataProperty(n,s);if(l){var g=l["com.sap.vocabularies.Common.v1.FieldControl"];if(g&&g!==" "&&g.Path){if(a.isFieldControlRequired||T.indexOf(s)!==-1){m.push(g.Path)}}}}}var c=r["Org.OData.Capabilities.V1.DeleteRestrictions"];m.push(c&&c.Deletable&&c.Deletable.Path);var u=r["Org.OData.Capabilities.V1.UpdateRestrictions"];m.push(u&&u.Updatable&&u.Updatable.Path);var d=n[i+"@com.sap.vocabularies.UI.v1.Criticality"];m.push(d&&d.Path)}function y(e,t,a){var n,r=[];if(e.Value&&e.Value.Path){n=t.getODataProperty(a,e.Value.Path);if(n){if(n["com.sap.vocabularies.Common.v1.Text"]){r[0]=n["com.sap.vocabularies.Common.v1.Text"].Path}if(n["sap:text"]){r[0]=n["sap:text"]}}if(!r[0]){r[0]=e.Value.Path}}if(e.SemanticObject&&e.SemanticObject.Path){r.push(e.SemanticObject.Path)}if(e.Action&&e.Action.Path){r.push(e.Action.Path)}return r}function b(e,t){var a=t.getODataFunctionImport(e.Action.String,true);if(a){var n=t.getObject(a);if(n["sap:action-for"]!==" "&&n["sap:applicable-path"]!==" "){return n["sap:applicable-path"]}}return null}function S(e,t){var a=[];if(e.Target&&e.Target.AnnotationPath){var n=e.Target.AnnotationPath;var r=n.split("@")[1];var i=t[r];if(i&&i.MeasureAttributes){if(i.MeasureAttributes[0]&&i.MeasureAttributes[0].DataPoint&&i.MeasureAttributes[0].DataPoint.AnnotationPath){var o=i.MeasureAttributes[0].DataPoint.AnnotationPath.split("@")[1];var s=t[o];if(s){for(var l in s){a.push(s[l]&&s[l].Path);if(l==="CriticalityCalculation"&&s.CriticalityCalculation){for(var g in s.CriticalityCalculation){a.push(s.CriticalityCalculation[g].Path)}}}}}}a.push(i&&i.Measures&&i.Measures[0]&&i.Measures[0].PropertyPath)}return a}a=a||Object.create(null);a.setBindingPath=i.setTableBindingPath.bind(i);a.addNecessaryFields=function(e,t,r){var o=i.getModel().getMetaModel();var s=o.getODataEntitySet(r);var l=o.getODataEntityType(s.entityType);if(e.length>0){var g=i.data("lineItemQualifier");var c="com.sap.vocabularies.UI.v1.LineItem"+(g?"#"+g:"");var d=l[c]||[];for(var f=0;f<d.length;f++){switch(d[f].RecordType){default:break;case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":var p=y(d[f],o,l);if(p){m=m.concat(p)}break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":if(a.isDataFieldForActionRequired){var E=b(d[f],o);if(E){T.push(E);m.push(E)}}break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":var I=d[f];if(I.Target&&I.Target.AnnotationPath&&I.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")>=0){var x=I.Target.AnnotationPath;var D=l[x.split("@")[1]];d=d.concat(D&&D.Data);continue}var _=S(I,l);for(var O=0;O<_.length;O++){if(_[O]){m.push(_[O])}}break}}if(a.isFieldControlsPathRequired){h(e,o,l,s,c);var A=P.getBreakoutActions(i);for(var N in A){m.push(A[N].requiresSelection&&A[N].applicablePath)}var R=C.oDraftController.getDraftContext();if(R.isDraftEnabled(r)&&R.isDraftRoot(r)&&R.hasDraftAdministrativeData(r)){if(e.length>0){m.push("DraftAdministrativeData")}}}}var L=i.fetchVariant();if(!v.TemplateSortOrder&&a&&a.determineSortOrder){v.TemplateSortOrder=a.determineSortOrder()}if((!L||!L.sort)&&v.TemplateSortOrder){var F=v.TemplateSortOrder.split(", ");for(var M=0;M<F.length;M++){var B=F[M].split(" ");if(B.length>1){u.sorter.push(new n(B[0],B[1]==="true"))}else{u.sorter.push(new n(B[0]))}}}for(var w=0;w<m.length;w++){t(m[w])}};var I=e.byId(i.getSmartFilterId()||"listReportFilter");P.onBeforeRebindTableOrChart(t,a,I)}function Z(n,r,i,o,s,l,g){var c=new t("press",n,r);o=o||n.getBindingContext();if(e.onListNavigationExtension&&e.onListNavigationExtension(c,o,s)){return}var d=b(c);if(n.data("CrossNavigation")){var f=d.getEntitySet();P.setExternalChevronRefreshBehaviour(f);W(n,o,i.oSmartFilterbar,Object.create(null),true);return}_(n,i);var v=e.getOwnerComponent();var g=!!v.getEditFlow&&v.getEditFlow()==="direct";if(g){var E=d.getEntitySet();var m=p.directEdit(C.oTransactionController,E,o.sPath,o.getModel(),C.oApplication,P,C.oViewDependencyHelper,l,g);m.then(function(e){P.navigateFromListItem(e.context,s,g)},function(t){if(t.lockedByUser){var n=P.getText("ST_GENERIC_DRAFT_LOCKED_BY_USER",[" ",t.lockedByUser]);a.error(n)}else{u.handleError(u.operations.editEntity,e,C,t);l.navigateUp()}})}else{P.navigateFromListItem(o,s)}}function ee(e,a,n,i,o,s){var l,g={};if(e instanceof t){l=e.getSource();g=e.getParameters();if(r.isMTable(l)){l=e.getParameter("listItem");g.id=l.getId()}}else{l=e}if(i){Z(l,g,a,n,true,s,o)}else{var u=c.getViewLevel();var d=C.oApplication.getCurrentKeys(u+1);var f=d.length>u+1;if(l.data("CrossNavigation")||!l.data("CrossNavigation")&&!c.isDraftEnabled()){P.fnProcessDataLossOrDraftDiscardConfirmation(Z.bind(null,l,g,a,n,f,o),Function.prototype,"LeaveApp")}else{Z(l,g,a,n,f,s,o)}}}function te(e){C.oApplication.performAfterSideEffectExecution(function(){if(C.oApplication.getBusyHelper().isBusy()){y.info("Ignore incorrect selection, since app is busy anyway");return}var t=e?"ST_GENERIC_MULTIPLE_ITEMS_SELECTED":"ST_GENERIC_NO_ITEM_SELECTED";a.error(P.getText(t),{styleClass:P.getContentDensityClass()})})}function ae(t){var n,r,i;var o=e.getOwnerComponent(),s=t.getSource().getCustomData(),l="10rem";if(s.length===0){return}for(r=0,i=s.length;r<i;r++){if(s[r].getProperty("key")==="Target"){n=s[r].getProperty("value");break}}if(!n){a.show(P.getText("ST_GENERIC_ERROR_IN_NAVIGATION"),{icon:a.Icon.ERROR,title:P.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],horizontalScrolling:true,contentWidth:l,details:P.getText("ST_GENERIC_ERROR_IN_NAVIGATION_PROPERTY_MISSING",["DataFieldWithNavigationPath"])});return}var g=o.getModel(),u=g.getMetaModel();var d=t.getSource().getBindingContext().getPath(),f=d.slice(1,d.indexOf("(")),v=u.getODataEntityType(u.getODataEntitySet(f).entityType),p,E=false,m=v.navigationProperty.length;for(p=0;p<m;p++){if(v.navigationProperty[p].name===n){E=true;break}}if(!E){a.show(P.getText("ST_GENERIC_ERROR_IN_NAVIGATION"),{icon:a.Icon.ERROR,title:P.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],horizontalScrolling:true,contentWidth:l,details:P.getText("ST_GENERIC_ERROR_NAVIGATION_PROPERTY_NOT_CORRECT",[n,"DataFieldWithNavigationPath"])});return}var T=u.getODataAssociationEnd(v,n),h=u.getODataEntityType(T.type),y,b;if(h){y=h.namespace+"."+h.name}var S=u.getODataEntityContainer().entitySet;for(r=0,i=S.length;r<i;r++){if(S[r].entityType===y){b=S[r].name;break}}if(!b){var I=y.split(".")[1];I=I.slice(0,I.length-4);a.show(P.getText("ST_GENERIC_ERROR_IN_NAVIGATION"),{icon:a.Icon.ERROR,title:P.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],horizontalScrolling:true,contentWidth:l,details:P.getText("ST_NAV_ERROR_TARGET_ENTITYSET_IS_MISSING",[I])});return}var x=P.getNavigationKeyProperties(b),D=C.oNavigationController,_={$expand:""};if(c.isDraftEnabled()){_={$expand:"DraftAdministrativeData"}}var O=new Promise(function(e,t){g.read(d+"/"+n,{urlParameters:_,success:function(t){e(t);C.oApplication.invalidatePaginatorInfo();var a=P.mergeNavigationKeyPropertiesWithValues(x,t);C.oApplication.setStoredTargetLayoutToFullscreen(1);D.navigateToContext(a,null,false)},error:function(e){t(e)}})});c.getBusyHelper().setBusy(O)}function ne(e,t){var a=e.getSource();var n=C.oPresentationControlHandlerFactory.getPresentationControlHandler(P.getOwnerPresentationControl(a)).getSelectedContexts();n=n.filter(function(e){return e&&!e.isTransient()});var r=P.getCustomDataFromEvent(e);ie(r,n,t.oSmartFilterbar)}function re(e,t){var a=e.getSource();var n=a.getParent().getBindingContext();var r=a.data("SemanticObject");var i=a.data("Action");P.fnProcessDataLossOrDraftDiscardConfirmation(function(){var e={action:i,semanticObject:r};V(e,[n],t.oSmartFilterbar||undefined)},Function.prototype,"LeaveApp")}function ie(e,t,a){var n={action:e.Action,semanticObject:e.SemanticObject};V(n,t,a||undefined)}function oe(e,t,a){var n=P.getElementCustomData(e);var r=!(n.RequiresContext&&n.RequiresContext==="false");if(r&&!t.length){te(t.length)}else{P.fnProcessDataLossOrDraftDiscardConfirmation(function(){ie(n,t,a)},Function.prototype,"LeaveApp")}}function se(e,t){P.fnProcessDataLossOrDraftDiscardConfirmation(function(){var a={semanticObject:e.data("SemanticObject"),action:e.data("Action")};var n=e.getParent().getBindingContext();V(a,[n],t.oSmartFilterbar)},Function.prototype,"LeaveApp")}function le(e){var t=e.getSource();var a=P.getOwnerControl(t).getParent();var n=[t.getBindingContext()];var r=P.getElementCustomData(t);var i=a.getEntitySet();P.triggerAction(n,i,r,C.oPresentationControlHandlerFactory.getPresentationControlHandler(a))}var ge;var ce;function ue(e){ge=new Promise(function(t){ce=t;var a=e.getSource();var n=a.getBindingContext().getPath();var r=a.getModel();var i=r.getProperty(n);var o=r.getETag(undefined,undefined,i);a.removeAllHeaderParameters();var s=a.getModel().getHeaders()["x-csrf-token"];if(s){var l=new T;l.setName("x-csrf-token");l.setValue(s);a.addHeaderParameter(l)}if(a.FUEl.files[0].name){var g=new T;var c="filename="+a.FUEl.files[0].name;g.setName("Content-Disposition");g.setValue(c);a.addHeaderParameter(g)}if(a.FUEl.files[0].type){var u=new T;var d=a.FUEl.files[0].type;u.setName("Content-Type");u.setValue(d);a.addHeaderParameter(u)}if(o){var f=new T;f.setName("If-Match");f.setValue(o);a.addHeaderParameter(f)}var v=new T;v.setName("Accept");v.setValue("application/json");a.addHeaderParameter(v);a.checkFileReadable().then(function(){a.upload()},function(e){sap.m.MessageToast.show("The file cannot be read. It may have changed.")}).then(function(){a.clear()})});var t=C.oApplication.getBusyHelper();t.setBusy(ge)}function de(t){ce();var n=t.getParameter("status");if(n>=400){var r=t.getParameter("responseRaw")||t.getParameter("response"),i=r&&JSON.parse(r);if(i){a.error(i.error&&i.error.message)}}else{var o=t.getSource();var s=o.getParent().data("sNavigationProperty");var l=e.getView().getModel("_templPriv");var g=e.getOwnerComponent().getEntitySet();var c;var u=o.getUploadUrl();c={};if(s){l.setProperty("/generic/controlProperties/"+"fileUploader/"+s,c)}else{l.setProperty("/generic/controlProperties/"+"fileUploader/"+g,c)}c.fileName=t.mParameters.fileName;var d=t.mParameters.requestHeaders.find(function(e){if(e.name==="Content-Type"){return e}});c.fileType=d.value;var f=h.getIconForMimeType(d.value);c.icon=f;c.url=u;if(s){l.setProperty("/generic/controlProperties/"+"fileUploader/"+s,c)}else{l.setProperty("/generic/controlProperties/"+"fileUploader/"+g,c)}var v=C.oApplication.getBusyHelper();var p=ve(t.getSource());v.setBusy(p)}}function fe(t){var a=t.getSource();var n=[e.getView().getBindingContext().sPath+"/$value"];var r=C.oTransactionController.deleteEntities(n);var i=C.oApplication.getBusyHelper();r.then(function(){var e=ve(a);i.setBusy(e)});i.setBusy(r)}function ve(e){return new Promise(function(t){e.getModel().refresh();t()})}function pe(t,a){var n=P.getCustomDataFromEvent(t);var r=a?a.getSelectedContexts():[e.getView().getBindingContext()];if(n.ActionFor&&r.length===0){te(r.length)}else{var i=a?a.getEntitySet():e.getOwnerComponent().getEntitySet();P.triggerAction(r,i,n,a)}}function Ee(e,t){var a,n="";var i=P.getOwnerControl(e.getSource());i=r.isMTable(i)?i.getParent():i;var o=C.oPresentationControlHandlerFactory.getPresentationControlHandler(i).getSelectedContexts();if(r.isSmartTable(i)){a=i.getTable();n=i.getEntitySet()}else if(r.isSmartChart(i)){i.getChartAsync().then(function(e){a=e});n=i.getEntitySet()}var s=P.getCustomDataFromEvent(e);var l=Ce(o,s);var g=s.IsCopyAction==="true"?{ResultIsActiveEntity:true}:{};if(s.ActionFor&&l.inApplicableCount>0&&(r.isSmartTable(i)&&(a.getMode&&a.getMode()==="MultiSelect"||a.getSelectionMode&&a.getSelectionMode()==="MultiToggle"))){var c=P.getText("ST_GENERIC_WARNING_TEXT",[l.inApplicableCount]);l.warningText=c;var u={functionImportPath:s.Action,contexts:l.aApplicableContexts,sourceControl:a,label:s.Label,operationGrouping:s.InvocationGrouping,skipProperties:g,sEntitySet:n,oState:t};me(i).then(function(e){var t=e.getModel("Action");t.setData(u);var a=new sap.ui.model.json.JSONModel(l);e.setModel(a,"list");var n=e.getModel("list");n.setData(l);e.open()})}else{Te({functionImportPath:s.Action,contexts:o,sourceControl:a,label:s.Label,operationGrouping:s.InvocationGrouping,skipProperties:g},t,n)}}function me(e){return P.getDialogFragmentAsync("sap.suite.ui.generic.template.fragments.ActionConfirmation",{onCancel:function(e){var t=e.getSource().getParent();t.close()},onContinue:function(e){var t=e.getSource().getParent();var a=e.getSource().getParent().getModel("Action").getData();Te({functionImportPath:a.functionImportPath,contexts:a.contexts,sourceControl:a.sourceControl,label:a.label,operationGrouping:a.operationGrouping},a.oState,a.sEntitySet);t.close()}},"Action")}function Ce(t,a){var n,r,o,s,l;var g=e.getView().getModel();var c=g.getMetaModel();if(t&&t.length>0){o=t[0].sPath.substring(1,t[0].sPath.indexOf("("));s=c.getODataEntitySet(o)}if(s){var u=a.Action.split("/")[1];var d=[],f=[];var v={aInApplicableItems:undefined,inApplicableCount:0,dialogTitle:a.Label,warningText:undefined,aApplicableContexts:undefined};if(u){r=c.getODataFunctionImport(u)["sap:applicable-path"]}var p=e.getView().getModel("@i18n")&&e.getView().getModel("@i18n").getResourceBundle();var E=i.getAnnotationFormatter(g,o,"/com.sap.vocabularies.UI.v1.HeaderInfo/Title/Value",p);for(var m=0;m<t.length;m++){l=t[m];n=g.getObject(t[m].getPath());if(r&&n[r]===false||l.isTransient()){v.inApplicableCount++;d.push({sKey:E.format(l)})}else{f.push(l)}}E.done();v.aInApplicableItems=d;v.aApplicableContexts=f}return v}function Te(t,a,n){var r;C.oDataLossHandler.performIfNoDataLoss(function(){C.oCRUDManager.callAction({functionImportPath:t.functionImportPath,contexts:t.contexts,sourceControlHandler:C.oPresentationControlHandlerFactory.getPresentationControlHandler(P.getOwnerPresentationControl(t.sourceControl)),label:t.label,operationGrouping:t.operationGrouping,skipProperties:t.skipProperties},a).then(function(t){if(t&&t.length){for(var a=0;a<t.length;a++){r=t[a];if(r.response&&r.context&&(!r.actionContext||r.actionContext&&r.context.getPath()!==r.actionContext.getPath())){C.oApplication.getBusyHelper().getUnbusy().then(C.oViewDependencyHelper.setMeToDirty.bind(null,e.getOwnerComponent(),n));break}}}},Function.prototype)},Function.prototype,"Proceed")}function he(e){C.oApplication.setNextFocus(function(e,t){t({isCreate:true})});return e}function ye(e,t){C.oApplication.setNextFocus(function(){e.setFocusOnFirstEditableFieldInTableRow(t)})}function Pe(t,a,n,i,o,s){var l=P.getOwnerControl(t);l=r.isSmartTable(l)?l:l.getParent();var g=l.getEntitySet();var u=e.getOwnerComponent();var d=C.oApplication.getBusyHelper();if(t.data("CrossNavigation")){C.oApplication.getLeaveAppPromise().then(C.oViewDependencyHelper.setMeToDirty.bind(null,u,g));W(t,t.getBindingContext(),n,Object.create(null),true);return Promise.resolve()}var f=c.getNonDraftCreatePromise(g,i);if(f){var v=f.then(he);d.setBusy(v);return v}var p=function(e){var t=C.oCRUDManager.addEntry(l,e).then(function(e){if(s){return e}else if(!a){he();C.oApplication.navigateToSubContext(e,false,4);d.getUnbusy().then(function(){he();C.oViewDependencyHelper.setMeToDirty(u,g);d.setBusy(Promise.resolve())})}else if(!o){var t=C.oPresentationControlHandlerFactory.getPresentationControlHandler(l);var n=t.refresh();d.setBusy(n.then(function(){ye(t,e)}));C.oApplicationController.executeSideEffects(u.getBindingContext(),[],[l.getTableBindingPath()]);return e}});t.catch(Function.prototype);return t};if(i instanceof Promise){return i.then(p)}else{return p(i)}}function be(e){var t={batchGroupId:"Changes",changeSetId:"Changes",draftSave:true,noBlockUI:true,noShowResponse:true,onlyIfPending:true,pendingChanges:true,forceSubmit:true};if(c.isDraftEnabled()){var a=e.getSource().getBindingContext();e.getSource()._getComputedMetadata().then(function(e){C.oApplicationController.executeSideEffects(a,[],[e.navigationPath])})}C.oTransactionController.triggerSubmitChanges(t)}function Se(e){var t=b(e);var a=e.getParameter("listItem");var n=a.getBindingContext();xe(t,[n])}function Ie(e){var t=b(e);var a=C.oPresentationControlHandlerFactory.getPresentationControlHandler(t).getSelectedContexts();xe(t,a)}function xe(t,n){if(n.length>0){var r=M(n,t);var i=Promise.resolve(e.beforeDeleteExtension({aContexts:n}));i.then(function(e){var a=C.oApplication.getBusyHelper();a.setBusy(r);r.then(function(a){d(a.text,e);N(t).then(function(e){var t=e.getModel("delete");t.setData(a);e.open()})},Function.prototype)})}else{a.error(P.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:P.getContentDensityClass()})}}function De(e){var t=e.getSource();var a=t.getModel();var n=JSON.parse(e.getSource().data("contactDetails"));var r=a.getContext(e.getSource().getBindingContext().getPath());P.getDialogFragmentAsync("sap.suite.ui.generic.template.fragments.ContactDetails",{},"contact").then(function(e){var a=e.getModel("contact");var i;a.setProperty("/",{});a.setProperty("/device",sap.ui.Device);n.fn&&n.fn.Path?a.setProperty("/fn",r.getProperty(n.fn.Path)):a.setProperty("/fn",n.fn&&n.fn.String);n.title&&n.title.Path?a.setProperty("/title",r.getProperty(n.title.Path)):a.setProperty("/title",n.title&&n.title.String);n.photo&&n.photo.Path?a.setProperty("/photo",r.getProperty(n.photo.Path)):a.setProperty("/photo",n.photo&&n.photo.String);n.role&&n.role.Path?a.setProperty("/role",r.getProperty(n.role.Path)):a.setProperty("/role",n.role&&n.role.String);n.org&&n.org.Path?a.setProperty("/org",r.getProperty(n.org&&n.org.Path)):a.setProperty("/org",n.org&&n.org.String);if(n.email&&n.email[0]&&!a.getProperty("/email")){i=n.email[0].type&&n.email[0].type.EnumMember;if(i&&i.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/work")>-1){if(n.email[0].address&&n.email[0].address.Path){a.setProperty("/email",r.getProperty(n.email[0].address.Path))}else{a.setProperty("/email",n.email[0].address&&n.email[0].address.String)}}}if(n.adr&&n.adr[0]&&!a.getProperty("/adr")){i=n.adr[0].type&&n.adr[0].type.EnumMember;if(i&&i.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType")>-1){var o=_e(r,n);a.setProperty("/adr",o)}}var s=n.tel&&n.tel.length||0;for(var l=0;l<s;l++){if(n.tel[l]&&!a.getProperty("/fax")){i=n.tel[l].type&&n.tel[l].type.EnumMember;if(i&&i.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/fax")>-1){if(n.tel[l].uri&&n.tel[l].uri.Path){a.setProperty("/fax",r.getProperty(n.tel[l].uri.Path))}else{a.setProperty("/fax",n.tel[l].uri&&n.tel[l].uri.String)}continue}}if(n.tel[l]&&!a.getProperty("/cell")){i=n.tel[l].type&&n.tel[l].type.EnumMember;if(i&&i.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/cell")>-1){if(n.tel[l].uri&&n.tel[l].uri.Path){a.setProperty("/cell",r.getProperty(n.tel[l].uri.Path))}else{a.setProperty("/cell",n.tel[l].uri&&n.tel[l].uri.String)}continue}}if(n.tel[l]&&!a.getProperty("/work")){i=n.tel[l].type&&n.tel[l].type.EnumMember;if(i&&i.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/work")>-1){if(n.tel[l].uri&&n.tel[l].uri.Path){a.setProperty("/work",r.getProperty(n.tel[l].uri.Path))}else{a.setProperty("/work",n.tel[l].uri&&n.tel[l].uri.String)}continue}}}e.openBy(t)})}function _e(e,t){if(t.adr[0].label&&t.adr[0].label.Path){return e.getProperty(t.adr[0].label.Path)}else if(t.adr[0].label&&t.adr[0].label.String){return t.adr[0].label.String}else{var a="";if(t.adr[0].street&&t.adr[0].street.Path){a+=e.getProperty(t.adr[0].street.Path)+", "}else if(t.adr[0].street&&t.adr[0].street.String){a+=t.adr[0].street.String+", "}if(t.adr[0].code&&t.adr[0].code.Path){a+=e.getProperty(t.adr[0].code.Path)+", "}else if(t.adr[0].code&&t.adr[0].code.String){a+=t.adr[0].code.String+", "}if(t.adr[0].locality&&t.adr[0].locality.Path){a+=e.getProperty(t.adr[0].locality.Path)+", "}else if(t.adr[0].locality&&t.adr[0].locality.String){a+=t.adr[0].locality.String+", "}if(t.adr[0].region&&t.adr[0].region.Path){a+=e.getProperty(t.adr[0].region.Path)+", "}else if(t.adr[0].region&&t.adr[0].region.String){a+=t.adr[0].region.String+", "}if(t.adr[0].country&&t.adr[0].country.Path){a+=e.getProperty(t.adr[0].country.Path)+", "}else if(t.adr[0].country&&t.adr[0].country.String){a+=t.adr[0].country.String+", "}return a.slice(0,a.length-2)}}function Oe(t,a){var n=U(t,[],a);e.adaptNavigationParameterExtension(n,t);P.setComponentRefreshBehaviour(t);C.oApplication.navigateExternal(t.semanticObject,t.action,n.toJSONString(),null,I)}function Ae(e,t){var a=e.getSource();Ne(a,t)}function Ne(e,t){var a=e.data("LabelId");var n=t+"--"+a;var r=sap.ui.getCore().byId(n);if(r){r.attachFieldVisibilityChange(e)}}function Re(t,a,n,r,i){var o,s;if(t){if(a){o=[" ",t,a];var l=e.getOwnerComponent().getAppComponent().getConfig();var g=l.settings&&l.settings.flexibleColumnLayout?true:false;if(g){var c=e.getOwnerComponent().getModel("_templPrivGlobal");if(c.getProperty("/generic/FCL/isVisuallyFullScreen")){o.shift();if(n){s=i?P.getContextText("DELETE_SELECTED_ITEM_WITH_OBJECTTITLE",i.getId(),null,o):P.getText("DELETE_WITH_OBJECTTITLE",o)}else{s=r?P.getText("DELETE_SELECTED_ITEM_WITH_OBJECTTITLE",o):P.getText("DELETE_WITH_OBJECTTITLE",o)}}else{if(n){s=i?P.getContextText("DELETE_SELECTED_ITEM_WITH_OBJECTINFO",i.getId(),null,o):P.getText("DELETE_WITH_OBJECTINFO",o)}else{s=r?P.getText("DELETE_SELECTED_ITEM_WITH_OBJECTINFO",o):P.getText("DELETE_WITH_OBJECTINFO",o)}}}else{o.shift();if(n){s=i?P.getContextText("DELETE_SELECTED_ITEM_WITH_OBJECTTITLE",i.getId(),null,o):P.getText("DELETE_WITH_OBJECTTITLE",o)}else{s=r?P.getText("DELETE_SELECTED_ITEM_WITH_OBJECTTITLE",o):P.getText("DELETE_WITH_OBJECTTITLE",o)}}}else{o=[t];if(n){s=i?P.getContextText("DELETE_SELECTED_ITEM_WITH_OBJECTTITLE",i.getId(),null,o):P.getText("DELETE_WITH_OBJECTTITLE",o)}else{s=r?P.getText("DELETE_SELECTED_ITEM_WITH_OBJECTTITLE",o):P.getText("DELETE_WITH_OBJECTTITLE",o)}}}else{if(n){s=i?P.getContextText("DELETE_SELECTED_ITEM",i.getId()):P.getText("ST_GENERIC_DELETE_SELECTED")}else{s=r?P.getText("DELETE_SELECTED_ITEM"):P.getText("ST_GENERIC_DELETE_SELECTED")}}return s}var U=o.testable(U,"fnBuildSelectionVariantForNavigation");var S=o.testable(S,"fnEvaluateParameters");var V=o.testable(V,"fnNavigateIntent");var j=o.testable(j,"fnHideTitleArea");var w=o.testable(w,"fnGetSelectedItemContextForDeleteMessage");var M=o.testable(M,"getDataForDeleteDialog");var k=o.testable(k,"CommonEventHandlers_fnNavigateIntentSmartLink");return{onDataReceived:X,onBeforeRebindTable:$,onListNavigate:ee,onEditNavigateIntent:W,onRelatedAppNavigation:Oe,onDataFieldWithNavigationPath:ae,onDataFieldForIntentBasedNavigation:ne,onDeterminingDataFieldForIntentBasedNavigation:oe,onDeterminingDataFieldForAction:pe,onInlineDataFieldForIntentBasedNavigation:se,onDataFieldWithIntentBasedNavigation:re,onInlineDataFieldForAction:le,onMultiSelectionChange:O,onCallActionFromToolBar:Ee,addEntry:Pe,deleteEntry:Se,deleteEntries:Ie,onContactDetails:De,onSmartFieldInitialise:Ae,onSmartLabelAttachFieldVisibility:Ne,onSemanticObjectLinkNavigationTargetObtained:K,onSemanticObjectLinkNavigationPressed:J,onBeforeSemanticObjectLinkNavigationCallback:q,submitChangesForSmartMultiInput:be,getSelectedItemContextForDeleteMessage:w,getDeleteText:Re,uploadStream:ue,removeStream:fe,handleUploadComplete:de,evaluateParameters:S}}return e.extend("sap.suite.ui.generic.template.lib.CommonEventHandlers",{constructor:function(e,t,a,n){d(this,P(e,t,a,n))}})});
//# sourceMappingURL=CommonEventHandlers.js.map