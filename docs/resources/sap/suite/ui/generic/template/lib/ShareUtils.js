sap.ui.define(["sap/base/util/ObjectPath","sap/base/util/extend","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/ushell/ui/footerbar/AddBookmarkButton","sap/suite/ui/commons/collaboration/ServiceContainer","sap/ui/core/CustomData","sap/ui/performance/trace/FESRHelper"],function(e,t,a,n,i,s,r){"use strict";var o={};var u;function c(){var e=sap.ushell&&sap.ushell.Container;return e?new Promise(function(t){e.getFLPUrlAsync(true).done(function(e){t(e)})}):Promise.resolve(document.URL)}o.getCurrentUrl=c;o.setStaticShareData=function(t,a){var n=sap.ui.getCore().getLibraryResourceBundle("sap.m");a.setProperty("/emailButtonText",n.getText("SEMANTIC_CONTROL_SEND_EMAIL"));a.setProperty("/jamButtonText",n.getText("SEMANTIC_CONTROL_SHARE_IN_JAM"));var i=e.get("sap.ushell.Container.getUser");a.setProperty("/jamVisible",!!i&&i().isJamActive())};o.openJamShareDialog=function(e){c().then(function(t){var a=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:t,share:e}}});a.open()})};o.openSharePopup=function(e,t,a){var c;a.onCancelPressed=function(){c.close()};e.getDialogFragmentAsync("sap.suite.ui.generic.template.fragments.ShareSheet",a,"share",o.setStaticShareData,true).then(function(e){c=e;var o=c.getModel("share");a.getModelData().then(function(e){o.setData(e,true);var a=2;if(!o.getData().jamVisible){a=1}i.getServiceAsync().then(function(e){var i=e.getOptions();if(i.length>0){i.forEach(function(e){if(e.subOptions&&e.subOptions.length>1){var t=[];e.subOptions.forEach(function(e){var a=new sap.m.MenuItem({text:e.text,icon:e.icon,press:this.menuItemPress});a.addCustomData(new s({key:"data",value:e}));r.setSemanticStepname(a,"press",e.fesrStepName);t.push(a)}.bind(this));c.insertItem(new sap.m.MenuItem({text:e.text,icon:e.icon,items:t}),a)}else{var n=new sap.m.MenuItem({text:e.text,icon:e.icon,press:this.menuItemPress});n.addCustomData(new s({key:"data",value:e}));r.setSemanticStepname(n,"press",e.fesrStepName);c.insertItem(n,a)}a++}.bind(this))}u=new n("",{customUrl:o.getData().customUrl,serviceUrl:o.getData().serviceUrl,title:o.getData().title,subtitle:o.getData().subtitle,tileIcon:o.getData().icon});o.setProperty("/tileVisible",u.getEnabled());o.setProperty("/tileIcon",u.getIcon());o.setProperty("/tileText",u.getText());c.openBy(t)}.bind(this))}.bind(this))}.bind(this))};o.menuItemPress=function(){i.getServiceAsync().then(function(e){var t=this.getModel("share");var a="",n="";if(t.getData().subtitle!==undefined){a=t.getData().appTitle;n=t.getData().title+(t.getData().subtitle.length>0?" - "+t.getData().subtitle:"")}else{a=t.getData().title}var i={url:t.getData().currentUrl,appTitle:a,subTitle:n,minifyUrlForChat:true};e.share(this.getCustomData()[0].getValue(),i)}.bind(this))};o.fireBookMarkPress=function(){u.firePress()};o.getCustomUrl=function(){if(!window.hasher){sap.ui.require("sap/ui/thirdparty/hasher")}var e=window.hasher.getHash();return e?"#"+e:window.location.href};o.openMSTeamsShareDialog=function(e,t){var a=window.open("","ms-teams-share-popup","width=700,height=600");a.opener=null;a.location="https://teams.microsoft.com/share?msgText="+encodeURIComponent(e)+"&href="+encodeURIComponent(t)};return o});
//# sourceMappingURL=ShareUtils.js.map