sap.ui.define(["sap/ui/model/odata/AnnotationHelper","sap/suite/ui/generic/template/js/AnnotationHelper"],function(e,t){"use strict";var r={checkIfEntityOrAssociationHasStreamEnabled:function(e,t,r){if(r.Value&&r.Value.Path){var a=r.Value.Path;var i=e.getModel(0);var o;var n;if(a.endsWith("$value")){var l=a.split("/");var s=l.length;if(s>1){for(var u=0;u<s-1;u++){var p=l[u];n=i.getODataEntityType(t.entityType);var o=i.getODataAssociationEnd(n,p);n=i.getODataEntityType(o&&o.type)}}else{var i=e.getModel(0);n=i.getODataEntityType(t.entityType)}}return n&&n.hasStream==="true"}},getStreamEntitySet:function(e){if(e.Value&&e.Value.Path){var t=e.Value.Path;if(t.endsWith("$value")){var r=t.split("/");var a=r.length;var i=r[a-2];return i}}},getLinkTextForStream:function(e,t){var a=r.getStreamEntitySet(t);return a?"{= ${_templPriv>/generic/controlProperties/fileUploader/"+a+"/fileName}}":"{= ${_templPriv>/generic/controlProperties/fileUploader/"+e.name+"/fileName}}"},getURLForStream:function(e,t){var a=r.getStreamEntitySet(t);return a?"{= ${_templPriv>/generic/controlProperties/fileUploader/"+a+"/url}}":"{= ${_templPriv>/generic/controlProperties/fileUploader/"+e.name+"/url}}"},isStreamPresent:function(e,t,r,a){var i=a&&e.getModel(0).getODataEntityType(a.entityType);var o=i&&i["com.sap.vocabularies.Common.v1.FieldControl"]&&i["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(r.value==="available"){return o?"{= ${"+t+'} !== "" && ${'+o+'} >= "1"}':"{= ${"+t+'} !== ""}'}else{return o?"{= ${"+t+'} === "" && ${'+o+'} >= "1"}':"{= ${"+t+'} === ""}'}},getIconForStreamForTableCells:function(e,t){return"{parts: [{path: '__metadata/content_type'}], formatter: 'sap.ui.core.IconPool.getIconForMimeType'}"},getIconForStream:function(e,t){var a=r.getStreamEntitySet(t);return a?"{= ${_templPriv>/generic/controlProperties/fileUploader/"+a+"/icon}}":"{= ${_templPriv>/generic/controlProperties/fileUploader/"+e.name+"/icon}}"},isMimeTypeImage:function(e,t,r,a){var i=a&&e.getModel(0).getODataEntityType(a.entityType);var o=i&&i["com.sap.vocabularies.Common.v1.FieldControl"]&&i["com.sap.vocabularies.Common.v1.FieldControl"].Path;var n=false;if(i&&i["com.sap.vocabularies.UI.v1.IsImage"]){if(i["com.sap.vocabularies.UI.v1.IsImage"].Bool){n=i["com.sap.vocabularies.UI.v1.IsImage"].Bool}else if(i["com.sap.vocabularies.UI.v1.IsImage"].Path){n=i["com.sap.vocabularies.UI.v1.IsImage"].Path}else{n=true}}if(r.value==="image"){if(typeof n==="boolean"&&n){return o?"{= ${"+t+'} !== ""  && ${'+o+'} >= "1"}':"{= ${"+t+'} !== "" }'}else if(typeof n==="string"){return o?"{= ${"+t+'} !== ""  && ${'+o+'} >= "1" && ${'+n+"}}":"{= ${"+t+'} !== "" && ${'+n+"}}"}return false}else{if(typeof n==="boolean"&&n){return false}else if(typeof n==="string"){return o?"{= ${"+o+'} >= "1" && !${'+n+"}}":"{= !${"+n+"}}"}return true}},getFileName:function(e,t){var r=e.getModel(0).getODataEntityType(t.entityType);var a=r["Org.OData.Core.V1.ContentDisposition"];if(a){return"{"+a.Filename.Path+"}"}return"{i18n>ST_STREAM_OPEN_FILE}"},getAcceptableMimeTypes:function(e,t){var r=e.getModel(0).getODataEntityType(t.entityType);var a=r["Org.OData.Core.V1.AcceptableMediaTypes"];var i=new String;for(var o=0;o<a.length;o++){i=i.concat(a[o].String).concat(",")}return i.slice(0,-1)},getDeleteStreamVisibility:function(e,t,r,a){var i=a&&e.getModel(0).getODataEntityType(a.entityType);var o=i&&i["com.sap.vocabularies.Common.v1.FieldControl"]&&i["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(r){return o?"{= ${"+t+'} !== "" && ${ui>/editable} && ${'+o+'} > "1"}':"{= ${"+t+'} !== "" && ${ui>/editable}}'}else{return o?"{= ${"+t+'} !== "" && !${ui>/editable} && ${'+o+'} > "1"}':"{= ${"+t+'} !== "" && !${ui>/editable}}'}},getFileUploaderVisibility:function(e,r,a){var i=a&&e.getModel(1).getODataEntityType(a.entityType);var o=i&&i["com.sap.vocabularies.Common.v1.FieldControl"]&&i["com.sap.vocabularies.Common.v1.FieldControl"].Path;var n=t.getUpdateRestrictions(a);if(r){return o?"{= ${ui>/editable} && ${"+o+'} > "1"}':"{= ${ui>/editable}}"}else{if(typeof n==="boolean"){if(n){return o?"{= !${ui>/editable} && ${"+o+'} > "1"}':"{= !${ui>/editable}}"}else{return false}}else if(typeof n==="string"){if(typeof o==="string"){return"{= !${ui>/editable} && ${"+o+'} > "1" && ${'+n+"}}"}return"{= !${ui>/editable} && ${"+n+"}}"}}}};r.checkIfEntityOrAssociationHasStreamEnabled.requiresIContext=true;r.getFileName.requiresIContext=true;r.getAcceptableMimeTypes.requiresIContext=true;r.getFileUploaderVisibility.requiresIContext=true;r.isStreamPresent.requiresIContext=true;r.getDeleteStreamVisibility.requiresIContext=true;r.isMimeTypeImage.requiresIContext=true;return r},true);
//# sourceMappingURL=AnnotationHelperStreamSupport.js.map