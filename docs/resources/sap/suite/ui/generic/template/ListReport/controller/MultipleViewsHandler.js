sap.ui.define(["sap/ui/base/Object","sap/suite/ui/generic/template/js/StableIdHelper","sap/suite/ui/generic/template/lib/multipleViews/MultipleViewsHandler","sap/base/util/extend","sap/suite/ui/generic/template/genericUtilities/FeError"],function(e,t,n,r,i){"use strict";var a="ListReport.controller.MultipleViewsHandler";function o(e,r,o){var l;var u;var s;var c;var d;function f(){if(!l){return}l.updateCounts()}function p(e,t){if(!l){return}l.onRebindContentControl(e,t)}function g(e,t){if(!l){return null}return l.resolveParameterizedEntitySet(e,t)}function S(e,t){return l?l.formatMessageStrip(e,t):""}function b(e){if(!l){return r.getOwnerComponent().getEntitySet()===e}return l.hasEntitySet(e)}function y(e){return l?l.getPreferredKey(e):""}function m(e){return l&&l.formatItemTextForMultipleView(e)}function C(){return l&&l.getSFBVariantContentStateWrapper()}function v(){return l&&l.getGeneralContentStateWrapper()}function h(){return l&&l.determineSortOrder()}function V(e,t,n){if(!l){return false}l.refreshOperation(e,t,n);return true}function I(){return!!(u&&u.enableAutoBinding)}function P(){return d}function k(e,t){if(!l){return}l.setControlVariant(e,t)}function T(e){if(!l){return}if(e.selectedQuickVariantSelectionKey){l.setSelectedKey(e.selectedQuickVariantSelectionKey)}}function w(){if(!c){return null}return c==="single"?"tableViewData":"tableTabData"}function H(){if(!c){return null}return l.getSelectedKey()}function K(e){return l.setSelectedKey(e)}function B(t){var n=t.getParameter("itemContexts")&&t.getParameter("itemContexts")[0];o.oCommonEventHandlers.onListNavigate(t,e,n)}function D(){if(c==="multi"){var n=l.getSelectedKey();e.oPresentationControlHandler=o.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(r.byId(t.getStableId({type:"ListReportTable",subType:"SmartTable",sQuickVariantKey:n})));e.oWorklistData.oSearchField=r.byId(t.getStableId({type:"ListReportAction",subType:"SearchField",sQuickVariantKey:n}))}}function E(e){if(c==="multi"){l.refreshSiblingControls(e)}}function F(){return l&&l.getMode()}function M(e){return o.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(r.byId(t.getStableId({type:"ListReportTable",subType:"SmartTable",sQuickVariantKey:e})))}function R(){if(!u){return null}var t=Object.create(null);var n=c==="single"&&function(){return e.oPresentationControlHandler};for(var r in u.variants){var i=u.variants[r].key||r;t[i]=n||M.bind(null,i)}return t}function W(e){if(l){l.registerKeyChange(e)}}function O(){if(!s){s=new Promise(function(e){var n;if(c==="multi"){var i=t.getStableId({type:"QuickVariantSelectionX",subType:"IconTabBar"});n=r.byId(i)}else{var a=t.getStableId({type:"QuickVariantSelection",subType:"SegmentedButton"});var o=t.getStableId({type:"QuickVariantSelection",subType:"VariantSelect"});n=r.byId(a)||r.byId(o)}e(n)})}return s}function Q(){return l?l.getInitializationPromise():Promise.resolve()}(function(){var t=o.oComponentUtils.getSettings();var s=t.quickVariantSelectionX;var f=t.quickVariantSelection;if(s&&f){throw new i(a,"Defining both QuickVariantSelection and QuickVariantSelectionX in the manifest is not allowed.")}u=s||f;if(s){d=s.enableAutoBinding;if(d===null||d===undefined){s.enableAutoBinding=true}}if(!u){return}c=s?"multi":"single";var p={mode:c,manifestSettings:u,pathInTemplatePrivateModel:"/listReport/multipleViews",presentationControlHandler:f&&e.oPresentationControlHandler,getPresentationControlHandler:s&&M,getSwitchingControlAsync:O,smartFilterBar:e.oSmartFilterbar,getSearchValue:function(){return e.oSmartFilterbar.getBasicSearchValue()},appStateChange:function(){if(l){var t=e.oIappStateHandler.areDataShownInTable()||e.oWorklistData.bWorkListEnabled;e.oIappStateHandler.changeIappState(t)}},isDataToBeShown:function(){return e.oIappStateHandler.areDataShownInTable()||e.oWorklistData.bWorkListEnabled},adaptRefreshRequestMode:function(t){return t+(e.oWorklistData.bWorkListEnabled&&t<2?2:0)},refreshModelOnTableRefresh:true,adaptPresentationControl:D};l=new n(r,o,p);O().then(D)})();return{onDataRequested:f,refreshOperation:V,onRebindContentControl:p,formatMessageStrip:S,getSFBVariantContentStateWrapper:C,getGeneralContentStateWrapper:v,formatItemTextForMultipleView:m,getEnableAutoBinding:I,getOriginalEnableAutoBinding:P,determineSortOrder:h,setControlVariant:k,handleStartUpObject:T,onDetailsActionPress:B,getSelectedKeyPropertyName:w,getSelectedKey:H,setSelectedKey:K,hasEntitySet:b,getPreferredKey:y,refreshSiblingControls:E,resolveParameterizedEntitySet:g,getMode:F,getKeyToPresentationControlHandler:R,registerKeyChange:W,getInitializationPromise:Q}}return e.extend("sap.suite.ui.generic.template.ListReport.controller.MultipleViewsHandler",{constructor:function(e,t,n){r(this,o(e,t,n))}})});
//# sourceMappingURL=MultipleViewsHandler.js.map