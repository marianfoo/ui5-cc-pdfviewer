sap.ui.define(["sap/ui/model/odata/AnnotationHelper","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/suite/ui/generic/template/js/AnnotationHelper"],function(t,a,e){"use strict";function r(t,a){var e="",r="",i="",o=t.length;if(o>1){e="{parts:[";for(var n=0;n<o;n++){if(t[n].Path){r="path";i=t[n].Path}else if(t[n].String){r="value";i=t[n].String}e+="{"+r+": '"+i+"'}"+(n===o-1?"]":", ")}}else{if(t[0].Path){r="path";i=t[0].Path}else if(t[0].String){r="value";i=t[0].String}e="{"+r+": '"+i+"'"+(t[0].type?", type: '"+t[0].type+"'":"")}e+=(a?", formatter: '"+a+"'":"")+"}";return e}function i(t){var a="",e=t["Org.OData.Measures.V1.Unit"];if(e){a+=" "+r([e])}return a}r=a.testableStatic(r,"AnnotationHelperSmartList_generatePathForField");i=a.testableStatic(i,"AnnotationHelperSmartList_appendUnitOfMeasure");var o={formatDataPointOrField:function(a,e){if(!e||!e.Value){return""}var o="",n;var s=a.getModel();var l=s.getProperty("/metaModel");var d=l.getODataEntityType(s.getProperty("/entityType"));var u=l.getODataProperty(d,e.Value.Path);var c=[],p=u["Org.OData.Measures.V1.ISOCurrency"];if(u["type"]==="Edm.DateTime"||u["type"]==="Edm.DateTimeOffset"){var f=e.Value;f.type="sap.ui.model.type.DateTime";c.push(f);n="sap.ui.core.format.DateFormat.format";o=r(c,n)}else if(p){c.push(e.Value);c.push(p);n="sap.ui.core.format.NumberFormat.format";o=r(c,n)}else{o=t.format(a,e.Value)}return o+i(u)},getSortedDataPointsAndFields:function(a,r,i,o){function n(t){var a,e;if(t["com.sap.vocabularies.UI.v1.Importance"]){a=t["com.sap.vocabularies.UI.v1.Importance"].EnumMember;switch(a){case"com.sap.vocabularies.UI.v1.ImportanceType/High":e=1;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":e=2;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Low":e=3;break}}else{e=2}return e}function s(t){t.sort(function(t,a){var e=n(t);var r=n(a);return e<r?-1:1})}function l(a){var e=a.filter(function(t){return t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&t.Target.AnnotationPath.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)});s(e);var o=i.getContext(r).getObject();for(var n=0;n<e.length;n++){var l=i.getContext(r+"/"+o.indexOf(e[n])+"/Target");e[n]=i.getProperty(t.resolvePath(l))}return e}function d(t){return e.isImageUrl(c.filter(function(a){return a.name===t.Value.Path})[0])}var u=l(a);var c=i.getODataEntityType(o).property;var p=a.filter(function(t){return t.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&!d(t)});s(p);var f=a.filter(function(t){return t.RecordType==="com.sap.vocabularies.UI.v1.DataField"?d(t):false})[0];return{dataFields:p,dataPoints:u,imageDataField:f}},getObjectListProperty:function(t,a){var r=a.dataPoints.length,i,n,s,l,d;switch(true){case r>2:i=o.formatDataPointOrField(t,a.dataFields[2]);n=o.formatDataPointOrField(t,a.dataPoints[1]);l=o.formatDataPointOrField(t,a.dataPoints[2]);s=e.buildExpressionForProgressIndicatorCriticality(t,a.dataPoints[1]);d=e.buildExpressionForProgressIndicatorCriticality(t,a.dataPoints[2]);break;case r>1:i=o.formatDataPointOrField(t,a.dataFields[2]);n=o.formatDataPointOrField(t,a.dataPoints[1]);s=e.buildExpressionForProgressIndicatorCriticality(t,a.dataPoints[1]);l=o.formatDataPointOrField(t,a.dataFields[3]);d=e.buildExpressionForProgressIndicatorCriticality(t,a.dataFields[3]);break;case r>0:i=o.formatDataPointOrField(t,a.dataFields[3]);n=o.formatDataPointOrField(t,a.dataFields[2]);s=e.buildExpressionForProgressIndicatorCriticality(t,a.dataFields[2]);l=o.formatDataPointOrField(t,a.dataFields[4]);d=e.buildExpressionForProgressIndicatorCriticality(t,a.dataFields[4]);break;default:i=o.formatDataPointOrField(t,a.dataFields[4]);n=o.formatDataPointOrField(t,a.dataFields[3]);s=e.buildExpressionForProgressIndicatorCriticality(t,a.dataFields[3]);l=o.formatDataPointOrField(t,a.dataFields[5]);d=e.buildExpressionForProgressIndicatorCriticality(t,a.dataFields[5]);break}return{title:o.formatDataPointOrField(t,a.dataFields[0]),number:a.dataPoints.length>0?o.formatDataPointOrField(t,a.dataPoints[0]):o.formatDataPointOrField(t,a.dataFields[2]),numberState:a.dataPoints.length>0?e.buildExpressionForProgressIndicatorCriticality(t,a.dataPoints[0]):e.buildExpressionForProgressIndicatorCriticality(t,a.dataFields[2]),firstAttribute:o.formatDataPointOrField(t,a.dataFields[1]),secondAttribute:i,firstStatus:n,firstStatusState:s,secondStatus:l,secondStatusState:d}}};o.formatDataPointOrField.requiresIContext=true;o.getObjectListProperty.requiresIContext=true;return o},true);
//# sourceMappingURL=AnnotationHelperSmartList.js.map