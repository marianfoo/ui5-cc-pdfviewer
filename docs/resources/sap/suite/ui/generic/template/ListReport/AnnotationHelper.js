sap.ui.define(["sap/suite/ui/generic/template/js/AnnotationHelper"],function(t){"use strict";var e={resolveMetaModelPath:function(t){var e=t.getObject();var a=t.getModel();var n=a.getProperty("/metaModel");return n.createBindingContext(e)},createWorkingContext:function(t){var a=t.getObject(),n=a.settings,i=t.getModel(),r=i.getProperty("/metaModel"),o=r.getODataEntitySet(a.entitySet),s=r.getODataEntityType(o.entityType),l="",c={};var u=e.getRelevantPresentationVariantPath(s,n.annotationPath);l=s.$path+"/"+u;c.presentationVariantQualifier=l.split("#")[1]||"";c.presentationVariant=r.getObject(l);c.presentationVariantPath=l;if(c.presentationVariant&&c.presentationVariant.Visualizations){c.presentationVariant.Visualizations.forEach(function(t){var e="/"+t.AnnotationPath.slice(1);if(e.indexOf("com.sap.vocabularies.UI.v1.LineItem")>-1){l=s.$path+e;c.lineItem=r.getObject(l);c.lineItemPath=l;c.lineItemQualifier=l.split("#")[1]||""}})}if(!c.lineItem){l=s.$path+"/com.sap.vocabularies.UI.v1.LineItem";c.lineItem=r.getObject(l);c.lineItemPath=l;c.lineItemQualifier=""}c.tableChartTabs=[];var f,g,p,v,h;g=a&&a.manifest&&a.manifest["sap.ui.generic.app"]&&a.manifest["sap.ui.generic.app"].pages&&a.manifest["sap.ui.generic.app"].pages[0].component&&a.manifest["sap.ui.generic.app"].pages[0].component.settings&&a.manifest["sap.ui.generic.app"].pages[0].component.settings.quickVariantSelectionX&&a.manifest["sap.ui.generic.app"].pages[0].component.settings.quickVariantSelectionX.variants;for(p in g){h={};f="";v={};v.key=g[p].key;v.variantAnnotationPath=g[p].annotationPath;v.variantQualifier=v.variantAnnotationPath.split("#")[1]||"";if(!!g[p].entitySet){v.entitySet=g[p].entitySet;o=r.getODataEntitySet(v.entitySet);if(o){s=r.getODataEntityType(o.entityType)}else{continue}}h=s[v.variantAnnotationPath];if(h&&h.PresentationVariant){var P;if(h.PresentationVariant.Path){var m=h.PresentationVariant.Path.split("@")[1];P=m&&s[m];v.presentationVariantQualifier=m.split("#")[1]||""}else{P=h.PresentationVariant}f=P.Visualizations&&P.Visualizations[0].AnnotationPath}else if(h&&h.Visualizations){f=h.Visualizations[0].AnnotationPath}if(f){var y="/"+f.slice(1);if(f.indexOf("com.sap.vocabularies.UI.v1.Chart")>-1){v.smartControl="chart";v.chartAbsolutePath=s.$path+y}else if(f.indexOf("com.sap.vocabularies.UI.v1.LineItem")>-1){v.smartControl="table";l=s.$path+y;v.lineItem=r.getObject(l);v.lineItemPath=l;v.lineItemQualifier=l.split("#")[1]||""}}if(!(v.chartAbsolutePath||v.lineItemPath)){l=s.$path+"/com.sap.vocabularies.UI.v1.LineItem";v.lineItem=r.getObject(l);v.lineItemPath=l;v.lineItemQualifier=""}v.controlQualifier=f&&f.split("#")[1]||"";c.tableChartTabs.push(v)}i.setProperty("/workingContext",c);return"/workingContext"},getRelevantPresentationVariantPath:function(t,e){var a="com.sap.vocabularies.UI.v1.PresentationVariant";if(e&&e.indexOf("com.sap.vocabularies.UI.v1.SelectionPresentationVariant")>-1){var n=t[e]&&(t[e].PresentationVariant.Path||t[e].PresentationVariant.AnnotationPath);a=n?n.split("@")[1]:"com.sap.vocabularies.UI.v1.PresentationVariant"}else if(e&&e.indexOf("com.sap.vocabularies.UI.v1.PresentationVariant")>-1){a=e}return a},getValidPresentationVariantForSingleView:function(a,n){var i=e.getRelevantPresentationVariantPath(a,n);var r=a[i];var o=t.getPresentationVariant(r,a);return o},checkIfChartQualifier:function(t,a){return!!e.getChartQualifier(t,a)},getChartQualifier:function(t,e){var a,n,i;for(n in t.tableChartTabs){i=t.tableChartTabs[n].key;if(i===e.key){a=t.tableChartTabs[n].controlQualifier;break}}return a},getPresentationVariantQualifier:function(t,e){var a,n,i;for(n in t.tableChartTabs){i=t.tableChartTabs[n].key;if(i===e.key){a=t.tableChartTabs[n].variantQualifier;break}}return a},getChartAnnotationPath:function(t){var e,a,n,i,r,o,e,s,l;a=t.getModel();var c=a.getProperty("/metaModel");n=a.getObject(t.sPath);r=a.getData("workingContext")["workingContext"].tableChartTabs;for(i in r){o=r[i].variantAnnotationPath;if(o===n.annotationPath){e=r[i].chartAbsolutePath;s=e+"/Actions";l=c.createBindingContext(s);return l}}},checkIfChartNavigationIsEnabled:function(t,a,n,i){var r=t.showItemNavigationOnChart;if(!r){return false}n=!!t.entitySet?t.entitySet:n;for(var o=0;o<a.length;o++){if(a[o].entitySet===n&&a[o].navigation&&a[o].navigation["display"]){return true}}if(!e.checkIfDiffEntitySetsMode(i)&&a&&a[0]&&a[0].entitySet===n&&(!a[0].navigation||a[0].navigation&&!a[0].navigation["display"])){return true}return false},checkIfDiffEntitySetsMode:function(t){var e;var a=t&&t.variants;for(e in a){if(a[e].entitySet){return true}}},setSizeCondensedCssClass:function(t){var e="sapUiSizeCompact",a="sapUiSizeCondensed",n;if(!t){return}n=document.body;if(n.classList.contains(e)){return a}},getEntityType:function(t){var e,a,n,i,r,o,s,l;e=t.getModel();a=e.getData();n=t.getObject();i=n&&n.entitySet;r=a.metaModel;if(!!i){o=r.getODataEntitySet(i);s=o&&o.entityType}else{s=a.entityType}l=r.createBindingContext(r.getODataEntityType(s,true));return l},getEntitySet:function(t){var e,a,n,i,r,o;e=t.getModel();a=e.getData();n=t.getObject();i=n&&n.entitySet;r=a.metaModel;if(!i){i=a.entitySet}o=r.createBindingContext(r.getODataEntitySet(i,true));return o},getTableAnnotationPath:function(t){var e,a,n,i,r,o,e;a=t.getModel();var s=a.getData();var l=s.metaModel;n=a.getObject(t.sPath);i=a.getData("workingContext")["workingContext"];o=i.tableChartTabs;for(r in o){if(o[r].key===n.key){e=o[r].lineItemPath;var c=l.createBindingContext(e);return c}}}};return e},true);
//# sourceMappingURL=AnnotationHelper.js.map