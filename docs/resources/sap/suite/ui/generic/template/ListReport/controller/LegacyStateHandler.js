sap.ui.define(["sap/ui/base/Object","sap/base/util/deepExtend","sap/base/util/extend","sap/base/util/Version","sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/genericUtilities/testableHelper"],function(t,e,a,r,o,i){"use strict";var n="sap.suite.ui.generic.template.customData",s="sap.suite.ui.generic.template.extensionData",c="sap.suite.ui.generic.template.genericData";function u(t){if(t.version){var e=r(t.version);if(e.getSuffix()){return e.getPatch()?r(e.getMajor(),e.getMinor(),e.getPatch()-1):r(e.getMajor(),e.getMinor()-1)}return t.version}if(t.customData&&t.customData[c]&&t.customData[c].variantDirty!==undefined){return"1.86.0"}if(t.customData&&t.customData[c]&&t.customData[c].activeStateFilter){return"1.60.1"}if(t.customData&&t.customData[s]){return"1.58.0"}if(t.customData&&t.customData[c]&&(t.customData[c].visibleCustomFields||t.customData[c].suppressDataSelection!==undefined)){return"1.44.7"}if(t.customData&&t.customData[n]&&t.customData[c]){return"1.36.0"}return"1.28.0"}function l(t,e){return r(e).compareTo(u(t))<0}function m(t){function r(t){if(l(t,"1.34.0")){return t}var e={};e[n]=t.customData||{};e[c]={};if(t.customData&&t.customData._editStateFilter){e[c].editStateFilter=t.customData._editStateFilter}delete e[n]._editStateFilter;t.customData=e;return t}function u(t){if(l(t,"1.44.6")){return t}t.customData[c].visibleCustomFields=[];return t}function m(t){if(l(t,"1.60.0")){return t}t.customData[c].activeStateFilter=false;return t}function D(t){if(l(t,"1.85.0")){return t}t.customData[c].variantDirty=true;return t}function p(a){if(l(a,"1.89.0")){return a}e(a,{version:"1.90.0",controlStates:{}});if(a.tableVariantId){a.controlStates[t.getView().getId()+"--listReport"]={sVariantId:a.tableVariantId};delete a.tableVariantId}return a}function d(a){if(l(a,"1.93.0")){return a}e(a,{version:"1.94.0",controlStates:{}});var r=t.getView();for(var i in a.controlStates){var n=r.getLocalId(i);if(n){a.controlStates[n]=a.controlStates[i];delete a.controlStates[i]}}a.controlStates["template::PageVariant"]=a.controlStates["template::PageVariant"]||{variantId:new o(a.selectionVariant).getID(),modified:a.customData[c].variantDirty};delete a.customData[c].variantDirty;return a}function f(t){if(l(t,"1.94.0")){return t}e(t,{version:"1.95.0"});if(t.customData[c].Worklist){if(t.customData[c].tableTabData){a(t.customData[c].tableTabData,{controlStates:{}});t.customData[c].tableTabData.controlStates["Table::Toolbar::SearchField-"+t.customData[c].tableTabData.selectedTab]={searchString:t.customData[c].Worklist.searchString}}else{e(t,{controlStates:{}});t.controlStates["Table::Toolbar::SearchField"]={searchString:t.customData[c].Worklist.searchString}}delete t.customData[c].Worklist}return t}function S(t){if(l(t,"1.97.0")){return t}e(t,{version:"1.98.0"});if(t.customData[c].editStateFilter==="0"&&t.customData[c].activeStateFilter){t.customData[c].editStateFilter="5"}return t}function b(t){if(l(t,"1.98.0")){return t}e(t,{version:"1.99.0"});if(t.controlStates&&t.controlStates["template::PageVariant"]){t.controlStates["template::PageVariant"].managedControlStates={listReport:t.controlStates.listReport}}return t}function g(t){if(l(t,"1.99.0")){return t}e(t,{version:"1.100.0"});var a=t.selectionVariant&&typeof t.selectionVariant==="string"?JSON.parse(t.selectionVariant):t.selectionVariant;if(t.controlStates&&t.controlStates["template::PageVariant"]){t.controlStates["template::PageVariant"].managedControlStates.listReportFilter=t.controlStates["template::PageVariant"].managedControlStates.listReportFilter||{selectOptions:a&&a.SelectOptions,parameters:a&&a.Parameters,semanticDates:t.semanticDates,addedFilterItems:t.customData["sap.suite.ui.generic.template.genericData"].visibleCustomFields,removedFilterItems:[]}}delete t.selectionVariant;delete t.semanticDates;return t}function F(t){if(l(t,"1.101.0")){return t}e(t,{version:"1.102.0"});delete t.customData[c].activeStateFilter;if(t.customData[c].tableTabData){delete t.customData[c].tableTabData.mEditButtonState}return t}function v(t){if(l(t,"1.102.0")){return t}e(t,{version:"1.103.0"});t.controlStates["template::PageVariant"].managedControlStates.listReportFilter.customFilters=a(t.controlStates["template::PageVariant"].managedControlStates.listReportFilter.customFilters,{editState:t.customData&&t.customData[c].editStateFilter,appExtension:t.customData&&t.customData[n],adaptationExtensions:t.customData&&t.customData[s]});var r=t.customData&&t.customData[c].tableTabData;var o=t.customData&&t.customData[c].suppressDataSelection;delete t.customData;if(r||o!==undefined){t.customData=Object.create(null);t.customData[c]={tableTabData:r,suppressDataSelection:o}}return t}function V(t){if(l(t,"1.104.0")){return t}e(t,{version:"1.105.0"});if(t.controlStates["$dataLoaded"]===undefined){t.controlStates["$dataLoaded"]=!(t.customData&&t.customData[c].suppressDataSelection)}var a=t.customData&&t.customData[c].tableTabData;delete t.customData;if(a){t.customData=Object.create(null);t.customData[c]={tableTabData:a}}return t}function _(t){return[r,u,m,D,p,d,f,S,b,g,F,v,V].reduce(function(t,e){return e(t)},e({},t))}i.testable(r,"mapFrom1_34");i.testable(u,"mapFrom1_44_6");i.testable(m,"mapFrom1_60_0");i.testable(D,"mapFrom1_85");i.testable(p,"mapFrom1_89");i.testable(d,"mapFrom1_93");i.testable(f,"mapFrom1_94");i.testable(S,"mapFrom1_97");i.testable(b,"mapFrom1_98");i.testable(g,"mapFrom1_99");i.testable(F,"mapFrom1_101");i.testable(v,"mapFrom1_102");i.testable(V,"mapFrom1_104");return{getStateInCurrentFormat:_}}return t.extend("sap.suite.ui.generic.template.ListReport.controller.LegacyStateHandler",{constructor:function(t){a(this,m(t))}})});
//# sourceMappingURL=LegacyStateHandler.js.map