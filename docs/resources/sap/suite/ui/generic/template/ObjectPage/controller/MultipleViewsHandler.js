sap.ui.define(["sap/ui/base/Object","sap/suite/ui/generic/template/js/StableIdHelper","sap/suite/ui/generic/template/lib/multipleViews/MultipleViewsHandler","sap/base/util/extend","sap/suite/ui/generic/template/genericUtilities/FeLogger"],function(e,t,n,r,a){"use strict";var i="ObjectPage.controller.MultipleViewsHandler";var o=new a(i).getLogger();function l(e,r,a){var i=Object.create(null);var l=Object.create(null);var u=Object.create(null);function c(e){var t=f(e);if(t){t.updateCounts()}}function s(e,t){var n=f(e);if(n){n.onRebindContentControl(t)}}function f(e){return l[e]}function d(t){var n=r.oInfoObjectHandler.getControlInformation(t);if(n){var a=n.getSearchFieldId();if(a){var i=e.getView().byId(a);return i&&i.getValue()}}}function g(e){return i[e].getSelectedKey()}function v(e,t){return i[e].setSelectedKey(t)}function p(){var e;for(var t in i){var n=i[t];var r=n.getSelectedKey();e=e||Object.create(null);e[t]=r}return e}function b(e,t){if(t){return}for(var n in i){var r=i[n];var a=e&&e[n];r.setSelectedKey(a)}}function S(e){var t=e.facetId;var n=h(t);var r=f(n);if(!r){return null}return r.formatItemTextForMultipleView(e)}function m(e){return r.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(e)}function y(e){var t=f(e.getId(),true);if(!t){return null}var n=Object.create(null);var r=t.getKeys();r.forEach(function(t){n[t]=function(){return m(e)}});return n}function I(e,t){var n=l[e.getId()];if(n){n.registerKeyChange(t)}}function P(t){var n=e.byId(t);return r.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(n)}function C(e){return!!l[e.getId()]}function h(n){var r=t.getStableId({type:"ObjectPageTable",subType:"SmartTable",sFacet:n});return e.getView().createId(r)}function w(e){return u[e].asyncPromise}function T(e){var t={};t.asyncPromise=new Promise(function(e){t.resolve=e});u[e]=t}function j(n){var r;var a=n.getSettings();var i=function(n){var a=u[n];if(!a){return}var i=t.getStableId({type:"ObjectPageTable",subType:"SegmentedButton",sFacet:r});var o=t.getStableId({type:"ObjectPageTable",subType:"VariantSelection",sFacet:r});var l=e.byId(i)||e.byId(o);a.resolve(l)};if(a.blocks&&a.blocks.length>0){a.blocks.forEach(function(e){r=e.additionalData.facetId;i(r)})}r=n.getSettings().additionalData.facetId;i(r)}function V(e){var t=i[e];if(!t){o.error("GenericMultipleViewsHandler doesn't exist for Section: '"+e+"'");return Promise.resolve()}return t.getInitializationPromise()}(function(){var t=e.getOwnerComponent().getSections();for(var o in t){var u=t[o];if(u.quickVariantSelection){var c=h(o);T(o);var s={mode:"single",manifestSettings:u.quickVariantSelection,pathInTemplatePrivateModel:"/objectPage/multipleViews",getPresentationControlHandler:P.bind(null,c),sectionKey:o,getSwitchingControlAsync:w.bind(null,o),appStateChange:a,isDataToBeShown:function(){return true},adaptRefreshRequestMode:function(e){return e},refreshModelOnTableRefresh:false};s.getSearchValue=d.bind(null,c);var f=r.oComponentUtils.getTemplatePrivateModel();if(!f.getProperty(s.pathInTemplatePrivateModel)){f.setProperty(s.pathInTemplatePrivateModel,Object.create(null))}s.pathInTemplatePrivateModel="/objectPage/multipleViews/"+o;var g=new n(e,r,s);i[o]=g;l[c]=g}}})();return{onDataRequested:c,onRebindContentControl:s,getCurrentState:p,applyState:b,formatItemTextForMultipleView:S,getSelectedKey:g,setSelectedKey:v,getKeyToPresentationControlHandler:y,registerKeyChange:I,isSmartControlMulti:C,subSectionEntered:j,getInitializationPromise:V}}return e.extend("sap.suite.ui.generic.template.ObjectPage.controller.MultipleViewsHandler",{constructor:function(e,t,n){r(this,l(e,t,n))}})});
//# sourceMappingURL=MultipleViewsHandler.js.map