/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/suite/ui/generic/template/lib/reuseComponentHelper","sap/suite/ui/generic/template/genericUtilities/FeLogger"],function(e,t,n,o){"use strict";var r=new o("extensionAPI.ReuseComponentSupport").getLogger();var i="sap.suite.ui.generic.template.extensionAPI.ReuseComponentSupport";function a(e,t){if(!e.extensionAPI){return}var n=e.component.getBindingContext();var o=n&&n.getPath();if(!t&&(!n||o===e.currentContextPath)){return}e.currentContextPath=o;var r=e.component.getModel();var i=e.firstTime&&e.component.stStart||e.component.stRefresh;e.firstTime=false;if(i){i.call(e.component,r,n,e.extensionAPI)}}function p(e,o,p){var s={component:e,firstTime:true,currentContextPath:null};var u=a.bind(null,s);var c={pathUnchangedCallBack:u,component:e,isStarted:function(){return!s.firstTime},leaveApp:e.stLeaveApp?e.stLeaveApp.bind(e):Function.prototype};s.proxy=c;var l=new Promise(function(t){c.fnExtensionAPIAvailable=t;n.embeddedComponentMixInto(e,c)});l.then(function(e){s.extensionAPI=e;u()});if(e.stRefresh||e.stStart){e.attachEvent("modelContextChange",u.bind(null,false))}if(o){var f=e.getMetadata().getProperties();var m={};for(var g in f){m[g]=e.getProperty(g)}var d=new t(m);e.setModel(d,o);var v=e.setProperty||Function.prototype;e.setProperty=function(t,n){v.apply(e,arguments);d.setProperty("/"+t,n);r.debug(e.getId()+":"+e.getMetadata().getName()+": setProperty "+t+"="+n,i)};e.getComponentModel=e.getComponentModel||function(){return d};if(p){var P=function(t,n){var o=n.getValue();if(o!==e.getProperty(t)){v.call(e,t,o)}};for(g in f){var C=d.bindProperty("/"+g);C.attachChange(P.bind(null,g,C))}}}return l}return{mixInto:function(t,n,o){if(!(t instanceof e)){throw new Error("FioriElements: extensionAPI.ResuseComponentSupport: Reuse component must be an instance of sap.ui.core.UIComponent")}return p(t,n,o)}}});
//# sourceMappingURL=ReuseComponentSupport.js.map