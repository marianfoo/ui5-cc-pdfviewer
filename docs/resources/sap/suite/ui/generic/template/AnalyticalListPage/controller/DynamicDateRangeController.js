sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/ResponsivePopover","sap/m/library","sap/base/util/deepExtend","sap/m/DynamicDateRange"],function(e,t,a,n,i){"use strict";var l=e.extend("sap.suite.ui.generic.template.AnalyticalListPage.controller.DynamicDateRangeController",{});sap.suite.ui.generic.template.AnalyticalListPage.controller.DynamicDateRangeController.createDynamicDateRange=function(e){this._oDynamicDateRange=new i({options:e,hideInput:true});return this._oDynamicDateRange};sap.suite.ui.generic.template.AnalyticalListPage.controller.DynamicDateRangeController.openDynamicDateRange=function(e,t){var a=e.getParent().getContent();this._oDynamicDateRange=a[a.length-1];this._oDynamicDateRange.attachChange(this._handleDynamicDateRangeSelect.bind(this));this._oChart=t;if(t.getDimensionFilter()){this._setSelectedDate(t.getDimensionFilter())}else if(this._oOldDate){this._removeAllDynamicDateSelections()}this._oDynamicDateRange.openBy(e)};sap.suite.ui.generic.template.AnalyticalListPage.controller.DynamicDateRangeController._setSelectedDate=function(e){var t={operator:null,values:[]};if(e&&e.ranges&&e.ranges.length){for(var a in e.ranges){if(e.ranges[a]&&e.ranges[a].value1){t.operator=e.conditionTypeInfo.data.operation;t.values.push(e.ranges[a].value1)}}this._oDynamicDateRange.setValue(t);this._oOldDate=t}else{this._oDynamicDateRange.setValue(null);this._oOldDate=null}};sap.suite.ui.generic.template.AnalyticalListPage.controller.DynamicDateRangeController._handleDynamicDateRangeSelect=function(e){var t=n({},this._oChart.getDimensionFilter());var a=e.getParameter("value");if(JSON.stringify(this._oOldDate)===JSON.stringify(a)){this._removeAllDynamicDateSelections();this._oChart.setDimensionFilter(null)}else{t.conditionTypeInfo.data.operation=a.operator;t.conditionTypeInfo.data["value1"]=a.values[0];t.ranges=[];this._oChart.setDimensionFilter(t)}this._oDynamicDateRange.detachChange(this._handleDynamicDateRangeSelect);this._oChart.fireFilterChange()};sap.suite.ui.generic.template.AnalyticalListPage.controller.DynamicDateRangeController._removeAllDynamicDateSelections=function(){this._oDynamicDateRange.setValue(null);this._oOldDate=null};return l});
//# sourceMappingURL=DynamicDateRangeController.js.map