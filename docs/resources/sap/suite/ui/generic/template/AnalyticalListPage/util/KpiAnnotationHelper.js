sap.ui.define(["sap/ui/base/Object","sap/ui/model/analytics/odata4analytics","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/base/util/each","sap/suite/ui/generic/template/genericUtilities/metadataAnalyser"],function(e,t,a,r,i){"use strict";var n=new a("AnalyticalListPage.util.KpiAnnotationHelper").getLogger();var o=e.extend("sap.suite.ui.generic.template.AnalyticalListPage.util.KpiAnnotationHelper");sap.suite.ui.generic.template.AnalyticalListPage.util.KpiAnnotationHelper.criticalityConstants={StateValues:{None:"None",Negative:"Error",Critical:"Warning",Positive:"Success"},ColorValues:{None:"Neutral",Negative:"Error",Critical:"Critical",Positive:"Good"}};o.selectionPresentationVariantResolveWithQualifier=function(e){var t=e.getObject();var a=e.getModel();var r=a.getProperty("/metaModel");var i=r.getODataEntitySet(t.entitySet);var n=r.getODataEntityType(i.entityType);var o=n.$path+"/com.sap.vocabularies.UI.v1.SelectionPresentationVariant#"+t.qualifier;return r.createBindingContext(o)};function l(e,t){return e.filter(function(e){if(e.name===t){return e}})}o.resolveParameterizedEntitySet=function(e,a,o){var s="";var u=new t.Model(t.Model.ReferenceByModel(e));var m=u.findQueryResultByName(a.name);var g=new t.QueryResultRequest(m);var y=m&&m.getParameterization();if(y){var P;g.setParameterizationRequest(new t.ParameterizationRequest(y));if(o.getParameterNames){var c=o.getParameterNames();c.forEach(function(e){P=o.getParameter(e);g.getParameterizationRequest().setParameterValue(e,P)})}else{r(o.Parameters,function(){if(this.RecordType==="com.sap.vocabularies.UI.v1.IntervalParameter"){P=this.PropertyValueFrom.PropertyPath.split("/");g.getParameterizationRequest().setParameterValue(P[P.length-1],this.PropertyValueFrom.String,this.PropertyValueTo.String)}else{P=this.PropertyName.PropertyPath.split("/");g.getParameterizationRequest().setParameterValue(P[P.length-1],this.PropertyValue.String)}})}var f;if(o.getParameterNames){f=o.getParameterNames()}else{f=o&&o.Parameters&&o.Parameters.map(function(e){return e&&e.PropertyName&&e.PropertyName.PropertyPath})}var p=i.getParametersByEntitySet(e,a.name);if(p.entitySetName){var v=i.getPropertyOfEntitySet(e,p.entitySetName);var d=p.parameters.filter(function(e){return!f.includes(e)});for(var h=0;h<d.length;h++){P=d[h].split("/");var N=P[P.length-1];var R=l(v,N);var S=false;if(R.length>0){var M=R[0];S=M.type==="Edm.String"&&M["sap:parameter"]==="optional"}if(S){g.getParameterizationRequest().setParameterValue(N,"")}}}}try{s=g.getURIToQueryResultEntitySet()}catch(e){m=g.getQueryResult();s="/"+m.getEntitySet().getQName();n.error("getEntitySetPathWithParameters","binding path with parameters failed - "+e||e.message)}return s};o.checkParameterizedEntitySet=function(e,a,r){var i=new t.Model(t.Model.ReferenceByModel(e));var n=i.findQueryResultByName(a.name);var o=n&&n.getParameterization();if(o){var l=o.getAllParameterNames();for(var s=0;s<l.length;s++){if(l[s]===r){return true}}}return false};o.checkForDateTimeParameter=function(e,a,r){var i=new t.Model(t.Model.ReferenceByModel(e));var n=i.findQueryResultByName(a);var o=n&&n.getParameterization();if(o){var l=o.getAllParameters();if(l[r]&&l[r].getProperty()["type"]==="Edm.DateTime"){return true}}return false};o.checkMandatoryParameter=function(e,a,r){var i=new t.Model(t.Model.ReferenceByModel(e));var n=i.findQueryResultByName(a.name);var o=n&&n.getParameterization();var l=false;if(o){if(o.findParameterByName(r)&&!o.findParameterByName(r).isOptional()){l=true}}return l};return o},true);
//# sourceMappingURL=KpiAnnotationHelper.js.map