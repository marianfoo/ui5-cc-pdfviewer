/*!
* OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.define(["sap/m/p13n/QueryPanel","sap/m/VBox","sap/m/Text","sap/ui/layout/Grid","sap/ui/layout/GridData","sap/m/ComboBox","sap/ui/core/library","sap/m/library","sap/m/Label"],function(e,t,o,r,n,a,i,s,c){"use strict";var p=i.ValueState;var l=s.ListKeyboardMode;var u=e.extend("sap.ui.mdc.p13n.panels.FilterPanel",{metadata:{properties:{itemFactory:{type:"function"}}},renderer:{}});u.prototype.PRESENCE_ATTRIBUTE="active";u.prototype._createInnerListControl=function(){var t=e.prototype._createInnerListControl.apply(this,arguments);t.setKeyboardMode(l.Edit);return t};u.prototype._createQueryRowGrid=function(e){var t=e.name?this._createRowContainer(e.label,e.key):this._createKeySelect(e.name);var o=[t];if(e.name){o.push(this._createFactoryControl(e))}return new r({containerQuery:true,defaultSpan:"XL4 L4 M4 S4",content:o}).addStyleClass("sapUiTinyMargin")};u.prototype._getPlaceholderText=function(){return this._getResourceText("p13n.FILTER_PLACEHOLDER")};u.prototype._getRemoveButtonTooltipText=function(){return this._getResourceText("p13n.FILTER_REMOVEICONTOOLTIP")};u.prototype._createKeySelect=function(e){var t=new a({width:"100%",items:this._getAvailableItems(),placeholder:this._getPlaceholderText(),selectionChange:function(e){var t=e.getSource();this._selectKey(t)}.bind(this),change:function(e){var t=e.getSource();var o=e.getParameter("newValue");t.setValueState(o&&!t.getSelectedItem()?p.Error:p.None);this._selectKey()}.bind(this)});return t};u.prototype._createRemoveButton=function(t){var o=e.prototype._createRemoveButton.apply(this,arguments);o.setLayoutData(new n({span:"XL1 L1 M1 S1"}));return o};u.prototype._createRowContainer=function(e,o){var r=new c({text:e,showColon:true});var n=new t({items:[r.addStyleClass("sapUiTinyMarginTop").addStyleClass("sapUiTinyMarginBegin")]});n._key=o;return n};u.prototype._selectKey=function(t){var o,r;if(t){this._oComboBox=t;o=t.getParent();r=t.getSelectedKey()}else if(this._oComboBox){t=this._oComboBox;o=t.getParent();r=t.getSelectedKey();if(r){e.prototype._selectKey.call(this,t);var n=o.getContent()[0];o.removeContent(n);var a=r?t.getSelectedItem().getText():"";var i=this._createRowContainer(a,r);o.insertContent(i,0);var s=this._createFactoryControl({name:r});o.insertContent(s,1)}setTimeout(function(){if(this._oListControl&&!this._oListControl.bIsDestroyed){this._oListControl.setKeyboardMode(l.Edit)}}.bind(this),20);delete this._oComboBox}};u.prototype._getFactoryControlForRow=function(e){return e.getContent()[0].getContent()[1]};u.prototype._createFactoryControl=function(e){var t=this.getItemFactory().call(this,e);t.setLayoutData(new n({span:"XL7 L7 M7 S7"}));return t};return u});
//# sourceMappingURL=FilterPanel.js.map