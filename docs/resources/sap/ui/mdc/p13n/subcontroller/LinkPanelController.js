/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/p13n/P13nBuilder","./BaseController","sap/ui/mdc/p13n/panels/LinkSelectionPanel","sap/m/library","sap/m/MessageBox"],function(e,t,n,a,o){"use strict";var i=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var r=a.MultiSelectMode;var s=t.extend("sap.ui.mdc.p13n.subcontroller.LinkPanelController",{constructor:function(){t.apply(this,arguments);this._bResetEnabled=true}});s.prototype.getUISettings=function(){return{contentWidth:"28rem",contentHeight:"35rem",reset:{warningText:i.getText("info.SELECTION_DIALOG_RESET_WARNING")},title:i.getText("info.SELECTION_DIALOG_ALIGNEDTITLE")}};s.prototype.getSelectorForReset=function(){return this.getAdaptationControl().getItems().concat(this.getAdaptationControl())};s.prototype.getAdaptationUI=function(e){var t=new n({showHeader:true,fieldColumn:i.getText("info.SELECTION_DIALOG_COLUMNHEADER_WITHOUT_COUNT"),enableCount:true,enableReorder:false,linkPressed:this._onLinkPressed.bind(this)});var a=this.mixInfoAndState(e);t.setP13nData(a.items);t.setMultiSelectMode(r.Default);this._oPanel=t;return Promise.resolve(t)};s.prototype._onLinkPressed=function(e){var t=e.getParameter("oSource");var n=this.getAdaptationControl();var a=!!(t&&t.getCustomData()&&t.getCustomData()[0].getValue());var i=a?t.getCustomData()[0].getValue():t.getHref();if(n.getBeforeNavigationCallback){n.getBeforeNavigationCallback()(e).then(function(e){if(e){n.getMetadata()._oClass.navigate(i)}})}else{o.show(sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("info.SELECTION_DIALOG_LINK_VALIDATION_QUESTION"),{icon:o.Icon.WARNING,title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("info.SELECTION_DIALOG_LINK_VALIDATION_TITLE"),actions:[o.Action.YES,o.Action.NO],onClose:function(e){if(e===o.Action.YES){n.getMetadata()._oClass.navigate(i)}},styleClass:this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":""})}};s.prototype._createAddRemoveChange=function(e,t,n){var a=n.name;var o=sap.ui.getCore().byId(a);var i=[];if(!o){i.push({selectorElement:e,changeSpecificData:{changeType:"createItem",content:{selector:a}}})}else{i.push({selectorElement:o,changeSpecificData:{changeType:t==="hideItem"?"hideItem":"revealItem",content:{}}})}return i};s.prototype.mixInfoAndState=function(t){var n=this.getCurrentState();var a=e.arrayToMap(n);var o=e.prepareAdaptationData(t,function(e,t){var n=a[t.name];e.visible=n?true:false;e.position=n?n.position:-1;e.href=t.href;e.internalHref=t.internalHref;e.description=t.description;e.target=t.target;e.text=t.text;return true});e.sortP13nData({visible:"visible",position:"position"},o.items);o.presenceAttribute=this._getPresenceAttribute();o.items.forEach(function(e){delete e.position});return o};s.prototype._createMoveChange=function(e,t,n,a,o,i){return{selectorElement:o,changeSpecificData:{changeType:a,content:{index:n,name:t}}}};s.prototype.getChangeOperations=function(){return{add:["createItem","revealItem"],remove:"hideItem",move:"moveItem"}};return s});
//# sourceMappingURL=LinkPanelController.js.map