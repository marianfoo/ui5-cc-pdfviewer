/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/m/ResponsivePopover","sap/m/List","sap/m/Bar","sap/m/StandardListItem","sap/ui/core/InvisibleText","sap/m/library","sap/ui/Device","sap/base/Log","sap/m/IllustratedMessage","sap/m/library"],function(e,t,n,r,a,o,i,s,l,d,c){"use strict";var u=i.PlacementType;var p=i.ListType;var m=i.ListMode;function g(e){var t=e.getControlDelegate().getDrillStack(e);var n=[];t.forEach(function(e){e.dimension.forEach(function(e){if(e!=null&&e!=""&&n.indexOf(e)==-1){n.push(e)}})});return n}var v=function(){};v.createDrillDownPopover=function(r){var a=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var i=new t({id:r.getId()+"-drilldownPopover",contentWidth:"25rem",contentHeight:"20rem",placement:u.Bottom});var l=new n({noData:new d({enableVerticalResponsiveness:true,title:a.getText("chart.NO_DRILLABLE_DIMENSION"),description:a.getText("chart.NO_DRILLABLE_DIMENSION_DESC"),illustrationType:c.IllustratedMessageType.BeforeSearch}),mode:m.SingleSelectMaster,selectionChange:function(e){var t=e.getParameter("listItem");if(t){r.getEngine().createChanges({control:r,key:"Item",state:[{name:t.data("dim").dim.name,position:r.getItems().length}]})}i.close()}});i.attachAfterClose(function(){i.destroy()});var p=e.getLibraryResourceBundle("sap.ui.mdc");if(s.system.desktop){var g=new o({text:p.getText("chart.CHART_DRILLDOWN_TITLE")});i.setShowHeader(false);i.addContent(g);i.addAriaLabelledBy(g)}else{i.setTitle(p.getText("chart.CHART_DRILLDOWN_TITLE"))}i.addContent(l);r._oDrillDownPopover=i;return i};v.showDrillDownPopover=function(e,t){var r=e.getControlDelegate().getSortedDimensions(e);return r.then(function(r){var o=e._oDrillDownPopover;var i,s,d;var c=o.getContent().filter(function(e){return e.getMetadata().getClass()==n});var u=c.length>0?c[0]:null;if(!u){l.error("MDC Chart: Could not determine list to show drilldown. This should not happen. Did the application modify the drill-down popover?");return}u.destroyItems();i=g(e);for(var m=0;m<r.length;m++){s=r[m];if(i.indexOf(s.name)>-1){continue}d=new a({title:s.label,type:p.Active});d.data("dim",{dim:s});u.addItem(d)}return new Promise(function(e,n){o.attachEventOnce("afterOpen",function t(n){e(o)});o.openBy(t)})})};return v});
//# sourceMappingURL=DrillStackHandler.js.map