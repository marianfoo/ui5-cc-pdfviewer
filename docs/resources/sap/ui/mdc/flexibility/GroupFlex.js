/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/p13n/Engine","sap/ui/mdc/flexibility/Util"],function(e,r){"use strict";var n=function(r){var n=r&&r.isA&&r.isA("sap.ui.mdc.Table")&&r.isTableBound();var t=r&&r.isA&&r.isA("sap.ui.mdc.Chart");if(n||t){if(!r._bWaitForBindChanges){r._bWaitForBindChanges=true;e.getInstance().waitForChanges(r).then(function(){if(n){r.rebind()}else if(t){r.rebind()}delete r._bWaitForBindChanges})}}};var t=function(e,r,t,i){if(i){e.resetRevertData()}else{e.setRevertData(t)}n(r)};var i=function(e,n,i,a){return new Promise(function(o,s){var u=a===r.REVERT;var v=i.modifier;var c=u?e.getRevertData():e.getContent();Promise.resolve().then(v.getProperty.bind(v,n,"groupConditions")).then(function(r){var i=r?r.groupLevels:[];var a={name:c.name};i.splice(c.index,0,a);r={groupLevels:i};v.setProperty(n,"groupConditions",r);t(e,n,a,u);o()}).catch(function(e){s(e)})})};var a=function(e,n,i,a){return new Promise(function(o,s){var u=a===r.REVERT;var v=i.modifier;var c=u?e.getRevertData():e.getContent();Promise.resolve().then(v.getProperty.bind(v,n,"groupConditions")).then(function(r){var i=r?r.groupLevels:[];if(!i){s()}var a=i.filter(function(e){return e.name===c.name});var p=i.indexOf(a[0]);i.splice(p,1);r={groupLevels:i};v.setProperty(n,"groupConditions",r);t(e,n,c,u);o()}).catch(function(e){s(e)})})};var o=function(e,n,i,a){return new Promise(function(o,s){var u=a===r.REVERT;var v=i.modifier;var c=u?e.getRevertData():e.getContent();Promise.resolve().then(v.getProperty.bind(v,n,"groupConditions")).then(function(r){var i=r?r.groupLevels:[];var a=i.filter(function(e){return e.name===c.name});var s=i.indexOf(a[0]);i.splice(c.index,0,i.splice(s,1)[0]);r={groupLevels:i};v.setProperty(n,"groupConditions",r);t(e,n,c,u);o()}).catch(function(e){s(e)})})};var s={};s.removeGroup=r.createChangeHandler({apply:a,revert:i});s.addGroup=r.createChangeHandler({apply:i,revert:a});s.moveGroup=r.createChangeHandler({apply:o,revert:o});return s});
//# sourceMappingURL=GroupFlex.js.map