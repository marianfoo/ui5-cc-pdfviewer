/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/field/content/DefaultContent","sap/ui/model/Filter","sap/base/util/isEmptyObject","sap/base/util/merge","sap/base/util/ObjectPath","sap/ui/mdc/enum/EditMode"],function(e,t,a,i,l,n){"use strict";var d=Object.assign({},e,{getEdit:function(){return["sap/ui/mdc/field/FieldInput","sap/ui/core/InvisibleText"]},getEditMultiValue:function(){return["sap/ui/mdc/field/FieldMultiInput","sap/ui/mdc/field/FieldInput","sap/m/Token","sap/ui/core/InvisibleText"]},getEditMultiLine:function(){return[null]},getUseDefaultFieldHelp:function(){return false},createEdit:function(e,t,a){e.setIsMeasure(true);var i=t[0];var l=t[1];var n=e.getConditionsType();this._adjustDataTypeForUnit(e);var d=l.getStaticId("sap.ui.mdc","field.NUMBER");var r=[];var o=new i(a,{value:{path:"$field>/conditions",type:n},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",valueHelpIconSrc:"sap-icon://slim-arrow-down",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",autocomplete:false,fieldGroupIds:[e.getField().getId()],ariaDescribedBy:[d],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange()});o._setPreferUserInteraction(true);e.setAriaLabelledBy(o);r.push(o);r=this._addUnitControl(e,r,a,i,l);e.setBoundProperty("value");return r},createEditMultiValue:function(e,a,i){e.setIsMeasure(true);var l=a[0];var n=a[2];var d=a[1];var r=a[3];var o=e.getConditionType();this._adjustDataTypeForUnit(e);var s=[];var u=new n(i+"-token",{text:{path:"$field>",type:o}});var p=new t({path:"values",test:function(e){if(!Array.isArray(e[0])||e[0][0]){return true}else{return false}}});var f=r.getStaticId("sap.ui.mdc","field.NUMBER");var g=new l(i,{placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditable},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",fieldGroupIds:[e.getField().getId()],ariaDescribedBy:[f],tokens:{path:"$field>/conditions",template:u,filters:[p]},dependents:[u],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),tokenUpdate:e.getHandleTokenUpdate()});g._setPreferUserInteraction(true);e.setAriaLabelledBy(g);s.push(g);s=this._addUnitControl(e,s,i,d,r);e.setBoundProperty("value");return s},createEditMultiLine:function(){throw new Error("sap.ui.mdc.field.content.UnitContent - createEditMultiLine not defined!")},_addUnitControl:function(e,t,a,i,l){var d=e.getUnitConditionsType();if(e.getField().getEditMode()===n.EditableDisplay){t[0].bindProperty("description",{path:"$field>/conditions",type:d});t[0].setWidth("100%");t[0].setFieldWidth("70%")}else{var r;var o=e.getUnitOriginalType();var s=o&&o.getMetadata().getName();if(s&&s.indexOf("Currency")>=0){r=l.getStaticId("sap.ui.mdc","field.CURRENCY")}else{r=l.getStaticId("sap.ui.mdc","field.UNIT")}var u=new i(a+"-unit",{value:{path:"$field>/conditions",type:d},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEditableUnit},enabled:{path:"$field>/editMode",formatter:e.getMetadata()._oClass._getEnabled},valueState:"{$field>/valueState}",valueHelpIconSrc:e.getFieldHelpIcon(),valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",ariaAttributes:"{$field>/_ariaAttributes}",width:"30%",tooltip:"{$field>/tooltip}",autocomplete:false,fieldGroupIds:[e.getField().getId()],ariaDescribedBy:[r],change:e.getHandleContentChange(),liveChange:e.getHandleContentLiveChange(),valueHelpRequest:e.getHandleValueHelpRequest()});u._setPreferUserInteraction(true);e.setAriaLabelledBy(u);t.push(u)}return t},_adjustDataTypeForUnit:function(e){var t=e.getField();var n=e.retrieveDataType();var d=n.getMetadata().getName();var r=n.getFormatOptions();var o=a(n.getConstraints())?undefined:n.getConstraints();var s=!r||!r.hasOwnProperty("showMeasure")||r.showMeasure;var u=!r||!r.hasOwnProperty("showNumber")||r.showNumber;if(s&&u){r=i({},r);r.showMeasure=false;r.showNumber=true;r.strictParsing=true;var p=l.get(d);e.setUnitOriginalType(e.getDataType());e.setDataType(new p(r,o));t.getControlDelegate().initializeInternalUnitType(t.getPayload(),e.getDataType(),e.getFieldTypeInitialization());r=i({},r);r.showMeasure=true;r.showNumber=false;r.strictParsing=true;p=l.get(d);e.setUnitType(new p(r,o));t.getControlDelegate().initializeInternalUnitType(t.getPayload(),e.getUnitType(),e.getFieldTypeInitialization());e.updateConditionType()}}});return d});
//# sourceMappingURL=UnitContent.js.map