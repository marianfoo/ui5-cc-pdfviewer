/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./TableTypeBase","../library"],function(e,t){"use strict";var o,i,n,s,a,l,u,r;var d=t.RowCountMode;var c=e.extend("sap.ui.mdc.table.GridTableType",{metadata:{library:"sap.ui.mdc",properties:{rowCountMode:{type:"sap.ui.mdc.RowCountMode",defaultValue:d.Auto},rowCount:{type:"int",defaultValue:10},selectionLimit:{type:"int",defaultValue:200},showHeaderSelector:{type:"boolean",defaultValue:true}}}});c.prototype.updateRelevantTableProperty=function(e,t,o){if(!e||!e.isA("sap.ui.table.Table")){return}if(t==="rowCountMode"){var i=e.getRowMode();var n=false;if(i&&(o===d.Fixed&&!i.isA("sap.ui.table.rowmodes.FixedRowMode")||o===d.Auto&&!i.isA("sap.ui.table.rowmodes.AutoRowMode"))){n=i.getHideEmptyRows();i.destroy();i=null}if(!i){var s=o===d.Fixed?l:u;e.setRowMode(new s({hideEmptyRows:n}))}this._updateTableRowCount(e,o,this.getRowCount())}else if(t==="rowCount"){this._updateTableRowCount(e,this.getRowCountMode(),o)}else if(t==="selectionLimit"){e.getPlugins()[0].setLimit(o).setEnableNotification(o>0)}else if(t==="showHeaderSelector"){e.getPlugins()[0].setShowHeaderSelector(o)}};c.prototype._updateTableRowCount=function(e,t,o){if(t===d.Fixed){e.getRowMode().setRowCount(o)}else{e.getRowMode().setMinRowCount(o)}};c.updateDefault=function(e){if(e){e.setRowMode(new u({minRowCount:10}))}};c.loadGridTableLib=function(){if(!this._oGridTableLibLoaded){this._oGridTableLibLoaded=sap.ui.getCore().loadLibrary("sap.ui.table",true)}return this._oGridTableLibLoaded};c.loadTableModules=function(){if(!o){return new Promise(function(e,t){this.loadGridTableLib().then(function(){sap.ui.require(["sap/ui/table/Table","sap/ui/table/Column","sap/ui/table/RowAction","sap/ui/table/RowActionItem","sap/ui/table/plugins/MultiSelectionPlugin","sap/ui/table/rowmodes/FixedRowMode","sap/ui/table/rowmodes/AutoRowMode","sap/ui/table/RowSettings"],function(t,d,c,w,g,m,p,R){o=t;i=d;n=c;s=w;a=g;l=m;u=p;r=R;e()},function(){t("Failed to load some modules")})})}.bind(this))}else{return Promise.resolve()}};c.createTable=function(e,t){return new o(e,t)};c.createColumn=function(e,t){var o=new i(e,t);o.attachColumnMenuOpen(function(e){e.preventDefault()});o._menuHasItems=function(){return true};return o};c.createMultiSelectionPlugin=function(t,o){return new a(t.getId()+"--multiSelectPlugin",{selectionMode:e.getSelectionMode(t),selectionChange:o})};c.enableColumnResizer=function(e,t){t.getColumns().forEach(function(e){e.setResizable(true);e.setAutoResizable(true)});t.detachColumnResize(e._onColumnResize,e);t.attachColumnResize(e._onColumnResize,e)};c.disableColumnResizer=function(e,t){t.getColumns().forEach(function(e){e.setResizable(false);e.setAutoResizable(false)});t.detachColumnResize(e._onColumnResize,e)};c.updateSelection=function(o){var i=e.getSelectionMode(o);if(o.getSelectionMode()===t.SelectionMode.SingleMaster){o._oTable.setSelectionBehavior("RowOnly")}else{o._oTable.resetProperty("selectionBehavior")}o._oTable.getPlugins()[0].setSelectionMode(i)};c.removeRowActions=function(e){var t=e._oTable.getRowActionTemplate();if(t){t.destroy()}e._oTable.setRowActionTemplate();e._oTable.setRowActionCount()};c.updateRowSettings=function(e,t,o){var i=new r(undefined,t.getAllSettings());this.updateRowActions(e.getParent(),t,o);e.getRowSettingsTemplate().destroy();e.setRowSettingsTemplate(i)};c.updateRowActions=function(e,t){this.removeRowActions(e);if(!t){return}if(!t.isBound("rowActions")&&(!t.getRowActions()||t.getRowActions().length==0)){return}var o=t.getAllActions();if("templateInfo"in o){var i=o.templateInfo;o.items.template=new s({type:i.type,visible:i.visible,icon:i.icon,text:i.text,press:[this._onRowActionPress,e]});delete o.templateInfo}else{o.items=o.items.map(function(t){var o=new s({type:t.isBound("type")?t.getBindingInfo("type"):t.getType(),visible:t.isBound("visible")?t.getBindingInfo("visible"):t.getVisible(),icon:t.isBound("icon")?t.getBindingInfo("icon"):t._getIcon(),text:t.isBound("text")?t.getBindingInfo("text"):t._getText(),press:[this._onRowActionPress,e]});o.data("rowAction",t);return o},this)}var a=new n(e.getId()+"--rowAction",o);e._oTable.setRowActionTemplate(a);e._oTable.setRowActionCount(t.getRowActionCount())};c._onRowActionPress=function(e){var t=e.getParameter("item");var o=this.getRowSettings().getAllActions();if(this.getRowSettings().isBound("rowActions")){var i=o.items.model;var n=t.getBindingContext(i);if(!this._oRowActionItem){this._oRowActionItem=o.items.template.clone()}this._oRowActionItem.setBindingContext(n,o.items.model);this._oRowActionItem.setModel(this.getModel(i),i);this.getRowSettings().addDependent(this._oRowActionItem)}else{this._oRowActionItem=t.data("rowAction")}var s=e.getParameter("row");this._oRowActionItem.firePress({bindingContext:s.getBindingContext()})};return c});
//# sourceMappingURL=GridTableType.js.map