/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["../util/PropertyHelper","sap/m/table/Util","sap/ui/base/Object"],function(e,t,r){"use strict";var l=e.extend("sap.ui.mdc.table.PropertyHelper",{constructor:function(t,r,l){e.call(this,t,r,Object.assign({filterable:true,sortable:true,propertyInfos:true,groupable:{type:"boolean",forComplexProperty:{valueIfNotAllowed:false}},key:{type:"boolean",forComplexProperty:{valueIfNotAllowed:false}},unit:{type:"PropertyReference"},text:{type:"PropertyReference"},exportSettings:{type:"object",default:{value:{},ignoreIfNull:true},forComplexProperty:{allowed:true}},visualSettings:{type:{widthCalculation:{type:{minWidth:{type:"int",default:{value:2}},maxWidth:{type:"int",default:{value:19}},defaultWidth:{type:"int",default:{value:8}},gap:{type:"float",default:{value:0}},includeLabel:{type:"boolean",default:{value:true}},truncateLabel:{type:"boolean",default:{value:true}},verticalArrangement:{type:"boolean",default:{value:false}},excludeProperties:{type:"PropertyReference[]"}},default:{value:{},ignoreIfNull:true}}},default:{value:{}},forComplexProperty:{allowed:true}}},l?{extension:{type:l,default:{value:{}},forComplexProperty:{allowed:true,propagateAllowance:false}}}:{},this._bEnableAggregatableAttribute?{aggregatable:{type:"boolean",forComplexProperty:{valueIfNotAllowed:false}}}:{}))}});l.prototype.prepareProperty=function(t){e.prototype.prepareProperty.apply(this,arguments);Object.defineProperty(t,"getGroupableProperties",{value:function(){return t.getSimpleProperties().filter(function(e){return e.groupable})}})};l.prototype.getGroupableProperties=function(){return this.getProperties().filter(function(e){return e.groupable})};l.prototype.getColumnExportSettings=function(e){var t=[];if(!r.isA(e,"sap.ui.mdc.table.Column")){return t}var l=this.getProperty(e.getDataProperty());if(!l){return t}var a=l.exportSettings;if(a===null){return t}var n=[];var u;var i;if(!l.isComplex()){u=o(e,l,a);u.property=l.path;t.push(u);return t}i=l.getSimpleProperties();if(Object.keys(a).length){u=o(e,l,a);i.forEach(function(e){n.push(e.path)});u.property=n;t.push(u)}else{i.forEach(function(r,l){if(!r.exportSettings){return}var a=o(e,r,r.exportSettings);a.property=r.path;if(l>0){a.columnId=e.getId()+"-additionalProperty"+l}if(r.exportSettings||a.property){t.push(a)}})}return t};function a(e){if(e.indexOf("em")>0){return Math.round(parseFloat(e))}if(e.indexOf("px")>0){return Math.round(parseInt(e)/16)}return""}function o(e,t,r){return Object.assign({columnId:e.getId(),label:t.label,width:a(e.getWidth()),textAlign:e.getHAlign(),type:"String"},r)}l.prototype.calculateColumnWidth=function(e){var t=e.getDataProperty();var r=this.getProperty(t);if(!r){return null}var l=r.visualSettings;if(l&&l.widthCalculation===null){return null}return this._calcColumnWidth(r,e.getHeader())};l.prototype._calcColumnWidth=function(e,r){var l=Object.assign({gap:0,includeLabel:true,truncateLabel:true,excludeProperties:[]},e.visualSettings&&e.visualSettings.widthCalculation);var a=[];if(e.isComplex()){a=e.getSimpleProperties().flatMap(function(e){var t=e.visualSettings?e.visualSettings.widthCalculation:undefined;return t===null||l.excludeProperties.includes(e.name)?[]:[[e.typeConfig.typeInstance,t]]})}else{a.push(e.typeConfig.typeInstance)}if(e.unit){l.gap+=2.5}r=l.includeLabel?r||e.label:"";return t.calcColumnWidth(a,r,l)};return l});
//# sourceMappingURL=PropertyHelper.js.map