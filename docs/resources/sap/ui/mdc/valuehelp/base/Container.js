/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/mdc/mixin/PromiseMixin","sap/ui/model/BindingMode","sap/ui/base/ManagedObjectObserver"],function(e,t,n,o){"use strict";var i=e.extend("sap.ui.mdc.valuehelp.base.Container",{metadata:{library:"sap.ui.mdc",properties:{title:{type:"string",group:"Appearance",defaultValue:""},localFilterValue:{type:"string"}},aggregations:{_container:{type:"sap.ui.core.Element",multiple:false,visibility:"hidden"},content:{type:"sap.ui.mdc.valuehelp.base.Content",multiple:true}},events:{select:{parameters:{type:{type:"sap.ui.mdc.enum.SelectType"},conditions:{type:"object[]"}}},confirm:{parameters:{close:{type:"boolean"}}},opened:{},closed:{},cancel:{},requestDelegateContent:{parameters:{contentId:{type:"string"}}},requestSwitchToDialog:{},navigated:{parameters:{leaveFocus:{type:"boolean"},condition:{type:"object"},itemId:{type:"string"}}}}}});i.prototype.init=function(){this._oObserver=new o(this._observeChanges.bind(this));this._oObserver.observe(this,{aggregations:["content"]})};i.prototype._observeChanges=function(e){if(e.name==="content"){var t=e.child;if(e.mutation==="remove"){this._unbindContent(t)}}};i.prototype._bindContent=function(e){if(e&&!e._bContentBound){e.bindProperty("filterValue",{path:"/filterValue",model:"$valueHelp",mode:n.OneWay});var t={path:"/conditions",model:"$valueHelp",mode:n.OneWay};if(e._formatConditions){t.formatter=e._formatConditions.bind(e)}e.bindProperty("config",{path:"/_config",model:"$valueHelp",mode:n.OneWay});e.bindProperty("conditions",t);e.attachConfirm(this._handleConfirmed,this);e.attachCancel(this._handleCanceled,this);e.attachSelect(this._handleSelect,this);if(e.attachNavigated){e.attachNavigated(this._handleNavigated,this)}if(e.attachRequestSwitchToDialog){e.attachRequestSwitchToDialog(this._handleRequestSwitchToDialog,this)}e._bContentBound=true}};i.prototype._unbindContent=function(e){if(e._bContentBound){e.unbindProperty("filterValue",true);e.unbindProperty("config",true);e.unbindProperty("conditions",true);e.detachConfirm(this._handleConfirmed,this);e.detachCancel(this._handleCanceled,this);e.detachSelect(this._handleSelect,this);if(e.detachNavigated){e.detachNavigated(this._handleNavigated,this)}if(e.detachRequestSwitchToDialog){e.detachRequestSwitchToDialog(this._handleRequestSwitchToDialog,this)}e._bContentBound=false}};i.prototype._handleNavigated=function(e){this.fireNavigated(e.mParameters)};i.prototype._handleRequestSwitchToDialog=function(e){this.fireRequestSwitchToDialog({container:this})};i.prototype._getContainer=function(){};i.prototype.getControl=function(){var e=this.getParent();return e&&e.getControl()};i.prototype.getMaxConditions=function(){var e=this.getModel("$valueHelp");return e&&e.getObject("/_config/maxConditions")};i.prototype._isSingleSelect=function(){return this.getMaxConditions()===1};i.prototype.getDomRef=function(){var e=this.getAggregation("_container");return e&&e.getDomRef()};i.prototype.getUIArea=function(){return null};i.prototype._getUIAreaForContent=function(){return this.getUIArea()};i.prototype.open=function(e){if(!this.isOpening()){var t=this._addPromise("open");return Promise.all([this._getContainer(),e]).then(function(e){return this._placeContent(e[0])}.bind(this)).then(function(e){if(!t.isCanceled()){this._open(e)}return t}.bind(this))}return this._retrievePromise("open")};i.prototype.close=function(){var e=this._retrievePromise("open");if(e){if(e.isSettled()){this._close()}else{this._cancelPromise(e)}}};i.prototype._placeContent=function(e){return e};i.prototype._open=function(e){var t=this.getContent();for(var n=0;n<t.length;n++){this._bindContent(t[n])}};i.prototype._close=function(){};i.prototype._handleOpened=function(){this._resolvePromise("open");this.fireOpened()};i.prototype._handleClosed=function(e){this._removePromise("open");var t=this.getContent();for(var n=0;n<t.length;n++){this._unbindContent(t[n])}this.fireClosed()};i.prototype._handleConfirmed=function(e){this.fireConfirm()};i.prototype._handleCanceled=function(e){this.fireCancel()};i.prototype._handleSelect=function(e){this.fireSelect({type:e.getParameter("type"),conditions:e.getParameter("conditions")})};i.prototype.isOpen=function(){var e=this._retrievePromise("open");return e&&e.isSettled()};i.prototype.isOpening=function(){var e=this._retrievePromise("open");return e&&!e.isCanceled()&&!e.isSettled()};i.prototype.getItemForValue=function(e){};i.prototype.isValidationSupported=function(){return false};i.prototype.navigate=function(e){return Promise.all([this._getContainer()]).then(function(e){return this._placeContent(e[0])}.bind(this)).then(function(t){this._navigate(e)}.bind(this))};i.prototype._navigate=function(e){};i.prototype.removeFocus=function(){};i.prototype.isTypeahead=function(){var e=this.getParent();return e&&e.getTypeahead()===this};i.prototype.isTypeaheadSupported=function(){return false};i.prototype.isDialog=function(){var e=this.getParent();return e&&(e.getDialog()===this||this.isTypeahead()&&!e.getDialog()&&this.getUseAsValueHelp())};i.prototype.providesScrolling=function(){return false};i.prototype.getValueHelpDelegate=function(){var e=this.getParent();return e&&e.getControlDelegate()};i.prototype.getValueHelpDelegatePayload=function(){var e=this.getParent();return e&&e.getPayload()};i.prototype.awaitValueHelpDelegate=function(){var e=this.getParent();return e&&e.awaitControlDelegate()};i.prototype.isValueHelpDelegateInitialized=function(){var e=this.getParent();return e&&e.bDelegateInitialized};i.prototype.getUseAsValueHelp=function(){return false};i.prototype.getValueHelpIcon=function(){};i.prototype.getAriaAttributes=function(e){return{contentId:null,ariaHasPopup:"listbox",role:"combobox",roleDescription:null}};i.prototype.getScrollDelegate=function(e){var t=this.getAggregation("_container");return t&&t.getScrollDelegate&&t.getScrollDelegate()};i.prototype.shouldOpenOnClick=function(){return false};i.prototype.shouldOpenOnNavigate=function(){return false};i.prototype.isNavigationEnabled=function(e){return false};i.prototype.isFocusInHelp=function(){return!this.isTypeahead()};i.prototype.isMultiSelect=function(){return false};i.prototype._getContainerConfig=function(e){var t=e&&e.getContainerConfig();var n=t&&t[this.getMetadata().getName()];if(!n&&t){var o=Object.keys(t);var i=o.find(function(e){return this.isA(e)}.bind(this));if(i){n=t[i]}}return n};i.prototype._getRetrieveDelegateContentPromise=function(){var e=this.getParent();return e&&e._retrievePromise("delegateContent")};i.prototype.getSelectedContent=function(){var e=this.getContent();return e&&e[0]};i.prototype.onConnectionChange=function(){var e=this.getContent();for(var t=0;t<e.length;t++){this._unbindContent(e[t]);e[t].onConnectionChange()}};i.prototype.exit=function(){this._oObserver.disconnect();this._oObserver=undefined};t.call(i.prototype);return i});
//# sourceMappingURL=Container.js.map