/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/commons/Button","sap/ui/core/Control","sap/ui/core/theming/Parameters","./library","./FeederRenderer","sap/ui/commons/library","sap/ui/Device"],function(jQuery,e,t,n,o,r,i,s){"use strict";var u=i.ButtonStyle;var a=o.FeederType;var p=t.extend("sap.ui.ux3.Feeder",{metadata:{deprecated:true,library:"sap.ui.ux3",properties:{thumbnailSrc:{type:"sap.ui.core.URI",group:"Data",defaultValue:null},text:{type:"string",group:"Data",defaultValue:null},type:{type:"sap.ui.ux3.FeederType",group:"Appearance",defaultValue:a.Large},placeholderText:{type:"string",group:"Appearance",defaultValue:null}},events:{submit:{parameters:{text:{type:"string"}}}}}});p.prototype.init=function(){this.rb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.ux3");this.oSendButton=new e(this.getId()+"-send",{style:u.Emph,icon:"sap-icon://feeder-arrow"}).setParent(this);this.oSendButton.attachEvent("press",this.handleSendButtonPress,this)};p.prototype.initSendButton=function(){if(this.getText()==""){this.oSendButton.setProperty("enabled",false,true)}};p.prototype.exit=function(){this.rb=undefined;this.oInput=undefined;if(this.oSendButton){this.oSendButton.destroy();delete this.oSendButton}};p.prototype.onAfterRendering=function(){this.oInput=this.$("input")};p.prototype.onclick=function(e){var t=e.target.getAttribute("ID");switch(t){case this.getId()+"-send":break;case this.getId()+"-input":break;default:break}};p.prototype.onfocusin=function(e){this.oInput.find(".sapUiFeederEmptyText").remove()};p.prototype.onfocusout=function(e){var t=this.oInput.text();if(t==""){this.oInput.empty();this.oInput.append(r.getEmptyTextInfo(this))}this.setProperty("text",t,true)};p.prototype.getFocusDomRef=function(){return this.getDomRef("input")};p.prototype.onkeyup=function(e){if(this.oInput.text()==""){this.oSendButton.setEnabled(false)}else{this.oSendButton.setEnabled(true)}};p.prototype.handleSendButtonPress=function(e){var t=this.getMultilineText(this.oInput);this.setProperty("text",t,true);this.fireSubmit({text:t});this.setText("")};p.prototype.getMultilineText=function(e){function t(e){var n;var o="";for(var r=0;r<e.length;r++){n=e[r];if(n.nodeType===3||n.nodeType===4){if(!((s.browser.msie||s.browser.edge)&&n.nodeValue==="Â ")){o+=n.nodeValue.replace(/\n/g,"")}}if(n.nodeName==="DIV"||n.nodeName==="P"||n.nodeName==="BR"&&!s.browser.webkit){if(n.nodeName==="BR"&&s.browser.firefox&&r===e.length-1&&jQuery(n).attr("type")==="_moz"){continue}if(!((s.browser.msie||s.browser.edge)&&o==="")&&!((s.browser.firefox||s.browser.webkit)&&o===""&&n.nodeName==="P")&&!(s.browser.webkit&&n.nodeName==="P"&&n.textContent.match(/^(\n)*$/))){o+="\n"}}if(n.nodeType!==8){o+=t(n.childNodes)}}return o}return t(e.get(0).childNodes)};p.prototype.getThumbnailSrc=function(){var e=this.getProperty("thumbnailSrc");if(!e||e==""){var t=this.getParent();if(t&&(t instanceof sap.ui.ux3.Feed||t instanceof sap.ui.ux3.FeedChunk)){e=t.getFeederThumbnailSrc()}}return e};p.prototype.onpaste=function(e){if(s.browser.firefox){setTimeout(this.onAfterPaste.bind(this),10)}};p.prototype.onAfterPaste=function(){var e=this.oInput.get(0).childNodes;for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeName=="PRE"){jQuery(n).css("overflow","hidden")}}};return p});
//# sourceMappingURL=Feeder.js.map