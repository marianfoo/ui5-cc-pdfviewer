/* Ephox Accessibility Checker Plugin
 *
 * Copyright 2010-2017 Ephox Corporation.  All rights reserved.
 *
 * Version: 2.2.0-112
 */

!function(l){"use strict";var e,t,n,r,o,i,x=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return x(n())}}},a=function(){},g=function(e){return function(){return e}},u=function(e){return e},c=g(!1),s=g(!0),f=function(){return d},d=(e=function(e){return e.isNone()},r={fold:function(e,t){return e()},is:c,isSome:c,isNone:s,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:n,orThunk:t,map:f,each:a,bind:f,exists:c,forall:s,filter:f,equals:e,equals_:e,toArray:function(){return[]},toString:g("none()")},Object.freeze&&Object.freeze(r),r),p=function(n){var e=g(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:s,isNone:c,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return p(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:d},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(c,function(e){return t(n,e)})}};return o},k={some:p,none:f,from:function(e){return null==e?d:p(e)}},m=function(e){return parseInt(e,10)},h=function(e,t){var n=e-t;return 0===n?0:0<n?1:-1},v=function(e,t,n){return{major:e,minor:t,patch:n}},y=function(e){var t=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(e);return t?v(m(t[1]),m(t[2]),m(t[3])):v(0,0,0)},w=function(e,t){return!!e&&-1===function(e,t){var n=h(e.major,t.major);if(0!==n)return n;var r=h(e.minor,t.minor);if(0!==r)return r;var o=h(e.patch,t.patch);return 0!==o?o:0}(y([(n=e).majorVersion,n.minorVersion].join(".").split(".").slice(0,3).join(".")),y(t));var n},b=(o=l.window,i="error",function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.console;n&&i in n&&n[i].apply(n,e)}),D={requestAnimationFrame:function(e,t){for(var n=l.window.requestAnimationFrame,r=["ms","moz","webkit"],o=0;o<r.length&&!n;o++)n=l.window[r[o]+"RequestAnimationFrame"];n||(n=function(e){l.window.setTimeout(e,0)}),n(e,t)},setEditorTimeout:function(e,t,n){l.window.setTimeout(function(){e.removed||t()},n||0)}},T=function(t){return function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t}(e)===t}},N=T("string"),A=T("array"),R=T("boolean"),I=T("function"),S=T("number"),E=Array.prototype.slice,O=Array.prototype.indexOf,C=Array.prototype.push,_=function(e,t){return n=e,r=t,-1<O.call(n,r);var n,r},M=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},H=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n)}},G=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},P=function(e,t,n){return H(e,function(e){n=t(n,e)}),n},U=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n))return k.some(o)}return k.none()},L=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!A(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);C.apply(t,e[n])}return t},W=function(e,t){var n=M(e,t);return L(n)},q=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n))return!1}return!0},V=(I(Array.from)&&Array.from,{a:g("a"),aa:g("aa"),aaa:g("aaa")}),B={html4:g("html4"),html5:g("html5")},j=function(e){var t=e.getParam("a11y_advanced_options",!1,"boolean");return e.getParam("a11ychecker_allow_decorative_images",t,"boolean")},F=[V.a(),V.aa(),V.aaa()],z=[B.html4(),B.html5()],Y={"a11y.d1.description":"This paragraph looks like a heading. If it is a heading, please select a heading level.","a11y.d1.repair.block.h1":"Heading 1","a11y.d1.repair.block.h2":"Heading 2","a11y.d1.repair.block.h3":"Heading 3","a11y.d1.repair.block.h4":"Heading 4","a11y.d1.repair.block.h5":"Heading 5","a11y.d1.repair.block.h6":"Heading 6","a11y.d1.repair.info":"Select a heading level:","a11y.d2.description":"Headings must be applied in sequential order. For example: Heading 1 should be followed by Heading 2, not Heading 3.","a11y.d3.description":"Adjacent links with the same URL should be merged into one link","a11y.d4.description":"The selected text appears to be a list. Lists should be formatted using a list tag.","a11y.d5a.description":"Large text must have a contrast ratio of at least 3:1","a11y.d5b.description":"Text must have a contrast ratio of at least 4.5:1","a11y.d5c.description":"Text must have a contrast ratio of at least 7:1","a11y.h93.description":"ID attribute must be unique","a11y.h93.repair.info":"Make ID unique","a11y.h93.repair.deduplicate.others":"Keep this ID and remove all others","a11y.h93.repair.deduplicate.this":"Remove this ID","a11y.h93.repair.deduplicate.all":"Remove all IDs","a11y.i1.description.decorativeAllowed":"Images must be marked as decorative or have an alternative text description","a11y.i1.description.decorativeNotAllowed":"Images must have an alternative text description. Decorative images are not allowed.","a11y.i1.repair.errors.duplicate":"Alternative text cannot be the same as the filename","a11y.i1.repair.errors.empty":"Alternative text cannot be empty","a11y.i1.repair.info.decorativeAllowed":"Or provide alternative text:","a11y.i1.repair.info.decorativeNotAllowed":"Provide alternative text:","a11y.i1.repair.checkboxlabel":"Make image decorative:","a11y.i1.repair.checkboxtext":"Image is decorative","a11y.i2.description":"Alternative text must not be the same as the image filename","a11y.i2.repair.info":"Provide alternative text:","a11y.t1.description":"Tables must have captions","a11y.t1.repair.errors.duplicate":"Table caption cannot be the same as the table summary","a11y.t1.repair.errors.empty":"Caption cannot be empty","a11y.t1.repair.info":"Provide caption:","a11y.t2.description":"Complex tables should have summaries","a11y.t2.repair.errors.duplicate":"Table summary cannot be the same as the table caption","a11y.t2.repair.errors.empty":"Summary cannot be empty","a11y.t2.repair.info":"Provide table summary:","a11y.t3.description":"Table caption and summary cannot have the same value","a11y.t4a.description":"Table elements must contain TR and TD tags","a11y.t4b.description":"Tables must have at least one header cell","a11y.t4b.repair.info":"Choose table header:","a11y.t4c.description":"Table headers must be applied to a row or a column","a11y.t4c.repair.header.col":"Header Column","a11y.t4c.repair.header.row":"Header Row","a11y.t4c.repair.info":"Select header scope:","a11y.t4c.repair.scope.col":"Column","a11y.t4c.repair.scope.colgroup":"Column Group","a11y.t4c.repair.scope.row":"Row","a11y.t4c.repair.scope.rowgroup":"Row Group","a11y.widget.counter":"Issue {0} of {1}","a11y.widget.ignore":"Ignore","a11y.widget.issue.none":"No accessibility issues detected","a11y.widget.next":"Next Issue","a11y.widget.previous":"Previous Issue","a11y.widget.repair":"Repair Issue","a11y.widget.title":"Accessibility Checker","a11y.widget.help.title":"Click for more info",error:"Error",warning:"Warning",info:"Info",success:"Success"},X=function(e){return Y[e]},K=function(e){return Array.isArray(e)?tinymce.translate([X(e[0])].concat(e.slice(1))):tinymce.translate(X(e))},$=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},J=function(e,t){return $(e,t,l.Node.DOCUMENT_POSITION_PRECEDING)},Q=function(e,t){return $(e,t,l.Node.DOCUMENT_POSITION_CONTAINED_BY)},Z=function(t,e,n){return W(e,function(e){return"I1"===e.id?e.check(t,n)?[{rule:e,element:t}]:[]:e.check(t)?[{rule:e,element:t}]:[]})},ee=function(e,t){for(var n=[],r=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o)?n:r).push(a)}return{pass:n,fail:r}}(t.rules,function(e){return e.walkable}),o=r.pass,i=r.fail,a=l.document.createTreeWalker(e,l.NodeFilter.SHOW_ELEMENT,null,!1);a.nextNode();)n=n.concat(Z(a.currentNode,o,t.allowDecorativeImages));var u,c=(u=e,W(i,function(t){return M(t.check(u),function(e){return{rule:t,element:e}})}));return(n=n.concat(c)).sort(function(e,t){return n=e.element,r=t.element,n===r?0:J(n,r)?1:-1;var n,r}),n};var te,ne={error:g("error"),warning:g("warning"),info:g("info")},re=function(e,t){return e.matches?e.matches(t):e.webkitMatchesSelector?e.webkitMatchesSelector(t):e.mozMatchesSelector?e.mozMatchesSelector(t):!!e.msMatchesSelector&&e.msMatchesSelector(t)},oe={id:"D1",wcag:"1.3.1",severity:ne.warning(),desckey:"a11y.d1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return!!re(e,"p")&&q(e.childNodes,function(e){return/^(b|strong)$/i.test(e.nodeName)})},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},ie={id:"D2",wcag:"1.3.1",severity:ne.error(),desckey:"a11y.d2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(e){var n,t=e.querySelectorAll("h1, h2, h3, h4, h5, h6"),r=[];return H(t,function(e){var t=parseInt(e.tagName.slice(1),10);n&&1<t-n&&r.push(e),n=t}),r},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},ae={id:"D3",wcag:"2.4.4",severity:ne.error(),desckey:"a11y.d3.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-refs.html",walkable:!1,check:function(e){return G(e.querySelectorAll("a + a"),function(e){return e.href===e.previousSibling.href})},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},ue=function(e){var t=e.nodeName,n=function(e){for(var t=e.nextSibling;null!==t&&("#text"===t.nodeName||"BR"===t.nodeName);)t=t.nextSibling;return t}(e);return null!==n&&n.nodeName===t&&n},ce=function(e,t){for(var n=ue(e),r=t(e)?[e]:[];!1!==n&&t(n);)r.push(n),n=ue(n);return r},se=function(e,t){for(var n=-1,r=0;r<e.length;r++)if(e[r]===t){n=r;break}return n},le=function(e,t){for(var n=e.querySelectorAll("p,h1,h2,h3,h4,h5,h6"),r=[],o=0;o<n.length;){var i=n[o],a=ce(i,t);if(1<a.length){r.push(a[0]);var u=a[a.length-1],c=se(n,u);o=-1===c?o+1:c}else o++}return r},fe=function(e){return e.textContent.match(/^\s{0,}([a-z1-9]|i+)\s{0,}[.)-]/gim)},de={id:"D4o",wcag:"1.3.1",severity:ne.error(),desckey:"a11y.d4.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(e){return le(e,fe)},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},pe=function(e){return e.textContent.match(/^\s{0,}(\*|-)\s{0,}/gim)},me={id:"D4u",wcag:"1.3.1",severity:ne.error(),desckey:"a11y.d4.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(e){return le(e,pe)},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},he=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:g(e)}},ve={fromHtml:function(e,t){var n=(t||l.document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw l.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return he(n.childNodes[0])},fromTag:function(e,t){var n=(t||l.document).createElement(e);return he(n)},fromText:function(e,t){var n=(t||l.document).createTextNode(e);return he(n)},fromDom:he,fromPoint:function(e,t,n){var r=e.dom();return k.from(r.elementFromPoint(t,n)).map(he)}},ye=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(t.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+n.length+" arguments");var r={};return H(t,function(e,t){r[e]=g(n[t])}),r}},ge=Object.keys,we=Object.hasOwnProperty,be=function(e,t){for(var n=ge(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},xe=function(e){return n=function(e){return e},r=[],be(e,function(e,t){r.push(n(e,t))}),r;var n,r},ke=function(e,t){return we.call(e,t)},De=function(e){return e.slice(0).sort()},Te=function(t,e){if(!A(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");H(e,function(e){if(!N(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},Ne=function(o,i){var n,a=o.concat(i);if(0===a.length)throw new Error("You must specify at least one required or optional field.");return Te("required",o),Te("optional",i),n=De(a),U(n,function(e,t){return t<n.length-1&&e===n[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")}),function(t){var n=ge(t);q(o,function(e){return _(n,e)})||function(e,t){throw new Error("All required keys ("+De(e).join(", ")+") were not specified. Specified keys were: "+De(t).join(", ")+".")}(o,n);var e=G(n,function(e){return!_(a,e)});0<e.length&&function(e){throw new Error("Unsupported keys for object: "+De(e).join(", "))}(e);var r={};return H(o,function(e){r[e]=g(t[e])}),H(i,function(e){r[e]=g(Object.prototype.hasOwnProperty.call(t,e)?k.some(t[e]):k.none())}),r}},Ae=ye("red","green","blue","alpha"),Re={rgbaColour:Ae,white:function(){return Ae(255,255,255,1)}},Ie=function(e,t){return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)},Se=function(e){var t=function(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)},n=e.red()/255,r=e.green()/255,o=e.blue()/255;return.2126*t(n)+.7152*t(r)+.0722*t(o)},Ee=function(e,t){var n=e.alpha()+t.alpha()*(1-e.alpha()),r=(e.red()*e.alpha()+t.red()*t.alpha()*(1-e.alpha()))/n,o=(e.green()*e.alpha()+t.green()*t.alpha()*(1-e.alpha()))/n,i=(e.blue()*e.alpha()+t.blue()*t.alpha()*(1-e.alpha()))/n;return Re.rgbaColour(Math.ceil(r),Math.ceil(o),Math.ceil(i),n)},Oe=function(e){var t=function(e,t,n,r){var o=parseInt(e,10),i=parseInt(t,10),a=parseInt(n,10),u=parseFloat(r);return k.some(Re.rgbaColour(o,i,a,u))};if("transparent"===e)return t(0,0,0,0);var n=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(null!==n)return t(n[1],n[2],n[3],1);var r=e.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/);return null!==r?t(r[1],r[2],r[3],r[4]):k.none()},Ce=(l.Node.ATTRIBUTE_NODE,l.Node.CDATA_SECTION_NODE,l.Node.COMMENT_NODE,l.Node.DOCUMENT_NODE),_e=(l.Node.DOCUMENT_TYPE_NODE,l.Node.DOCUMENT_FRAGMENT_NODE,l.Node.ELEMENT_NODE),Me=l.Node.TEXT_NODE,He=(l.Node.PROCESSING_INSTRUCTION_NODE,l.Node.ENTITY_REFERENCE_NODE,l.Node.ENTITY_NODE,l.Node.NOTATION_NODE,void 0!==l.window?l.window:Function("return this;")()),Ge=function(e,t){return function(e,t){for(var n=null!=t?t:He,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n}(e.split("."),t)},Pe=function(e,t){var n=Ge(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},Ue=function(e){var t,n=Ge("ownerDocument.defaultView",e);return(t=n,Pe("HTMLElement",t)).prototype.isPrototypeOf(e)},Le=function(e){return Ue(e.dom())},We=(te=Me,function(e){return e.dom().nodeType===te}),qe=function(e){var t=e.dom().body;if(null==t)throw new Error("Body is not available yet");return ve.fromDom(t)},Ve=function(){return(Ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var Be,je=function(){return Fe(0,0)},Fe=function(e,t){return{major:e,minor:t}},ze={nu:Fe,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?je():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return Fe(r(1),r(2))}(e,n)},unknown:je},Ye="Firefox",Xe=function(e,t){return function(){return t===e}},Ke=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Xe("Edge",t),isChrome:Xe("Chrome",t),isIE:Xe("IE",t),isOpera:Xe("Opera",t),isFirefox:Xe(Ye,t),isSafari:Xe("Safari",t)}},$e={unknown:function(){return Ke({current:void 0,version:ze.unknown()})},nu:Ke,edge:g("Edge"),chrome:g("Chrome"),ie:g("IE"),opera:g("Opera"),firefox:g(Ye),safari:g("Safari")},Je="Windows",Qe="Android",Ze="Solaris",et="FreeBSD",tt=function(e,t){return function(){return t===e}},nt=function(e){var t=e.current;return{current:t,version:e.version,isWindows:tt(Je,t),isiOS:tt("iOS",t),isAndroid:tt(Qe,t),isOSX:tt("OSX",t),isLinux:tt("Linux",t),isSolaris:tt(Ze,t),isFreeBSD:tt(et,t)}},rt={unknown:function(){return nt({current:void 0,version:ze.unknown()})},nu:nt,windows:g(Je),ios:g("iOS"),android:g(Qe),linux:g("Linux"),osx:g("OSX"),solaris:g(Ze),freebsd:g(et)},ot=function(e,t){var n=String(t).toLowerCase();return U(e,function(e){return e.search(n)})},it=function(e,n){return ot(e,n).map(function(e){var t=ze.detect(e.versionRegexes,n);return{current:e.name,version:t}})},at=function(e,n){return ot(e,n).map(function(e){var t=ze.detect(e.versionRegexes,n);return{current:e.name,version:t}})},ut=function(e,t){return-1!==e.indexOf(t)},ct=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,st=function(t){return function(e){return ut(e,t)}},lt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return ut(e,"edge/")&&ut(e,"chrome")&&ut(e,"safari")&&ut(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ct],search:function(e){return ut(e,"chrome")&&!ut(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return ut(e,"msie")||ut(e,"trident")}},{name:"Opera",versionRegexes:[ct,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:st("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:st("firefox")},{name:"Safari",versionRegexes:[ct,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ut(e,"safari")||ut(e,"mobile/"))&&ut(e,"applewebkit")}}],ft=[{name:"Windows",search:st("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return ut(e,"iphone")||ut(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:st("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:st("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:st("linux"),versionRegexes:[]},{name:"Solaris",search:st("sunos"),versionRegexes:[]},{name:"FreeBSD",search:st("freebsd"),versionRegexes:[]}],dt={browsers:g(lt),oses:g(ft)},pt=x(function(e,t){var n,r,o,i,a,u,c,s,l,f,d,p,m=dt.browsers(),h=dt.oses(),v=it(m,e).fold($e.unknown,$e.nu),y=at(h,e).fold(rt.unknown,rt.nu);return{browser:v,os:y,deviceType:(r=v,o=e,i=t,a=(n=y).isiOS()&&!0===/ipad/i.test(o),u=n.isiOS()&&!a,c=n.isiOS()||n.isAndroid(),s=c||i("(pointer:coarse)"),l=a||!u&&c&&i("(min-device-width:768px)"),f=u||c&&!l,d=r.isSafari()&&n.isiOS()&&!1===/safari/i.test(o),p=!f&&!l&&!d,{isiPad:g(a),isiPhone:g(u),isTablet:g(l),isPhone:g(f),isTouch:g(s),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:g(d),isDesktop:g(p)})}}(l.navigator.userAgent,function(e){return l.window.matchMedia(e).matches})),mt=_e,ht=Ce,vt=function(e,t){var n=e.dom();if(n.nodeType!==mt)return!1;var r=n;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},yt=function(e){return e.nodeType!==mt&&e.nodeType!==ht||0===e.childElementCount},gt=function(e,t){var n=void 0===t?l.document:t.dom();return yt(n)?k.none():k.from(n.querySelector(e)).map(ve.fromDom)},wt=function(e,t){return e.dom()===t.dom()},bt=(pt.get().browser.isIE(),function(e,t,n){!function(e,t,n){if(!(N(n)||R(n)||S(n)))throw l.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom(),t,n)}),xt=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},kt=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Dt=function(e,t){e.dom().removeAttribute(t)},Tt=function(e,t){var n,r,o=e.dom(),i=l.window.getComputedStyle(o).getPropertyValue(t),a=""!==i||null!=(r=We(n=e)?n.dom().parentNode:n.dom())&&r.ownerDocument.body.contains(r)?i:Nt(o,t);return null===a?void 0:a},Nt=function(e,t){return void 0!==(n=e).style&&I(n.style.getPropertyValue)?e.style.getPropertyValue(t):"";var n},At=function(e){return ve.fromDom(e.dom().ownerDocument)},Rt=function(e){return k.from(e.dom().parentNode).map(ve.fromDom)},It=function(e){return M(e.dom().childNodes,ve.fromDom)},St=function(e){return t=0,n=e.dom().childNodes,k.from(n[t]).map(ve.fromDom);var t,n},Et=(ye("element","offset"),function(e,t){var n=parseFloat(Tt(e,"opacity"));return n<1?Re.rgbaColour(t.red(),t.green(),t.blue(),t.alpha()*n):t}),Ot=function(e){var t=At(e),n=qe(t),r=[e].concat(function(e,t){for(var n=I(t)?t:c,r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=ve.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o}(e,function(e){return wt(e,n)})),o=P(r,function(n,r){if(1===n.alpha())return n;var e=Tt(r,"background-color");return Oe(e).bind(function(e){var t=Et(r,e);return 0<t.alpha()?k.some(Ee(n,t)):k.none()}).getOr(n)},Re.rgbaColour(0,0,0,0));return o.alpha()<1?Ee(o,Re.white()):o},Ct=function(r,o){var e=Tt(r,"color");return Oe(e).bind(function(e){var t=Et(r,e),n=t.alpha()<1?Ee(t,o):t;return k.some(n)})},_t=function(e){var r=Ot(e);return Ct(e,r).map(function(e){var t=Se(r),n=Se(e);return Ie(n,t)})},Mt=function(e,t){return _t(e).filter(function(e){return e<t}).isSome()},Ht=function(e){var t=It(e);return 0<G(t,function(e){return We(e)&&0<(t=e,t.dom().nodeValue).trim().length;var t}).length},Gt={id:"D5c",wcag:"1.4.3",severity:ne.error(),desckey:"a11y.d5c.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(e){var t=ve.fromDom(e);return Ht(t)&&Mt(t,7)},levels:[V.aaa()],htmlversions:[B.html4(),B.html5()]},Pt=function(e){var t=Tt(e,"font-size"),n=new RegExp(".*px").test(t),r=t.match(/(\d*\.?\d*)(.*)/);return n&&null!==r?k.some(Number(r[1])):k.none()},Ut=function(e){var t,n,r=!("bold"!==(n=Tt(e,"font-weight"))&&"bolder"!==n)||!!/^[0-9]*$/.test(t=n)&&700<=parseInt(t,10),o=At(e),i=qe(o),a=Pt(i);return Pt(e).fold(c,function(t){return a.fold(function(){return 24<=t||r&&19<=t},function(e){return 1.5*e<=t||r&&1.2*e<=t})})},Lt={id:"D5a",wcag:"1.4.3",severity:ne.error(),desckey:"a11y.d5a.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(e){var t=ve.fromDom(e);return Ht(t)&&Ut(t)&&Mt(t,3)},levels:[V.aa()],htmlversions:[B.html4(),B.html5()]},Wt={id:"D5b",wcag:"1.4.3",severity:ne.error(),desckey:"a11y.d5b.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(e){var t=ve.fromDom(e);return Ht(t)&&!Ut(t)&&Mt(t,4.5)},levels:[V.aa()],htmlversions:[B.html4(),B.html5()]},qt=function(e,t){return n=function(e){return vt(e,t)},G(It(e),n);var n},Vt=function(e,t){return n=t,o=void 0===(r=e)?l.document:r.dom(),yt(o)?[]:M(o.querySelectorAll(n),ve.fromDom);var n,r,o},Bt={id:"H93",wcag:"4.1.1",severity:ne.error(),desckey:"a11y.h93.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/ensure-compat-parses.html",walkable:!1,check:function(e){var t=ve.fromDom(e),n=Vt(t,"*[id]"),r=P(n,function(e,t){var n,r,o=xt(t,"id");if(void 0===o)return e;if(ke(e.problems,o))return e;if(ke(e.ids,o)){var i=e.ids[o];return Ve(Ve({},e),{problems:Ve(Ve({},e.problems),(n={},n[o]=i,n))})}return Ve(Ve({},e),{ids:Ve(Ve({},e.ids),(r={},r[o]=t.dom(),r))})},{ids:{},problems:{}});return xe(r.problems)},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},jt={id:"I1",wcag:"1.1.1",severity:ne.error(),desckey:"a11y.i1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/text-equiv-all.html",walkable:!0,check:function(e,t){var n=e.hasAttribute("alt"),r=n&&""===e.getAttribute("alt").trim(),o=e.hasAttribute("role")&&"presentation"===e.getAttribute("role");return re(e,"img")&&(!n||(t?n&&r&&!o||n&&!r&&o:r||o))},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},Ft={id:"I2",wcag:"1.1.1",severity:ne.error(),desckey:"a11y.i2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/text-equiv-all.html",walkable:!0,check:function(e){return re(e,"img[alt][src]")&&e.src.split("/").pop()===e.alt.split("/").pop()},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},zt={id:"T1",wcag:"1.3.1",severity:ne.error(),desckey:"a11y.t1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){if(re(e,"table")){var t=e.querySelector("caption");return!t||re(t,":empty")}return!1},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},Yt={id:"T2",wcag:"1.3.1",severity:ne.warning(),desckey:"a11y.t2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return re(e,"table")&&(e.querySelector("[rowspan]")||e.querySelector("[colspan]"))&&!e.hasAttribute("summary")},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4()]},Xt={id:"T3",wcag:"1.3.1",severity:ne.error(),desckey:"a11y.t3.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return re(e,"table")&&e.hasAttribute("summary")&&0<e.querySelectorAll("caption").length&&e.getAttribute("summary")===e.querySelector("caption").innerHTML},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},Kt={id:"T4b",wcag:"1.3.1",severity:ne.error(),desckey:"a11y.t4b.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return"table"===e.nodeName.toLowerCase()&&0===e.querySelectorAll("th").length},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},$t={id:"T4c",wcag:"1.3.1",severity:ne.error(),desckey:"a11y.t4c.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return"th"===e.nodeName.toLowerCase()&&(n=!1===(t=e).hasAttribute("scope"),r=!1===/row|col|rowgroup|colgroup/i.test(t.getAttribute("scope")),n||r);var t,n,r},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},Jt=function(e,t){return 0===e.querySelectorAll(t).length},Qt={id:"T4a",wcag:"1.3.1",severity:ne.error(),desckey:"a11y.t4a.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(e){return"table"===e.nodeName.toLowerCase()&&(Jt(t=e,"tr")||Jt(t,"td"));var t},levels:[V.a(),V.aa(),V.aaa()],htmlversions:[B.html4(),B.html5()]},Zt={all:g([oe,ie,ae,de,me,Lt,Wt,Gt,Bt,jt,Ft,zt,Yt,Xt,$t,Qt,Kt])},en=function(){return Zt.all().slice()},tn=function(e,t,n){var r=xt(e,t).concat(" ",n);nn(e,t,r)},nn=function(e,t,n){bt(e,t,n)},rn=function(e,t){return kt(e,t)?xt(e,t).split(" "):[]},on=function(e,t,n){(kt(e,t)?tn:nn)(e,t,n)},an=function(t,n){Rt(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},un=function(e,t){var n;(n=e,k.from(n.dom().nextSibling).map(ve.fromDom)).fold(function(){Rt(e).each(function(e){cn(e,t)})},function(e){an(e,t)})},cn=function(e,t){e.dom().appendChild(t.dom())},sn=function(t,e){H(e,function(e){cn(t,e)})},ln=function(e){e.dom().textContent="",H(It(e),function(e){fn(e)})},fn=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},dn=function(e){var t,n=It(e);0<n.length&&(t=e,H(n,function(e){an(t,e)})),fn(e)},pn=function(e){return gt(e)},mn=function(e,t){return n=function(e){return vt(e,t)},U(e.dom().childNodes,function(e){return n(ve.fromDom(e))}).map(ve.fromDom);var n},hn=function(e,t){return gt(t,e)},vn=function(e){return pn(e).isSome()},yn=(Be="ephox-foam".replace(/\./g,"-"),{resolve:function(e){return Be+"-"+e}}),gn=yn.resolve("styles"),wn="#"+gn,bn={resolve:yn.resolve,injectStyles:function(e){if(!vn(wn)){var t=ve.fromTag("link");bt(t,"id",gn),bt(t,"rel","stylesheet"),bt(t,"href",e);var n=pn("head").getOrDie("Head element could not be found.");cn(n,t)}},removeStyles:function(){if(vn(wn)){var e=pn("head").getOrDie("Head element could not be found."),t=hn(e,wn).getOrDie("The style element could not be removed");fn(t)}}},xn=function(e,t,n){bt(e,t,n)},kn=function(e,n,t,r,o,i){H(e,function(t){var e=Dn(t.severity,r,o,i).toArray().concat([n]);H(e,function(e){bt(t.element,e,1)})}),k.from(e[0]).each(function(e){xn(e.element,t,e.severity)})},Dn=function(e,t,n,r){switch(e){case"info":return k.some(t);case"warning":return k.some(n);case"error":return k.some(r);default:return k.none()}},Tn=function(e,t,n,r){var o=Vt(e,"["+t+"]");H(o,function(e){Dt(e,t)}),xn(n,t,r)},Nn=function(e,n,r,o,i,a){var t=Vt(e,"["+n+"]");H(t,function(t){H([n,r,o,i,a],function(e){Dt(t,e)}),An(t,n,r)})},An=function(e,t,n){Dt(e,t),Dt(e,n)},Rn=function(r){var o=r.editor();return{start:function(e){kn(e,r.violation(),r.current(),r.info(),r.warn(),r.error())},moveTo:function(e,t){var n=ve.fromDom(o.getBody());Tn(n,r.current(),e,t)},stop:function(){var e=ve.fromDom(o.getBody());Nn(e,r.violation(),r.current(),r.info(),r.warn(),r.error())},exclude:function(e){An(e,r.violation(),r.current())}}},In="data-"+bn.resolve("a11y-current-violation"),Sn="data-"+bn.resolve("a11y-violation"),En="data-"+bn.resolve("a11y-severity-info"),On="data-"+bn.resolve("a11y-severity-warn"),Cn="data-"+bn.resolve("a11y-severity-error"),_n="data-"+bn.resolve("accessibility-ignore"),Mn=Ne(["editor","violation","current","info","warn","error"],[]),Hn={configure:function(t){t.on("init",function(e){H([_n,Sn,En,On,Cn,In],function(e){t.serializer.addTempAttr(e)})})},ignoreAttr:g(_n),manager:function(e){return Rn(Mn({editor:e,violation:Sn,current:In,info:En,warn:On,error:Cn}))}},Gn=function(r){var e,t,n,o,i,a=(e=r.getParam("a11ychecker_level","","string"),_(F,e)?e:V.aa()),u=(t=r.getParam("a11ychecker_html_version","","string"),_(z,t)?t:B.html4()),c=(n=a,o=u,i=en(),{rules:G(i,function(e){return _(e.levels,n)&&_(e.htmlversions,o)}),allowDecorativeImages:j(r)});Hn.configure(r);var s,l=x(!1),f=(s=c,{audit:function(e){return ee(e,s)}}),d=Hn.manager(r),p=Hn.ignoreAttr(),m=[],h=0,v=function(){return l.set(!0),m=y(),h=0,d.start(m),w()},y=function(){var n,e=f.audit(r.getBody()),t=(n=r,M(e,function(e){var t=e.rule;return{id:t.id.toUpperCase(),description:"I1"!==t.id?t.desckey:j(n)?t.desckey+".decorativeAllowed":t.desckey+".decorativeNotAllowed",element:ve.fromDom(e.element),url:t.url,severity:t.severity}}));return G(t,function(t){var e=t.element,n=rn(e,p);return q(n,function(e){return t.id!==e})})},g=function(e){return h=(h+=e)<0?h+m.length:h%m.length,d.moveTo(m[h].element,m[h].severity),r.selection.scrollIntoView(m[h].element.dom()),{summaryLabel:"Issue "+(h+1)+" of "+m.length,issue:m[h],index:h+1}},w=function(){return 0<m.length?k.some(g(0)):k.none()},b=function(){d.stop(),l.set(!1),h=0,m=[]};return{scan:v,stepIssue:g,getIssues:function(){return m.slice(0)},getCurrent:w,getReport:function(){var e=l.get();try{return e||v(),M(m,function(e){return{severity:e.severity,url:e.url,description:K(e.description),element:e.element.dom()}})}finally{e||b()}},resolveCurrent:function(e){return e&&on(m[h].element,p,m[h].id),m=y(),w()},clear:b,isAuditing:function(){return l.get()}}},Pn={getInitialHtml:function(){return'<div role="presentation"></div><div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div>'},buildHtml:function(e,t){return'<div style="white-space:normal;">'+e+(t?'<button aria-label="Show specification details" role="button" style="display:inline;" tabindex="-1"><i class="mce-ico mce-i-help"></i><button>':"")+"</div>"},setSeverity:function(e,t){e.classes.remove("error"),e.classes.remove("warning"),e.classes.remove("success"),e.classes.add(t)}};function Un(u){var c,t={},o=x(null),s=function(e,t,n){return Math.min(Math.max(e,t),n)},e=function(){var e,t,n,r,o=u.getBody();if(o&&c&&!0===c.state.get("visible")){var i=u.inline?u.getElement():u.getContentAreaContainer(),a=("BODY"===(r=o).nodeName&&(r=r.parentNode),r.scrollHeight>r.clientHeight?-25:-10);c.moveRel(i,"tr-tr"),c.moveBy(a,10),t=10,n=(e=c).layoutRect(),e.moveTo(s(n.x,0,l.window.innerWidth-n.w),s(n.y,t,l.window.innerHeight-n.h-t))}};return{actions:t,open:function(){(c=tinymce.ui.Factory.create("window",{title:"Accessibility Checker",spacing:5,padding:10,minWidth:300,layout:"flex",direction:"column",align:"stretch",items:[{type:"label",name:"index",text:"Index",padding:"0 0 5 0"},{type:"widget",classes:"widget infobox has-help",name:"description",onpostrender:function(e){e.control.getEl().innerHTML=Pn.getInitialHtml()},onclick:function(e){if(o.get()){e.stopPropagation(),e.preventDefault();var t=o.get();t&&l.window.open(t, "_blank", "noopener,noreferrer")}}},{type:"container",layout:"flex",direction:"column",align:"stretch",name:"repairer",padding:"5 0 5 0",items:[]},{type:"label",name:"validation",hidden:!0,classes:"error"},{type:"container",name:"footer",layout:"flex",direction:"row",spacing:3,items:[{type:"button",name:"repair",text:K("a11y.widget.repair"),onclick:"repair"},{type:"button",text:K("a11y.widget.ignore"),onclick:"ignore"},{type:"spacer",flex:1},{type:"button",text:K("a11y.widget.previous"),onclick:"prev"},{type:"button",text:K("a11y.widget.next"),autofocus:!0,subtype:"primary",onclick:"next"}]},{type:"container",name:"closer",layout:"flex",direction:"row",hidden:!0,items:[{type:"spacer",flex:1},{type:"button",subtype:"primary",name:"close",text:"Close",onclick:function(){c.close()}}]}]})).on("submit",function(e){e.preventDefault(),t.repair()}),c.modal=!1,c.on("open",function(){e()}),c.on("close",function(){t.close()}),c.on("execute",function(e){t[e.action]()}),u.on("remove",function(){c&&c.close()}),c.renderTo().reflow(),c.moveTo(0,0)},close:function(){c&&(c.close(),c=null)},reposition:e,find:function(e){return c.find(e)},setIndexText:function(e){c.find("#index").show().text(e)},hideIndex:function(){c.find("#index").hide()},setDescriptionText:function(e,t,n){var r=c.find("#description")[0].show();Pn.setSeverity(r,t),o.set(n),r.getEl().firstChild.innerHTML=Pn.buildHtml(e,n),r.updateLayoutRect(),r.reflow(),D.setEditorTimeout(u,function(){r.getEl().lastChild.textContent=e})},setRepairerChildren:function(e){var t;(t=c.find("#repairer")[0]).items().remove(),t.append(e),t.renderNew()},hideFooter:function(){c.find("#footer").hide()},showCloser:function(){var e=c.find("#closer")[0];e.show(),e.focus()},hideRepairer:function(){c.find("#repairer").hide()},showRepairer:function(){c.find("#repairer").show()},hideRepairButton:function(){c.find("#repair").hide()},showRepairButton:function(){c.find("#repair").show()},disableUi:function(e){c.find(e).disabled(!0)},enableUi:function(e){c.find(e).disabled(!1)},setValidationInformation:function(e){c.find("#validation").show().text(e)},hideValidation:function(){c.find("#validation").hide()},retrieveInputValue:function(e){return c.find("#"+e).value()}}}var Ln=function(n){return{is:function(e){return n===e},isValue:s,isError:c,getOr:g(n),getOrThunk:g(n),getOrDie:g(n),or:function(e){return Ln(n)},orThunk:function(e){return Ln(n)},fold:function(e,t){return t(n)},map:function(e){return Ln(e(n))},mapError:function(e){return Ln(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOption:function(){return k.some(n)}}},Wn=function(n){return{is:c,isValue:c,isError:s,getOr:u,getOrThunk:function(e){return e()},getOrDie:function(){return e=String(n),function(){throw new Error(e)}();var e},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return Wn(n)},mapError:function(e){return Wn(e(n))},each:a,bind:function(e){return Wn(n)},exists:c,forall:s,toOption:k.none}},qn={value:Ln,error:Wn,fromOption:function(e,t){return e.fold(function(){return Wn(t)},Ln)}},Vn=function(e){return t=e,n=!0,ve.fromDom(t.dom().cloneNode(n));var t,n},Bn=function(e,t,n){var r=At(e),o=ve.fromTag(n[t],r.dom()),i=It(e),a=M(i,Vn);sn(o,a);var u=Vt(o,"b,strong");return H(u,dn),an(e,o),fn(e),qn.value(o)},jn=function(e){var t=ve.fromDom(e.dom().previousSibling);if(t){var n=It(e);sn(t,n),fn(e)}return qn.value(t)},Fn=function(t,e,n,r){var o=n[e],i="all"===o||"this"===o;if("all"===o||"others"===o){var a=xt(t,"id"),u=r.getBody(),c=ve.fromDom(u),s=Vt(c,'*[id="'+a+'"]'),l=G(s,function(e){return!wt(e,t)});H(l,function(e){Dt(e,"id")})}return i&&Dt(t,"id"),qn.value(t)},zn=function(e,t){return qn.error(t(e))},Yn=function(e,t,n,r,o){return t===n?zn(r,o):qn.value(e)},Xn=function(e,t,n,r,o,i){return 0===t.length?zn(r,i):Yn(e,t,n,r,i)},Kn=function(e){var t=e.split("/");return 0<t.length?t.pop():""},$n=function(e,t,n,r,o,i){var a,u,c,s=(a=e,u="src",k.from(xt(a,u))).map(Kn).getOr(""),l=n[t+"_textinput"];return n[t+"_checkbox"]?(bt(c=e,"alt",""),bt(c,"role","presentation"),qn.value(c)):Xn(e,l,s,r,o,i).map(function(e){return bt(e,"alt",l),"presentation"===xt(e,"role")&&Dt(e,"role"),e})},Jn=function(e){return e.dom().innerHTML},Qn=function(e,t){var n,r,o=At(e).dom(),i=ve.fromDom(o.createDocumentFragment()),a=(n=t,(r=(o||l.document).createElement("div")).innerHTML=n,It(ve.fromDom(r)));sn(i,a),ln(e),cn(e,i)},Zn=function(o,i,a,e,t,n){var r=xt(o,"summary");return Xn(o,a[i],r,e,t,n).map(function(e){var t,n,r=mn(o,"caption").fold(function(){return ve.fromTag("caption")},function(e){return ln(e),e});return Qn(r,a[i]),n=r,St(t=e).fold(function(){cn(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())}),e})},er=function(t,n,r,e,o,i){var a=hn(t,"caption").filter(Le).map(Jn).getOr("");return Xn(t,r[n],a,e,o,i).map(function(e){return bt(t,"summary",r[n]),e})},tr=function(e,t,n){var r=[];if("row"===n[t]){var o=ve.fromDom(e.dom().rows[0]);r=qt(o,"td")}else"col"===n[t]&&H(e.dom().rows,function(e){mn(ve.fromDom(e),"td").each(function(e){r.push(e)})});return H(r,function(t){var n=ve.fromTag("th");H(t.dom().attributes,function(e){bt(n,e.name,xt(t,e.name))}),n.dom().innerHTML=t.dom().innerHTML,un(t,n),fn(t)}),qn.value(e)},nr=function(e,t,n){return bt(e,"scope",n[t]),qn.value(e)},rr=function(e,t){return{type:"label",forName:e,text:t}},or=function(e,t,n){return{type:"listbox",name:e,values:M(t,function(e){return{text:n(e.text),value:e.value}})}},ir=function(e,t){return{type:"textbox",name:e,value:t}},ar=function(e,t){return{type:"checkbox",name:e,text:t}},ur=Ne(["ui","repair","handler"],[]),cr=function(e,t){var n=e.id,r="#"+n+"_textinput",o=t.find(r)[0],i="#"+n+"_checkbox",a=t.find(i)[0],u=function(){!0===a.value()?(t.disableUi(r),t.enableUi("#repair")):(t.enableUi(r),0<o.value().length?(t.enableUi("#repair"),t.enableUi(i)):(t.enableUi(i),t.disableUi("#repair")))};o.on("input",u),a.on("change",u),u()},sr=function(e,t,n,r){var o,i=xt(r,"alt"),a=[rr(t+"_textinput_label",n((o="a11y.i1.repair.info",e?o+".decorativeAllowed":o+".decorativeNotAllowed"))),ir(t+"_textinput",i)];return e?L([[rr(t+"_checkbox_label",n("a11y.i1.repair.checkboxlabel")),ar(t+"_checkbox",n("a11y.i1.repair.checkboxtext"))],a]):a},lr=function(e,t,n,r,o){var i,a,u=((i={})[r+"_textinput"]=t.retrieveInputValue(r+"_textinput"),i),c=e?((a={})[r+"_checkbox"]=t.retrieveInputValue(r+"_checkbox"),a):{},s=Ve(Ve({},u),c);return $n(n,r,s,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",o)};function fr(o,i){var a,u,c,s=(c=j(u=o),{H93:k.some(ur({ui:k.some(function(e,t){return[rr("H93_selectbox_label",e("a11y.h93.repair.info")),or("H93_selectbox",[{text:"a11y.h93.repair.deduplicate.others",value:"others"},{text:"a11y.h93.repair.deduplicate.this",value:"this"},{text:"a11y.h93.repair.deduplicate.all",value:"all"}],e)]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("H93_selectbox");return Fn(e,t,{H93:o},u)},handler:k.none()})),I1:k.some(ur({ui:k.some(function(e,t){return sr(c,"I1",e,t)}),repair:function(e,t,n,r){return lr(c,n,e,t,r)},handler:c?k.some(cr):k.none()})),I2:k.some(ur({ui:k.some(function(e,t){return sr(c,"I2",e,t)}),repair:function(e,t,n,r){return lr(c,n,e,t,r)},handler:c?k.some(cr):k.none()})),T1:k.some(ur({ui:k.some(function(e,t){return[rr("table-caption",e("a11y.t1.repair.info")),ir("table-caption","")]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("table-caption");return Zn(e,t,{T1:o},"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",r)},handler:k.none()})),T2:k.some(ur({ui:k.some(function(e,t){return[rr("table-summary",e("a11y.t2.repair.info")),ir("table-summary","")]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("table-summary");return er(e,t,{T2:o},"a11y.t2.repair.errors.empty","a11y.t2.repair.errors.duplicate",r)},handler:k.none()})),T3:k.some(ur({ui:k.some(function(e,t){var n=mn(t,"caption").fold(function(){return""},function(e){return e.dom().innerHTML});return[rr("table-caption",e("a11y.t1.repair.info")),ir("table-caption",n)]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("table-caption");return Zn(e,t,{T3:o},"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",r)},handler:k.none()})),T4A:k.none(),T4B:k.some(ur({ui:k.some(function(e,t){return[rr("table-headers",e("a11y.t4b.repair.info")),or("table-headers",[{text:"a11y.t4c.repair.header.row",value:"row"},{text:"a11y.t4c.repair.header.col",value:"col"}],e)]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("table-headers");return tr(e,t,{T4B:o})},handler:k.none()})),T4C:k.some(ur({ui:k.some(function(e,t){return[rr("scope-type",e("a11y.t4c.repair.info")),or("scope-type",[{text:"a11y.t4c.repair.scope.row",value:"row"},{text:"a11y.t4c.repair.scope.col",value:"col"},{text:"a11y.t4c.repair.scope.rowgroup",value:"rowgroup"},{text:"a11y.t4c.repair.scope.colgroup",value:"colgroup"}],e)]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("scope-type");return nr(e,t,{T4C:o})},handler:k.none()})),D1:k.some(ur({ui:k.some(function(e,t){return[rr("heading-type",e("a11y.d1.repair.info")),or("heading-type",[{text:"a11y.d1.repair.block.h1",value:"h1"},{text:"a11y.d1.repair.block.h2",value:"h2"},{text:"a11y.d1.repair.block.h3",value:"h3"},{text:"a11y.d1.repair.block.h4",value:"h4"},{text:"a11y.d1.repair.block.h5",value:"h5"},{text:"a11y.d1.repair.block.h6",value:"h6"}],e)]}),repair:function(e,t,n,r){var o=n.retrieveInputValue("heading-type");return Bn(e,t,{D1:o})},handler:k.none()})),D2:k.none(),D3:k.some(ur({ui:k.none(),repair:function(e,t,n,r){return jn(e)},handler:k.none()}))}),e=function(){n(),i.scan().fold(function(){return d()},function(e){return r(e.issue,e.index)})},t=function(){a&&a.close()},n=function(){(a=Un(o)).actions.close=function(){i.clear()},a.actions.ignore=function(){f(!0)},a.actions.prev=h,a.actions.next=v,a.open()},l=function(){a&&a.reposition()},r=function(t,e){a.hideValidation();var n,r="https://www.tiny.cloud/docs-4x/plugins/a11ychecker/#"+t.id;a.setIndexText(K(["a11y.widget.counter",e,i.getIssues().length])),a.setDescriptionText(K(t.description),t.severity,r),(n=t.id,void 0!==s[n]?s[n]:k.none()).fold(p,function(e){return m(e,t)}),l(),o.selection.scrollIntoView(t.element.dom())},f=function(e){i.resolveCurrent(e).fold(function(){return d()},function(e){r(e.issue,e.index)}),l()},d=function(){a.hideIndex(),a.hideRepairer(),a.hideValidation(),a.hideFooter(),a.showCloser(),a.setDescriptionText(K("a11y.widget.issue.none"),"success")},p=function(){a.hideRepairer(),a.hideRepairButton()},m=function(e,r){e.ui().fold(p,function(e,t,n){a.setRepairerChildren(e(K,r.element)),a.showRepairer()}),a.showRepairButton(),e.handler().each(function(e){return e(r,a)}),a.actions.repair=function(){o.undoManager.transact(function(){e.repair()(r.element,r.id,a,K).fold(function(e){a.setValidationInformation(e),l()},function(){return f(!1)})})}},h=function(){var e=i.stepIssue(-1);r(e.issue,e.index)},v=function(){var e=i.stepIssue(1);r(e.issue,e.index)};return{toggleAuditing:function(){i.isAuditing()?t():e()},startAuditing:e,stopAuditing:t,positionDialog:l}}var dr=function(e,t){var n=t.ui.registry.getAll().icons;return k.from(n[e]).orThunk(function(){return k.from(n["temporary-placeholder"])}).getOr("!not found!")},pr=function(e,t,n,r,o){var i,a,u,c=K(n),s=K(t);return'<div class="accessibility-issue__description"><div><div><div class="tox-icon">'+dr("info"===n?"info":"warning",e)+"</div><h2>"+c+"</h2></div><p>"+s+"</p></div><div>"+(i=r,a=e,u='<a href="'+o+'" title="'+K("a11y.widget.help.title")+'" class="tox-button tox-button--naked tox-button--icon" target="_blank" rel="noopener noreferrer" data-alloy-tabstop="true" tabindex="-1"><div class="tox-icon">'+dr(i,a)+"</div></a>","help"===i?u:'<div class="tox-icon">'+dr(i,a)+"</div>")+"</div></div>"};function mr(t,e){return{title:"Accessibility Checker",body:{type:"panel",items:[{type:"panel",classes:["tox-accessibility-issue","accessibility-issue--success"],items:[{type:"htmlpanel",html:pr(e,"a11y.widget.issue.none","success","checkmark"),preset:"presentation"}]}]},buttons:[{type:"submit",name:"ok",text:"OK",primary:!0}],onSubmit:function(e){t.clear(),e.close()},onCancel:function(){t.clear()}}}var hr,vr,yr=function(e,t,n,r){return{type:"selectbox",label:t,name:e,items:M(n,function(e){return{text:r(e.text),value:e.value}})}},gr=function(e,t){return{type:"input",name:e,label:t}},wr=function(e,t,n){return{type:"label",label:t,items:[{type:"checkbox",name:e,label:n}]}},br=function(e){return{type:"htmlpanel",html:'<div class="tox-form__group--error">'+e+"</div>"}},xr=function(e,t,n){e.redial(t),e.focus(n)};(vr=hr||(hr={})).Next="next",vr.Prev="prev",vr.Ignore="ignore",vr.Ok="ok",vr.Repair="repair";var kr=function(e,u,c,o,s){var l=e.issue,f=e.summaryLabel,i=function(r,t,o){var e,n,i="warning"===(e=l.severity)?"warn":e,a=t.fold(function(){return[]},function(e){return[{type:"panel",classes:["accessibility-issue__repair"],items:t.map(function(e){return e.items}).getOr([])}]});return{title:"Accessibility Checker",body:{type:"panel",classes:["tox-accessibility-issue","accessibility-issue--"+i],items:function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}([{type:"panel",classes:["accessibility-issue__header"],items:[{type:"htmlpanel",html:"<h1>"+f+"</h1>",preset:"presentation"},{type:"button",name:hr.Prev,text:"Prev",icon:"action-prev",borderless:!0},{type:"button",name:hr.Next,text:"Next",icon:"action-next",borderless:!0}]},{type:"htmlpanel",html:pr(s,l.description,l.severity,"help",(n=l.id,"https://www.tiny.cloud/docs/plugins/a11ychecker/#"+n)),preset:"presentation"}],a)},buttons:[{type:"custom",name:hr.Ignore,text:"Ignore"},{type:"custom",name:hr.Repair,text:"Repair",disabled:o,primary:!0}],initialData:Ve({},t.map(function(e){return e.initialData}).getOr({})),onAction:function(i,e){var t=e.name;e.value;if(t===hr.Next||t===hr.Prev){var n=u.stepIssue(t===hr.Next?1:-1);xr(i,kr(n,u,c,k.none(),s),t)}else t===hr.Ignore?u.resolveCurrent(!0).fold(function(){xr(i,mr(u,s),hr.Ok)},function(e){xr(i,kr(e,u,c,k.none(),s),hr.Ignore)}):t===hr.Repair&&(o||r.each(function(e){var t,n,r,o;e.repair(l.element,l.id,(t=i.getData(),n=function(e,t){return n=t,r=l.id,o=n,a=0,""===(i=r)||!(o.length<i.length)&&o.substr(a,a+i.length)===i;var n,r,o,i,a},r={},o={},be(t,function(e,t){(n(e,t)?r:o)[t]=e}),{t:r,f:o}).t,function(e){e.fold(function(e){xr(i,kr({issue:l,summaryLabel:f},u,c,k.some(e),s),hr.Repair)},function(){u.resolveCurrent(!1).fold(function(){u.scan().fold(function(){xr(i,mr(u,s),hr.Ok)},function(e){xr(i,kr(e,u,c,k.none(),s),hr.Ignore)})},function(e){xr(i,kr(e,u,c,k.none(),s),hr.Ignore)})})})}))},onChange:function(t){r.each(function(e){e.onChange.each(function(e){return e(t,t.getData(),l)}),e.shouldDisableRepair.each(function(e){e(t.getData(),l)?(t.disable(hr.Repair),o=!0):(t.enable(hr.Repair),o=!1)})})},onCancel:function(){u.clear()}}};return c(l.id).fold(function(){return i(k.none(),k.none(),!0)},function(e){var t,r,n=(t=e,r=l,o.fold(function(){return t.ui.map(function(e){return e(r.id,r.element)})},function(n){return t.ui.map(function(e){var t=e(r.id,r.element);return{items:t.items.concat([br(n)]),initialData:t.initialData}})}));return i(k.some(e),n,e.shouldDisableRepair.bind(function(t){return n.map(function(e){return t(e.initialData,l)})}).getOr(!1))})},Dr=function(e){return e+"_checkbox"},Tr=function(e){return e+"_textinput"},Nr=function(e,t){var n=t.id,r=!0===e[Dr(n)],o=0<e[Tr(n)].length;return!r&&!o},Ar=function(e,t,n){var r=n.id,o=Dr(r),i=Tr(r);!0===t[o]?(e.disable(i),e.enable(hr.Repair)):(e.enable(i),0<t[i].length?(e.enable(hr.Repair),e.enable(o)):(e.enable(o),e.disable(hr.Repair)))},Rr=function(e,t){var n,r=gr(Tr(t),K((n="a11y.i1.repair.info",e?n+".decorativeAllowed":n+".decorativeNotAllowed")));return e?[wr(Dr(t),K("a11y.i1.repair.checkboxlabel"),K("a11y.i1.repair.checkboxtext")),r]:[r]},Ir=function(e,t,n){var r,o,i=xt(e,"alt"),a=t?((r={})[Dr(n)]=!1,r):{},u=((o={})[Tr(n)]=i||"",o);return Ve(Ve({},u),a)},Sr=function(c,s){var l=x(k.none()),e=function(){var t,n,r,o,i,a,u,e=(t=function(e){return c.windowManager.open(e,{inline:"toolbar",ariaAttrs:!0})},n=s,a=j(i=c),u={H93:k.some({ui:k.some(function(e,t){var n;return{items:[yr(e,K("a11y.h93.repair.info"),[{text:"a11y.h93.repair.deduplicate.others",value:"others"},{text:"a11y.h93.repair.deduplicate.this",value:"this"},{text:"a11y.h93.repair.deduplicate.all",value:"all"}],K)],initialData:(n={},n[e]="",n)}}),repair:function(e,t,n,r){i.undoManager.transact(function(){r(Fn(e,t,n,i))})},shouldDisableRepair:k.none(),onChange:k.none()}),I1:k.some({ui:k.some(function(e,t){return{items:Rr(a,e),initialData:Ir(t,a,e)}}),repair:function(e,t,n,r){i.undoManager.transact(function(){r($n(e,t,n,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",K))})},shouldDisableRepair:a?k.some(Nr):k.none(),onChange:a?k.some(Ar):k.none()}),I2:k.some({ui:k.some(function(e,t){return{items:Rr(a,e),initialData:Ir(t,a,e)}}),repair:function(e,t,n,r){i.undoManager.transact(function(){r($n(e,t,n,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",K))})},shouldDisableRepair:a?k.some(Nr):k.none(),onChange:a?k.some(Ar):k.none()}),T1:k.some({ui:k.some(function(e,t){var n;return{items:[gr(e,K("a11y.t1.repair.info"))],initialData:(n={},n[e]="",n)}}),repair:function(e,t,n,r){i.undoManager.transact(function(){r(Zn(e,t,n,"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",K))})},shouldDisableRepair:k.none(),onChange:k.none()}),T2:k.some({ui:k.some(function(e,t){var n;return{items:[gr(e,K("a11y.t2.repair.info"))],initialData:(n={},n[e]="",n)}}),repair:function(e,t,n,r){i.undoManager.transact(function(){r(er(e,t,n,"a11y.t2.repair.errors.empty","a11y.t2.repair.errors.duplicate",K))})},shouldDisableRepair:k.none(),onChange:k.none()}),T3:k.some({ui:k.some(function(e,t){var n,r=mn(t,"caption").fold(function(){return""},function(e){return e.dom().innerHTML});return{items:[gr(e,K("a11y.t1.repair.info"))],initialData:(n={},n[e]=r,n)}}),repair:function(e,t,n,r){i.undoManager.transact(function(){r(Zn(e,t,n,"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",K))})},shouldDisableRepair:k.none(),onChange:k.none()}),T4A:k.none(),T4B:k.some({ui:k.some(function(e,t){var n;return{items:[yr(e,K("a11y.t4b.repair.info"),[{text:"a11y.t4c.repair.header.row",value:"row"},{text:"a11y.t4c.repair.header.col",value:"col"}],K)],initialData:(n={},n[e]="",n)}}),repair:function(e,t,n,r){i.undoManager.transact(function(){r(tr(e,t,n))})},shouldDisableRepair:k.none(),onChange:k.none()}),T4C:k.some({ui:k.some(function(e,t){var n;return{items:[yr(e,K("a11y.t4c.repair.info"),[{text:"a11y.t4c.repair.scope.row",value:"row"},{text:"a11y.t4c.repair.scope.col",value:"col"},{text:"a11y.t4c.repair.scope.rowgroup",value:"rowgroup"},{text:"a11y.t4c.repair.scope.colgroup",value:"colgroup"}],K)],initialData:(n={},n[e]="",n)}}),repair:function(e,t,n,r){i.undoManager.transact(function(){r(nr(e,t,n))})},shouldDisableRepair:k.none(),onChange:k.none()}),D1:k.some({ui:k.some(function(e,t){var n;return{items:[yr(e,K("a11y.d1.repair.info"),[{text:"a11y.d1.repair.block.h1",value:"h1"},{text:"a11y.d1.repair.block.h2",value:"h2"},{text:"a11y.d1.repair.block.h3",value:"h3"},{text:"a11y.d1.repair.block.h4",value:"h4"},{text:"a11y.d1.repair.block.h5",value:"h5"},{text:"a11y.d1.repair.block.h6",value:"h6"}],K)],initialData:(n={},n[e]="",n)}}),repair:function(e,t,n,r){i.undoManager.transact(function(){r(Bn(e,t,n))})},shouldDisableRepair:k.none(),onChange:k.none()}),D2:k.none(),D3:k.some({ui:k.none(),repair:function(e,t,n,r){i.undoManager.transact(function(){r(jn(e))})},shouldDisableRepair:k.none(),onChange:k.none()})},r=function(e){return u.hasOwnProperty(e)?u[e]:k.none()},o=c,n.scan().fold(function(){return t(mr(n,o))},function(e){return t(kr(e,n,r,k.none(),o))}));l.set(k.some(e))},t=function(){l.get().each(function(e){e.close(),s.clear()}),l.set(k.none())};return c.ui.registry.addButton("a11ycheck",{tooltip:K("a11y.widget.title"),icon:"accessibility-check",onAction:e}),c.ui.registry.addMenuItem("a11ycheck",{icon:"accessibility-check",text:K("a11y.widget.title"),onAction:e}),function(){l.get().fold(e,t)}},Er=function(t,e){if(w(tinymce,"4.3.13"))return b('The "a11ychecker" plugin requires at least 4.3.13 version of TinyMCE.'),function(){};var n,r,o,i=Gn(t),a=t.a11ychecker_css_url,u=a||e+"/css/annotations.css";return w(tinymce,"5.0.0")?(o=fr(r=t,i),r.addButton("a11ycheck",{tooltip:K("a11y.widget.title"),icon:"a11y",onclick:o.toggleAuditing}),r.addMenuItem("a11ycheck",{context:"tools",icon:"a11y",text:K("a11y.widget.title"),onclick:o.toggleAuditing}),r.on("ResizeWindow",function(){D.requestAnimationFrame(function(){o.positionDialog()})}),r.on("ScrollWindow",function(){o.positionDialog()}),r.on("ResizeEditor",function(){o.positionDialog()}),r.on("click",function(){o.stopAuditing()}),r.on("keydown",function(){o.stopAuditing()}),n=o.toggleAuditing):n=Sr(t,i),t.on("init",function(e){t.dom.loadCSS(u)}),t.on("remove",function(e){1===tinymce.editors.length&&bn.removeStyles()}),{getReport:i.getReport,toggleaudit:n}};tinymce.PluginManager.requireLangPack("a11ychecker","ar,ca,cs,da,de,el,es,fa,fi,fr_FR,he_IL,hr,hu_HU,it,ja,kk,ko_KR,nb_NO,nl,pl,pt_PT,pt_BR,ro,ru,sk,sl_SI,sv_SE,th_TH,tr,uk,zh_TW,zh_CN"),tinymce.PluginManager.add("a11ychecker",Er)}(window);
