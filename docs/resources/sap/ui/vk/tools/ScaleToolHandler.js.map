{"version":3,"file":"ScaleToolHandler.js","names":["sap","ui","define","EventProvider","Menu","MenuItem","getResourceBundle","threejs","CoordinateSystem","ScaleToolHandler","extend","metadata","library","constructor","tool","this","_priority","_tool","_gizmo","getGizmo","_rect","_rayCaster","THREE","Raycaster","_handleIndex","_gizmoIndex","_handleAxis","Vector3","_handleDirection","_gizmoOrigin","_mouse","Vector2","_mouseOrigin","_originScale","_objectSize","prototype","_updateMouse","event","size","getViewport","getRenderer","getSize","x","width","y","height","setFromCamera","getCamera","getCameraRef","_updateHandles","hoverMode","prevHandleIndex","n","type","i","l","getGizmoCount","touchObj","getTouchObject","intersects","intersectObjects","children","length","indexOf","object","setFromMatrixPosition","matrixWorld","setFromMatrixColumn","normalize","_getObjectScale","_getObjectSize","scale","axis1","axis2","addVectors","highlightHandle","setShouldRenderFrame","hover","_inside","_gesture","handled","click","selectHandle","_getAxisOffset","ray","dir","clone","cross","direction","delta","origin","sub","dot","_getPlaneOffset","dist","multiplyScalar","beginGesture","set","_dragOrigin","move","getEnableSnapping","getDetector","detect","viewport","_viewport","gizmo","detectType","setScalar","getNonUniformScaleEnabled","setComponent","dy","z","isFinite","getEnableStepping","scaleStep","Math","pow","round","log10","max","_setScale","endGesture","undefined","contextMenu","getAllowContextMenu","menu","items","text","getText","key","World","Local","Screen","Custom","itemSelected","item","getParameters","setCoordinateSystem","getKey","bind","openAsContextMenu","_getOffset","obj","rectangle","getBoundingClientRect","p","left","window","pageXOffset","top","pageYOffset","id","getIdForLabel","domobj","document","getElementById","o","w","offsetWidth","h","offsetHeight"],"sources":["ScaleToolHandler-dbg.js"],"mappings":"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"}