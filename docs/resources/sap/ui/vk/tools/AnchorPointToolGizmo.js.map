{"version":3,"file":"AnchorPointToolGizmo.js","names":["sap","ui","define","getResourceBundle","threejs","Gizmo","AnchorPointToolGizmoRenderer","CoordinateSystem","AxisColours","AnchorPointToolOperation","assert","AnchorPointToolGizmo","extend","metadata","library","prototype","init","apply","this","_createEditingForm","_gizmoIndex","_handleIndex","_viewport","_tool","_sceneGizmo","THREE","Scene","light","DirectionalLight","position","set","add","AmbientLight","_touchAreas","Group","_gizmo","_matViewProj","Matrix4","_gizmoSize","_moveDelta","Vector3","_rotationDelta","createGizmoArrow","dir","color","touchAreas","arrowLength","lineRadius","coneHeight","coneRadius","touchRadius","multiplyScalar","lineGeometry","CylinderBufferGeometry","m","makeBasis","y","z","x","setPosition","clone","applyMatrix4","material","MeshLambertMaterial","transparent","line","Mesh","matrixAutoUpdate","userData","coneGeometry","cone","touchGeometry","CylinderGeometry","touchGeometry2","merge","createGizmoPlane","a","b","colors","Float32Array","v1","setComponent","v2","geometry","Geometry","vertices","push","faces","Face3","MeshBasicMaterial","opacity","visible","side","DoubleSide","plane","BufferGeometry","setAttribute","Float32BufferAttribute","Line","LineBasicMaterial","vertexColors","VertexColors","linewidth","window","devicePixelRatio","createGizmoArc","axis","radius","segments","TorusBufferGeometry","Math","PI","rotateY","rotateX","arc","createTouchArc","i","arcMaterial","_arcMesh","_axisTitles","_createAxisTitles","_line","LineSegments","frustumCulled","hasDomElement","_updateHandlesVisibility","allowOperation","getAllowOperation","enableMovement","Rotate","enableRotation","Move","children","_initAnchorPoint","viewport","_anchorPoint","show","tool","hide","pos","copy","updateMatrixWorld","setQuaternion","quaternion","getGizmoCount","getTouchObject","scale","arrowHighlighting","highlightHandle","index","hoverMode","arrow","highlight","setHex","colorAttr","attributes","copyArray","needsUpdate","selectHandle","_units","setText","getText","String","fromCharCode","_editingForm","rerender","setShouldRenderFrame","beginGesture","_isMoved","_isRotated","_originPosition","setFromMatrixPosition","matrixWorld","_originQuaternion","endGesture","fireMoved","fireRotated","_setOffset","offset","gizmoIndex","fireEvent","_move","matInv","getInverse","setFromMatrixScale","newPos","sub","multiply","verticesNeedUpdate","computeBoundingBox","abs","max","setRGB","move","_setRotationAxisAngle","axisIndex","angle1","angle2","deltaAngle","euler","Euler","fromArray","radToDeg","_rotate","i1","i2","n","ceil","cos","sin","indices","geom","setIndex","_deactivateScreenAlignment","quat","Quaternion","setFromEuler","rotate","degToRad","_getValueLocaleOptions","useGrouping","minimumFractionDigits","maximumFractionDigits","getValue","setFromMatrixColumn","normalize","dot","rotation","reorder","setValue","value","quat2","inverse","setFromQuaternion","expandBoundingBox","boundingBox","_expandBoundingBox","getCamera","getCameraRef","_updateGizmoTransformation","camera","multiplyMatrices","projectionMatrix","matrixWorldInverse","_getGizmoScale","setScalar","_updateAxisTitles","_getEditingFormPosition","direction","basis","_extractBasis","render","getMetadata","getName","renderer","getRenderer","clearDepth","_updateEditingForm"],"sources":["AnchorPointToolGizmo-dbg.js"],"mappings":"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"}