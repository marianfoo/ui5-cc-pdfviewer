{"version":3,"file":"AreaMeasurementToolGizmo.js","names":["sap","ui","define","Area","Face","Utils","State","MeasurementToolGizmo","AreaMeasurementToolGizmo","extend","metadata","library","basePrototype","getMetadata","getParent","getClass","prototype","init","call","this","_pointsCountPerClick","beginMeasurementConstruction","measurement","_surface","_currentMeasurement","cancelMeasurementConstruction","endMeasurementConstruction","newMeasurement","updateContour","points","reverse","nowCount","length","lastCount","replaceLastPoint","replaceLastPoints","push","_finishArea","isVertexContour","hasSelfIntersections","vsm","_vsm","outlinedNodeRef","_hoverPoint","nodeRef","finalize","update","_viewport","getCamera","setOutliningStates","_state","SearchingFirstFeature","setFeatures","_vertexFeatures","i","count","removeFeature","_currentFeature","setCurrentFeatureIndex","_updateCurrentFeature","point","viewport","allowClosedContour","allowCurvedEdge","meshAnalyzer","_getMeshAnalyzer","r","_computeSphereRadius","shouldUpdate","p","getPoints","is2D","_is2D","isClosedContour","computePointToPointDistance","_replaceCurrentFeature","_currentFeatureIndex","setValue","slice","intersection","intersectSphere","contour","_faceFeatures","contourId","vertices","curvedEdge","edgePoints","lastOffset","firstEdgePoint","lastEdgePoint","reverseCurvedEdge","computePointToPointDistance2","curvedEdgeId","vertex","vertexId","edge","edgeId","e","projectPointToEdge","faceId","buildFace","setHoverPoint","data","oldHighlightedNodeRef","newHighlightedNodeRef","outlined","unoutlined","worldPoint","needToUpdateMeasurement","settings","_settings","shiftKey","featureEdge","featureFace","currentMeasurement","isFace","setFromFace","isVertex","getValue","fixPoint","state","currentPoints","duplicateLastPoint","SearchingSecondFeature","getArea","hasSelfIntersectionsLastEdge","currentFeature","oldContext","getContext","oldFeatureId","getFeatureId","oldValue","setContext","setFeatureId","addFeature","escapePressed","countLast","pop","countPred","deletePredLastPoints","Off","_tool","setActive","doubleClick"],"sources":["AreaMeasurementToolGizmo-dbg.js"],"mappings":"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"}