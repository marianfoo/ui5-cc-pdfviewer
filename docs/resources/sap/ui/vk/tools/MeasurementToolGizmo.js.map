{"version":3,"file":"MeasurementToolGizmo.js","names":["sap","ui","define","core","Log","Edge","Face","Vertex","MeshAnalyzer","MeshAnalyzer2D","Settings","State","Gizmo","MeasurementToolGizmo","extend","metadata","library","basePrototype","getMetadata","getParent","getClass","prototype","hasDomElement","init","call","this","_viewport","_surface","_tool","_vsm","_settings","_state","Off","_hoverPoint","_currentFeature","_currentFeatureIndex","_firstFeature","_secondFeature","_vertexFeatures","_edgeFeatures","_faceFeatures","_currentMeasurement","_meshAnalyzerMap","Map","_is2D","setCurrentFeatureIndex","index","error","delta","push","pop","splice","_createMeshAnalyzer","nodeRef","meshAnalyzer","indexCount","lineCount","processNode","geometry","isBufferGeometry","pos","getAttribute","idx","getIndex","i","count","v0","THREE","Vector3","fromArray","array","v1","v2","applyMatrix4","matrixWorld","addTriangle","x","y","z","children","forEach","pass","finishMeshBuilding","_createMeshAnalyzer2D","getCamera","_getViewBox","_getMeshAnalyzer","existing","get","set","show","viewport","tool","getMeasurementSurface","byId","getViewStateManager","getScene","getName","load","SearchingFirstFeature","hide","surface","fi","fc","length","removeFeature","ei","ec","vi","vc","removeMeasurement","vsm","outlinedNodeRef","setOutliningStates","_computeSphereRadius","point","r","sp","_camera","_worldToScreen","p0","_screenToWorld","Math","abs","viewportRect","getDomRef","getBoundingClientRect","halfWidth","width","halfHeight","height","cameraRef","getCameraRef","worldPoint","screenPoint","clone","project","rx","ry","ip","sign","unprojected","unproject","d","distanceTo","_replaceCurrentFeature","feature","featureId","needToUpdate","addFeature","getContext","getFeatureId","setContext","setFeatureId"],"sources":["MeasurementToolGizmo-dbg.js"],"mappings":"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"}