{"version":3,"file":"RotateToolHandler.js","names":["sap","ui","define","EventProvider","Menu","MenuItem","getResourceBundle","threejs","CoordinateSystem","RotateToolHandler","extend","metadata","library","constructor","tool","this","_priority","_tool","_gizmo","getGizmo","_rect","_rayCaster","THREE","Raycaster","linePrecision","_handleIndex","_gizmoIndex","_matrixOrigin","Matrix4","_levelingQuaternion","Quaternion","_mouse","Vector2","_mouseOrigin","prototype","_updateMouse","event","size","getViewport","getRenderer","getSize","x","width","y","height","setFromCamera","getCamera","getCameraRef","_updateHandles","hoverMode","prevHandleIndex","n","type","i","l","getGizmoCount","touchObj","getTouchObject","intersects","intersectObject","length","children","indexOf","object","copy","matrixWorld","_getLevelingQuaternion","_objectSize","_getObjectSize","_getGizmoScale","position","highlightHandle","setShouldRenderFrame","hover","_inside","_gesture","handled","click","selectHandle","_getMouseAngle","ray","delta","_rotationPoint","clone","sub","origin","dist","_rotationAxis","dot","direction","mouseDirection","multiplyScalar","normalize","Math","atan2","_axis2","_axis1","beginGesture","Vector3","setFromMatrixColumn","crossVectors","setFromMatrixPosition","abs","cos","PI","matCamera","_startAngle","_prevDeltaAngle","move","angle1","deltaAngle","sign","angle2","getEnableStepping","step","steps","sizes","degToRad","angle","round","getEnableSnapping","getDetector","detect","viewport","_viewport","gizmo","detectType","handleIndex","isFinite","_setRotationAxisAngle","endGesture","contextMenu","getAllowContextMenu","menu","items","text","getText","key","World","Local","Screen","Custom","itemSelected","item","getParameters","setCoordinateSystem","getKey","bind","openAsContextMenu","_getOffset","obj","rectangle","getBoundingClientRect","p","left","window","pageXOffset","top","pageYOffset","id","getIdForLabel","domobj","document","getElementById","o","w","offsetWidth","h","offsetHeight"],"sources":["RotateToolHandler-dbg.js"],"mappings":"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"}