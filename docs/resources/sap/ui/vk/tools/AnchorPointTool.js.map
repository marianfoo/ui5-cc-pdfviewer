{"version":3,"file":"AnchorPointTool.js","names":["sap","ui","define","threejs","Tool","AnchorPointToolHandler","AnchorPointToolGizmo","AnchorPointToolOperation","AnchorPointTool","extend","metadata","library","properties","enableStepping","type","defaultValue","showEditingUI","allowOperation","All","allowContextMenu","position","quaternion","events","moving","parameters","x","y","z","moved","rotating","rotated","constructor","sId","mSettings","apply","this","arguments","_viewport","_handler","_gizmo","prototype","init","call","setFootprint","gizmo","setAggregation","setProperty","setViewport","viewport","_deactivateScreenAlignment","getGizmo","_initAnchorPoint","setActive","value","activeViewport","gizmoContainer","show","_addLocoHandler","_removeLocoHandler","hide","queueCommand","command","isViewportType","setShowEditingUI","setShouldRenderFrame","setAllowOperation","_updateHandlesVisibility","move","rotate","moveTo","target","useObjectsOrigin","nodeRefs","Array","isArray","pos","THREE","Vector3","Matrix4","decompose","Quaternion","count","center","forEach","nodeRef","updateWorldMatrix","add","setFromMatrixPosition","matrixWorld","multiplyScalar","boundingBox","Box3","expandByObject","getCenter","setPosition","alignTo","setQuaternion","alignToWorld","alignToScreen","_activateScreenAlignment","alignToScreenCallback","camera","getCamera","getCameraRef","bind","attachCameraChanged","detachCameraChanged","Error"],"sources":["AnchorPointTool-dbg.js"],"mappings":";;;;;;AAQAA,IAAIC,GAAGC,OAAO,CACb,sBACA,SACA,2BACA,yBACA,8BACE,SACFC,EACAC,EACAC,EACAC,EACAC,GAEA,aAiBA,IAAIC,EAAkBJ,EAAKK,OAAO,kCAA2F,CAC5HC,SAAU,CACTC,QAAS,YACTC,WAAY,CAIXC,eAAgB,CACfC,KAAM,UACNC,aAAc,OAKfC,cAAe,CACdF,KAAM,UACNC,aAAc,OAKfE,eAAgB,CACfH,KAAM,2CACNC,aAAcR,EAAyBW,KAKxCC,iBAAkB,CACjBL,KAAM,UACNC,aAAc,MAKfK,SAAU,CACTN,KAAM,MACNC,aAAc,MAKfM,WAAY,CACXP,KAAM,MACNC,aAAc,OAGhBO,OAAQ,CAIPC,OAAQ,CACPC,WAAY,CACXC,EAAG,QACHC,EAAG,QACHC,EAAG,UAMLC,MAAO,CACNJ,WAAY,CACXC,EAAG,QACHC,EAAG,QACHC,EAAG,UAMLE,SAAU,CACTL,WAAY,CACXC,EAAG,QACHC,EAAG,QACHC,EAAG,UAMLG,QAAS,CACRN,WAAY,CACXC,EAAG,QACHC,EAAG,QACHC,EAAG,YAMPI,YAAa,SAASC,EAAKC,GAC1B7B,EAAK8B,MAAMC,KAAMC,WAGjBD,KAAKE,UAAY,KACjBF,KAAKG,SAAW,IAAIjC,EAAuB8B,MAC3CA,KAAKI,OAAS,IACf,IAGD/B,EAAgBgC,UAAUC,KAAO,WAChC,GAAIrC,EAAKoC,UAAUC,KAAM,CACxBrC,EAAKoC,UAAUC,KAAKC,KAAKP,KAC1B,CAGAA,KAAKQ,aAAa,CAAC,+BAEnB,IAAIC,EAAQ,IAAItC,EAChB6B,KAAKU,eAAe,QAASD,GAE7BT,KAAKW,YAAY,WAAYF,EAAML,OAAOnB,UAC1Ce,KAAKW,YAAY,aAAcF,EAAML,OAAOlB,WAC7C,EAEAb,EAAgBgC,UAAUO,YAAc,SAASC,GAChD,GAAIb,KAAKE,YAAcW,EAAU,CAChCb,KAAKc,4BACN,CACA7C,EAAKoC,UAAUO,YAAYL,KAAKP,KAAMa,GACtC,GAAIA,EAAU,CACbb,KAAKe,WAAWC,iBAAiBH,EAClC,CACD,EAGAxC,EAAgBgC,UAAUY,UAAY,SAASC,EAAOC,EAAgBC,GACrEnD,EAAKoC,UAAUY,UAAUV,KAAKP,KAAMkB,EAAOC,EAAgBC,GAE3D,GAAIpB,KAAKE,UAAW,CACnB,GAAIgB,EAAO,CACVlB,KAAKI,OAASJ,KAAKe,WACnBf,KAAKI,OAAOiB,KAAKrB,KAAKE,UAAWF,MAEjCA,KAAKsB,kBACLtB,KAAKc,4BACN,KAAO,CACNd,KAAKuB,qBAEL,GAAIvB,KAAKI,OAAQ,CAChBJ,KAAKI,OAAOoB,OACZxB,KAAKI,OAAS,IACf,CACD,CACD,CAEA,OAAOJ,IACR,EASA3B,EAAgBgC,UAAUoB,aAAe,SAASC,GACjD,GAAI1B,KAAKsB,kBAAmB,CAC3B,GAAItB,KAAK2B,eAAe,8BAA+B,CACtDD,GACD,CACD,CACA,OAAO1B,IACR,EAEA3B,EAAgBgC,UAAUuB,iBAAmB,SAASV,GACrDlB,KAAKW,YAAY,gBAAiBO,EAAO,MACzC,GAAIlB,KAAKE,UAAW,CACnBF,KAAKE,UAAU2B,sBAChB,CACA,OAAO7B,IACR,EAEA3B,EAAgBgC,UAAUyB,kBAAoB,SAASZ,GACtDlB,KAAKW,YAAY,iBAAkBO,EAAO,MAC1C,GAAIlB,KAAKI,OAAQ,CAChBJ,KAAKI,OAAO2B,0BACb,CACA,GAAI/B,KAAKE,UAAW,CACnBF,KAAKE,UAAU2B,sBAChB,CACA,OAAO7B,IACR,EAWA3B,EAAgBgC,UAAU2B,KAAO,SAAS1C,EAAGC,EAAGC,GAC/C,GAAIQ,KAAKI,OAAQ,CAChBJ,KAAKI,OAAO4B,KAAK1C,EAAGC,EAAGC,EACxB,CACA,GAAIQ,KAAKE,UAAW,CACnBF,KAAKE,UAAU2B,sBAChB,CACA,OAAO7B,IACR,EAWA3B,EAAgBgC,UAAU4B,OAAS,SAAS3C,EAAGC,EAAGC,GACjD,GAAIQ,KAAKI,OAAQ,CAChBJ,KAAKI,OAAO6B,OAAO3C,EAAGC,EAAGC,EAC1B,CACA,GAAIQ,KAAKE,UAAW,CACnBF,KAAKE,UAAU2B,sBAChB,CACA,OAAO7B,IACR,EAUA3B,EAAgBgC,UAAU6B,OAAS,SAASC,EAAQC,GACnD,IAAIC,EAAWC,MAAMC,QAAQJ,GAAUA,EAAS,CAACA,GACjD,IAAIK,EAAM,IAAIC,MAAMC,QACpB,GAAIP,aAAkBM,MAAME,QAAS,CACpCR,EAAOS,UAAUJ,EAAK,IAAIC,MAAMI,WAAc,IAAIJ,MAAMC,QACzD,MAAO,GAAIN,EAAkB,CAC5B,IAAIU,EAAQ,EACZ,IAAIC,EAAS,IAAIN,MAAMC,QACvBL,EAASW,QAAQ,SAASC,GACzBA,EAAQC,kBAAkB,MAAO,OACjCV,EAAIW,IAAIJ,EAAOK,sBAAsBH,EAAQI,cAC7CP,GACD,GACAN,EAAIc,eAAe,EAAIR,EACxB,KAAO,CACN,IAAIS,EAAc,IAAId,MAAMe,KAC5BnB,EAASW,QAAQ,SAASC,GACzBM,EAAYE,eAAeR,EAC5B,GACAM,EAAYG,UAAUlB,EACvB,CACAxC,KAAKe,WAAW4C,YAAYnB,GAC5B,GAAIxC,KAAKE,UAAW,CACnBF,KAAKE,UAAU2B,sBAChB,CACA,OAAO7B,IACR,EASA3B,EAAgBgC,UAAUuD,QAAU,SAASzB,GAC5CnC,KAAKc,6BACL,IAAI5B,EAAa,IAAIuD,MAAMI,WAC3B,GAAIV,aAAkBM,MAAME,QAAS,CACpCR,EAAOS,UAAU,IAAIH,MAAMC,QAAWxD,EAAY,IAAIuD,MAAMC,QAC7D,MAAO,GAAIP,EAAQ,CAClBA,EAAOe,kBAAkB,MAAO,OAChCf,EAAOkB,YAAYT,UAAU,IAAIH,MAAMC,QAAWxD,EAAY,IAAIuD,MAAMC,QACzE,CACA1C,KAAKe,WAAW8C,cAAc3E,GAC9B,GAAIc,KAAKE,UAAW,CACnBF,KAAKE,UAAU2B,sBAChB,CACA,OAAO7B,IACR,EAQA3B,EAAgBgC,UAAUyD,aAAe,WACxC9D,KAAKc,6BACLd,KAAKe,WAAW8C,cAAc,IAAIpB,MAAMI,YACxC,GAAI7C,KAAKE,UAAW,CACnBF,KAAKE,UAAU2B,sBAChB,CACA,OAAO7B,IACR,EAQA3B,EAAgBgC,UAAU0D,cAAgB,WACzC,GAAI/D,KAAKE,UAAW,CACnBF,KAAKgE,2BACLhE,KAAKiE,wBACLjE,KAAKE,UAAU2B,sBAChB,CACA,OAAO7B,IACR,EAEA3B,EAAgBgC,UAAU2D,yBAA2B,WACpD,IAAKhE,KAAKiE,sBAAuB,CAChCjE,KAAKiE,sBAAwB,WAC5B,IAAIC,EAASlE,KAAKE,UAAUiE,YAAYC,eACxCpE,KAAKe,WAAW8C,cAAcK,EAAOhF,WACtC,EAAEmF,KAAKrE,MACPA,KAAKE,UAAUoE,oBAAoBtE,KAAKiE,sBACzC,CACD,EAEA5F,EAAgBgC,UAAUS,2BAA6B,WACtD,GAAId,KAAKiE,uBAAyBjE,KAAKE,UAAW,CACjDF,KAAKE,UAAUqE,oBAAoBvE,KAAKiE,uBACxCjE,KAAKiE,sBAAwB,IAC9B,CACD,EAEA5F,EAAgBgC,UAAUsD,YAAc,WACvC,MAAM,IAAIa,MAAM,4CACjB,EAEAnG,EAAgBgC,UAAUwD,cAAgB,WACzC,MAAM,IAAIW,MAAM,8CACjB,EAEA,OAAOnG,CACR"}