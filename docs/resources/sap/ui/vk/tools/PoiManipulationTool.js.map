{"version":3,"file":"PoiManipulationTool.js","names":["sap","ui","define","Tool","threejs","PoiToolHandler","PoiToolGizmo","PoiHelper","ToolNodeSet","NodeContentType","PoiManipulationTool","extend","metadata","library","properties","nodeSet","type","defaultValue","Highlight","aggregations","buttons","multiple","events","editing","parameters","nodeRef","removing","moving","x","y","z","nodesProperties","moved","constructor","sId","mSettings","apply","this","arguments","_viewport","_poiHelper","setAggregation","_handler","_buttonPosition","THREE","Vector2","_selectedPoi","Set","prototype","init","call","_editButton","m","Button","icon","ButtonType","Neutral","press","event","fireEditing","values","next","value","bind","addStyleClass","_deleteButton","fireRemoving","addAggregation","setButtonsVisibility","attachMoved","getParameter","i","length","node","_gizmo","getIgnoreNonPoiNode","_vkGetNodeContentType","Symbol","adjustPoi","setFootprint","getSelectedPois","pois","vsm","_viewStateManager","getSymbolNodes","forEach","poi","getSelectionState","push","_updateSelectedPoi","symbolNodes","includes","delete","add","_updateButtonPosition","nodeRect","getPoiRect","nodeBoundingBox","Box3","expandByObject","center","Vector3","getCenter","nodeCenter","projectToScreen","getCamera","buttonx","width","buttony","height","set","handlePoiSelectionChange","setActive","activeViewport","updateButtons","getGizmo","show","rerender","_addLocoHandler","attachSelectionChanged","_removeLocoHandler","detachSelectionChanged","hide","getButtons","buttonsDom","btn","getVisible","getDomRef","parentElement","size","style","display","left","top","visible","setVisible","addButtons","controls","Array","isArray","ctr"],"sources":["PoiManipulationTool-dbg.js"],"mappings":"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"}