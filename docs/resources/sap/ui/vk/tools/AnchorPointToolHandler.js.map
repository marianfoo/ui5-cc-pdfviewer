{"version":3,"file":"AnchorPointToolHandler.js","names":["sap","ui","define","EventProvider","Menu","MenuItem","getResourceBundle","threejs","AnchorPointToolHandler","extend","metadata","library","constructor","tool","this","_priority","_tool","_gizmo","getGizmo","_rect","_rayCaster","THREE","Raycaster","_handleIndex","_gizmoIndex","_handleAxis","Vector3","_gizmoOrigin","_gizmoScale","_matrixOrigin","Matrix4","_rotationOrigin","_mouse","Vector2","_mouseOrigin","prototype","_updateMouse","event","size","getViewport","getRenderer","getSize","x","width","y","height","setFromCamera","getCamera","getCameraRef","_updateHandles","hoverMode","prevHandleIndex","n","type","i","l","getGizmoCount","touchObj","getTouchObject","intersects","intersectObject","length","children","indexOf","object","setFromMatrixPosition","matrixWorld","copy","scale","extractRotation","setFromMatrixColumn","normalize","highlightHandle","setShouldRenderFrame","hover","_inside","_gesture","handled","click","selectHandle","delta","_getAxisOffset","ray","dir","clone","cross","direction","origin","sub","dot","_getPlaneOffset","dist","multiplyScalar","_getMouseAngle","_rotationPoint","_rotationAxis","mouseDirection","Math","atan2","_axis2","_axis1","beginGesture","_dragOrigin","crossVectors","abs","cos","PI","matCamera","levelDir","minDP","axis","setComponent","dp","_levelAngle","_startAngle","_prevDeltaAngle","_setOffset","offset","getEnableStepping","stepSize","pow","round","log10","matInv","getInverse","applyMatrix4","pos","add","pos1","getComponent","pos2","move","isFinite","z","angle1","deltaAngle","sign","angle2","step","degToRad","angle","_setRotationAxisAngle","endGesture","undefined","getSelection","viewStateManager","selection","enumerateSelection","node","push","contextMenu","getAllowContextMenu","viewport","menu","items","text","getText","itemSelected","item","getParameters","index","getSource","indexOfItem","moveTo","_viewStateManager","scene","getScene","getSceneRef","boundingBox","Box3","_expandBoundingBox","getCenter","setPosition","bind","openAsContextMenu","_viewport","_getOffset","obj","rectangle","getBoundingClientRect","p","left","window","pageXOffset","top","pageYOffset","id","getIdForLabel","domobj","document","getElementById","o","w","offsetWidth","h","offsetHeight"],"sources":["AnchorPointToolHandler-dbg.js"],"mappings":"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"}