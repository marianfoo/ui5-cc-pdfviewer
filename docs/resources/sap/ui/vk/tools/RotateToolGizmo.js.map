{"version":3,"file":"RotateToolGizmo.js","names":["sap","ui","define","threejs","Gizmo","RotateToolGizmoRenderer","RotatableAxis","CoordinateSystem","AxisColours","AnimationTrackType","AnimationTrackValueType","GizmoPlacementMode","assert","Log","RotateToolGizmo","extend","metadata","library","prototype","init","apply","this","_createEditingForm","String","fromCharCode","_gizmoIndex","_handleIndex","_value","THREE","Vector3","_rotationDelta","_viewport","_tool","_sceneGizmo","Scene","_gizmo","Group","_touchAreas","add","_axis","All","_coordinateSystem","World","_nodes","_matViewProj","Matrix4","_gizmoSize","createGizmoCircle","axis","color","radius","segments","geometry","TorusBufferGeometry","rotateY","Math","PI","rotateX","circle","Mesh","MeshBasicMaterial","transparent","matrixAutoUpdate","userData","createTouchCircle","opacity","i","AxesHelper","arcMaterial","side","DoubleSide","_arcMesh","Geometry","visible","_axisTitles","_createAxisTitles","hasDomElement","setAxis","value","RotatableAxises","X","Y","Z","Screen","children","resetValues","setScalar","setCoordinateSystem","coordinateSystem","screenSystem","show","viewport","tool","length","_updateSelection","_viewStateManager","nodesProperties","_getNodesProperties","fireEvent","x","y","z","_prepareForCreatingRotationKey","animationPlayer","time","playbackIndex","forEach","nodeInfo","nodeRef","node","euler","setTime","data","getAnimatedProperty","Rotate","offsetToPrevious","_nodeUserDataMap","Map","get","set","eulerInParentCoors","Euler","startEulerInParentCoors","bind","playback","getCurrentPlayback","_prepareForCreatingKey","hide","_cleanTempData","_updateEditingForm","getGizmoCount","Local","Parent","getTouchObject","_updateGizmoObjectTransformation","highlightHandle","index","hoverMode","arrow","material","setHex","axisTitle","selectHandle","gizmoIndex","getAutoResetValues","setShouldRenderFrame","beginGesture","_beginValue","clone","_matOrigin","matrixWorld","parent","updateMatrixWorld","matOrigin","matLocalOrigin","matrix","matParentInv","getInverse","quaternion","_printEventInfo","event","debug","properties","name","offsetToRest","offsetToRestInCoordinates","absolute","world","restDifference","restDifferenceInCoordinates","property","offsetEuler","offsetQ","Quaternion","setFromEuler","_playback","sequenceOffset","_getEndPropertyInPreviousPlayback","sequenceOffsetQ","multiply","w","transform","getTransformation","wtrans","getTransformationWorld","wq","we","setFromQuaternion","quatInitialDiffInv","quat","push","endGesture","startEuler","Custom","skipUpdateJointNode","_setJointNodeOffsets","fireRotated","getNearestRotation","original","target","abs","rotateFromRestPosition","degToRad","ni","nc","ignore","radToDeg","restTrans","getRestTransformationUsingJoint","restQuaternion","_getEffectiveParent","offsetQuaternion","_setJointNodeMatrix","copy","updateMatrix","rotateRestPosition","currentMat","currentMatInv","matRest","matRestInv","offsetMat","makeRotationFromQuaternion","offsetRotationMatInParent","offsetMInParent","quatInitialDiff","currentE","setFromRotationMatrix","matInitialDiff","decompose","position","scale","_updateEulerForCreatingAnimationKey","aboutSingleAxis","rTrans","getRelativeTransformation","em","sm","offsetQInParent","offsetMatInParent","offsetRotationMat","_rotate","addVectors","toArray","angle","axisIndex","charCodeAt","setFromMatrixColumn","normalize","matRotate","makeRotationAxis","pos","setFromMatrixPosition","setPosition","sub","applyMatrix4","setFromMatrixScale","localAxis","transformDirection","setFromAxisAngle","_setRotationAxisAngle","angle1","angle2","deltaAngle","vertices","dir","i1","i2","n","max","ceil","a","setComponent","cos","sin","indices","geom","BufferGeometry","setIndex","setAttribute","Float32BufferAttribute","rotate","_getValueLocaleOptions","useGrouping","minimumFractionDigits","maximumFractionDigits","getValue","getComponent","setValue","expandBoundingBox","boundingBox","_expandBoundingBox","getCamera","getCameraRef","viewStateManager","call","getEnableSnapping","getDetector","setSource","handleSelectionChanged","_getLevelingQuaternion","objectIndex","anchorPoint","_getAnchorPoint","_getObjectSize","Box3","isEmpty","size","getSize","_updateGizmoTransformation","camera","_updateAxisTitles","_getEditingFormPosition","direction","multiplyScalar","render","getMetadata","getName","renderer","getRenderer","multiplyMatrices","projectionMatrix","matrixWorldInverse","clearDepth","l"],"sources":["RotateToolGizmo-dbg.js"],"mappings":"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"}