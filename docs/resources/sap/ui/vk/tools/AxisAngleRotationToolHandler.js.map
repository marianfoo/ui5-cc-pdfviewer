{"version":3,"file":"AxisAngleRotationToolHandler.js","names":["sap","ui","define","EventProvider","Menu","MenuItem","getResourceBundle","threejs","CoordinateSystem","AxisAngleRotationToolHandler","extend","metadata","library","constructor","tool","this","_priority","_tool","_gizmo","getGizmo","_rect","_rayCaster","THREE","Raycaster","linePrecision","_handleIndex","_gizmoIndex","_matrixOrigin","Matrix4","_mouse","Vector2","_mouseOrigin","prototype","_updateMouse","event","size","getViewport","getRenderer","getSize","x","width","y","height","setFromCamera","getCamera","getCameraRef","_updateHandles","hoverMode","prevHandleIndex","n","type","i","l","getGizmoCount","touchObj","getTouchObject","intersects","intersectObject","length","children","indexOf","object","copy","matrixWorld","_objectSize","_getObjectSize","_getGizmoScale","position","highlightHandle","setShouldRenderFrame","hover","_inside","_gesture","handled","click","selectHandle","_getMouseAngle","ray","delta","_rotationPoint","clone","sub","origin","dist","_rotationAxis","dot","direction","mouseDirection","multiplyScalar","normalize","Math","atan2","_axis2","_axis1","beginGesture","Vector3","setFromMatrixColumn","crossVectors","setFromMatrixPosition","abs","cos","PI","matCamera","_startAngle","degToRad","getValue","_prevAngle","_deltaAngle","move","mouseAngle","moveDelta","angle1","angle2","getEnableStepping","step","steps","sizes","round","getEnableSnapping","getDetector","detect","viewport","_viewport","gizmo","detectType","handleIndex","isFinite","_setRotationAxisAngle","endGesture","contextMenu","getAllowContextMenu","_getOffset","obj","rectangle","getBoundingClientRect","p","left","window","pageXOffset","top","pageYOffset","id","getIdForLabel","domobj","document","getElementById","o","w","offsetWidth","h","offsetHeight"],"sources":["AxisAngleRotationToolHandler-dbg.js"],"mappings":"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"}