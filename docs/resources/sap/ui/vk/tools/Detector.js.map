{"version":3,"file":"Detector.js","names":["sap","ui","define","Detector","this","_verticesMap","Map","_objArr","_collidedUuids","Set","_sourceObjects","_targetObjects","_srcBoxHelper","_sourceBox","THREE","Box3","_originPos","Vector3","_targetBoxHelper","_targetBoxes","_detectDistance","_direction","_isReady","_finalDistance","_finalSnaps","_intersectDistance","Number","NEGATIVE_INFINITY","_collidedUuid","_isMoved","_detectType","move","detectMove","bind","scale","detectScale","rotate","detectRotate","prototype","isReady","setMoved","value","getObjArray","addObjFromScene","viewport","sceneRef","_scene","getSceneRef","vsm","_viewStateManager","length","clear","traverse","child","isMesh","find","o","uuid","push","vArr","getVertices","geometry","set","setSource","viewStateManager","selectedNodes","enumerateSelection","nodeRef","obj","pop","setSelectionStates","children","_isGroup","meshes","node","type","BoxHelper","update","setFromObject","_sourceSize","getSize","_calculateInitialDetectDistance","setTarget","vec","pos1","viewportSize","getRenderer","Vector2","x","y","camera","getCamera","getCameraRef","unproject","sub","position","normalize","distance","z","copy","add","multiplyScalar","pos2","viewWidth","distanceTo","Math","abs","computeBoundingSphere","filter","forEach","to","toBoxHelper","toBox","updateTargetBox","tbHelper","i","l","vertices","isGeometry","isBufferGeometry","attribute","attributes","undefined","v","vStr","count","fromBufferAttribute","JSON","stringify","clone","findClosestVertex","radius","object","get","vertex","localPosition","worldToLocal","il","localToWorld","findClosestSnap","targetObj","increment","snap","intersectDetect","interObjArr","snaps","originBBoxExp","expandByScalar","targetIdx","findIndex","t","has","intersectsBox","detectCollisionGJK","getFinalSnaps","finalSnaps","size","snapsArray","Array","from","keys","minSnap","q","ql","objFound","currDistance","nextSnap","nextDistance","snapMove","option","_op","gizmo","_tool","_handler","_gesture","_moveDelta","_move","setShouldRenderFrame","detect","snapScale","_scaleDelta","equals","gsArray","toArray","s","setComponent","_scale","snapRotate","angle2","angle1","_setRotationAxisAngle","handleIndex","_calculateDetectDistance","sourceSize","direction","newDetectDistance","halfBoundingBox","raycaster","Raycaster","_snapAction","debounce","intersectObjects","cid","cobj","delete","_gizmoPos","_gizmo","getWorldPosition","srcWorldPos","bSphere","sphereRadius","boundingSphere","applyMatrix4","matrixWorld","Sphere","targetBBox","intersectsSphere","pointToSource","_radius","axisIndex","_axis","setFromMatrixColumn","_matOrigin","transformDirection","subVectors","crossVectors","_rotationDelta","getComponent","negate","rotatePlane","Plane","tempTargets","intersectsPlane","detectOptions","getCenter","detectType","finalDirection","func","wait","timeout","that","args","arguments","clearTimeout","setTimeout","apply","target","MAX_ITERATIONS","GJK","shape1","shape2","simplex","n","d","support","dot","tmp","tmp2","cross","face","a","aO","ab","ac","ad","abc","acd","oneFace","twoFaces","dir","p1","getFarthestPoint","p2","shape","p","proj","abp","acp","adb","ABC","ACD","ADB","tests","start","performance","now","isCollide","console","log"],"sources":["Detector-dbg.js"],"mappings":"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"}