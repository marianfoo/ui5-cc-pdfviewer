{"version":3,"file":"ScaleToolGizmo.js","names":["sap","ui","define","threejs","Gizmo","ScaleToolGizmoRenderer","CoordinateSystem","AxisColours","AnimationTrackType","assert","Log","ScaleToolGizmo","extend","metadata","library","prototype","init","apply","this","_createEditingForm","_gizmoIndex","_handleIndex","_value","THREE","Vector3","setScalar","_scaleDelta","_viewport","_tool","_nonUniformScaleEnabled","_sceneGizmo","Scene","light","DirectionalLight","position","set","add","AmbientLight","_gizmo","Group","_touchAreas","_coordinateSystem","World","_nodes","_matViewProj","Matrix4","_gizmoSize","arrowLength","boxSize","touchBoxSize","createGizmoBox","dir","color","touchAreas","m","makeBasis","y","z","x","boxGeometry","BoxBufferGeometry","applyMatrix4","material","MeshLambertMaterial","transparent","box","Mesh","userData","copy","lineRadius","lineGeometry","CylinderBufferGeometry","setPosition","clone","multiplyScalar","line","renderOrder","touchGeometry","createGizmoTriangle","a","b","BufferGeometry","vertices","Float32Array","setAttribute","Float32BufferAttribute","colors","Line","LineBasicMaterial","vertexColors","VertexColors","linewidth","window","devicePixelRatio","triangleGeometry","Geometry","v1","setComponent","v2","push","faces","Face3","triangle","MeshBasicMaterial","opacity","side","DoubleSide","visible","boxMaterial","_axisTitles","_createAxisTitles","_updateGizmoPartVisibility","hasDomElement","screenSystem","Screen","gizmoObjects","children","touchObjects","resetValues","setCoordinateSystem","coordinateSystem","setNonUniformScaleEnabled","value","show","viewport","tool","length","_sequence","_updateSelection","_viewStateManager","nodesProperties","_getNodesProperties","fireEvent","hide","_cleanTempData","_updateEditingForm","getGizmoCount","Local","Parent","getTouchObject","i","_updateGizmoObjectTransformation","arrowHighlighting","highlightHandle","index","hoverMode","highlightAll","obj","highlight","setHex","axisTitle","colorAttr","geometry","attributes","copyArray","needsUpdate","selectHandle","gizmoIndex","getAutoResetValues","setShouldRenderFrame","beginGesture","_beginValue","_matOrigin","matrixWorld","forEach","nodeInfo","scaleOrigin","node","scale","matOrigin","parent","matParentInv","getInverse","_prepareForCreatingScaleKey","sequence","_printEventInfo","event","debug","properties","name","offsetToRest","offsetToPrevious","absolute","world","restDifference","restDifferenceInCoordinates","property","rtransform","getRelativeTransformation","slice","_getEffectiveParent","skipUpdateJointNode","_setJointNodeOffsets","Scale","offsetScale","_setJointNodeMatrix","_playback","sequenceOffset","_getEndPropertyInPreviousPlayback","transform","getTransformation","wtrans","getTransformationWorld","_nodeUserDataMap","get","gmat","sc","wmatScale","matScale","initialScale","quaternionVector","Quaternion","quaternion","rotMat","makeRotationFromQuaternion","initialRotMat","initialQuaternion","vx","vy","vz","extractBasis","rvx","rvy","rvz","dot","multiply","decompose","indices","_alignAxesBetweenGizmoAndNodeCoordinates","Math","abs","bind","endGesture","fireScaled","withNode","getClosestAligned","v","v3","d1","d2","d3","nodeMat","normalize","gizmoMat","gvx","gvy","gvz","_scale","changeSigns","scaleVector","appliedScalePositive","multiplyVectors","updateMatrix","ignore","multiplyMatrices","matrix","nmat","elements","smat","inverse","te","_setScale","getValue","getComponent","setValue","axisScale","expandBoundingBox","boundingBox","_expandBoundingBox","getCamera","getCameraRef","viewStateManager","call","getEnableSnapping","getDetector","setSource","handleSelectionChanged","_getObjectScale","objectIndex","_getObjectSize","Box3","isEmpty","size","getSize","_updateGizmoTransformation","gi","camera","_updateAxisTitles","_getEditingFormPosition","direction","setFromMatrixColumn","render","getMetadata","getName","renderer","getRenderer","projectionMatrix","matrixWorldInverse","clearDepth","l"],"sources":["ScaleToolGizmo-dbg.js"],"mappings":"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"}