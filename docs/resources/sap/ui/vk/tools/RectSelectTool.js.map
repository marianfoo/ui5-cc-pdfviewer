{"version":3,"file":"RectSelectTool.js","names":["sap","ui","define","Tool","RectSelectToolHandler","SelectionDisplayMode","Loco","RectSelectTool","extend","metadata","library","properties","subtractMode","type","defaultValue","constructor","sId","mSettings","_instance","apply","this","arguments","_viewport","_handler","_loco","prototype","init","call","setFootprint","setActive","value","activeViewport","gizmoContainer","_prepare","activate","deactivate","isViewportType","_dvl","_scene","getSceneRef","queueCommand","command","cropProjection","matProj","cropRect","viewportSize","m","elements","isOrthographic","rightMinusLeft","topMinusBottom","rightPlusLeft","topPlusBottom","right","left","top","bottom","cropLeft","THREE","Math","lerp","min","x1","x2","width","cropRight","max","cropTop","y1","y2","height","cropBottom","select","scene","camera","_select","viewport","nodes","viewportClassName","getMetadata","getName","length","fireNodesPicked","picked","getSelectionDisplayMode","Outline","getSubtractMode","_viewStateManager","setOutliningStates","setSelectionStates","rectSelect","parametersdvl","sceneRef","undefined","cameraRef","getCameraRef","vsm","_getViewStateManagerThreeJS","rect","projectionMatrix","clone","_renderer","getSize","Vector2","matViewProj","Matrix4","multiplyMatrices","matrixWorldInverse","frustum","Frustum","setFromProjectionMatrix","v1","Vector3","checkNodeGeometry","node","geometry","intersectsObject","i","l","isGeometry","vertices","copy","applyMatrix4","matrixWorld","containsPoint","isBufferGeometry","attribute","attributes","position","count","fromBufferAttribute","traverseVisibleNode","parentData","parentClosed","visible","data","userData","skipIt","totalCount","passedCount","children","closed","push","parameters"],"sources":["RectSelectTool-dbg.js"],"mappings":"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"}