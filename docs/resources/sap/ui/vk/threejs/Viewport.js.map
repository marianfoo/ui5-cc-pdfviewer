{"version":3,"file":"Viewport.js","names":["sap","ui","define","vkCore","ViewportBase","ResizeHandler","KeyCodes","Loco","threeJs","ViewStateManager","ViewportGestureHandler","OrthographicCamera","PerspectiveCamera","NodesTransitionHelper","Messages","ManagedObjectObserver","ViewportRenderer","CameraProjectionType","CameraFOVBindingType","VisibilityMode","ZoomTo","SelectionMode","RenderMode","getResourceBundle","cssColorToColor","VkViewStateManager","ThreeJSViewStateManager","ThreeJSViewStateManagerV2","HitTester","Scene","ContentDeliveryService","SafeArea","Annotation","MeasurementSurface","NodeContentType","Log","core","findIndexInArray","Viewport","extend","metadata","library","events","cameraChanged","parameters","position","quaternion","zoom","enableEventBubbling","frameRenderingFinished","basePrototype","getMetadata","getParent","getClass","prototype","THREE","PropertyBinding","GetterByBindingType","buffer","offset","this","targetObject","propertyName","init","call","_measurementSurface","_renderer","_imageCanvas","_canvas","_registryEntry","_width","_height","_resizeListenerId","_handleResize","bind","_renderLoopRequestId","_renderLoop","_shouldRenderFrame","_clippingPlanes","_hitTester","_scene","_camera","_upAxis","backgroundColorTop","Vector4","backgroundColorBottom","_updateColor","getBackgroundColorTop","getBackgroundColorBottom","_checkBackgroundColor","_backgroundMaterial","ShaderMaterial","uniforms","topColor","value","bottomColor","vertexShader","join","fragmentShader","side","DoubleSide","depthTest","depthWrite","blending","NoBlending","backgroundGeometry","Geometry","vertices","push","Vector3","faces","Face3","_backgroundCamera","Camera","_backgroundScene","add","Mesh","_underlayGroup","Group","_overlayGroup","_xrayColor1","_xrayColor2","_xrayMaterial","color1","color2","depthFunc","LessDepth","NormalBlending","clipping","transparent","_viewportGestureHandler","_loco","addHandler","_zoomedObject","_cdsLoader","attachCameraChanged","event","setShouldRenderFrame","_sceneObserver","_currentViewIndex","_currentView","getEventBus","subscribe","_onViewStateApplied","attachLocalizationChanged","_onLocalizationChanged","cameraUpdateCompleted","params","fireViewFinished","viewIndex","exit","detachLocalizationChanged","unsubscribe","destroy","removeHandler","deregister","_stopRenderLoop","tools","getTools","i","length","tool","byId","setActive","_setContent","setCamera","_eyePointLight","detachSceneUpdated","_handleCdsSceneUpdate","surface","getMeasurements","update","getCamera","onSetViewStateManager","viewStateManager","_viewStateManager","attachVisibilityChanged","_onVisibilityChanged","attachOpacityChanged","attachTintColorChanged","attachHighlightColorChanged","attachTransformationChanged","attachOutlineColorChanged","attachOutlineWidthChanged","attachOutliningChanged","_onOutliningOrSelectionChanged","attachSelectionChanged","onUnsetViewStateManager","detachOutliningChanged","detachSelectionChanged","detachVisibilityChanged","detachOpacityChanged","detachTintColorChanged","detachHighlightColorChanged","detachTransformationChanged","detachOutlineColorChanged","detachOutlineWidthChanged","_startRenderLoop","window","requestAnimationFrame","cancelAnimationFrame","setBackgroundColorTop","setBackgroundColorBottom","setClippingPlanes","clippingPlanes","onBeforeRendering","onAfterRendering","domRef","getDomRef","append","register","size","width","clientWidth","height","clientHeight","getSafeArea","resize","canvas","webGLCanvas","domElement","devicePixelRatio","Math","floor","style","adjustWebGLRendererSize","measurementSurfaceDomRef","fireResize","setScene","scene","nh","getDefaultNodeHierarchy","detachChanged","_clearAnnotations","detachNodeCreated","_nodeCreatedHandler","deregisterRendering","_homeCamera","disconnect","nativeScene","_getNativeScene","observe","properties","group","children","private","name","PointLight","attachChanged","attachNodeCreated","initialView","getInitialView","_getViewStateManagerThreeJS","activateView","getScene","getSceneRef","_getNativeCamera","getCameraRef","clearAll","destroyAnnotations","getAnnotations","forEach","annotation","autoGenerated","removeAnnotation","_annotationsLoaded","evt","nodeRef","getParameter","_vkGetNodeContentType","view","getCurrentView","getNodeInfos","target","visible","camera","cam","clone","getRenderer","_implementation","destColor","cssColor","color","Color","red","green","blue","alpha","x","r","y","g","z","b","w","colorTop","_backgroundColor","_handleLoadingFinished","shouldRenderFrame","setRenderMode","renderMode","setProperty","LineIllustration","ShadedIllustration","SolidOutline","_createOutlineGeometry","_hideOutlineGeometry","hitTest","options","nativeCamera","vsm","applyNodeStates","clientLeft","clientTop","revertNodeStates","_isRedlineActivated","userData","isRedlineActivated","bgNodeNameToProjectionType","sphere","plane","checkBackgroundNode","node","Background","undefined","findBackgroundNode","nodes","bgNode","find","visibleNodes","_backgroundNode","hiddenNodes","getBackgroundProjection","_isPanoramicActivated","_isPlanarActivated","tap","isDoubleClick","hit","object","tapObject","fireNodeClicked","getFreezeCamera","hitForDB","zoomObject","picked","fireNodesPicked","exclusiveSelectionHandler","getSelectionMode","Exclusive","Sticky","stickySelectionHandler","offscreenPosition","rotateDelta","panDelta","onkeydown","isMarked","cameraController","keyCode","ARROW_LEFT","ARROW_RIGHT","ARROW_UP","ARROW_DOWN","ctrlKey","altKey","metaKey","delta","_cameraController","beginGesture","shiftKey","pan","rotate","endGesture","preventDefault","stopPropagation","PLUS","NUMPAD_MINUS","NUMPAD_PLUS","$","gizmo","getGizmoForContainer","handleSelectionChanged","setSelectionRect","rect","_selectionRect","x1","y1","x2","y2","geom","LineLoop","LineBasicMaterial","linewidth","geometry","set","verticesNeedUpdate","animateCameraUpdate","getIsModified","setIsModified","_playTransition","_playHighlight","getAutoStartRendering","_setJointNodeMatrix","render","annotations","_updateDynamicObjects","renderer","viewport","viewportSize","Vector2","backgroundProjection","root","_vkDynamicObjects","parent","_vkUpdate","_renderDetailViews","boundingBox","eyePointLight","_vkDetailViews","sort","a","renderOrder","detailView","_render","_updateWorldMatrixRecursive","force","renderStage","matrixAutoUpdate","matrixWorldNeedsUpdate","matrixWorld","copy","matrix","multiplyMatrices","l","setChildrenVisibility","child","setViewport","updateMatrix","autoUpdate","getUsingDefaultClipPlanes","isOrthographicCamera","_computeBoundingBox","_selectedNodes","_expandBoundingBox","isEmpty","adjustZoom","expandBoundingBox","adjustClipPlanes","autoClear","setClearColor","clear","clearDepth","getRenderMode","XRay","lightNode","remove","overrideMaterial","_outlineMaterial","getPixelRatio","getShowSelectionBoundingBoxes","boundingBoxesScene","_boundingBoxesScene","_updateBoundingBoxes","_renderOutline","webGLRenderer","targetCanvas","targetContext","getContext","targetWidth","targetHeight","drawImage","fireFrameRenderingFinished","getImage","includeSelection","min","document","createElementNS","WebGLRenderer","preserveDrawingBuffer","antialias","setSize","currentBKTop","currentBKBottom","body","appendChild","vpCamera","updateMatrixWorld","selectedNodes","enumerateSelection","setSelectionState","imageData","toDataURL","removeChild","dispose","getMaterialImage","material","margin","clamp","cameraRef","SphereGeometry","Box3","_vkZoomTo","materials","Array","isArray","results","getObjectImage","getObjectImageEx","includeOverlay","nodeRefs","slice","filter","useViewportCamera","up","setFromMatrixColumn","normalize","getWorldPosition","sub","getWorldDirection","multiplyScalar","updateProjectionMatrix","getSize","traverseVisible","Symbol","_vkSetOpacity","includeUnderlay","type","encoderOptions","content","apply","arguments","centre","getCenter","dir","getTargetDirection","pos","getPosition","dir1","projection","scale","setPosition","builders","setFov","euler","upAxis","Euler","degToRad","zoomTo","Quaternion","setFromEuler","loaders","getSceneBuilder","_fireSceneUpdated","attachSceneUpdated","attachLoadingFinished","attachInitialViewCompleted","_fireLoadingFinished","detachLoadingFinished","detachInitialViewCompleted","registerRendering","backgroundTopColor","getStyle","backgroundBottomColor","setScale","channel","eventId","source","_ignoreAnimationPosition","ignoreAnimationPosition","playViewGroup","notAnimateCameraChange","_activateSingleView","viewGroups","getViewGroups","that","viewGroup","getViews","modelView","indexOf","fireViewActivated","publish","getTopColor","getBottomColor","timeInterval","flyToTime","transitionEffect","_fadeOutBackground","_fadeInBackground","timeIntervalCameraChange","pauseWhenNoCameraChange","hasAnimation","activateCamera","timeIntervalForTransition","_startTransition","setTimeout","fireReadyForAnimation","_startHighlight","max","resetCurrentView","_resetNodesMaterialAndOpacityByCurrentView","_resetNodesStatusByCurrentView","error","what","crossFadeSeconds","All","Visible","Selected","Node","Restore","getText","NodeSetIsolation","RestoreRemoveIsolation","ViewLeft","setFromAxisAngle","PI","ViewRight","ViewTop","ViewBottom","ViewBack","ViewFront","dx","dy","isTurnTableMode","getViewInfo","query","viewInfo","rotation","reorder","yaw","radToDeg","pitch","roll","projectionType","Orthographic","Perspective","bindingType","Vertical","enabled","fullWidth","fullHeight","offsetX","offsetY","fieldOfView","fov","zoomFactor","matrices","matrixWorldInverse","elements","projectionMatrix","visibility","visibilityMode","mode","Complete","allVisibility","getVisibilityComplete","hidden","getShouldTrackVisibilityChanges","changes","getVisibilityChanges","warning","VIT32","summary","code","selection","_getSelectionComplete","setViewInfo","flyToDuration","viCamera","newCamera","aspect","setViewOffset","isPerspectiveCamera","veIdToNodeRefMap","Map","nodeHierarchy","getNodeHierarchy","allNodeRefs","findNodesByName","nodeProxy","createNodeProxy","veId","getVeId","destroyNodeProxy","visibleVeIds","hiddenVeIds","setVisibilityState","get","Differences","resetVisibility","getVisibilityState","VIT28","info","selected","unselected","setSelectionStates","outlined","unoutlined","setOutliningStates","queueCommand","command","getOutputSize","boundingClientRect","getBoundingClientRect","viewportWidth","viewportHeight","relevantDimension","left","top","sideLength","projectToScreen","viewportRect","halfWidth","halfHeight","screenPoint","project","depth","getAggregation","viewAnnotationNodes","viewNode","annotationInfo","n","_vkPersistentId","annotationId","id","createAnnotation","addAnnotation","setDisplay","allAnnotations","delay","getAnimate","getAnimationDelay","setAnimationDelay","setBackgroundNode","currBackgroundNode","backgroundNodes","reduce","nodeInfos","currNode","setView","parametricContent","materialId","sceneId","backgroundNode","createNode","assignMaterialToNodes","cameraView","normalizeRectangle","computedStyle","getComputedStyle","saWidth","parseFloat","saLeft","newX","saHeight","saTop","newY","deNormalizeRectangle","saHalfWidth","saHCenter","abs","newWidth","saHalfHeight","saVCenter","newHeight","registryEntries","registryEntryIndex","registryEntry","setPixelRatio","shadowMap","viewports","invalidate","viewportIndex","firstViewport","createElement","splice","lastViewport","renderLists","maxWidth","maxHeight","getMeasurementSurface"],"sources":["Viewport-dbg.js"],"mappings":"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"}