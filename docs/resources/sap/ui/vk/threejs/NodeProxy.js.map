{"version":3,"file":"NodeProxy.js","names":["sap","ui","define","NodeProxyBase","Material","cssColorToColor","colorToCSSColor","abgrToColor","colorToABGR","TransformationMatrix","ThreeExtensions","ObjectType","NodeProxy","extend","metadata","library","constructor","nodeHierarchy","obj3D","call","this","_object3D","_nodeHierarchy","prototype","destroy","getNodeHierarchy","getNodeRef","getNodeId","getVeIds","userData","veids","getVeId","treeNode","sid","getMaterialId","refWithMaterial","geometry","children","length","name","undefined","material","materialId","originalMaterial","getName","type","_updateAncestorsBoundingBox","parent","boundingBox","_vkCalculateObjectOrientedBoundingBox","getLocalMatrix","convertTo4x3","matrix","elements","setLocalMatrix","value","fromArray","convertTo4x4","decompose","position","quaternion","scale","updateMatrixWorld","setProperty","setLocalMatrixNotUpdatingBBox","getWorldMatrix","matrixWorld","setWorldMatrix","multiplyMatrices","THREE","Matrix4","getInverse","copy","getOpacity","opacity","setOpacity","vsManager","getScene","getViewStateManager","_vkSetOpacity","getTintColorABGR","tintColor","setTintColorABGR","setTintColor","_vkSetTintColor","getTintColor","abgr","getNodeMetadata","getHasChildren","getClosed","closed","getBoundingBox","assignMaterial","setNodeRefMaterial","materialRef","nodeRef","highlightColor","side","materialUsed","clone","c","color","lerp","Color","red","green","blue","alpha","defaultHighlightingEmissive","emissive","defaultHighlightingSpecular","specular","_vkUpdateMaterialOpacity","getMaterialRef","forEach","child","objectType","PMI","Hotspot","enumerateMaterials","recursive","collectMaterials","materialRefSet","add","matRefSet","Set","materialRefs","val","push","materials","i","setMaterialRef","replaceMaterial","materialToReplace","materialToReplaceRef","_vkUpdateMaterialColor","getLocalTranslate","x","y","z","getLocalScale","getLocalRotationInQuaternion","w","getLocalRotationInAngleAxis","q","normalise","angle","Math","acos","s","sqrt","getLocalRotationInEuler","order","test","heading","attitude","bank","atan2","PI","sqx","sqy","sqz","asin"],"sources":["NodeProxy-dbg.js"],"mappings":";;;;;;AAQAA,IAAIC,GAAGC,OAAO,CACb,eACA,aACA,qBACA,qBACA,iBACA,iBACA,0BACA,oBACA,iBACE,SACFC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,aAiBA,IAAIC,EAAYT,EAAcU,OAAO,8BAAmF,CACvHC,SAAU,CACTC,QAAS,aAGVC,YAAa,SAASC,EAAeC,GACpCf,EAAcgB,KAAKC,MAEnBA,KAAKC,UAAYH,EACjBE,KAAKE,eAAiBL,CACvB,IAGDL,EAAUW,UAAUC,QAAU,WAC7BJ,KAAKC,UAAY,KAEjBlB,EAAcoB,UAAUC,QAAQL,KAAKC,KACtC,EAEAR,EAAUW,UAAUE,iBAAmB,WACtC,OAAOL,KAAKE,cACb,EAEAV,EAAUW,UAAUG,WAAa,WAChC,OAAON,KAAKC,SACb,EAEAT,EAAUW,UAAUI,UAAY,WAC/B,OAAOP,KAAKC,SACb,EAEAT,EAAUW,UAAUK,SAAW,WAC9B,OAAOR,KAAKC,UAAUQ,SAASC,OAAS,EACzC,EAEAlB,EAAUW,UAAUQ,QAAU,WAC7B,OAAOX,KAAKC,UAAUQ,SAASG,SAAWZ,KAAKC,UAAUQ,SAASG,SAASC,IAAM,IAClF,EAEArB,EAAUW,UAAUW,cAAgB,WACnC,IAAIC,EAAkBf,KAAKC,UAC3B,GAAID,KAAKC,YAAcD,KAAKC,UAAUe,SAAU,CAC/C,GAAIhB,KAAKC,UAAUgB,SAASC,SAAW,GAAKlB,KAAKC,UAAUgB,SAAS,GAAGD,WAAahB,KAAKC,UAAUgB,SAAS,GAAGE,OAAS,IAAMnB,KAAKC,UAAUgB,SAAS,GAAGE,OAASC,WAAY,CAC7KL,EAAkBf,KAAKC,UAAUgB,SAAS,EAC3C,CACD,CAEA,GAAIF,EAAgBM,WAAaD,WAChCL,EAAgBM,SAASZ,WAAaW,WACtCL,EAAgBM,SAASZ,SAASa,aAAeF,UAAW,CAC5D,OAAOL,EAAgBM,SAASZ,SAASa,UAC1C,MAAO,GAAIP,EAAgBN,SAASc,mBAAqBH,WACxDL,EAAgBN,SAASc,iBAAiBd,WAAaW,WACvDL,EAAgBN,SAASc,iBAAiBd,SAASa,aAAeF,UAAW,CAC7E,OAAOL,EAAgBN,SAASc,iBAAiBd,SAASa,UAC3D,CAEA,OAAOF,SACR,EAEA5B,EAAUW,UAAUqB,QAAU,WAC7B,OAAOxB,KAAKC,UAAUkB,MAAS,IAAMnB,KAAKC,UAAUwB,KAAO,GAC5D,EAEAjC,EAAUW,UAAUuB,4BAA8B,WACjD,IAAIC,EAAS3B,KAAKC,UAAU0B,OAC5B,MAAOA,EAAQ,CACd,GAAIA,EAAOlB,SAASmB,cAAgBR,UAAW,CAE9CO,EAAOE,uCACR,CACAF,EAASA,EAAOA,MACjB,CACD,EAEAnC,EAAUW,UAAU2B,eAAiB,WACpC,OAAOzC,EAAqB0C,aAAa/B,KAAKC,UAAU+B,OAAOC,SAChE,EAEAzC,EAAUW,UAAU+B,eAAiB,SAASC,GAC7C,GAAIA,EAAO,CACV,IAAIrC,EAAQE,KAAKC,UACjBH,EAAMkC,OAAOI,UAAU/C,EAAqBgD,aAAaF,IACzDrC,EAAMkC,OAAOM,UAAUxC,EAAMyC,SAAUzC,EAAM0C,WAAY1C,EAAM2C,OAC/D3C,EAAM4C,kBAAkB,MACxB1C,KAAK0B,6BACN,CACA1B,KAAK2C,YAAY,cAAeR,EAAO,MACvC,OAAOnC,IACR,EAEAR,EAAUW,UAAUyC,8BAAgC,SAAST,GAC5D,GAAIA,EAAO,CACV,IAAIrC,EAAQE,KAAKC,UACjBH,EAAMkC,OAAOI,UAAU/C,EAAqBgD,aAAaF,IACzDrC,EAAMkC,OAAOM,UAAUxC,EAAMyC,SAAUzC,EAAM0C,WAAY1C,EAAM2C,OAC/D3C,EAAM4C,kBAAkB,KACzB,CACA1C,KAAK2C,YAAY,cAAeR,EAAO,MACvC,OAAOnC,IACR,EAEAR,EAAUW,UAAU0C,eAAiB,WACpC,OAAOxD,EAAqB0C,aAAa/B,KAAKC,UAAU6C,YAAYb,SACrE,EAEAzC,EAAUW,UAAU4C,eAAiB,SAASZ,GAC7C,GAAIA,EAAO,CACV,IAAIrC,EAAQE,KAAKC,UACjBH,EAAMgD,YAAYV,UAAU/C,EAAqBgD,aAAaF,IAC9D,GAAIrC,EAAM6B,OAAQ,CACjB7B,EAAMkC,OAAOgB,kBAAiB,IAAIC,MAAMC,SAAUC,WAAWrD,EAAM6B,OAAOmB,aAAchD,EAAMgD,YAC/F,KAAO,CACNhD,EAAMkC,OAAOoB,KAAKtD,EAAMgD,YACzB,CACAhD,EAAMkC,OAAOM,UAAUxC,EAAMyC,SAAUzC,EAAM0C,WAAY1C,EAAM2C,OAC/D3C,EAAM4C,kBAAkB,MACxB1C,KAAK0B,6BACN,CACA1B,KAAK2C,YAAY,cAAeR,EAAO,MACvC,OAAOnC,IACR,EAEAR,EAAUW,UAAUkD,WAAa,WAChC,OAAOrD,KAAKC,UAAUQ,SAAS6C,OAChC,EAEA9D,EAAUW,UAAUoD,WAAa,SAASpB,GACzC,IAAIqB,EAAYxD,KAAKE,eAAeuD,WAAWC,sBAC/C,GAAIF,EAAW,CACdA,EAAUD,WAAWvD,KAAKC,UAAWkC,EACtC,KAAO,CACNnC,KAAKC,UAAU0D,cAAcxB,EAC9B,CACAnC,KAAK2C,YAAY,UAAWR,EAAO,MACnC,OAAOnC,IACR,EAEAR,EAAUW,UAAUyD,iBAAmB,WACtC,OAAO5D,KAAKC,UAAUQ,SAASoD,SAChC,EAEArE,EAAUW,UAAU2D,iBAAmB,SAAS3B,GAC/C,IAAIqB,EAAYxD,KAAKE,eAAeuD,WAAWC,sBAC/C,GAAIF,EAAW,CACdA,EAAUO,aAAa/D,KAAKC,UAAWkC,EACxC,KAAO,CACNnC,KAAKC,UAAU+D,gBAAgB7B,EAChC,CACAnC,KAAK2C,YAAY,gBAAiBR,EAAO,MACzCnC,KAAK2C,YAAY,YAAazD,EAAgBC,EAAYgD,IAAS,MACnE,OAAOnC,IACR,EAEAR,EAAUW,UAAU8D,aAAe,WAClC,OAAO/E,EAAgBC,EAAYa,KAAKC,UAAUQ,SAASoD,WAC5D,EAEArE,EAAUW,UAAU4D,aAAe,SAAS5B,GAC3C,IAAI+B,EAAO9E,EAAYH,EAAgBkD,IAEvC,IAAIqB,EAAYxD,KAAKE,eAAeuD,WAAWC,sBAC/C,GAAIF,EAAW,CACdA,EAAUO,aAAa/D,KAAKC,UAAWiE,EACxC,KAAO,CACNlE,KAAKC,UAAU+D,gBAAgBE,EAChC,CACAlE,KAAK2C,YAAY,gBAAiBuB,EAAM,MACxClE,KAAK2C,YAAY,YAAaR,EAAO,MACrC,OAAOnC,IACR,EAEAR,EAAUW,UAAUgE,gBAAkB,WACrC,OAAOnE,KAAKC,UAAUQ,SAASf,UAAY,CAAC,CAC7C,EAEAF,EAAUW,UAAUiE,eAAiB,WACpC,OAAOpE,KAAKC,UAAUgB,SAASC,OAAS,CACzC,EAEA1B,EAAUW,UAAUkE,UAAY,WAC/B,QAASrE,KAAKC,UAAUQ,SAAS6D,MAClC,EAEA9E,EAAUW,UAAUoE,eAAiB,WACpC,OAAOvE,KAAKC,UAAUQ,SAASmB,WAChC,EASApC,EAAUW,UAAUqE,eAAiB,SAASrC,GAE7C,IAAIsC,EAAqB,SAASC,EAAaC,GAE9C,IAAIrD,EACJ,GAAIoD,EAAYjE,SAAU,CACzBa,EAAaoD,EAAYjE,SAASa,WAClCqD,EAAQlE,SAASa,WAAaA,CAC/B,CAEA,GAAIqD,EAAQtD,WAAaD,UAAW,CACnC,GAAIuD,EAAQlE,SAASmE,iBAAmBxD,UAAW,CAClD,GAAIuD,EAAQlE,SAASc,iBAAiBsD,KAAM,CAC3CH,EAAYG,KAAOF,EAAQlE,SAASc,iBAAiBsD,IACtD,CACAF,EAAQlE,SAASc,iBAAmBmD,EACpCA,EAAYjE,SAASqE,eAErBH,EAAQtD,SAAWqD,EAAYK,QAC/B,IAAIC,EAAI7F,EAAYwF,EAAQlE,SAASmE,gBACrCD,EAAQtD,SAAS4D,MAAMC,KAAK,IAAIjC,MAAMkC,MAAMH,EAAEI,IAAM,IAAOJ,EAAEK,MAAQ,IAAOL,EAAEM,KAAO,KAAQN,EAAEO,OAE/F,GAAIb,EAAYjE,SAAS+E,6BAA+Bb,EAAQlE,SAASmE,iBAAmB,EAAG,CAC9FD,EAAQtD,SAASoE,SAASrC,KAAKsB,EAAYjE,SAAS+E,4BACrD,CACA,GAAId,EAAYjE,SAASiF,6BAA+Bf,EAAQlE,SAASmE,iBAAmB,EAAG,CAC9FD,EAAQtD,SAASsE,SAASvC,KAAKsB,EAAYjE,SAASiF,4BACrD,CACD,KAAO,CACN,GAAIf,EAAQtD,SAASwD,KAAM,CAC1BH,EAAYG,KAAOF,EAAQtD,SAASwD,IACrC,CACAF,EAAQtD,SAAWqD,EACnBA,EAAYjE,SAASqE,sBACdH,EAAQlE,SAASc,gBACzB,CAEAoD,EAAQiB,0BACT,CACD,EAEAnB,EAAmBtC,EAAM0D,iBAAkB7F,KAAKC,WAEhD,IAAKD,KAAKC,UAAUgB,SAAU,CAC7B,OAAOjB,IACR,CAEAA,KAAKC,UAAUgB,SAAS6E,QAAQ,SAASC,GACxC,IAAKA,GAASA,EAAMtF,SAASuF,aAAezG,EAAW0G,KAAOF,EAAMtF,SAASuF,aAAezG,EAAW2G,QAAS,CAC/G,MACD,CACAzB,EAAmBtC,EAAM0D,iBAAkBE,EAC5C,GAEA,OAAO/F,IACR,EASAR,EAAUW,UAAUgG,mBAAqB,SAASC,GACjD,IAAIC,EAAmB,SAAS1B,EAAS2B,EAAgBF,GACxD,GAAIzB,EAAS,CACZ,GAAIA,EAAQlE,SAASc,iBAAkB,CACtC+E,EAAeC,IAAI5B,EAAQlE,SAASc,iBACrC,MAAO,GAAIoD,EAAQtD,SAAU,CAC5BiF,EAAeC,IAAI5B,EAAQtD,SAC5B,CAEA,GAAIsD,EAAQ1D,SAAU,CACrB0D,EAAQ1D,SAAS6E,QAAQ,SAASC,GACjC,GAAIA,EAAO,CACV,GAAIK,EAAW,CACdC,EAAiBN,EAAOO,EAAgBF,EACzC,MAAO,GAAIL,EAAMtF,SAASc,iBAAkB,CAC3C+E,EAAeC,IAAIR,EAAMtF,SAASc,iBACnC,MAAO,GAAIwE,EAAM1E,SAAU,CAC1BiF,EAAeC,IAAIR,EAAM1E,SAC1B,CACD,CACD,EACD,CACD,CACD,EAEA,IAAImF,EAAY,IAAIC,IACpBJ,EAAiBrG,KAAKC,UAAWuG,EAAWJ,GAE5C,IAAIM,EAAe,GACnBF,EAAUV,QAAQ,SAASa,GAC1BD,EAAaE,KAAKD,EACnB,GAEA,IAAIE,EAAY,GAEhB,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAaxF,OAAQ4F,IAAK,CAC7C,IAAIzF,EAAW,IAAIrC,EACnBqC,EAAS0F,eAAeL,EAAaI,IACrCD,EAAUD,KAAKvF,EAChB,CAEA,OAAOwF,CACR,EAUArH,EAAUW,UAAU6G,gBAAkB,SAASC,EAAmB5F,GACjE,IAAI6F,SAA+BD,EAAkBpB,iBAAmB,WAAcoB,EAAkBpB,iBAAmBoB,EAC3H,IAAIvC,SAAsBrD,EAASwE,iBAAmB,WAAcxE,EAASwE,iBAAmBxE,EAChG,GAAIrB,KAAKC,UAAUQ,SAASc,kBAAoBvB,KAAKC,UAAUQ,SAASc,mBAAqB2F,EAAsB,CAClHlH,KAAKC,UAAUQ,SAASc,iBAAmBmD,EAC3C1E,KAAKC,UAAUkH,wBAChB,MAAO,GAAInH,KAAKC,UAAUoB,UAAYrB,KAAKC,UAAUoB,WAAa6F,EAAsB,CACvFlH,KAAKC,UAAUoB,SAAWqD,CAC3B,CAEA,IAAK1E,KAAKC,UAAUgB,SAAU,CAC7B,OAAOjB,IACR,CAEAA,KAAKC,UAAUgB,SAAS6E,QAAQ,SAASC,GACxC,GAAIA,GAASA,EAAMtF,SAASc,kBAAoBwE,EAAMtF,SAASc,mBAAqB2F,EAAsB,CACzGnB,EAAMtF,SAASc,iBAAmBmD,EAClCqB,EAAMoB,wBACP,MAAO,GAAIpB,GAASA,EAAM1E,UAAY0E,EAAM1E,WAAa6F,EAAsB,CAC9EnB,EAAM1E,SAAWqD,CAClB,CACD,GAEA,OAAO1E,IACR,EAQAR,EAAUW,UAAUiH,kBAAoB,WACvC,IAAItH,EAAQE,KAAKC,UACjB,MAAO,CAACH,EAAMyC,SAAS8E,EAAGvH,EAAMyC,SAAS+E,EAAGxH,EAAMyC,SAASgF,EAC5D,EAQA/H,EAAUW,UAAUqH,cAAgB,WACnC,IAAI1H,EAAQE,KAAKC,UACjB,MAAO,CAACH,EAAM2C,MAAM4E,EAAGvH,EAAM2C,MAAM6E,EAAGxH,EAAM2C,MAAM8E,EACnD,EAQA/H,EAAUW,UAAUsH,6BAA+B,WAClD,IAAI3H,EAAQE,KAAKC,UACjB,MAAO,CAACH,EAAM0C,WAAW6E,EAAGvH,EAAM0C,WAAW8E,EAAGxH,EAAM0C,WAAW+E,EAAGzH,EAAM0C,WAAWkF,EACtF,EAQAlI,EAAUW,UAAUwH,4BAA8B,WACjD,IAAI7H,EAAQE,KAAKC,UACjB,IAAI2H,EAAI9H,EAAM0C,WACd,GAAIoF,EAAEF,EAAI,EAAG,CACZE,EAAEC,WACH,CAEA,IAAIC,EAAQ,EAAIC,KAAKC,KAAKJ,EAAEF,GAE5B,IAAIO,EAAIF,KAAKG,KAAK,EAAIN,EAAEF,EAAIE,EAAEF,GAC9B,IAAIL,EAAGC,EAAGC,EACV,GAAIU,EAAI,KAAO,CACdZ,EAAIO,EAAEP,EACNC,EAAIM,EAAEN,EACNC,EAAIK,EAAEL,CACP,KAAO,CACNF,EAAIO,EAAEP,EAAIY,EACVX,EAAIM,EAAEN,EAAIW,EACVV,EAAIK,EAAEL,EAAIU,CACX,CAEA,MAAO,CAACZ,EAAGC,EAAGC,EAAGO,EAClB,EAUAtI,EAAUW,UAAUgI,wBAA0B,WAC7C,IAAIrI,EAAQE,KAAKC,UACjB,IAAI2H,EAAI9H,EAAM0C,WACd,GAAIoF,EAAEF,EAAI,EAAG,CACZE,EAAEC,WACH,CAEA,IAAIO,EAAQ,GACZ,IAAIC,EAAOT,EAAEP,EAAIO,EAAEN,EAAIM,EAAEL,EAAIK,EAAEF,EAC/B,IAAIY,EAASC,EAAUC,EACvB,GAAIH,EAAO,KAAO,CACjBC,EAAU,EAAIP,KAAKU,MAAMb,EAAEP,EAAGO,EAAEF,GAChCa,EAAWR,KAAKW,GAAK,EACrBF,EAAO,CACR,CACA,GAAIH,GAAQ,KAAO,CAClBC,GAAW,EAAIP,KAAKU,MAAMb,EAAEP,EAAGO,EAAEF,GACjCa,GAAYR,KAAKW,GAAK,EACtBF,EAAO,CACR,KAAO,CACN,IAAIG,EAAMf,EAAEP,EAAIO,EAAEP,EAClB,IAAIuB,EAAMhB,EAAEN,EAAIM,EAAEN,EAClB,IAAIuB,EAAMjB,EAAEL,EAAIK,EAAEL,EAClBe,EAAUP,KAAKU,MAAM,EAAIb,EAAEN,EAAIM,EAAEF,EAAI,EAAIE,EAAEP,EAAIO,EAAEL,EAAG,EAAI,EAAIqB,EAAM,EAAIC,GACtEN,EAAWR,KAAKe,KAAK,EAAIT,GACzBG,EAAOT,KAAKU,MAAM,EAAIb,EAAEP,EAAIO,EAAEF,EAAI,EAAIE,EAAEN,EAAIM,EAAEL,EAAG,EAAI,EAAIoB,EAAM,EAAIE,EACpE,CAEA,MAAO,CAACP,EAASC,EAAUC,EAAMJ,EAClC,EAEA,OAAO5I,CACR"}