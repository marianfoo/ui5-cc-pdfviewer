{"version":3,"file":"ContentManager.js","names":["sap","ui","define","Log","threeJs","ContentManagerBase","Scene","TransformationMatrix","PerspectiveCamera","OrthographicCamera","Messages","getResourceBundle","ContentDeliveryService","ContentManager","extend","metadata","library","basePrototype","getMetadata","getParent","getClass","prototype","init","call","this","exit","defaultCdsLoader","destroy","defaultMataiLoader","_handleContentChangesProgress","event","fireContentChangesProgress","phase","getParameter","source","percentage","_handleContentLoadingFinished","fireContentLoadingFinished","node","setCastShadow","object","isMesh","castShadow","receiveShadow","children","ni","length","initLights","nativeScene","lightGroup","THREE","Group","add","name","private","bbox","Box3","setFromObject","size","Vector3","getSize","maxSize","pointLight","PointLight","color","setRGB","getCenter","position","visible","lightColors","Color","lightDirs","l","lMax","directionalLight","DirectionalLight","copy","topLight","set","shadow","mapSize","width","height","d","camera","left","right","top","bottom","far","bias","groundGeo","PlaneBufferGeometry","x","z","groundMat","ShadowMaterial","opacity","ground","Mesh","rotation","Math","PI","y","min","loadContent","content","contentResources","that","load","fireContentChangesStarted","scene","_loadContentResources","then","values","info","initialView","setInitialView","n","value","backgroundTopColor","backgroundBottomColor","renderMode","upAxis","annotations","i","loader","loaders","push","builder","builders","_initSceneWithCDSLoaderIfExists","getSceneRef","fireContentChangesFinished","reason","errMsg","errorText","message","getText","VIT37","summary","error","failureReason","errorMessage","_findLoader","contentResource","_contentManagerResolver","settings","Promise","resolve","getSource","sourceType","getSourceType","toLowerCase","cdsModule","require","Class","authorizationHandler","_authorizationHandler","mataiModule","promises","forEach","loadContentResource","parentNode","getName","sourceId","getSourceId","_shadowContentResource","nodeProxy","getDefaultNodeHierarchy","createNodeProxy","localMatrix","getLocalMatrix","applyMatrix4","Matrix4","fromArray","convertTo4x4","attachContentChangesProgress","attachContentLoadingFinished","_retryCount","getContentResources","bind","all","sceneBuilder","getSceneBuilder","setSceneBuilder","attachNodeRemoving","removed","userData","treeNode","sid","decrementResourceCountersForDeletedTreeNode","destroyContent","Array","isArray","_loader","removeContext","currentSceneInfo","id","cleanup","detachContentChangesProgress","detachContentLoadingFinished","sb","createOrthographicCamera","createPerspectiveCamera"],"sources":["ContentManager-dbg.js"],"mappings":";;;;;;AAUAA,IAAIC,GAAGC,OAAO,CACb,eACA,sBACA,oBACA,UACA,0BACA,sBACA,uBACA,cACA,uBACA,2BAIA,aACA,sBACE,SACFC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,aAmCA,IAAIC,EAAiBR,EAAmBS,OAAO,mCAA6F,CAC3IC,SAAU,CACTC,QAAS,eAIX,IAAIC,EAAgBJ,EAAeK,cAAcC,YAAYC,WAAWC,UAExER,EAAeQ,UAAUC,KAAO,WAC/B,GAAIL,EAAcK,KAAM,CACvBL,EAAcK,KAAKC,KAAKC,KACzB,CACD,EAEAX,EAAeQ,UAAUI,KAAO,WAC/B,GAAID,KAAKE,iBAAkB,CAC1BF,KAAKE,iBAAiBC,UACtBH,KAAKE,iBAAmB,IACzB,CAEA,GAAIF,KAAKI,mBAAoB,CAC5BJ,KAAKI,mBAAmBD,UACxBH,KAAKI,mBAAqB,IAC3B,CAEA,GAAIX,EAAcQ,KAAM,CACvBR,EAAcQ,KAAKF,KAAKC,KACzB,CACD,EAEAX,EAAeQ,UAAUQ,8BAAgC,SAASC,GACjEN,KAAKO,2BAA2B,CAC/BC,MAAOF,EAAMG,aAAa,SAC1BC,OAAQJ,EAAMG,aAAa,UAC3BE,WAAYL,EAAMG,aAAa,eAEjC,EAEApB,EAAeQ,UAAUe,8BAAgC,SAASN,GACjEN,KAAKa,2BAA2B,CAC/BH,OAAQJ,EAAMG,aAAa,UAC3BK,KAAMR,EAAMG,aAAa,SAE3B,EAEA,SAASM,EAAcC,GACtB,GAAIA,GAAUA,EAAOC,OAAQ,CAC5BD,EAAOE,WAAa,KACpBF,EAAOG,cAAgB,KACxB,CACA,GAAIH,GAAUA,EAAOI,SAAU,CAC9B,IAAK,IAAIC,EAAK,EAAGA,EAAKL,EAAOI,SAASE,OAAQD,IAAM,CACnDN,EAAcC,EAAOI,SAASC,GAC/B,CACD,CACD,CAEA,SAASE,EAAWC,EAAaN,GAEhC,GAAIM,EAAa,CAChB,IAAIC,EAAa,IAAIC,MAAMC,MAC3BH,EAAYI,IAAIH,GAChBA,EAAWI,KAAO,gBAClBJ,EAAWK,QAAU,KAErB,IAAIC,GAAO,IAAIL,MAAMM,MAAOC,cAAcT,GAC1C,IAAIU,EAAO,IAAIR,MAAMS,QACrBJ,EAAKK,QAAQF,GACb,IAAIG,EAAUH,EAAKZ,SAEnB,IAAIgB,EAAa,IAAIZ,MAAMa,WAC3BD,EAAWE,MAAMC,OAAO,IAAM,IAAM,KACpCV,EAAKW,UAAUJ,EAAWK,UAC1BL,EAAWM,QAAU,KACrBN,EAAWR,QAAU,KACrBL,EAAWG,IAAIU,GAEf,IAAIO,EAAc,CACjB,IAAInB,MAAMoB,MAAM,GAAK,GAAK,IAC1B,IAAIpB,MAAMoB,MAAM,IAAM,IAAM,KAC5B,IAAIpB,MAAMoB,MAAM,IAAM,IAAM,MAE7B,IAAIC,EAAY,CACf,IAAIrB,MAAMS,QAAQ,EAAK,IAAK,IAC5B,IAAIT,MAAMS,SAAS,GAAM,IAAK,KAC9B,IAAIT,MAAMS,SAAS,KAAO,KAAO,IAElC,IAAK,IAAIa,EAAI,EAAGC,EAAOJ,EAAYvB,OAAQ0B,EAAIC,EAAMD,IAAK,CACzD,IAAIE,EAAmB,IAAIxB,MAAMyB,iBACjCD,EAAiBV,MAAMY,KAAKP,EAAYG,IACxCE,EAAiBP,SAASS,KAAKL,EAAUC,IACzCE,EAAiBpB,QAAU,KAC3BL,EAAWG,IAAIsB,EAChB,CAEA,GAAIhC,EAAY,CACfH,EAAcS,GACd,IAAI6B,EAAW,IAAI3B,MAAMyB,iBAEzBE,EAASb,MAAMC,OAAO,GAAK,GAAK,IAChCY,EAASV,SAASW,IAAI,EAAG,EAAG,GAE5BD,EAASnC,WAAa,KACtBmC,EAASE,OAAOC,QAAQC,MAAQ,IAChCJ,EAASE,OAAOC,QAAQE,OAAS,IAEjC,IAAIC,EAAI,IACRN,EAASE,OAAOK,OAAOC,MAAQF,EAC/BN,EAASE,OAAOK,OAAOE,MAAQH,EAC/BN,EAASE,OAAOK,OAAOG,IAAMJ,EAC7BN,EAASE,OAAOK,OAAOI,QAAUL,EAEjCN,EAASE,OAAOK,OAAOK,IAAM,KAE7BZ,EAASE,OAAOW,MAAQ,KACxBb,EAASvB,QAAU,KACnBL,EAAWG,IAAIyB,GAGf,IAAIc,EAAY,IAAIzC,MAAM0C,oBAAoBrC,EAAKK,UAAUiC,EAAGtC,EAAKK,UAAUkC,GAC/E,IAAIC,EAAY,IAAI7C,MAAM8C,eAC1BD,EAAUE,QAAU,GACpB,IAAIC,EAAS,IAAIhD,MAAMiD,KAAKR,EAAWI,GACvCG,EAAOE,SAASP,GAAKQ,KAAKC,GAAK,EAC/BJ,EAAO/B,SAAS0B,EAAItC,EAAKW,YAAY2B,EACrCK,EAAO/B,SAASoC,EAAIhD,EAAKiD,IAAID,EAAI1C,EAAU,GAC3CqC,EAAO/B,SAAS2B,EAAIvC,EAAKW,YAAY4B,EAErC9C,EAAYI,IAAI8C,GAChBA,EAAOvD,cAAgB,IACxB,CACD,CACD,CAaA9B,EAAeQ,UAAUoF,YAAc,SAASC,EAASC,GACxD,IAAIC,EAAOpF,KACX,IAAIqF,EAAO,WACVD,EAAKE,4BAEL,IAAI9D,EAAc,IAAIE,MAAM5C,MAC3ByG,EAAQ,IAAIzG,EAAM0C,GAEnB4D,EAAKI,sBAAsBD,EAAOJ,GAAkBM,KACnD,SAASC,GACR/G,EAAIgH,KAAK,4BACT,GAAID,GAAUA,EAAOpE,OAAS,GAAKoE,EAAO,GAAGE,YAAa,CACzDL,EAAMM,eAAeH,EAAO,GAAGE,YAChC,CAGA,IAAK,IAAIE,EAAI,EAAGA,EAAIJ,EAAOpE,OAAQwE,IAAK,CACvC,GAAIJ,EAAOI,GAAGlC,OAAQ,CAErB2B,EAAM3B,OAAS8B,EAAOI,GAAGlC,OACzB,KACD,CACD,CAEA,GAAI8B,EAAOpE,OAAS,EAAG,CACtB,IAAIyE,EAAQL,EAAO,GACnBH,EAAMS,mBAAqBD,EAAMC,mBACjCT,EAAMU,sBAAwBF,EAAME,sBACpCV,EAAMW,WAAaH,EAAMG,WACzBX,EAAMY,OAASJ,EAAMI,OACrBZ,EAAMa,YAAcL,EAAMK,WAC3B,CAKA,IAAK,IAAIC,EAAI,EAAGA,EAAIX,EAAOpE,OAAQ+E,IAAK,CACvC,GAAIX,EAAOW,GAAGC,OAAQ,CACrBf,EAAMgB,QAAUhB,EAAMgB,SAAW,GACjChB,EAAMgB,QAAQC,KAAKd,EAAOW,GAAGC,OAC9B,CACA,GAAIZ,EAAOW,GAAGI,QAAS,CACtBlB,EAAMmB,SAAWnB,EAAMmB,UAAY,GACnCnB,EAAMmB,SAASF,KAAKd,EAAOW,GAAGI,QAC/B,CACD,CAEA,GAAIlB,EAAMgB,QAAS,CAClBnB,EAAKuB,gCAAgCpB,EAAOA,EAAMgB,QACnD,CAEAhF,EAAWgE,EAAMqB,cAAe,OAEhCxB,EAAKyB,2BAA2B,CAC/B3B,QAASK,GAEX,EACA,SAASuB,GACRnI,EAAIgH,KAAK,4BAA6BmB,GACtC,IAAIC,EACJ,UAAWD,IAAW,SAAU,CAC/BC,EAASD,CACV,MAAO,GAAIA,EAAOE,UAAW,CAC5BD,EAASD,EAAOE,SACjB,MAAO,GAAIF,EAAOG,QAAS,CAC1BF,EAASD,EAAOG,OACjB,CACAF,EAASA,GAAU5H,IAAoB+H,QAAQhI,EAASiI,MAAMC,SAC9DzI,EAAI0I,MAAMlI,IAAoB+H,QAAQ,mDAAoDH,GAC1F3B,EAAKyB,2BAA2B,CAC/B3B,QAAS,KACToC,cAAe,CACd,CACCD,MAAOP,EACPS,aAAcR,KAIlB,EAEF,EAEA1B,IAEA,OAAOrF,IACR,EAEAX,EAAeQ,UAAU2H,YAAc,SAASC,GAC/C,GAAIA,EAAgBC,yBAChBD,EAAgBC,wBAAwBC,UACxCF,EAAgBC,wBAAwBC,SAASrB,OACnD,CACD,OAAOsB,QAAQC,QAAQJ,EAAgBC,wBAAwBC,SAASrB,OACzE,CAEA,GAAImB,EAAgBK,YAAa,CAEhC,IAAIC,EAAaN,EAAgBO,gBAAgBC,cAEjD,IAAI7C,EAAOpF,KACX,OAAQ+H,GACP,IAAK,SAAU,CACd,GAAI/H,KAAKE,kBAAoB,KAAM,CAClC,OAAO,IAAI0H,QAAQ,SAASC,GAC3B,IAAIK,EAAY,2CAChB1J,IAAIC,GAAG0J,QAAQ,CACdD,GACE,SAASE,GACXP,EAAQzC,EAAKlF,iBAAmB,IAAIkI,EAAM,CAAEC,qBAAsBjD,EAAKkD,wBACxE,EACD,EACD,CACA,OAAOV,QAAQC,QAAQ7H,KAAKE,iBAC7B,CACA,IAAK,OAAQ,CACZ,GAAIF,KAAKI,oBAAsB,KAAM,CACpC,OAAO,IAAIwH,QAAQ,SAASC,GAC3B,IAAIU,EAAc,8BAClB/J,IAAIC,GAAG0J,QAAQ,CACdI,GACE,SAASH,GACXP,EAAQzC,EAAKhF,mBAAqB,IAAIgI,EACvC,EACD,EACD,CACA,OAAOR,QAAQC,QAAQ7H,KAAKI,mBAC7B,CACA,QACC,MAEH,CAEA,OAAOwH,QAAQC,QAAQ,KACxB,EAEAxI,EAAeQ,UAAU2F,sBAAwB,SAASD,EAAOJ,GAChE,IAAIqD,EAAW,GAEfrD,EAAiBsD,QAAQ,SAASC,EAAoBC,EAAYlB,GACjE,IAAI3G,EAAO,IAAIY,MAAMC,MACrBb,EAAKe,KAAO4F,EAAgBmB,UAC5B9H,EAAK+H,SAAWpB,EAAgBqB,cAChCrB,EAAgBsB,uBAAyB,CACxCC,UAAWzD,EAAM0D,0BAA0BC,gBAAgBpI,IAE5D,IAAIqI,EAAc1B,EAAgB2B,iBAClC,GAAID,EAAa,CAChBrI,EAAKuI,cAAa,IAAI3H,MAAM4H,SAAUC,UAAUxK,EAAqByK,aAAaL,IACnF,CACAR,EAAW/G,IAAId,GAEf,IAAIsE,EAAOpF,KACXwI,EAAShC,KAAKxG,KAAKwH,YAAYC,GAAiBhC,KAAK,SAASa,GAC7D,GAAIA,EAAQ,CACX,GAAIA,EAAOmD,6BAA8B,CACxCnD,EAAOmD,6BAA6BrE,EAAK/E,8BAA+B+E,EACzE,CACA,GAAIkB,EAAOoD,6BAA8B,CACxCpD,EAAOoD,6BAA6BtE,EAAKxE,8BAA+BwE,EACzE,CACD,CACA,UAAWkB,IAAW,WAAY,CACjC,OAAOA,EAAOxF,EAAM2G,EAAiBrC,EAAKkD,sBAAuBlD,EAAKuE,YACvE,MAAO,GAAIrD,GAAUA,EAAOjB,KAAM,CACjC,OAAOiB,EAAOjB,KAAKvE,EAAM2G,EAAiBrC,EAAKkD,sBAAuBlD,EAAKuE,YAC5E,KAAO,CACN,OAAO/B,QAAQC,QAAQ,CACtB/G,KAAMA,EACN2G,gBAAiBA,GAEnB,CACD,IAEAA,EAAgBmC,sBAAsBnB,QAAQC,EAAoBmB,KAAK7J,KAAMc,GAC9E,EAAE+I,KAAK7J,KAAMuF,EAAMqB,gBAEnB,OAAOgB,QAAQkC,IAAItB,EACpB,EAEAnJ,EAAeQ,UAAU8G,gCAAkC,SAASpB,EAAOgB,GAC1E,GAAIA,EAAS,CACZ,IAAIwD,EACJ,IAAK,IAAI1D,EAAI,EAAGA,EAAIE,EAAQjF,OAAQ+E,IAAK,CAExC,GAAIE,EAAQF,aAAcjH,EAAwB,CACjD2K,EAAexD,EAAQF,GAAG2D,kBAC1B,KACD,CACD,CACA,GAAID,EAAc,CACjBxE,EAAM0E,gBAAgBF,GAKtBxE,EAAM0D,0BAA0BiB,mBAAmB,SAAS5J,GAC3D,IAAI6J,EAAU7J,EAAMG,aAAa,WACjC,GAAI0J,EAAQC,SAASC,UAAYF,EAAQC,SAASC,SAASC,IAAK,CAE/DP,EAAaQ,4CAA4CJ,EAAQC,SAASC,SAASC,IACpF,CACD,GAEA,OAAO,IACR,CACD,CACA,OAAO,KACR,EAYAjL,EAAeQ,UAAU2K,eAAiB,SAAStF,GAClD,GAAIA,EAAS,CACZA,EAAQ/E,SACT,CAKA,GAAI+E,EAAQqB,SAAWkE,MAAMC,QAAQxF,EAAQqB,UAAYrB,EAAQqB,QAAQjF,OAAS,EAAG,CACpF,GAAI4D,EAAQqB,QAAQ,GAAGoE,SAAWzF,EAAQqB,QAAQ,GAAGoE,QAAQZ,aAAc,CAC1E7E,EAAQqB,QAAQ,GAAGoE,QAAQC,cAAc1F,EAAQqB,QAAQ,GAAGoE,QAAQE,iBAAiBC,IACrF5F,EAAQqB,QAAQ,GAAGoE,QAAQZ,aAAagB,SACzC,CAEA,GAAI7F,EAAQqB,QAAQ,GAAGyE,6BAA8B,CACpD9F,EAAQqB,QAAQ,GAAGyE,6BAA6BhL,KAAKK,8BAA+BL,KACrF,CACA,GAAIkF,EAAQqB,QAAQ,GAAG0E,6BAA8B,CACpD/F,EAAQqB,QAAQ,GAAG0E,6BAA6BjL,KAAKY,8BAA+BZ,KACrF,CACD,MAAO,GAAIkF,EAAQwB,UAAY+D,MAAMC,QAAQxF,EAAQwB,UAAW,CAC/DxB,EAAQwB,SAAS+B,QAAQ,SAASyC,GACjC,GAAIA,EAAI,CACPA,EAAGH,SACJ,CACD,EACD,CACA,OAAO/K,IACR,EAmBAX,EAAeQ,UAAUsL,yBAA2B,WACnD,OAAO,IAAIlM,CACZ,EASAI,EAAeQ,UAAUuL,wBAA0B,WAClD,OAAO,IAAIpM,CACZ,EAEA,OAAOK,CACR"}