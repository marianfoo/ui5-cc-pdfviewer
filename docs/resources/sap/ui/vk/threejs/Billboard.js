/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/base/ManagedObject","../thirdparty/three","../thirdparty/html2canvas","../BillboardCoordinateSpace","../BillboardTextEncoding","../BillboardStyle","../BillboardBorderLineStyle","../BillboardHorizontalAlignment","./ThreeUtils","../NodeContentType"],function(t,e,i,r,a,o,n,l,h,s){"use strict";var d=t.extend("sap.ui.vk.threejs.Billboard",{metadata:{library:"sap.ui.vk",properties:{node:{type:"any",defaultValue:new THREE.Group},text:{type:"string",defaultValue:""},font:{type:"string",defaultValue:""},fontSize:{type:"float",defaultValue:20},fontWeight:{type:"string",defaultValue:"normal"},fontItalic:{type:"boolean",defaultValue:false},textColor:{type:"sap.ui.core.CSSColor",defaultValue:"#fff"},borderColor:{type:"sap.ui.core.CSSColor",defaultValue:"#fff"},borderOpacity:{type:"float",defaultValue:1},backgroundColor:{type:"sap.ui.core.CSSColor",defaultValue:"#fff"},backgroundOpacity:{type:"float",defaultValue:.5},encoding:{type:"sap.ui.vk.BillboardTextEncoding",defaultValue:a.PlainText},width:{type:"float",defaultValue:100},height:{type:"float",defaultValue:100},style:{type:"sap.ui.vk.BillboardStyle",defaultValue:o.None},borderLineStyle:{type:"sap.ui.vk.BillboardBorderLineStyle",defaultValue:n.Solid},borderWidth:{type:"float",defaultValue:2},horizontalAlignment:{type:"sap.ui.vk.BillboardHorizontalAlignment",defaultValue:l.Left},texture:{type:"any",defaultValue:null},material:{type:"any"},link:{type:"string",defaultValue:""},coordinateSpace:{type:"sap.ui.vk.BillboardCoordinateSpace",defaultValue:r.Viewport},position:{type:"any",defaultValue:new THREE.Vector3(0,0,0)},renderOrder:{type:"int",defaultValue:0}}}});d.prototype._planeGeometry=new THREE.PlaneBufferGeometry(1,1);d.prototype.init=function(){if(t.prototype.init){t.prototype.init.call(this)}var e=new THREE.MeshBasicMaterial({depthTest:false,depthWrite:false,transparent:true,alphaTest:.05,premultipliedAlpha:true,side:THREE.DoubleSide});this.setProperty("material",e,true);this._billboard=new THREE.Mesh(this._planeGeometry,e);this._needUpdateTexture=true};d.prototype.exit=function(){if(t.prototype.exit){t.prototype.exit.call(this)}if(this._billboard){h.disposeObject(this._billboard);this._billboard=null}};d.prototype.setNode=function(t){if(t instanceof THREE.Object3D){this.setProperty("node",t,true);t.add(this._billboard);t.matrixAutoUpdate=false;t.isBillboard=true;t.userData.billboard=this;this._traverse(function(t){t.userData.skipIt=true})}return this};d.prototype._traverse=function(t){t(this._billboard)};d.prototype.setEncoding=function(t){this.setProperty("encoding",t,true);this._needUpdateTexture=true;return this};d.prototype.setText=function(t){this.setProperty("text",t,true);this._needUpdateTexture=true;return this};d.prototype.setFont=function(t){this.setProperty("font",t,true);this._needUpdateTexture=true;return this};d.prototype.setFontSize=function(t){this.setProperty("fontSize",t,true);this._needUpdateTexture=true;return this};d.prototype.setFontWeight=function(t){this.setProperty("fontWeight",t,true);this._needUpdateTexture=true;return this};d.prototype.setFontItalic=function(t){this.setProperty("fontItalic",t,true);this._needUpdateTexture=true;return this};d.prototype.setStyle=function(t){this.setProperty("style",t,true);this._needUpdateTexture=true;return this};d.prototype.setWidth=function(t){this.setProperty("width",t,true);this._needUpdateTexture=true;return this};d.prototype.setHeight=function(t){this.setProperty("height",t,true);this._needUpdateTexture=true;return this};d.prototype.setTextColor=function(t){this.setProperty("textColor",t,true);this._needUpdateTexture=true;return this};d.prototype.setBackgroundColor=function(t){this.setProperty("backgroundColor",t,true);this._needUpdateTexture=true;return this};d.prototype.setBackgroundOpacity=function(t){this.setProperty("backgroundOpacity",t,true);this._needUpdateTexture=true;return this};d.prototype.setBorderWidth=function(t){this.setProperty("borderWidth",t,true);this._needUpdateTexture=true;return this};d.prototype.setBorderLineStyle=function(t){this.setProperty("borderLineStyle",t,true);this._needUpdateTexture=true;return this};d.prototype.setBorderColor=function(t){this.setProperty("borderColor",t,true);this._needUpdateTexture=true;return this};d.prototype.setBorderOpacity=function(t){this.setProperty("borderOpacity",t,true);this._needUpdateTexture=true;return this};d.prototype.setHorizontalAlignment=function(t){this.setProperty("horizontalAlignment",t,true);this._needUpdateTexture=true;return this};d.prototype.setLink=function(t){this.setProperty("link",t,true);this._needUpdateTexture=true;return this};d.prototype.setTexture=function(t){this.setProperty("texture",t,true);this._billboard.material.map=t;return this};d.prototype.setMaterial=function(t){this.setProperty("material",t,true);this._billboard.material=t;return this};d.prototype.setRenderOrder=function(t){this.setProperty("renderOrder",t,true);this._traverse(function(e){e.renderOrder=t});return this};d.prototype._renderBackground=function(t,e,i,r){t.fillStyle=this.getBackgroundColor();t.strokeStyle=this.getBorderColor();t.lineWidth=r;switch(this.getBorderLineStyle()){default:t.setLineDash([]);break;case n.Dash:t.setLineDash([r*5,r]);break;case n.Dot:t.setLineDash([r*2,r]);break;case n.DashDot:t.setLineDash([r*5,r,r*2,r]);break;case n.DashDotDot:t.setLineDash([r*5,r,r*2,r,r*2,r]);break}var a=r/2;if(this.getStyle()===o.RectangularShape){t.globalAlpha=this.getBackgroundOpacity();if(t.globalAlpha>0){t.fillRect(0,0,e,i)}t.globalAlpha=r>0?this.getBorderOpacity():0;if(t.globalAlpha>0){t.strokeRect(a,a,e-r,i-r)}}else if(this.getStyle()===o.CircularShape){var l=e/2;var h=i/2;var s=e/2;t.beginPath();t.arc(l,h,s-a,0,2*Math.PI);t.closePath();t.globalAlpha=this.getBackgroundOpacity();if(t.globalAlpha>0){t.fill()}t.globalAlpha=r>0?this.getBorderOpacity():0;if(t.globalAlpha>0){t.stroke()}}t.globalAlpha=1;t.setLineDash([])};d.prototype._getFont=function(t){return(this.getFontItalic()?"italic ":"")+this.getFontWeight()+" "+this.getFontSize()*t+"px "+(this.getFont()||"Arial")};d.prototype._renderPlainText=function(t){var e=document.createElement("canvas");var i=e.getContext("2d");var r=this.getFontSize()*t;var a=this._getFont(t);i.font=a;var l=Math.ceil(r);var h=this.getBorderLineStyle()!==n.None?this.getBorderWidth()*t:0;var s=Math.ceil(r*.2+h);var d=this.getText().split("\n");var u=0;d.forEach(function(t){u=Math.max(u,i.measureText(t).width)});var p=this.getLink();if(p.length>0){u=Math.max(u,i.measureText(p).width)}u=Math.ceil(u*.5)*2;var c=d.length+(p.length>0?1:0);var g=Math.ceil(l*c*.5)*2;var y=u+s*2;var f=g+s*2;if(this.getStyle()===o.CircularShape){y=f=Math.max(y,f)}this._width=y/t;this._height=f/t;e.width=THREE.Math.ceilPowerOfTwo(y);e.height=THREE.Math.ceilPowerOfTwo(f);this._renderBackground(i,y,f,h);i.font=a;i.textAlign=this.getHorizontalAlignment();i.textBaseline="middle";var x=["left","center","right"].indexOf(i.textAlign);var m=y+u*(x-1)>>1;var v=f-(c-1)*l>>1;i.fillStyle=this.getTextColor();i.filter="blur(0px)";for(var b in d){i.fillText(d[b],m,v+l*b)}if(p.length>0){i.fillStyle="#00f";i.textAlign="right";i.textBaseline="bottom";i.fillText(p,y-s,f-s)}this._setBillboardTexture(e,y,f)};d.prototype._renderHtmlText=function(t){var e=document.createElement("canvas");var r=e.getContext("2d");var a=this.getBorderLineStyle()!==n.None?this.getBorderWidth()*t:0;var l=Math.ceil(a);var h=Math.ceil(this.getWidth()*t)+l*2;var s=Math.ceil(this.getHeight()*t)+l*2;if(this.getStyle()===o.CircularShape){h=s=Math.max(h,s)}this._width=h/t;this._height=s/t;e.width=THREE.Math.ceilPowerOfTwo(h);e.height=THREE.Math.ceilPowerOfTwo(s);this._renderBackground(r,h,s,a);var d=this.getLink();if(d.length>0){r.font=this._getFont(t);r.fillStyle="#00f";r.textAlign="right";r.textBaseline="bottom";r.fillText(d,h-l,s-l)}var u=document.createElement("iframe");u.style.visibility="hidden";u.width=(h-l*2)/t;u.height=(s-l*2)/t;u.sandbox="allow-same-origin";document.body.appendChild(u);var p=u.contentDocument||u.contentWindow.document;p.open();p.close();p.body.innerHTML=this.getText();var c=document.createElement("canvas");c.width=u.width*t;c.height=u.height*t;c.style.width=u.width+"px";c.style.height=u.height+"px";var g=c.getContext("2d");g.scale(t,t);this._billboard.material.visible=false;i(p.body,{canvas:c,backgroundColor:null}).then(function(t){if(t.width>0&&t.height>0){e.getContext("2d").drawImage(t,l,l)}setTimeout(this._setBillboardTexture.bind(this,e,h,s),0);document.body.removeChild(u)}.bind(this))};d.prototype._renderText=function(t){var e=this.getFont()||"Arial";var r=this.getFontSize()*1.333;var l=4;var h=1.2;var s=1.25;var d;var u;var p=document.createElement("canvas");p.id="jDVLAnnotationCanvas-"+Math.random().toString(36).substr(2,9);p.style.visibility="hidden";p.style.display="none";var c=2048;var g=1024;var y=Math.pow(2,Math.ceil(Math.log(t)/Math.LN2));p.width=c*y;p.height=g*y;document.body.appendChild(p);var f=p.getContext("2d");var x=Math.min(Math.max(Math.round(this.getFontWeight()/100),1),9)*100;f.font=x+(this.getFontItalic()?" italic ":" ")+r+"px "+e;var m=Math.ceil(r*h);var v=this.getWidth();var b=this.getHeight();var T=this.getBorderLineStyle()!==n.None?this.getBorderWidth():0;var w=(this.getEncoding()===a.PlainText?1024:v)-(l+T)*2;var M=((this.getEncoding()===a.PlainText?1024:this.getHeight())-(l+T)*2)/m|0;var E=0;var S=0;var _=this.getText();var B=this.getLink();var C=this.getEncoding()===a.PlainText?_.split("\n"):[];C.length=Math.min(C.length,B.length>0?M-1:M);function k(t){return t.substr(0,t.length-2)+"â€¦"}var P=[];if(B.length>0){var W=M-C.length;while(B.length>0&&C.length<W){var D=B;while(f.measureText(D).width>w&&D.length>1){D=D.substring(0,D.length-1)}P.push(D);B=B.substring(D.length,B.length)}if(B.length>0){P[P.length-1]=k(P[P.length-1])}for(var A=0;A<P.length;A++){S=Math.max(f.measureText(P[A]).width,S)}}if(this.getEncoding()===a.PlainText){for(var H=0;H<C.length;H++){E=Math.max(f.measureText(C[H]).width,E)}var R=f.measureText(" ").width;v=Math.max(E,S)+R+l*2;b=(C.length+P.length)*m+l*2}else if(this.getEncoding()===a.HtmlText&&typeof i!="undefined"){d=document.createElement("iframe");d.style.visibility="hidden";d.sandbox="allow-same-origin";document.body.appendChild(d);u=d.contentDocument||d.contentWindow.document;u.open();u.close();u.documentElement.innerHTML=_;(function t(){var e;if(u.styleSheets.length===0){e=u.createElement("style");e.type="text/css";e.appendChild(document.createTextNode(""));u.head.appendChild(e)}e=u.querySelector("style");e.sheet.insertRule("* { margin: 0; padding: 0; line-height: 1; }",0);e.sheet.insertRule("span { line-height: "+s+"; overflow-wrap: break-word;  }",1);var i=e.sheet.cssRules;var r=[];for(var a=0;a<i.length;a++){r.push(i[a].cssText)}e.textContent=r.join("\n");u.body.removeAttribute("style");var o=u.body.querySelectorAll("p");if(o.length>0){o[0].style.marginTop=0;o[0].style.paddingTop="1px";o.forEach(function(t,e){t.style.whiteSpace="normal"})}u.body.querySelectorAll("span").forEach(function(t){var e=t.style.fontFamily.split(",");e.forEach(function(t,i){e[i]='"'+t.trim().replaceAll(/[\u0022\u0027]/g,"")+'"'});t.style.fontFamily=e.join(", ")})})();var V=function(t){function e(t,e){if(e.left<t.left){t.left=e.left}if(e.right>t.right){t.right=e.right}if(e.top<t.top){t.top=e.top}if(e.bottom>t.bottom){t.bottom=e.bottom}}u.body.style.margin=0;u.body.style.padding=0;u.body.style.border=0;var i=u.createElement("div");while(u.body.childNodes.length){var r=u.body.childNodes[0];i.appendChild(r)}u.body.appendChild(i);i.style.margin=0;i.style.padding=0;i.style.border=0;i.style.position="absolute";var a={left:Infinity,top:Infinity,right:-Infinity,bottom:-Infinity};var o;var n;if(t===undefined){i.style.width="min-content";i.style.height="min-content";i.style.overflowWrap="normal";u.querySelectorAll("span").forEach(function(t){e(a,t.getBoundingClientRect())});o=Math.ceil(a.right-a.left);n=Math.ceil(a.bottom-a.top);var h=a.width/a.height;var s=16/9;if(h>s){t={width:o,height:n}}else{var p=o*n;var c=Math.sqrt(p/s);var g=c*s;t={width:Math.ceil(g),height:Math.ceil(c)}}}i.style.width=t.width+"px";i.style.height=t.height+"px";i.style.overflowWrap="normal";u.querySelectorAll("span").forEach(function(t){e(a,t.getBoundingClientRect())});o=Math.ceil(a.right-a.left);if(Math.abs(o-t.width)>l){o=Math.min(o,t.width-2*l)}d.width=o;i.style.width=o+"px";a={left:Infinity,top:Infinity,right:-Infinity,bottom:-Infinity};u.querySelectorAll("p").forEach(function(t){e(a,t.getBoundingClientRect())});n=Math.ceil(a.bottom-a.top);var y={width:o,height:n};while(i.childNodes.length){var f=i.childNodes[0];u.body.appendChild(f)}u.body.removeChild(i);return y};var L={width:Math.ceil(v),height:Math.ceil(b)};L=V(v>0&&b>0?L:undefined);L.width+=l*2;L.height+=l*2;if(v<L.width){v=L.width}if(b<L.height){b=L.height}}v=Math.ceil(v+2*T);b=Math.ceil(b+2*T);if(this.getStyle()===o.CircularShape){v=b=Math.max(v,b)}v*=t;b*=t;var F=Math.pow(2,Math.ceil(Math.log(v)/Math.LN2));var O=Math.pow(2,Math.ceil(Math.log(b)/Math.LN2));F=Math.min(F,p.width);O=Math.min(O,p.height);var U=1;if(v>F||b>O){U=Math.min(F/v,O/b);v*=U;b*=U;t*=U}var I=v;var q=b;this._width=v/t;this._height=b/t;l*=t;T*=t;r*=t;m*=t;E*=t;f.fillStyle=this.getBackgroundColor();f.strokeStyle=this.getBorderColor();f.lineWidth=T;var j=T/2;switch(this.getBorderLineStyle()){default:f.setLineDash([]);break;case n.Dash:f.setLineDash([T*5,T]);break;case n.Dot:f.setLineDash([T*2,T]);break;case n.DashDot:f.setLineDash([T*5,T,T*2,T]);break;case n.DashDotDot:f.setLineDash([T*5,T,T*2,T,T*2,T]);break}var z=this.getBackgroundOpacity();var N=this.getBorderOpacity();if(this.getStyle()===o.RectangularShape){if(z>0){f.globalAlpha=z;f.fillRect(0,0,v,b)}f.globalAlpha=T>0?N:0;if(f.globalAlpha>0){f.strokeRect(j,j,v-T,b-T)}}else if(this.getStyle()===o.CircularShape){var G=v/2;var Q=b/2;var J=Math.min(G,Q);f.beginPath();f.arc(G,Q,J-j,0,2*Math.PI);f.closePath();if(z>0){f.globalAlpha=z;f.fill()}f.globalAlpha=T>0?N:0;if(N>0){f.stroke()}}f.globalAlpha=1;f.setLineDash([]);f.font=x+(this.getFontItalic()?" italic ":" ")+r+"px "+e;f.textAlign="left";f.textBaseline="middle";function K(){if(P.length>0){f.fillStyle="#0000FF";b-=P.length*m;var t=(v-S)*.5;var e=b-T-l+m*.5;for(var i=0;i<P.length;i++){f.fillText(P[i],t,e);e+=m}}}if(this.getEncoding()===a.PlainText){K();f.fillStyle=this.getTextColor();f.strokeStyle=this.getBackgroundColor();f.lineWidth=3;var X=(v-E)*.5;var Y=(b-(C.length-P.length-1)*m)*.5;if(C.length==1){var Z=f.measureText(_);var $=Z.actualBoundingBoxDescent+Z.actualBoundingBoxAscent;f.textAlign="center";f.textBaseline="bottom";X=v*.5;Y=(b-2*T-$)*.5+$+l}for(var tt=0;tt<C.length;tt++){if(this.getStyle()===o.TextGlow){f.strokeText(C[tt],X,Y)}f.fillText(C[tt],X,Y);Y+=m}this._setBillboardTexture(p,I,q);document.body.removeChild(p)}else if(this.getEncoding()===a.HtmlText&&typeof i!="undefined"){K();var et=v-T*2;var it=b-T*2;et/=t;it/=t;d.width=et;d.height=it;d.scale=U;d.sandbox="allow-same-origin";l/=t;u.body.style.width=et-2*l+"px";u.body.style.height=it-2*l+"px";u.body.style.margin=0;u.body.style.padding=l+"px";var rt=document.createElement("canvas");rt.style.width=et+"px";rt.style.height=it+"px";rt.width=et*t;rt.height=it*t;var at=rt.getContext("2d");at.scale(t,t);i(u.documentElement,{canvas:rt,backgroundColor:null,width:et,height:it}).then(function(t){if(t.width>0&&t.height>0){var e=p.getContext("2d");e.scale(U,U);e.drawImage(t,T,T)}setTimeout(this._setBillboardTexture.bind(this,p,I,q),0);document.body.removeChild(d);document.body.removeChild(p)}.bind(this))}else{document.body.removeChild(p)}};d.prototype._setBillboardTexture=function(t,e,i){var r=e/t.width,a=i/t.height;this._billboard.geometry=new THREE.PlaneBufferGeometry(1,1).setAttribute("uv",new THREE.Float32BufferAttribute([0,1,r,1,0,1-a,r,1-a],2));var o=new THREE.CanvasTexture(t);o.magFilter=THREE.NearestFilter;this._billboard.material.map=o;this._billboard.material.needsUpdate=true;this._billboard.material.visible=true};var u=new THREE.Vector4,p=new THREE.Vector3,c=new THREE.Vector3,g=new THREE.Vector3,y=new THREE.Quaternion,f=new THREE.Vector3;d.prototype._updateTexture=function(){this._width=this.getWidth();this._height=this.getHeight();if(this.getText()&&!this.getTexture()){this._renderText(window.devicePixelRatio)}};d.prototype._update=function(t,e,i){var a=this.getNode();if(!a||!a.visible){return}if(this._needUpdateTexture){this._needUpdateTexture=false;this._updateTexture()}a.matrix.getInverse(a.parent.matrixWorld);a.matrix.decompose(a.position,a.quaternion,a.scale);a.matrixWorld.identity();var o=this._billboard;var n=this.getPosition();var l=o.position;var h=1;if(n){l.copy(n)}else{l.setScalar(0)}o.quaternion.copy(e.quaternion);var s=this.getCoordinateSpace();if(s===r.Screen){var d=THREE.Math.lerp(e.near,e.far,1e-4);h=(e.isPerspectiveCamera?2*d:2)/e.projectionMatrix.elements[5];l.set(l.x*h,l.y*h,-d).applyMatrix4(e.matrixWorld);h*=2}else if(s===r.Viewport){if(i.x>i.y){l.x*=i.y/i.x}else{l.y*=i.x/i.y}l.z=-.9999;l.unproject(e);u.copy(l).applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix);var g=u.x/u.w*.5*i.x,y=u.y/u.w*.5*i.y;h=u.w*2/(i.x*e.projectionMatrix.elements[0]);p.setFromMatrixColumn(e.matrixWorld,0).multiplyScalar(h*(Math.round(g)-g));c.setFromMatrixColumn(e.matrixWorld,1).multiplyScalar(h*(Math.round(y)-y));l.add(p).add(c)}o.scale.set((this._width>=0?this._width:.5*i.x/i.y)*h,(this._height>=0?this._height:.5)*h,1);o.updateMatrix();o.updateMatrixWorld()};d.prototype._ortho2DUpdate=function(t,e){if(!this.visible){return}var i=this.userData.originalTransform;var r=e.near*1.0001;if(Math.abs(i.q.w-1)>.001){r=Math.min(r+e.near*i.s.length()*.5,(e.near+e.far)*.5)}this.position.copy(i.p).multiplyScalar(2/e.projectionMatrix.elements[5]);this.position.z=-1;this.position.multiplyScalar(r).applyMatrix4(e.matrixWorld);y.copy(e.quaternion).multiply(i.q);this.quaternion.copy(y);this.scale.copy(i.s).multiplyScalar(r*.5);this.scale.z=Math.min(r-e.near,this.scale.z*.001);this.matrixWorld.compose(this.position,this.quaternion,this.scale);this.matrix.getInverse(this.parent.matrixWorld).multiply(this.matrixWorld);this.matrix.decompose(this.position,this.quaternion,this.scale);this.updateMatrixWorld(true)};d.prototype._billboardViewUpdate=function(t,e,i,r){if(!this.visible){return}this.parent.matrixWorld.decompose(g,y,f);y.inverse().multiply(e.quaternion);this.quaternion.copy(y);if(this._vkGetNodeContentType()===s.Symbol){if(r===undefined){var a=(new THREE.Vector3).setFromMatrixColumn(e.matrixWorld,2);this._vkSetOpacity(Math.max(a.dot(this.userData.direction),0)*.8+.2)}u.copy(this.getWorldPosition(g));u.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix);var o=u.w*2/(t.getSize(new THREE.Vector2).x*e.projectionMatrix.elements[0]);this.scale.setScalar(o);if(!this.userData._symbolCenterFixed){if(!this.userData.boundingBox||this.userData.boundingBox.isEmpty()){this._vkCalculateObjectOrientedBoundingBox();if(this.userData.boundingBox.isEmpty()){return}}var n=this.userData.boundingBox.getCenter(new THREE.Vector3).multiplyScalar(-1);this.traverse(function(t){if(t.geometry){t.position.add(n);t.updateMatrix()}});this._vkCalculateObjectOrientedBoundingBox();this.userData._symbolCenterFixed=true}}this.updateMatrix();this.updateMatrixWorld()};d.prototype._lockToViewportUpdate=function(t,e){var i=0;this.children.forEach(function(t){if(t.visible&&Math.abs(t.quaternion.w-1)>.001){i=Math.max(i,t.scale.length())}});var r=Math.min(e.near*(1.0001+i*.5),(e.near+e.far)*.5);this.position.setFromMatrixColumn(e.matrixWorld,2).multiplyScalar(-r);this.position.add(e.position);this.scale.setScalar(r*2/e.projectionMatrix.elements[5]);this.matrixWorld.compose(this.position,e.quaternion,this.scale);this.matrix.getInverse(this.parent.matrixWorld).multiply(this.matrixWorld);this.matrix.decompose(this.position,this.quaternion,this.scale);this.updateMatrixWorld(true)};return d});
//# sourceMappingURL=Billboard.js.map