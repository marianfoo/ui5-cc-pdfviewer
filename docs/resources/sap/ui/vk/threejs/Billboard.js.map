{"version":3,"file":"Billboard.js","names":["sap","ui","define","BaseObject","threeJs","html2canvas","BillboardCoordinateSpace","BillboardTextEncoding","BillboardStyle","BillboardBorderLineStyle","BillboardHorizontalAlignment","ThreeUtils","NodeContentType","Billboard","extend","metadata","library","properties","node","type","defaultValue","THREE","Group","text","font","fontSize","fontWeight","fontItalic","textColor","borderColor","borderOpacity","backgroundColor","backgroundOpacity","encoding","PlainText","width","height","style","None","borderLineStyle","Solid","borderWidth","horizontalAlignment","Left","texture","material","link","coordinateSpace","Viewport","position","Vector3","renderOrder","prototype","_planeGeometry","PlaneBufferGeometry","init","call","this","MeshBasicMaterial","depthTest","depthWrite","transparent","alphaTest","premultipliedAlpha","side","DoubleSide","setProperty","_billboard","Mesh","_needUpdateTexture","exit","disposeObject","setNode","Object3D","add","matrixAutoUpdate","isBillboard","userData","billboard","_traverse","child","skipIt","callback","setEncoding","value","setText","setFont","setFontSize","setFontWeight","setFontItalic","setStyle","setWidth","setHeight","setTextColor","setBackgroundColor","setBackgroundOpacity","setBorderWidth","setBorderLineStyle","setBorderColor","setBorderOpacity","setHorizontalAlignment","setLink","setTexture","map","setMaterial","setRenderOrder","_renderBackground","ctx","fillStyle","getBackgroundColor","strokeStyle","getBorderColor","lineWidth","getBorderLineStyle","setLineDash","Dash","Dot","DashDot","DashDotDot","bw2","getStyle","RectangularShape","globalAlpha","getBackgroundOpacity","fillRect","getBorderOpacity","strokeRect","CircularShape","xc","yc","radius","beginPath","arc","Math","PI","closePath","fill","stroke","_getFont","pixelRatio","getFontItalic","getFontWeight","getFontSize","getFont","_renderPlainText","canvas","document","createElement","getContext","lineSpacing","ceil","getBorderWidth","margin","textLines","getText","split","textWidth","forEach","max","measureText","getLink","length","textLineCount","textHeight","_width","_height","ceilPowerOfTwo","textAlign","getHorizontalAlignment","textBaseline","a","indexOf","x","y","getTextColor","filter","i","fillText","_setBillboardTexture","_renderHtmlText","getWidth","getHeight","iframe","visibility","sandbox","body","appendChild","doc","contentDocument","contentWindow","open","close","innerHTML","htmlCanvas","context","scale","visible","then","drawImage","setTimeout","bind","removeChild","_renderText","fontFace","padding","plainTextLineHeight","htmlLineHeight","htmlFrame","htmlDocument","id","random","toString","substr","display","maxCanvasWidth","maxCanvasHeight","canvasScale","pow","log","LN2","min","round","w","h","maxLineWidth","getEncoding","maxLines","linkWidth","truncate","str","linkLines","maxLinkLines","rowText","substring","push","j","k","wspw","HtmlText","documentElement","sanitizeHtmlContent","styleSheets","createTextNode","head","querySelector","sheet","insertRule","rules","cssRules","ruleText","ri","cssText","textContent","join","removeAttribute","paras","querySelectorAll","marginTop","paddingTop","p","whiteSpace","span","fonts","fontFamily","f","trim","replaceAll","calcHtmlContentExtents","contentExtentHints","addRect","target","source","left","right","top","bottom","border","div","childNodes","htmlNode","contentBoundingRect","Infinity","contentWidth","contentHeight","undefined","overflowWrap","getBoundingClientRect","intrinsicAspectRatio","desiredAspectRatio","contentArea","sqrt","abs","contentExtents","tw","th","textureScale","borderWidth2","bgOpacity","renderLink","tm","txth","actualBoundingBoxDescent","actualBoundingBoxAscent","TextGlow","strokeText","cw","ch","u","v","geometry","setAttribute","Float32BufferAttribute","CanvasTexture","magFilter","NearestFilter","needsUpdate","pos4","Vector4","axisX","axisY","tmpPos","quat","Quaternion","tmpScale","_updateTexture","getTexture","window","devicePixelRatio","_update","renderer","camera","viewportSize","getNode","matrix","getInverse","parent","matrixWorld","decompose","quaternion","identity","srcPosition","getPosition","copy","setScalar","getCoordinateSpace","Screen","dist","lerp","near","far","isPerspectiveCamera","projectionMatrix","elements","set","applyMatrix4","z","unproject","matrixWorldInverse","sx","sy","setFromMatrixColumn","multiplyScalar","updateMatrix","updateMatrixWorld","_ortho2DUpdate","originalTransform","q","s","multiply","compose","_billboardViewUpdate","backgroundProjection","inverse","_vkGetNodeContentType","Symbol","cameraDirection","_vkSetOpacity","dot","direction","getWorldPosition","getSize","Vector2","_symbolCenterFixed","boundingBox","isEmpty","_vkCalculateObjectOrientedBoundingBox","offset","getCenter","traverse","_lockToViewportUpdate","maxScale","children"],"sources":["Billboard-dbg.js"],"mappings":"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"}