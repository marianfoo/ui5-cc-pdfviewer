{"version":3,"file":"PoiHelper.js","names":["sap","ui","define","NodeContentType","TransformationMatrix","uid","PoiHelper","this","_currentSceneId","prototype","createPOI","currentScene","poiSceneId","viewport","poiPosition","poiScale","nodeInfo","_implementation","x","y","sid","transform","viewportRect","getDomRef","getBoundingClientRect","screenX","left","screenY","top","hit","hitTest","ignoreOverlay","Promise","reject","matrix","THREE","Matrix4","compose","point","_getNativeCamera","quaternion","Vector3","Number","convertTo4x3","elements","parameters","picked","object","fireNodesPicked","length","nodePicked","userData","referenceNode","nodeId","transformType","getSceneBuilder","_resetCurrentScene","loader","_cdsLoader","skipLowLODRendering","getSkipLowLODRendering","setSkipLowLODRendering","nodeHierarchy","getDefaultNodeHierarchy","symbolNode","createNode","Symbol","view","getCurrentView","getViews","updateNodeInfos","target","visible","loadTransientScene","then","transitionNode","setShouldRenderFrame","nodeRef","traverse","child","skipIt","currentSceneId","Object","assign","treeNode","response","convertTo4x4","veid","entityId","name","contentType","bind","removePOI","vsm","getViewStateManager","setVisibilityState","removeNode","getPOIList","getSymbolNodes","backgroundProjectionToImageType","spherical","planar","getBackgroundImageType","getBackgroundProjection","getPoiRect","camera","boundingBox","Box3","setFromObject","vertices","min","z","max","frustum","Frustum","setFromProjectionMatrix","multiplyMatrices","projectionMatrix","matrixWorldInverse","intersectsBox","vertex","i","containsPoint","vertexWorldCoord","copy","vertexScreenSpace","project","box2","Box2","halfScreen","Vector2","width","height","box2min","clone","multiply","box2max","adjustPoi","poiNodeRef","screenPos","getWorldPosition","_width","_height","position","updateMatrix","updateMatrixWorld","direction","setFromMatrixColumn","matrixWorld","normalize","updateNodeId","newNodeId","poiNode","setNodePersistentId","updatePOI","getScene","_viewStateManager","baseScale","set","getNodeHierarchy","children","forEach","_symbolCenterFixed","resolve"],"sources":["PoiHelper-dbg.js"],"mappings":"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"}