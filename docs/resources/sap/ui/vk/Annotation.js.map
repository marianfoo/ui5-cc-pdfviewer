{"version":3,"file":"Annotation.js","names":["sap","ui","define","Control","vkCore","AnnotationStyle","NodeUtils","FormattedText","RTE","rteLibrary","AnnotationRenderer","core","Annotation","extend","metadata","library","properties","annotationId","name","nodeRef","text","type","defaultValue","style","Default","display","animate","animationDelay","selected","editable","xCoordinate","yCoordinate","xOffset","yOffset","height","width","associations","viewport","multiple","aggregations","textEditor","constructor","sId","mSettings","apply","this","arguments","_viewport","_topLimit","_leftLimit","prototype","setViewport","vp","setAssociation","byId","getViewport","getSafeArea","getDomRef","safeBox","getBoundingClientRect","viewBox","widthMargin","left","heightMargin","top","rect","normalizeRectangle","_firePositionChanged","annotation","getEventBus","publish","x","getXCoordinate","y","getYCoordinate","_fireSizeChanged","annotationWidth","annotationHeight","getTargetNodes","_targetNodes","getAttachmentNode","_attachmentNode","setAttachmentNode","attNode","rerender","getDisplay","getNodeRef","vsm","getViewStateManager","getVisibilityState","getProperty","setDisplay","visible","setVisibilityState","setProperty","_reverse","getSelected","getSelectionState","setSelected","getEditable","_setMaxZ","setSelectionState","that","onscroll","ev","textDivDom","_textDiv","stopPropagation","scrollTo","scrollLeft","deltaX","scrollTop","deltaY","_localScroll","document","addEventListener","removeEventListener","undefined","_moving","setAnnotationId","newId","sourceData","getScene","setAnnotationPersistentId","_getNodeRefScreenCenter","node","center","centerOfNodes","projectToScreen","getCamera","_getSortIndex","zIndex","aNode","screenPoint","Math","floor","depth","_getOpacity","annotations","getAnnotations","forEach","atn","push","length","zIndexes","Array","from","zMax","max","zMin","min","_updateBlocked","targetNode","nodeScreen","hitNode","hitTest","visibility","subNodes","_vkTraverseMeshNodes","indexOf","object","worldPos","getTransformationWorld","translation","hitPos","setName","getName","setText","html","getTextEditor","value","_textWidth","_textHeight","addStyleClass","getStyle","Random","getAnimate","_setRandomText","Expand","_setExpandText","setHtmlText","update","textValue","newText","i","setStyle","val","getText","setAnimate","maxZ","map","ant","onclick","evt","_firstClick","setTimeout","tapObject","bind","openEditor","rte","editorType","EditorType","TinyMCE4","getWidth","getHeight","destroy","setTextEditor","closeEditor","getValue","destroyTextEditor","onAfterRendering","_initialOffsetWidth","offsetWidth","_initialOffsetHeight","offsetHeight","getAnimationDelay","domRef","delay","animationName","children","getElementsByTagName","styleObjects","className","j","randomDelay","random","animationDuration","animationTimingFunction","animationIterationCount","animationDirection","animationFillMode","k","setXCoordinate","setYCoordinate","setWidth","setHeight","setEditableState","setEditable","_previousState","annotationRect","scale","setY","deNormalizeRectangle","testHeight","getNativeApi","_resized","rectText","bBox","clientHeight","scrollHeight","round","toString","setX","testWidth","clientWidth","scrollWidth","maxWidth","rightEnd","position","textRect","_resizeEnd","_handleViewportStop","ontouchstart","currentSize","Map","editableAnnotations","getEditableAnnotations","filter","computedStyle","window","getComputedStyle","textWidth","parseInt","slice","textHeight","textMaxWidth","set","getAnnotationId","gripElements","childNodes","resizer","strategies","sapUiVizKitAnnotationElement0","gripNW","sapUiVizKitAnnotationElement1","gripN","sapUiVizKitAnnotationElement2","gripNE","sapUiVizKitAnnotationElement3","gripE","sapUiVizKitAnnotationElement4","gripSE","sapUiVizKitAnnotationElement5","gripS","sapUiVizKitAnnotationElement6","gripSW","sapUiVizKitAnnotationElement7","gripW","resize","gripHandler","oEvent","event","resizeHandler","targetTouches","target","offsetTop","_offsetTop","offsetLeft","_initialX","clientX","_initialY","clientY","onMouseMove","_viewportGestureHandler","_gesture","_currentX","_currentY","setTranslate","onMouseUp","disX","disY","oTarget","jQuery","currentTarget","control","$","rteIfr","cover","attr","css","opacity","offset","append","onmousemove","deltaWidth","deltaHeight","onmouseup","remove","size","get","_textMaxWidth","ontouchmove","ontouchend","setSize","isVisible","isSelected","annotationNodeElement","annotationLeaderLine","viewportRect","attNodeScreen","normRect","getXOffset","getYOffset","annotationNodeScreen","Explode","Square","posX","posY","leaderOptions","isElbow","toHeight","setLeaderLineSVG","transform","parseFloat","substring","_offsetLeft","to","leaderLineSVG","options","fromRect","toRect","x1","y1","x2","y2","classList","contains","add","svgLeft","svgTop","abs","startX","startY","pathway","leaderLine","getAttribute","setAttribute","getTotalLength","setLeaderLine","line","fT","tT","fL","tL","topSide","leftSide","sqrt","angle","PI","acos","getTransform","annotationNode","updateMatrix","vk","TransformationMatrix","convertTo4x3","matrix","elements","setTransform","updateNodeId","nodeId","userData","setNodePersistentId","setInitialOffset","values","next","nomPos","targetNodePos","initialX","initialY","fitToText","maxHeight","div","createElement","innerHTML","body","appendChild","removeChild","getStyles","styles","src","createAnnotation","divAnnotation","id","attachment","targetNodes","_getBackgroundColor","color","label","colour","colorArray"],"sources":["Annotation-dbg.js"],"mappings":"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"}