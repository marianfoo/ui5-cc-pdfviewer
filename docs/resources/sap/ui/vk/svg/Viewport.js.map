{"version":3,"file":"Viewport.js","names":["sap","ui","define","vkCore","ViewportBase","ResizeHandler","KeyCodes","Loco","ViewStateManagerVK","ViewStateManagerSVG","ViewportHandler","VisibilityMode","ZoomTo","SelectionMode","NodeContentType","getResourceBundle","Messages","Scene","OrthographicCamera","MeasurementSurface","Rectangle","HotspotHelper","colorToCSSColor","cssColorToColor","colorToABGR","abgrToColor","Log","core","Viewport","extend","metadata","library","events","cameraChanged","parameters","offset","zoom","enableEventBubbling","hotspotEnter","nodeRef","hotspotLeave","basePrototype","getMetadata","getParent","getClass","prototype","init","call","this","_measurementSurface","_resizeListenerId","_animLoopRequestId","_animLoopFunction","_animLoop","bind","_width","_height","_camera","_gestureX","_gestureY","_scene","_selectionRect","material","lineColor","lineStyle","dashPattern","_styles","Map","raster","rasterImage","Image","vectorImage","bmpCanvas","rasterMode","useRasterMode","delayEnd","timer","nodesThreshold","onload","ctx","getContext","clearRect","width","height","drawImage","src","toDataURL","_viewportHandler","_loco","addHandler","_hotspotHelper","_currentViewIndex","_currentView","getEventBus","subscribe","_onViewStateApplied","attachLocalizationChanged","_onLocalizationChanged","exit","detachLocalizationChanged","unsubscribe","destroy","removeHandler","deregister","setScene","_renderer","event","surface","getMeasurements","length","update","getCamera","onBeforeRendering","onAfterRendering","register","_handleResize","domRef","getDomRef","append","root","getRootElement","_setDomRef","document","getElementById","uid","_svgElement","parentNode","size","clientWidth","clientHeight","oldWidth","oldHeight","_initialPosition","zoomTo","All","_updateViewBox","fireCameraChanged","viewBox","_getViewBox","measurementSurfaceDomRef","style","fireResize","previousSibling","_updateRasterImage","scene","getDefaultNodeHierarchy","detachNodeCreated","_nodeCreatedHandler","clear","nh","findNodesByName","attachNodeCreated","initialView","getInitialView","activateView","_onContentLoadingFinished","setCamera","camera","createdNode","getParameter","_vkGetNodeContentType","Annotation","children","type","invalidate","getScene","onSetViewStateManager","viewStateManager","_viewStateManager","attachOutliningChanged","_onOutliningOrSelectionChanged","attachSelectionChanged","onUnsetViewStateManager","detachOutliningChanged","detachSelectionChanged","_getViewStateManagerSVG","_implementation","hitTest","x","y","withTolerance","exactHitObject","vsm","rootElement","viewportRect","getBoundingClientRect","htmlElement","elementFromPoint","id","hit","toleranceX","toleranceY","y2","x2","_getSceneTreeElement","tap","isDoubleClick","node","tapObject","fireNodeClicked","getFreezeCamera","zoomedObject","Node","Visible","picked","fireNodesPicked","getSelectionMode","Exclusive","exclusiveSelectionHandler","Sticky","stickySelectionHandler","offscreenPosition","rotateDelta","panDelta","onkeydown","isMarked","keyCode","ARROW_LEFT","ARROW_RIGHT","ARROW_UP","ARROW_DOWN","ctrlKey","altKey","metaKey","delta","beginGesture","shiftKey","pan","rotate","endGesture","preventDefault","stopPropagation","PLUS","NUMPAD_MINUS","NUMPAD_PLUS","D","_dumpSceneData","tools","getTools","i","tool","byId","gizmo","getGizmoForContainer","handleSelectionChanged","setSelectionRect","rect","removeAttribute","_transformRect","setAttribute","x1","y1","_select","selection","Set","_findRectElementsRecursive","_mask","Array","from","getImage","topColor","bottomColor","includeSelection","_setContent","content","apply","arguments","setScale","onSetContentConnector","contentConnector","attachContentLoadingFinished","onUnsetContentConnector","detachContentLoadingFinished","nodeHierarchy","vsmMask","color","getShowAllHotspots","getShowAllHotspotsTintColor","hotspotNodes","getHotspotNodeIds","forEach","hotspotNode","updateHotspot","undefined","setHotspotColor","getDisableHotspotHovering","addClass","_initialZoom","lerp","a","b","f","smootherStep","edge0","edge1","Math","min","max","anim","_anim","start","end","timeNow","Date","now","time","duration","oldOffsetX","offsetX","oldOffsetY","offsetY","oldZoom","_redlineHandler","window","requestAnimationFrame","_endRasterMode","getCurrentView","channel","eventId","source","view","viewGroups","getViewGroups","that","viewGroup","getViews","modelView","indexOf","fireViewActivated","viewIndex","publish","getTopColor","isArray","setBackgroundColorTop","red","floor","green","blue","alpha","getBottomColor","setBackgroundColorBottom","ignoreAnimationPosition","rerender","fireViewFinished","resetCurrentView","_resetNodesStatusByCurrentView","what","crossFadeSeconds","margin","boundingBox","Infinity","_expandBoundingBoxRecursive","Selected","enumerateSelection","Restore","error","getText","NodeSetIsolation","RestoreRemoveIsolation","ViewLeft","ViewRight","ViewTop","ViewBottom","ViewBack","ViewFront","newCamera","_zoomTo","_activateCamera","flyToDuration","_startRasterMode","devicePixelRatio","Device","browser","firefox","svgContent","XMLSerializer","serializeToString","data","encodeURIComponent","clearTimeout","display","clearRasterMode","setTimeout","dx","dy","z","_MIN_ZOOM","hover","elem","_hotspotElement","fireHotspotLeave","Hotspot","getHotspotColorABGR","fireHotspotEnter","_bmpDraw","oldPos","_worldToScreen","newPos","translate","scale","join","getViewInfo","query","viewInfo","visibility","visibilityMode","mode","Complete","allVisibility","getVisibilityComplete","visible","hidden","getShouldTrackVisibilityChanges","changes","getVisibilityChanges","warning","VIT32","summary","code","_getSelectionComplete","setViewInfo","_setViewBox","veIdToNodeRefMap","getNodeHierarchy","allNodeRefs","nodeProxy","createNodeProxy","veId","getVeId","destroyNodeProxy","set","visibleVeIds","hiddenVeIds","setVisibilityState","get","Differences","resetVisibility","getVisibilityState","VIT28","info","selected","unselected","push","setSelectionStates","queueCommand","command","getOutputSize","boundingClientRect","viewportWidth","viewportHeight","relevantDimension","left","top","sideLength","setShouldRenderFrame","_isPanoramicActivated","setShowAllHotspots","value","setProperty","nodes","hotspotElement","setDisableHotspotHovering","removeClass","setHotspotColorABGR","showHotspots","nodeRefs","show","hotspotColor","setCustomHotspotColor","_getFillStyleId","element","highlightColor","tintColor","fillStyle","veid","fill","has","attributes","_setFillStyleAttributes","name","_getLineStyleId","materialId","_setLineStyleAttributes","getMeasurementSurface","level","getLevel","setLevel","Level","INFO","count","treeDepth","leafNodes","emptyLeafNodes","e","getElementsByTagName","n","parent","t","tagName","projectToScreen","screenPos"],"sources":["Viewport-dbg.js"],"mappings":";;;;;;AAQAA,IAAIC,GAAGC,OAAO,CACb,UACA,kBACA,4BACA,yBACA,UACA,sBACA,qBACA,qBACA,oBACA,YACA,mBACA,qBACA,uBACA,cACA,UACA,uBACA,0BACA,cACA,kBACA,qBACA,qBACA,iBACA,iBACA,eACA,oBACE,SACFC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,aAaA,IAAIC,EAAWxB,EAAayB,OAAO,yBAA0E,CAC5GC,SAAU,CACTC,QAAS,YAWTC,OAAQ,CACPC,cAAe,CACdC,WAAY,CAIXC,OAAQ,UAIRC,KAAM,SAEPC,oBAAqB,MAEtBC,aAAc,CACbJ,WAAY,CACXK,QAAS,OAEVF,oBAAqB,MAEtBG,aAAc,CACbN,WAAY,CACXK,QAAS,OAEVF,oBAAqB,UAMzB,IAAII,EAAgBb,EAASc,cAAcC,YAAYC,WAAWC,UAElEjB,EAASiB,UAAUC,KAAO,WAEzB,GAAIL,EAAcK,KAAM,CACvBL,EAAcK,KAAKC,KAAKC,KACzB,CAGAA,KAAKC,oBAAsB,IAAI9B,EAE/B6B,KAAKE,kBAAoB,KACzBF,KAAKG,mBAAqB,EAC1BH,KAAKI,kBAAoBJ,KAAKK,UAAUC,KAAKN,MAE7CA,KAAKO,OAASP,KAAKQ,QAAU,EAC7BR,KAAKS,QAAU,IAAIvC,EACnB8B,KAAKU,UAAY,EACjBV,KAAKW,UAAY,EAEjBX,KAAKY,OAAS,KACdZ,KAAKa,eAAiB,IAAIzC,EAAU,CACnC0C,SAAU,CACTC,UAAW,CAAC,IAAM,IAAM,EAAG,GAC3BC,UAAW,CACVC,YAAa,CAAC,EAAG,OAKpBjB,KAAKkB,QAAU,IAAIC,IAEnBnB,KAAKoB,OAAS,CAEbC,YAAa,IAAIC,MAGjBC,YAAa,IAAID,MAGjBE,UAAW,KAGXC,WAAY,MAGZC,cAAe,MAGfC,SAAU,MAGVC,MAAO,KAGPC,eAAgB,KAGjB7B,KAAKoB,OAAOG,YAAYO,OAAS,WAEhC,IAAIC,EAAM/B,KAAKoB,OAAOI,UAAUQ,WAAW,MAC3CD,EAAIE,UAAU,EAAG,EAAGjC,KAAKoB,OAAOI,UAAUU,MAAOlC,KAAKoB,OAAOI,UAAUW,QACvEJ,EAAIK,UAAUpC,KAAKoB,OAAOG,YAAa,EAAG,GAG1CvB,KAAKoB,OAAOC,YAAYa,MAAQlC,KAAKoB,OAAOI,UAAUU,MACtDlC,KAAKoB,OAAOC,YAAYc,OAASnC,KAAKoB,OAAOI,UAAUW,OACvDnC,KAAKoB,OAAOC,YAAYgB,IAAMrC,KAAKoB,OAAOI,UAAUc,WACrD,EAAEhC,KAAKN,MAEPA,KAAKuC,iBAAmB,IAAI7E,EAAgBsC,MAE5CA,KAAKwC,MAAQ,IAAIjF,EAAKyC,MACtBA,KAAKwC,MAAMC,WAAWzC,KAAKuC,kBAAmB,GAE9CvC,KAAK0C,eAAiB,IAAIrE,EAE1B2B,KAAK2C,kBAAoB,EACzB3C,KAAK4C,aAAe,KAEpBzF,EAAO0F,cAAcC,UAAU,YAAa,mBAAoB9C,KAAK+C,oBAAqB/C,MAE1FrB,EAAKqE,0BAA0BhD,KAAKiD,uBAAwBjD,KAC7D,EAEApB,EAASiB,UAAUqD,KAAO,WACzBvE,EAAKwE,0BAA0BnD,KAAKiD,uBAAwBjD,MAE5D7C,EAAO0F,cAAcO,YAAY,YAAa,mBAAoBpD,KAAK+C,oBAAqB/C,MAE5FA,KAAKC,oBAAoBoD,UACzBrD,KAAKC,oBAAsB,KAE3BD,KAAKwC,MAAMc,cAActD,KAAKuC,kBAC9BvC,KAAKuC,iBAAiBc,UAEtB,GAAIrD,KAAKE,kBAAmB,CAC3B7C,EAAckG,WAAWvD,KAAKE,mBAC9BF,KAAKE,kBAAoB,IAC1B,CAEAF,KAAKwD,SAAS,MACdxD,KAAKyD,UAAY,KACjBzD,KAAKwC,MAAQ,KACbxC,KAAKuC,iBAAmB,KAExB,GAAI9C,EAAcyD,KAAM,CACvBzD,EAAcyD,KAAKnD,KAAKC,KACzB,CAEAA,KAAKoB,OAAOK,WAAa,MACzBzB,KAAKoB,OAAOM,cAAgB,KAC7B,EAEA9C,EAASiB,UAAUoD,uBAAyB,SAASS,GACpD,IAAIC,EAAU3D,KAAKC,oBACnB,GAAI0D,GAAWA,EAAQC,kBAAkBC,OAAS,EAAG,CACpDF,EAAQG,OAAO9D,KAAMA,KAAK+D,YAC3B,CACD,EAEAnF,EAASiB,UAAUmE,kBAAoB,WACtC,GAAIhE,KAAKE,kBAAmB,CAC3B7C,EAAckG,WAAWvD,KAAKE,mBAC9BF,KAAKE,kBAAoB,IAC1B,CACD,EAEAtB,EAASiB,UAAUoE,iBAAmB,WACrCjE,KAAKE,kBAAoB7C,EAAc6G,SAASlE,KAAMA,KAAKmE,cAAc7D,KAAKN,OAE9E,IAAIoE,EAASpE,KAAKqE,YAClBD,EAAOE,OAAOtE,KAAKC,oBAAoBoE,aAEvC,GAAIrE,KAAKY,OAAQ,CAChB,IAAI2D,EAAOvE,KAAKY,OAAO4D,iBACvBD,EAAKE,WAAWC,SAASC,eAAeJ,EAAKK,MAC7C5E,KAAK6E,YAAcN,EAAKH,OAAOU,UAChC,CAEA9E,KAAKmE,cAAc,CAClBY,KAAM,CACL7C,MAAOkC,EAAOY,YACd7C,OAAQiC,EAAOa,eAGlB,EAEArG,EAASiB,UAAUsE,cAAgB,SAAST,GAC3C,IAAIwB,EAAWlF,KAAKO,OACpB,IAAI4E,EAAYnF,KAAKQ,QACrBR,KAAKO,OAASmD,EAAMqB,KAAK7C,MACzBlC,KAAKQ,QAAUkD,EAAMqB,KAAK5C,OAE1BnC,KAAKS,QAAQqD,OAAO9D,KAAKO,OAAQP,KAAKQ,QAAS,OAC/C,IAAK0E,IAAa,GAAKC,IAAc,KAAOnF,KAAKS,QAAQ2E,iBAAkB,CAC1EpF,KAAKqF,OAAOzH,EAAO0H,IAAK,KAAM,EAAG,EAClC,KAAO,CACNtF,KAAKuF,iBACLvF,KAAKwF,kBAAkB,CAAEC,QAASzF,KAAK0F,eACxC,CAEA,IAAIC,EAA2B3F,KAAKC,oBAAoBoE,YACxDsB,EAAyBC,MAAM1D,MAAQlC,KAAKO,OAAS,KACrDoF,EAAyBC,MAAMzD,OAASnC,KAAKQ,QAAU,KAEvDR,KAAK6F,WAAW,CACfd,KAAM,CACL7C,MAAOlC,KAAKO,OACZ4B,OAAQnC,KAAKQ,WAIf,GAAIR,KAAK6E,aAAe,KAAM,CAE7B7E,KAAKoB,OAAOI,UAAYxB,KAAK6E,YAAYiB,gBACzC9F,KAAK+F,oBACN,CAEA,OAAO,IACR,EASAnH,EAASiB,UAAU2D,SAAW,SAASwC,GACtC,GAAIhG,KAAKY,OAAQ,CAEhBZ,KAAKY,OAAOqF,0BAA0BC,kBAAkBlG,KAAKmG,oBAAqBnG,KACnF,CACAA,KAAKY,OAASoF,EACdhG,KAAK2C,kBAAoB,EACzB3C,KAAK4C,aAAe,KACpB5C,KAAKkB,QAAQkF,QAEb,GAAIJ,EAAO,CAOV,IAAIK,EAAKrG,KAAKY,OAAOqF,0BAIrBjG,KAAKoB,OAAOM,cAAgB2E,EAAGC,kBAAkBzC,OAAS7D,KAAKoB,OAAOS,eAEtEwE,EAAGE,kBAAkBvG,KAAKmG,oBAAqBnG,MAC/C,IAAIwG,EAAcR,EAAMS,iBACxB,GAAID,EAAa,CAChBxG,KAAK0G,aAAaF,EACnB,CAEAxG,KAAK2G,2BACN,CAEA,OAAO3G,IACR,EAEApB,EAASiB,UAAU+G,UAAY,SAASC,GACvC,KAAMA,aAAkB3I,GAAqB,CAC5C,OAAO8B,IACR,CAEA,GAAIP,EAAcmH,UAAW,CAC5BnH,EAAcmH,UAAU7G,KAAKC,KAAM6G,EACpC,CAEA,GAAIA,EAAQ,CACXA,EAAO/C,OAAO9D,KAAKO,OAAQP,KAAKQ,QAAS,MACzCR,KAAKuF,gBACN,CAEA,OAAOvF,IACR,EAEApB,EAASiB,UAAUsG,oBAAsB,SAASzC,GAEjD,IAAIoD,EAAcpD,EAAMqD,aAAa,WAErC,GAAID,EAAYE,0BAA4BlJ,EAAgBmJ,YAC3DH,EAAYI,UAAYJ,EAAYI,SAASrD,QAAUiD,EAAYI,SAAS,GAAGC,OAAS,QAAS,CACjGnH,KAAKoH,YACN,CACD,EAOAxI,EAASiB,UAAUwH,SAAW,WAC7B,OAAOrH,KAAKY,MACb,EAgBAhC,EAASiB,UAAUyH,sBAAwB,SAASC,GACnDvH,KAAKwH,kBAAoBD,EAEzBA,EAAiBE,uBAAuBzH,KAAK0H,+BAAgC1H,MAC7EuH,EAAiBI,uBAAuB3H,KAAK0H,+BAAgC1H,KAC9E,EAEApB,EAASiB,UAAU+H,wBAA0B,SAASL,GACrDA,EAAiBM,uBAAuB7H,KAAK0H,+BAAgC1H,MAC7EuH,EAAiBO,uBAAuB9H,KAAK0H,+BAAgC1H,MAE7EA,KAAKwH,kBAAoB,IAC1B,EAEA5I,EAASiB,UAAUkI,wBAA0B,WAC5C,GAAI/H,KAAKwH,kBAAmB,CAC3B,GAAIxH,KAAKwH,6BAA6B/J,EAAqB,CAC1D,OAAOuC,KAAKwH,iBACb,CACA,GAAIxH,KAAKwH,6BAA6BhK,GACrCwC,KAAKwH,kBAAkBQ,2BAA2BvK,EAAqB,CACvE,OAAOuC,KAAKwH,kBAAkBQ,eAC/B,CACD,CACA,OAAO,IACR,EAWApJ,EAASiB,UAAUoI,QAAU,SAASC,EAAGC,EAAGC,EAAeC,GAC1D,IAAIC,EAAMtI,KAAK+H,0BACf,IAAKO,IAAQtI,KAAKY,OAAQ,CACzB,OAAO,IACR,CAEA,IAAI2H,EAAcvI,KAAKY,OAAO4D,iBAC9B,IAAIgE,EAAexI,KAAKqE,YAAYoE,wBAEpC,IAAIR,EAAU,SAASC,EAAGC,GACzB,IAAIO,EAAchE,SAASiE,iBAAiBT,EAAIM,EAAaN,EAAGC,EAAIK,EAAaL,GACjF,OAAOO,IAAgB,MAAQA,EAAYE,GAAKL,EAAY5D,eAAe+D,EAAYE,IAAM,IAC9F,EAEA,IAAIC,EAAMZ,EAAQC,EAAGC,GACrB,GAAIC,EAAe,CAClB,IAAIU,EAAa,EACjB,IAAIC,EAAa,EACjB,IAAK,IAAIC,EAAKb,EAAIY,EAAYC,EAAKb,EAAIY,IAAeF,EAAKG,IAAM,CAChE,IAAK,IAAIC,EAAKf,EAAIY,EAAYG,EAAKf,EAAIY,IAAeD,EAAKI,IAAM,CAChEJ,EAAMZ,EAAQgB,EAAID,EACnB,CACD,CACD,CAEA,GAAIX,EAAgB,CACnB,OAAOQ,CACR,CAEA,OAAOA,EAAMA,EAAIK,uBAAyB,IAC3C,EAUAtK,EAASiB,UAAUsJ,IAAM,SAASjB,EAAGC,EAAGiB,GACvC,IAAIC,EAAOrJ,KAAKiI,QAAQC,EAAGC,EAAG,MAE9B,IAAKiB,EAAe,CACnBpJ,KAAKsJ,UAAUD,GAEf,GAAIA,IAAS,KAAM,CAClBrJ,KAAKuJ,gBAAgB,CAAEhK,QAAS8J,EAAMnB,EAAGA,EAAGC,EAAGA,GAAK,KAAM,KAC3D,CACD,MAAO,IAAKnI,KAAKwJ,kBAAmB,CACnC,GAAIH,GAAQrJ,KAAKS,QAAQgJ,eAAiBJ,EAAM,CAC/CrJ,KAAKS,QAAQgJ,aAAeJ,EAC5BrJ,KAAKqF,OAAOzH,EAAO8L,KAAM1J,KAAKS,QAAQgJ,aAAc,GAAK,GAC1D,KAAO,CACNzJ,KAAKS,QAAQgJ,aAAe,KAC5BzJ,KAAKqF,OAAOzH,EAAO+L,QAAS,KAAM,GAAK,EACxC,CACD,CAEA,OAAO3J,IACR,EASApB,EAASiB,UAAUyJ,UAAY,SAAS/J,GACvC,IAAIL,EAAa,CAChB0K,OAAQrK,EAAU,CAACA,GAAW,IAE/BS,KAAK6J,gBAAgB3K,GAErB,GAAIc,KAAK8J,qBAAuBjM,EAAckM,UAAW,CACxD/J,KAAKgK,0BAA0B9K,EAAW0K,OAC3C,MAAO,GAAI5J,KAAK8J,qBAAuBjM,EAAcoM,OAAQ,CAC5DjK,KAAKkK,uBAAuBhL,EAAW0K,OACxC,CAEA,OAAO5J,IACR,EAKA,IAAImK,EAAoB,CAAEjC,GAAI,EAAGC,GAAI,GACrC,IAAIiC,EAAc,EAClB,IAAIC,EAAW,EAEfzL,EAASiB,UAAUyK,UAAY,SAAS5G,GACvC,IAAKA,EAAM6G,WAAY,CACtB,OAAQ7G,EAAM8G,SACb,KAAKlN,EAASmN,WACd,KAAKnN,EAASoN,YACd,KAAKpN,EAASqN,SACd,KAAKrN,EAASsN,WACb,GAAIlH,EAAMmH,SAAWnH,EAAMoH,QAAUpH,EAAMqH,QAAS,CACnD,KACD,CACA,IAAIC,EAAQ,CAAE9C,EAAG,EAAGC,EAAG,GACvB,OAAQzE,EAAM8G,SACb,KAAKlN,EAASmN,WAAYO,EAAM9C,GAAK,EAAG,MACxC,KAAK5K,EAASoN,YAAaM,EAAM9C,GAAK,EAAG,MACzC,KAAK5K,EAASqN,SAAUK,EAAM7C,GAAK,EAAG,MACtC,KAAK7K,EAASsN,WAAYI,EAAM7C,GAAK,EAAG,MACxC,QAAS,MAEVnI,KAAKiL,aAAad,EAAkBjC,EAAGiC,EAAkBhC,GACzD,GAAIzE,EAAMwH,SAAU,CACnBlL,KAAKmL,IAAId,EAAWW,EAAM9C,EAAGmC,EAAWW,EAAM7C,EAC/C,KAAO,CACNnI,KAAKoL,OAAOhB,EAAcY,EAAM9C,EAAGkC,EAAcY,EAAM7C,EAAG,KAC3D,CACAnI,KAAKqL,aACL3H,EAAM4H,iBACN5H,EAAM6H,kBACN,MAED,KAAK,IACL,KAAKjO,EAASkO,KACd,KAAKlO,EAASmO,aACd,KAAKnO,EAASoO,YACb1L,KAAKiL,aAAajL,KAAKO,OAAS,GAAKP,KAAKQ,QAAU,IACpDR,KAAKZ,KAAKsE,EAAM8G,UAAYlN,EAASkO,MAAQ9H,EAAM8G,UAAYlN,EAASoO,YAAc,KAAO,KAC7F1L,KAAKqL,aACL3H,EAAM4H,iBACN5H,EAAM6H,kBACN,MAED,KAAKjO,EAASqO,EACb,GAAIjI,EAAMmH,QAAS,CAClB7K,KAAK4L,gBACN,CACA,MAED,QAAS,MAEX,CACD,EAKAhN,EAASiB,UAAU6H,+BAAiC,SAAShE,GAC5D,IAAImI,EAAQ7L,KAAK8L,WACjB,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAMhI,OAAQkI,IAAK,CACtC,IAAIC,EAAOrN,EAAKsN,KAAKJ,EAAME,IAC3B,IAAIG,EAAQF,EAAKG,qBAAqBnM,MACtC,GAAIkM,GAASA,EAAME,uBAAwB,CAC1CF,EAAME,uBAAuB1I,EAC9B,CACD,CACD,EAEA9E,EAASiB,UAAUwM,iBAAmB,SAASC,GAC9C,IAAIlI,EAASM,SAASC,eAAe3E,KAAKa,eAAe+D,KACzD,GAAIR,EAAQ,CACX,GAAIkI,EAAM,CACTlI,EAAOmI,gBAAgB,WACvBD,EAAOtM,KAAKS,QAAQ+L,eAAeF,GACnClI,EAAOqI,aAAa,IAAKH,EAAKI,GAAIJ,EAAKrD,IACvC7E,EAAOqI,aAAa,IAAKH,EAAKK,GAAIL,EAAKtD,IACvC5E,EAAOqI,aAAa,QAASH,EAAKrD,GAAKqD,EAAKI,IAC5CtI,EAAOqI,aAAa,SAAUH,EAAKtD,GAAKsD,EAAKK,GAC9C,KAAO,CACNvI,EAAOqI,aAAa,UAAW,OAChC,CACD,CACD,EAEA7N,EAASiB,UAAU+M,QAAU,SAASN,GACrC,IAAIhE,EAAMtI,KAAK+H,0BACf,GAAIO,GAAOtI,KAAKY,OAAQ,CACvB0L,EAAOtM,KAAKS,QAAQ+L,eAAeF,GACnC,IAAIO,EAAY,IAAIC,IACpB9M,KAAKY,OAAO4D,iBAAiBuI,2BAA2BF,EAAWP,EAAMhE,EAAI0E,OAC7E,OAAOC,MAAMC,KAAKL,EACnB,CACA,MAAO,EACR,EAaAjO,EAASiB,UAAUsN,SAAW,SAASjL,EAAOC,EAAQiL,EAAUC,EAAaC,GAC5E,OAAO,IACR,EAGA1O,EAASiB,UAAU0N,YAAc,SAASC,GACzC/N,EAAc8N,YAAYE,MAAMzN,KAAM0N,WAEtC1N,KAAKwD,SAASgK,aAAmBvP,EAAQuP,EAAU,MAEnD,GAAIxN,KAAKqH,WAAY,CACpBrH,KAAK4G,UAAU,IAAI1I,GACnB,IAAIsI,EAAcxG,KAAKqH,WAAWZ,iBAClC,GAAID,GAAexG,KAAK+H,0BAA2B,CAClD/H,KAAK0G,aAAaF,EAAa,MAAO,KACvC,CACD,CAEA,GAAIxG,KAAKC,qBAAuB,KAAM,CAErCD,KAAKC,oBAAoB0N,SAAS,EACnC,CAEA,OAAO3N,IACR,EAEApB,EAASiB,UAAU+N,sBAAwB,SAASC,GACnDzQ,EAAayC,UAAU+N,sBAAsB7N,KAAKC,KAAM6N,GACxDA,EAAiBC,6BAA6B9N,KAAK2G,0BAA2B3G,KAC/E,EAEApB,EAASiB,UAAUkO,wBAA0B,SAASF,GACrDA,EAAiBG,6BAA6BhO,KAAK2G,0BAA2B3G,MAC9E5C,EAAayC,UAAUkO,wBAAwBhO,KAAKC,KAAM6N,EAC3D,EAEAjP,EAASiB,UAAU8G,0BAA4B,SAASjD,GACvD,GAAI1D,KAAKY,OAAQ,CAChB,IAAIqN,EAAgBjO,KAAKY,OAAOqF,0BAChC,GAAIgI,EAAe,CAClB,IAAI3F,EAAMtI,KAAK+H,0BACf,IAAImG,EAAU5F,GAAOA,EAAI0E,OAAS,EAClC,IAAImB,EAAQnO,KAAKoO,qBAAuBpO,KAAKqO,8BAAgC,KAC7E,IAAIC,EAAeL,EAAcM,oBACjCD,EAAaE,QAAQ,SAASC,GAC7BzO,KAAK0C,eAAegM,cAAcD,EAAaE,WAC/C,GAAIR,GAAS,KAAM,CAClBM,EAAYG,gBAAgBV,EAASC,EACtC,CAEA,GAAInO,KAAK6O,4BAA6B,CACrCJ,EAAYK,SAAS,mCACtB,CACD,EAAG9O,KACJ,CAEA,IAAKA,KAAKS,QAAQsO,cAAgB/O,KAAKS,QAAQsO,gBAAkB,EAAG,CACnE/O,KAAKqF,OAAOzH,EAAO0H,IAAK,KAAM,EAAG,EAClC,CACAtF,KAAKoH,YACN,CACD,EAEA,SAAS4H,EAAKC,EAAGC,EAAGC,GACnB,OAAOF,GAAKC,EAAID,GAAKE,CACtB,CAEA,SAASC,EAAaC,EAAOC,EAAOpH,GAEnCA,EAAIqH,KAAKC,IAAID,KAAKE,KAAKvH,EAAImH,IAAUC,EAAQD,GAAQ,GAAM,GAE3D,OAAOnH,EAAIA,EAAIA,GAAKA,GAAKA,EAAI,EAAI,IAAM,GACxC,CAEAtJ,EAASiB,UAAUQ,UAAY,WAC9BL,KAAKG,mBAAqB,EAE1B,IAAIuP,EAAO1P,KAAK2P,MAChB,GAAID,EAAM,CACT,IAAIE,EAAQF,EAAKE,MACjB,IAAIC,EAAMH,EAAKG,IACf,IAAIC,EAAUC,KAAKC,MACnB,IAAIb,EAAII,KAAKC,IAAIJ,EAAa,EAAG,GAAIU,EAAUF,EAAMK,MAAQP,EAAKQ,UAAW,GAC7E,IAAIC,EAAanQ,KAAKS,QAAQ2P,QAC9B,IAAIC,EAAarQ,KAAKS,QAAQ6P,QAC9B,IAAIC,EAAUvQ,KAAKS,QAAQrB,KAE3BY,KAAKS,QAAQ2P,QAAUpB,EAAKY,EAAMQ,QAASP,EAAIO,QAASjB,GACxDnP,KAAKS,QAAQ6P,QAAUtB,EAAKY,EAAMU,QAAST,EAAIS,QAASnB,GACxDnP,KAAKS,QAAQrB,KAAO4P,EAAKY,EAAMxQ,KAAMyQ,EAAIzQ,KAAM+P,GAE/C,GAAInP,KAAKwQ,gBAAiB,CACzBxQ,KAAKwQ,gBAAgBrF,IAAInL,KAAKS,QAAQ2P,QAAUD,EAAYnQ,KAAKS,QAAQ6P,QAAUD,GACnFrQ,KAAKwQ,gBAAgBpR,KAAKY,KAAKS,QAAQrB,KAAOmR,EAASvQ,KAAKS,QAAQ2P,QAASpQ,KAAKS,QAAQ6P,QAC3F,CAEAtQ,KAAKwF,kBAAkB,CAAEC,QAASzF,KAAK0F,gBAEvC,GAAI1F,KAAKuF,kBAAqBuK,EAAUF,EAAMK,KAAQP,EAAKQ,SAAU,CACpElQ,KAAKG,mBAAqBsQ,OAAOC,sBAAsB1Q,KAAKI,kBAC7D,KAAO,QACCJ,KAAK2P,MACZ3P,KAAK2Q,gBACN,CACD,CACD,EAQA/R,EAASiB,UAAU+Q,eAAiB,WACnC,OAAO5Q,KAAK4C,YACb,EAEAhE,EAASiB,UAAUkD,oBAAsB,SAAS8N,EAASC,EAASpN,GACnE,GAAIA,EAAMqN,SAAW/Q,KAAK+H,0BAA2B,CACpD/H,KAAK0G,aAAahD,EAAMsN,KACzB,CACD,EAQApS,EAASiB,UAAU6G,aAAe,SAASsK,GAC1C,IAAKhR,KAAKY,OAAQ,CACjB,OAAOZ,IACR,CAEA,IAAIiR,EAAajR,KAAKY,OAAOsQ,gBAC7B,IAAIC,EAAOnR,KACX,GAAIiR,EAAY,CACfA,EAAWzC,QAAQ,SAAS4C,GAC3BA,EAAUC,WAAW7C,QAAQ,SAAS8C,GACrC,GAAIA,IAAcN,EAAM,CACvBG,EAAKxO,kBAAoByO,EAAUC,WAAWE,QAAQD,EACvD,CACD,EACD,EACD,CAEAtR,KAAKwR,kBAAkB,CAAEC,UAAWzR,KAAK2C,kBAAmBqO,KAAMA,IAClE7T,EAAO0F,cAAc6O,QAAQ,YAAa,gBAAiB,CAAEX,OAAQ/Q,KAAMgR,KAAMA,EAAMS,UAAWzR,KAAK2C,oBAEvG3C,KAAK4C,aAAeoO,EAEpB,IAAInK,EAASmK,EAAKjN,YAClB,GAAI8C,EAAQ,CACX7G,KAAK4G,UAAUC,EAChB,CAKA,IAAIuG,EAAW4D,EAAKW,cACpB,GAAIvE,GAAY,KAAM,CACrB,GAAIH,MAAM2E,QAAQxE,IAAaA,EAASvJ,OAAS,EAAG,CACnD7D,KAAK6R,sBAAsBvT,EAAgB,CAC1CwT,IAAKvC,KAAKwC,MAAM3E,EAAS,GAAK,KAC9B4E,MAAOzC,KAAKwC,MAAM3E,EAAS,GAAK,KAChC6E,KAAM1C,KAAKwC,MAAM3E,EAAS,GAAK,KAC/B8E,MAAO9E,EAASvJ,OAAS,EAAIuJ,EAAS,GAAK,IAG7C,KAAO,CACNpN,KAAK6R,sBAAsBzE,EAC5B,CACD,CAEA,IAAIC,EAAc2D,EAAKmB,iBACvB,GAAI9E,GAAe,KAAM,CACxB,GAAIJ,MAAM2E,QAAQvE,IAAgBA,EAAYxJ,OAAS,EAAG,CACzD7D,KAAKoS,yBAAyB9T,EAAgB,CAC7CwT,IAAKvC,KAAKwC,MAAM1E,EAAY,GAAK,KACjC2E,MAAOzC,KAAKwC,MAAM1E,EAAY,GAAK,KACnC4E,KAAM1C,KAAKwC,MAAM1E,EAAY,GAAK,KAClC6E,MAAO7E,EAAYxJ,OAAS,EAAIwJ,EAAY,GAAK,IAGnD,KAAO,CACNrN,KAAKoS,yBAAyB/E,EAC/B,CACD,CAEAlQ,EAAO0F,cAAc6O,QAAQ,YAAa,oBAAqB,CAC9DX,OAAQ/Q,KAAK+H,0BACbiJ,KAAMA,EACNqB,wBAAyB,QAG1BrS,KAAKsS,WAELtS,KAAKuS,iBAAiB,CAAEd,UAAWzR,KAAK2C,oBAExC,OAAO3C,IACR,EAQApB,EAASiB,UAAU2S,iBAAmB,WACrC,GAAIxS,KAAK4C,aAAc,CACtB5C,KAAK+H,0BAA0B0K,+BAA+BzS,KAAK4C,cACnE5C,KAAKsS,UACN,CACA,OAAOtS,IACR,EAWApB,EAASiB,UAAUwF,OAAS,SAASqN,EAAMnT,EAASoT,EAAkBC,GACrE,GAAI5S,KAAKO,SAAW,GAAKP,KAAKQ,UAAY,GAAKR,KAAKY,QAAU,KAAM,CACnE,OAAOZ,IACR,CAEA,IAAI6S,EAAc,CACjBrD,IAAK,CAAEtH,EAAG4K,SAAU3K,EAAG2K,UACvBrD,IAAK,CAAEvH,GAAI4K,SAAU3K,GAAI2K,WAG1B,IAAIxK,EAAMtI,KAAK+H,2BAEdkF,MAAM2E,QAAQc,GAAQA,EAAO,CAACA,IAAOlE,QAAQ,SAASkE,GACtD,OAAQA,GACP,KAAK9U,EAAO0H,IACXtF,KAAKY,OAAO4D,iBAAiBuO,4BAA4BF,GAAc,IAAM,GAC7E,MACD,KAAKjV,EAAO+L,QACX,GAAIrB,EAAK,CACRtI,KAAKY,OAAO4D,iBAAiBuO,4BAA4BF,EAAavK,EAAI0E,MAC3E,CACA,MACD,KAAKpP,EAAOoV,SACX,GAAI1K,EAAK,CACRA,EAAI2K,mBAAmB,SAAS1T,GAC/BA,EAAQwT,4BAA4BF,GAAc,IAAM,EACzD,EACD,CACA,MACD,KAAKjV,EAAO8L,KACX,IAAKnK,EAAS,CACb,OAAOS,IACR,CACA,GAAIiN,MAAM2E,QAAQrS,GAAU,CAC3BA,EAAQiP,QAAQ,SAASjP,GACxBA,EAAQwT,4BAA4BF,GAAc,IAAM,EACzD,EACD,KAAO,CACNtT,EAAQwT,4BAA4BF,GAAc,IAAM,EACzD,CACA,MACD,KAAKjV,EAAOsV,QACXxU,EAAIyU,MAAMpV,IAAoBqV,QAAQ,uCACtC,OAAOpT,KACR,KAAKpC,EAAOyV,iBACX3U,EAAIyU,MAAMpV,IAAoBqV,QAAQ,gDACtC,OAAOpT,KACR,KAAKpC,EAAO0V,uBACX5U,EAAIyU,MAAMpV,IAAoBqV,QAAQ,sDACtC,OAAOpT,KACR,KAAKpC,EAAO2V,SACZ,KAAK3V,EAAO4V,UACZ,KAAK5V,EAAO6V,QACZ,KAAK7V,EAAO8V,WACZ,KAAK9V,EAAO+V,SACZ,KAAK/V,EAAOgW,UACX,OAAO5T,KACR,QACC,MAEH,EAAEM,KAAKN,OAEP,GAAI6S,EAAYrD,IAAItH,GAAK2K,EAAYpD,IAAIvH,GAAK2K,EAAYrD,IAAIrH,GAAK0K,EAAYpD,IAAItH,EAAG,CACrF0K,EAAc,CACbrD,IAAK,CAAEtH,EAAG,EAAGC,EAAG,GAChBsH,IAAK,CAAEvH,EAAG,EAAGC,EAAG,GAElB,CAEA,IAAI0L,EAAY,IAAI3V,EACpB2V,EAAUC,QAAQjB,EAAa7S,KAAKO,OAAQP,KAAKQ,QAASoS,GAC1D5S,KAAK+T,gBAAgBF,EAAWlB,GAEhC,OAAO3S,IACR,EAEApB,EAASiB,UAAUkU,gBAAkB,SAASlN,EAAQmN,GACrD,GAAIA,EAAgB,IAAMhU,KAAKG,mBAAoB,CAClDH,KAAK2P,MAAQ,CACZC,MAAO,CACNK,KAAMF,KAAKC,MACXI,QAASpQ,KAAKS,QAAQ2P,QACtBE,QAAStQ,KAAKS,QAAQ6P,QACtBlR,KAAMY,KAAKS,QAAQrB,MAEpByQ,IAAK,CACJO,QAASvJ,EAAOuJ,QAChBE,QAASzJ,EAAOyJ,QAChBlR,KAAMyH,EAAOzH,MAEd8Q,SAAU8D,EAAgB,KAG3BhU,KAAKiU,mBACLjU,KAAKG,mBAAqBsQ,OAAOC,sBAAsB1Q,KAAKI,kBAC7D,KAAO,CACN,GAAIJ,KAAKwQ,gBAAiB,CACzBxQ,KAAKwQ,gBAAgBrF,IAAItE,EAAOuJ,QAAUpQ,KAAKS,QAAQ2P,QAASvJ,EAAOyJ,QAAUtQ,KAAKS,QAAQ6P,SAC9FtQ,KAAKwQ,gBAAgBpR,KAAKyH,EAAOzH,KAAOY,KAAKS,QAAQrB,KAAMyH,EAAOuJ,QAASvJ,EAAOyJ,QACnF,CAEAtQ,KAAKS,QAAQrB,KAAOyH,EAAOzH,KAC3BY,KAAKS,QAAQ2P,QAAUvJ,EAAOuJ,QAC9BpQ,KAAKS,QAAQ6P,QAAUzJ,EAAOyJ,QAC9BtQ,KAAKuF,iBAELvF,KAAK+F,qBAEL/F,KAAKwF,kBAAkB,CAAEC,QAASzF,KAAK0F,eACxC,CACD,EAEA9G,EAASiB,UAAUoL,aAAe,SAAS/C,EAAGC,GAC7CnI,KAAKU,WAAawH,EAAIlI,KAAKS,QAAQ2P,SAAWpQ,KAAKS,QAAQrB,KAC3DY,KAAKW,WAAawH,EAAInI,KAAKS,QAAQ6P,SAAWtQ,KAAKS,QAAQrB,IAC5D,EAEAR,EAASiB,UAAUwL,WAAa,WAC/BrL,KAAKU,UAAY,EACjBV,KAAKW,UAAY,EAEjBX,KAAK2Q,gBACN,EAEA/R,EAASiB,UAAUkG,mBAAqB,WACvC,GAAI/F,KAAK6E,aAAe,OAAS7E,KAAKoB,OAAOM,gBAAkB1B,KAAKoB,OAAOI,UAAW,CACrF,MACD,CAGAxB,KAAKoB,OAAOI,UAAUU,MAAQlC,KAAKO,OAAS2T,iBAC5ClU,KAAKoB,OAAOI,UAAUW,OAASnC,KAAKQ,QAAU0T,iBAC9ClU,KAAKoB,OAAOI,UAAUoE,MAAM1D,MAAQlC,KAAKO,OAAS,KAClDP,KAAKoB,OAAOI,UAAUoE,MAAMzD,OAASnC,KAAKQ,QAAU,KAGpDR,KAAKoB,OAAOI,UAAUiE,QAAUzF,KAAK0F,cAErC,GAAI1I,IAAIC,GAAGkX,OAAOC,QAAQC,QAAS,CAElCrU,KAAK6E,YAAY4H,aAAa,QAASzM,KAAKoB,OAAOI,UAAUU,MAAQ,MACrElC,KAAK6E,YAAY4H,aAAa,SAAUzM,KAAKoB,OAAOI,UAAUW,OAAS,KACxE,CAGA,IAAImS,GAAa,IAAIC,eAAgBC,kBAAkBxU,KAAK6E,aAC5D,IAAI4P,EAAO,qCAAuCC,mBAAmBJ,GAErE,GAAItX,IAAIC,GAAGkX,OAAOC,QAAQC,QAAS,CAElCrU,KAAK6E,YAAY4H,aAAa,QAAS,QACvCzM,KAAK6E,YAAY4H,aAAa,SAAU,OACzC,CAEAzM,KAAKoB,OAAOG,YAAYW,MAAQlC,KAAKoB,OAAOI,UAAUU,MACtDlC,KAAKoB,OAAOG,YAAYY,OAASnC,KAAKoB,OAAOI,UAAUW,OACvDnC,KAAKoB,OAAOG,YAAYc,IAAMoS,CAC/B,EAEA7V,EAASiB,UAAUoU,iBAAmB,SAAStS,GAC9C,GAAI3B,KAAKoB,OAAOQ,MAAO,CAEtB+S,aAAa3U,KAAKoB,OAAOQ,OACzB5B,KAAKoB,OAAOQ,MAAQ,IACrB,CAEA,GAAI5B,KAAKoB,OAAOK,aAAezB,KAAKoB,OAAOM,eAAiB1B,KAAK6E,aAAe,KAAM,CACrF,MACD,CAEA7E,KAAKoB,OAAOK,WAAa,KACzBzB,KAAKoB,OAAOO,SAAWA,EAEvB3B,KAAK6E,YAAYe,MAAMgP,QAAU,OACjC5U,KAAKoB,OAAOI,UAAUoE,MAAMgP,QAAU,OACvC,EAEAhW,EAASiB,UAAU8Q,eAAiB,WACnC,IAAK3Q,KAAKoB,OAAOK,WAAY,CAC5B,MACD,CAEA,IAAIoT,EAAkB,WACrB7U,KAAKoB,OAAOI,UAAUoE,MAAMgP,QAAU,OACtC5U,KAAK6E,YAAYe,MAAMgP,QAAU,GACjC5U,KAAKoB,OAAOK,WAAa,MACzBzB,KAAK+F,oBACN,EAAEzF,KAAKN,MAEP,GAAIA,KAAKoB,OAAOO,SAAU,CACzB3B,KAAKoB,OAAOQ,MAAQkT,WAAW,WAC9B9U,KAAKoB,OAAOQ,MAAQ,KACpBiT,GACD,EAAEvU,KAAKN,MAAO,IACf,KAAO,CACN6U,GACD,CACD,EAEAjW,EAASiB,UAAUsL,IAAM,SAAS4J,EAAIC,GACrC,IAAKhV,KAAKwJ,kBAAmB,CAC5BxJ,KAAKiU,mBAELjU,KAAKS,QAAQ2P,SAAW2E,EACxB/U,KAAKS,QAAQ6P,SAAW0E,EACxBhV,KAAKuF,iBAEL,GAAIvF,KAAKwQ,gBAAiB,CACzBxQ,KAAKwQ,gBAAgBrF,IAAI4J,EAAIC,EAC9B,CAEAhV,KAAKwF,kBAAkB,CAAEC,QAASzF,KAAK0F,eACxC,CACD,EAEA9G,EAASiB,UAAUuL,OAAS,SAAS2J,EAAIC,GACxChV,KAAKmL,IAAI4J,EAAIC,EACd,EAEApW,EAASiB,UAAUT,KAAO,SAAS6V,GAClC,IAAKjV,KAAKwJ,kBAAmB,CAC5BxJ,KAAKiU,iBAAiB,MAEtB,IAAI1D,EAAUvQ,KAAKS,QAAQrB,KAC3BY,KAAKS,QAAQrB,KAAOmQ,KAAKE,IAAIzP,KAAKS,QAAQrB,KAAO6V,EAAG/W,EAAmBgX,WACvElV,KAAKS,QAAQ2P,SAAWpQ,KAAKU,WAAa6P,EAAUvQ,KAAKS,QAAQrB,MACjEY,KAAKS,QAAQ6P,SAAWtQ,KAAKW,WAAa4P,EAAUvQ,KAAKS,QAAQrB,MAEjE,GAAIY,KAAKwQ,gBAAiB,CACzBxQ,KAAKwQ,gBAAgBpR,KAAKY,KAAKS,QAAQrB,KAAOmR,EAC/C,CAEAvQ,KAAKuF,iBAELvF,KAAKwF,kBAAkB,CAAEC,QAASzF,KAAK0F,eACxC,CACD,EAEA9G,EAASiB,UAAUsV,MAAQ,SAASjN,EAAGC,GACtC,IAAIG,EAAMtI,KAAK+H,0BACf,IAAKO,EAAK,CACT,MACD,CAEA,IAAI8M,EAAOpV,KAAK6O,4BAA8B,KAAO7O,KAAKiI,QAAQC,EAAGC,GAErE,GAAInI,KAAKqV,iBAAmBrV,KAAKqV,kBAAoBD,EAAM,CAC1DpV,KAAKsV,iBAAiB,CAAE/V,QAASS,KAAKqV,kBACtC,IAAKrV,KAAKoO,qBAAsB,CAC/BpO,KAAKqV,gBAAgBzG,gBAAgBtG,EAAI0E,MAAO,KACjD,CACAhN,KAAKqV,gBAAkB,IACxB,CAEA,GAAID,GAAQA,EAAKpO,0BAA4BlJ,EAAgByX,QAAS,CACrEvV,KAAKqV,gBAAkBD,EACvB,IAAKpV,KAAKoO,qBAAsB,CAC/BgH,EAAKxG,gBAAgBtG,EAAI0E,MAAOhN,KAAKwV,sBACtC,CACAxV,KAAKyV,iBAAiB,CAAElW,QAAS6V,GAClC,CACD,EAEAxW,EAASiB,UAAU6F,YAAc,WAChC,OAAO1F,KAAKS,QAAQiF,aACrB,EAEA9G,EAASiB,UAAU6V,SAAW,WAC7B,IAAIjQ,EAAUzF,KAAK0F,cACnB,IAAI3D,EAAM/B,KAAKoB,OAAOI,UAAUQ,WAAW,MAC3CD,EAAIE,UAAU,EAAG,EAAGjC,KAAKoB,OAAOI,UAAUU,MAAOlC,KAAKoB,OAAOI,UAAUW,QACvE,GAAInC,KAAKoB,OAAOI,UAAUiE,QAAS,CAClC,IAAIkQ,EAAS3V,KAAKS,QAAQmV,eAAe5V,KAAKoB,OAAOI,UAAUiE,QAAQ,GAAIzF,KAAKoB,OAAOI,UAAUiE,QAAQ,IACzG,IAAIoQ,EAAS7V,KAAKS,QAAQmV,eAAenQ,EAAQ,GAAIA,EAAQ,IAC7D1D,EAAI+T,WAAWH,EAAOzN,EAAI2N,EAAO3N,GAAKgM,kBAAmByB,EAAOxN,EAAI0N,EAAO1N,GAAK+L,kBAEhF,IAAI6B,EAAQ/V,KAAKoB,OAAOI,UAAUiE,QAAQ,GAAKA,EAAQ,GACvD1D,EAAIgU,MAAMA,EAAOA,EAClB,CACAhU,EAAIK,UAAUpC,KAAKoB,OAAOC,YAAa,EAAG,GAC1CrB,KAAKoB,OAAOI,UAAUiE,QAAUA,CACjC,EAEA7G,EAASiB,UAAU0F,eAAiB,WACnC,GAAIvF,KAAK6E,aAAe,KAAM,CAC7B,OAAO,KACR,CAEA,GAAI7E,KAAKoB,OAAOK,WAAY,CAC3BgP,OAAOC,sBAAsB1Q,KAAK0V,SAASpV,KAAKN,MACjD,CAEA,GAAIA,KAAKC,qBAAuB,KAAM,CACrCD,KAAKC,oBAAoB6D,OAAO9D,KAAMA,KAAK+D,YAC5C,CAEA/D,KAAK6E,YAAY4H,aAAa,UAAWzM,KAAK0F,cAAcsQ,KAAK,MACjE,OAAO,IACR,EAqBApX,EAASiB,UAAUoW,YAAc,SAASC,GACzC,IAAIC,EAAW,CAAC,EAEhB,GAAID,GAAS,KAAM,CAClBA,EAAQ,CAAC,CACV,CAEA,GAAIA,EAAMrP,QAAU,KAAM,CACzBqP,EAAMrP,OAAS,IAChB,CAEA,GAAIqP,EAAMrP,OAAQ,CACjBsP,EAAStP,OAAS,CAAEpB,QAASzF,KAAK0F,cACnC,CAEA,GAAIwQ,EAAME,YAAcpW,KAAKwH,kBAAmB,CAC/C,IAAI6O,EAAiBH,EAAME,WAAWE,MAAQ,KAAO3Y,EAAe4Y,SAAWL,EAAME,WAAWE,KAChGH,EAASC,WAAa,CACrBE,KAAMD,GAEP,GAAIA,IAAmB1Y,EAAe4Y,SAAU,CAC/C,IAAIC,EAAgBxW,KAAKwH,kBAAkBiP,wBAC3CN,EAASC,WAAWM,QAAUF,EAAcE,QAC5CP,EAASC,WAAWO,OAASH,EAAcG,MAC5C,MAAO,GAAI3W,KAAKwH,kBAAkBoP,kCAAmC,CACpET,EAASC,WAAWS,QAAU7W,KAAKwH,kBAAkBsP,sBACtD,KAAO,CACNpY,EAAIqY,QAAQhZ,IAAoBqV,QAAQpV,EAASgZ,MAAMC,SAAUjZ,EAASgZ,MAAME,KAAM,6BACvF,CACD,CAEA,IAAI5O,EAAMtI,KAAK+H,0BACf,GAAImO,EAAMrJ,WAAavE,EAAK,CAC3B6N,EAAStJ,UAAYvE,EAAI6O,uBAC1B,CAEA,OAAOhB,CACR,EAwBAvX,EAASiB,UAAUuX,YAAc,SAASjB,EAAUnC,GACnD,IAAInN,EAASsP,EAAStP,OACtB,GAAIA,GAAUA,EAAOpB,QAAS,CAC7B,IAAIoO,EAAY,IAAI3V,EACpB2V,EAAUwD,YAAYxQ,EAAOpB,QAASzF,KAAKO,OAAQP,KAAKQ,SACxDR,KAAK+T,gBAAgBF,EAAWG,EACjC,CAEA,IAAIsD,EAAmB,IAAInW,IAC3B,GAAIgV,EAASC,YAAcD,EAAStJ,UAAW,CAC9C,IAAIoB,EAAgBjO,KAAKwH,kBAAkB+P,mBAC1CC,EAAcvJ,EAAc3H,kBAE7BkR,EAAYhJ,QAAQ,SAASjP,GAE5B,IAAIkY,EAAYxJ,EAAcyJ,gBAAgBnY,GAC9C,IAAIoY,EAAOF,EAAUG,UAErB3J,EAAc4J,iBAAiBJ,GAC/B,GAAIE,EAAM,CAETL,EAAiBQ,IAAIH,EAAMpY,EAC5B,CACD,EACD,CAGA,GAAI4W,EAASC,WAAY,CACxB,OAAQD,EAASC,WAAWE,MAC3B,KAAK3Y,EAAe4Y,SACnB,IAAIwB,EAAe5B,EAASC,WAAWM,QACtCsB,EAAc7B,EAASC,WAAWO,OAEnCoB,EAAavJ,QAAQ,SAASmJ,GAC7B3X,KAAKwH,kBAAkByQ,mBAAmBX,EAAiBY,IAAIP,GAAO,KAAM,MAC7E,EAAG3X,MAEHgY,EAAYxJ,QAAQ,SAASmJ,GAC5B3X,KAAKwH,kBAAkByQ,mBAAmBX,EAAiBY,IAAIP,GAAO,MAAO,MAC9E,EAAG3X,MACH,MAED,KAAKrC,EAAewa,YACnBnY,KAAKwH,kBAAkB4Q,kBACvBjC,EAASC,WAAWS,QAAQrI,QAAQ,SAASmJ,GAC5C,IAAIpY,EAAU+X,EAAiBY,IAAIP,GAEnC,GAAIpY,EAAS,CACZS,KAAKwH,kBAAkByQ,mBAAmB1Y,GAAUS,KAAKwH,kBAAkB6Q,mBAAmB9Y,GAAU,MACzG,CACD,EAAGS,MACH,MAED,QACCtB,EAAIyU,MAAMpV,IAAoBqV,QAAQpV,EAASsa,MAAMrB,SAAUjZ,EAASsa,MAAMpB,KAAM,8BACpF,MAEH,CAEA,IAAI5O,EAAMtI,KAAK+H,0BACf,IAAI8E,EAAYsJ,EAAStJ,UACzB,GAAIA,GAAavE,EAAK,CACrB,IAAIiQ,EAAOjQ,EAAI6O,wBAEf,GAAIlK,MAAM2E,QAAQ/E,EAAU2L,UAAW,CACtC,IAAIA,EAAW,GACf,IAAIC,EAAa,GACjB5L,EAAU2L,SAAShK,QAAQ,SAASmJ,GACnC,IAAIpY,EAAU+X,EAAiBY,IAAIP,GACnC,GAAIpY,EAAS,CACZiZ,EAASE,KAAKnZ,EACf,CACD,GACAgZ,EAAKC,SAAShK,QAAQ,SAASmJ,GAC9B,IAAIpY,EAAU+X,EAAiBY,IAAIP,GACnC,GAAIpY,GAAWsN,EAAU2L,SAASjH,QAAQoG,GAAQ,EAAG,CACpDc,EAAWC,KAAKnZ,EACjB,CACD,GACA+I,EAAIqQ,mBAAmBH,EAAUC,EAAY,MAAO,MACrD,CACD,CACA,OAAOzY,IACR,EASApB,EAASiB,UAAU+Y,aAAe,SAASC,GAC1C,GAAI7Y,gBAAgBpB,EAAU,CAC7Bia,GACD,CACA,OAAO7Y,IACR,EAaApB,EAASiB,UAAUiZ,cAAgB,WAClC,IAAIC,EAAqB/Y,KAAKqE,YAAYoE,wBAC1C,IAAIuQ,EAAgBD,EAAmB7W,MACvC,IAAI+W,EAAiBF,EAAmB5W,OACxC,IAAI+W,EAEJA,EAAoB3J,KAAKC,IAAIwJ,EAAeC,GAE5C,MAAO,CACNE,MAAOH,EAAgBE,GAAqB,GAC5CE,KAAMH,EAAiBC,GAAqB,GAC5CG,WAAYH,EAEd,EAEAta,EAASiB,UAAUyZ,qBAAuB,WACzCtZ,KAAKoH,YACN,EAGAxI,EAASiB,UAAU0Z,sBAAwB,WAC1C,OAAO,KACR,EAEA3a,EAASiB,UAAU2Z,mBAAqB,SAASC,GAChDzZ,KAAK0Z,YAAY,kBAAmBD,EAAO,MAC3C,IAAInR,EAAMtI,KAAK+H,0BACf,GAAIO,EAAK,CACR,IAAI4F,EAAU5F,EAAI0E,MAClB,IAAI2M,EAAQrR,EAAIiP,mBAAmBhJ,oBACnC,IAAIqL,EAAiB5Z,KAAKqV,gBAC1B,IAAIlH,EAAQnO,KAAKqO,8BACjBsL,EAAMnL,QAAQ,SAASnF,GACtB,GAAIoQ,EAAO,CACVpQ,EAAKuF,gBAAgBV,EAASC,EAC/B,MAAO,GAAI9E,IAASuQ,EAAgB,CACnCvQ,EAAKuF,gBAAgBV,EAASlO,KAAKwV,sBACpC,KAAO,CACNnM,EAAKuF,gBAAgBV,EAAS,KAC/B,CACD,EAAGlO,MAEH,GAAI2Z,EAAM9V,OAAS,EAAG,CACrB7D,KAAKoH,YACN,CACD,CACD,EAEAxI,EAASiB,UAAUga,0BAA4B,SAASJ,GACvDzZ,KAAK0Z,YAAY,yBAA0BD,EAAO,MAClD,GAAIA,EAAO,CACVzZ,KAAKmV,MAAM,EAAG,EACf,CAEA,IAAI7M,EAAMtI,KAAK+H,0BACf,GAAIO,EAAK,CACR,IAAIqR,EAAQrR,EAAIiP,mBAAmBhJ,oBACnCoL,EAAMnL,QAAQ,SAASnF,GACtB,GAAIoQ,EAAO,CACVpQ,EAAKyF,SAAS,mCACf,KAAO,CACNzF,EAAKyQ,YAAY,mCAClB,CACD,EACD,CACD,EAEAlb,EAASiB,UAAUka,oBAAsB,SAASN,GACjDzZ,KAAK0Z,YAAY,mBAAoBD,EAAO,MAC5CzZ,KAAK0Z,YAAY,eAAgBpb,EAAgBG,EAAYgb,IAAS,MACtEzZ,KAAKoH,aACL,OAAOpH,IACR,EAEApB,EAASiB,UAAU+O,gBAAkB,SAAS6K,GAC7CzZ,KAAK0Z,YAAY,eAAgBD,EAAO,MACxCzZ,KAAK0Z,YAAY,mBAAoBlb,EAAYD,EAAgBkb,IAAS,MAC1EzZ,KAAKoH,aACL,OAAOpH,IACR,EASApB,EAASiB,UAAUma,aAAe,SAASC,EAAUC,EAAM/L,GAC1D,GAAI8L,GAAY,KAAM,CACrB,OAAOja,IACR,CAEA,IAAKiN,MAAM2E,QAAQqI,GAAW,CAC7BA,EAAW,CAACA,EACb,CAGA,IAAIE,EAAeD,EAAQ/L,GAASnO,KAAKwV,sBAAyB,KAClE,IAAItH,EAAUlO,KAAK+H,0BAA0BiF,MAC7CiN,EAASzL,QAAQ,SAASnF,GACzBA,EAAK+Q,sBAAsBlM,EAASiM,EACrC,GAEAna,KAAKoH,aAEL,OAAOpH,IACR,EAEApB,EAASiB,UAAUwa,gBAAkB,SAASC,GAC7C,GAAIA,EAAQC,gBAAkBD,EAAQE,UAAW,CAChD,OAAO,IACR,CAEA,IAAI5R,EACJ,GAAI0R,EAAQG,WAAaH,EAAQG,UAAUC,OAAS/L,UAAW,CAC9D/F,EAAK,IAAM0R,EAAQG,UAAUC,IAC9B,MAAO,GAAIJ,EAAQK,OAAShM,WAAa2L,EAAQK,KAAK,KAAO,EAAG,CAC/D/R,EAAK,IACN,KAAO,CACN,OAAO,IACR,CAEA,IAAK5I,KAAKkB,QAAQ0Z,IAAIhS,GAAK,CAC1B,IAAIiS,EAAa,GACjBP,EAAQQ,wBAAwB,SAASC,EAAMtB,GAASoB,EAAWnC,KAAKqC,EAAMtB,EAAQ,GACtFzZ,KAAKkB,QAAQ4W,IAAIlP,EAAIiS,EACtB,CAEA,OAAOjS,CACR,EAEAhK,EAASiB,UAAUmb,gBAAkB,SAASV,GAC7C,GAAIA,EAAQC,gBAAkBD,EAAQE,UAAW,CAChD,OAAO,IACR,CAEA,IAAI5R,EACJ,GAAI0R,EAAQtZ,WAAasZ,EAAQtZ,UAAU0Z,OAAS/L,UAAW,CAC9D/F,EAAK,IAAM0R,EAAQtZ,UAAU0Z,IAC9B,MAAO,GAAIJ,EAAQW,WAAY,CAC9BrS,EAAK,IAAM0R,EAAQW,UACpB,KAAO,CACN,OAAO,IACR,CAEA,IAAKjb,KAAKkB,QAAQ0Z,IAAIhS,GAAK,CAC1B,IAAIiS,EAAa,GACjBP,EAAQY,wBAAwB,SAASH,EAAMtB,GAASoB,EAAWnC,KAAKqC,EAAMtB,EAAQ,GACtFzZ,KAAKkB,QAAQ4W,IAAIlP,EAAIiS,EACtB,CAEA,OAAOjS,CACR,EAEAhK,EAASiB,UAAUsb,sBAAwB,WAC1C,OAAOnb,KAAKC,mBACb,EAEArB,EAASiB,UAAU+L,eAAiB,WACnC,IAAIvF,EAAKrG,KAAKY,OAAOqF,0BACrB,IAAI0T,EAAQtT,EAAGC,kBACf,IAAI8U,EAAQ1c,EAAI2c,WAChB3c,EAAI4c,SAAS5c,EAAI6c,MAAMC,MACvB9c,EAAI6Z,KAAK,0CACT7Z,EAAI6Z,KAAK,uBAAyBoB,EAAM9V,QACxC,IAAI4X,EAAQ,EACZ,IAAIC,EAAY,EAChB,IAAIC,EAAY,EAChB,IAAIC,EAAiB,EACrB,IAAIC,EAAInX,SAASoX,qBAAqB,OAAO,GAC7C,IAAI3M,EAAI,SAAS4M,GAChBN,GAASM,EAAE7U,SAASrD,OACpB,IAAImY,EAASD,EACb,IAAIE,EAAI,EACR,MAAOD,GAAUH,EAAG,CACnBG,EAASA,EAAOlX,WAChBmX,GACD,CACA,GAAIP,EAAYO,EAAG,CAClBP,EAAYO,CACb,CACA,GAAIF,EAAE7U,SAASrD,SAAW,EAAG,CAC5B8X,IACA,GAAII,EAAEG,UAAY,IAAK,CACtBN,GACD,CACD,CACA,IAAK,IAAI7P,EAAI,EAAGA,EAAIgQ,EAAE7U,SAASrD,OAAQkI,IAAK,CAC3CoD,EAAE4M,EAAE7U,SAAS6E,GACd,CACD,EACAoD,EAAE0M,GACFnd,EAAI6Z,KAAK,mBACT7Z,EAAI6Z,KAAK,mBAAqBkD,GAC9B/c,EAAI6Z,KAAK,mBAAqBmD,GAC9Bhd,EAAI6Z,KAAK,mBAAqBoD,GAC9Bjd,EAAI6Z,KAAK,mBAAqBqD,GAC9Bld,EAAI6Z,KAAK,mBAAqB7T,SAASoX,qBAAqB,KAAKjY,QACjEnF,EAAI6Z,KAAK,mBAAqB7T,SAASoX,qBAAqB,QAAQjY,QACpEnF,EAAI6Z,KAAK,oBAAsB7T,SAASoX,qBAAqB,YAAYjY,QACzEnF,EAAI6Z,KAAK,mBAAqB7T,SAASoX,qBAAqB,WAAWjY,QACvEnF,EAAI6Z,KAAK,mBAAqB7T,SAASoX,qBAAqB,QAAQjY,QACpEnF,EAAI6Z,KAAK,mBAAqB7T,SAASoX,qBAAqB,WAAWjY,QACvEnF,EAAI6Z,KAAK,mBAAqB7T,SAASoX,qBAAqB,QAAQjY,QACpEnF,EAAI6Z,KAAK,mBAAqB7T,SAASoX,qBAAqB,QAAQjY,QACpEnF,EAAI6Z,KAAK,mBAAqB7T,SAASoX,qBAAqB,SAASjY,QACrEnF,EAAI6Z,KAAK,0CACT7Z,EAAI4c,SAASF,EACd,EAEAxc,EAASiB,UAAUsc,gBAAkB,SAASjU,EAAGC,EAAG8M,EAAGpO,GACtD,IAAIuV,EAAYvV,EAAO+O,eAAe1N,EAAGC,EAAG,GAC5CiU,EAAUnH,EAAI,EACd,OAAOmH,CACR,EAEA,OAAOxd,CACR"}