/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BaseFilter","sap/base/Log","sap/ui/core/library","sap/m/DynamicDateRange","sap/m/DynamicDateUtil","sap/ui/integration/util/BindingResolver"],function(t,e,a,r,n,i){"use strict";var o=a.ValueState;var s=new Date(-864e13);var u=new Date("1753-01-01");var l=new Date(864e13);var g=new Date("9999-12-31");var p={DATE:"date",TODAY:"today",YESTERDAY:"yesterday",TOMORROW:"tomorrow",DATERANGE:"dateRange",FROM:"from",TO:"to",YEARTODATE:"yearToDate",LASTDAYS:"lastDays",LASTWEEKS:"lastWeeks",LASTMONTHS:"lastMonths",LASTQUARTERS:"lastQuarters",LASTYEARS:"lastYears",NEXTDAYS:"nextDays",NEXTWEEKS:"nextWeeks",NEXTMONTHS:"nextMonths",NEXTQUARTERS:"nextQuarters",NEXTYEARS:"nextYears",TODAYFROMTO:"todayFromTo",THISWEEK:"thisWeek",LASTWEEK:"lastWeek",NEXTWEEK:"nextWeek",SPECIFICMONTH:"specificMonth",THISMONTH:"thisMonth",LASTMONTH:"lastMonth",NEXTMONTH:"nextMonth",THISQUARTER:"thisQuarter",LASTQUARTER:"lastQuarter",NEXTQUARTER:"nextQuarter",QUARTER1:"quarter1",QUARTER2:"quarter2",QUARTER3:"quarter3",QUARTER4:"quarter4",THISYEAR:"thisYear",LASTYEAR:"lastYear",NEXTYEAR:"nextYear"};function T(t){return p[t]}var S=t.extend("sap.ui.integration.cards.filters.DateRangeFilter",{metadata:{library:"sap.ui.integration",aggregations:{_ddr:{type:"sap.m.DynamicDateRange",multiple:false,visibility:"hidden"}}},renderer:{apiVersion:2}});S.prototype.getField=function(){return this._getDdr()};S.prototype.setValueFromOutside=function(t){e.error("Setting a filter value programatically on a DateRangeFilter is currently unsupported.",null,"sap.ui.integration.widgets.Card")};S.prototype.getValueForModel=function(){var t=this._getDdr().getValue();var e;var a;var r;if(t){e={option:T(t.operator),values:t.values.slice()};var i=n.toDates(t),o=i[0].getJSDate?i[0].getJSDate():i[0],p=t.operator==="TO"||t.operator==="FROM"?0:1,S=i[p]&&i[p].getJSDate?i[p].getJSDate():i[p];a={start:o.toISOString(),end:S.toISOString()};r={start:o.toISOString(),end:S.toISOString()};if(t.operator==="TO"){a.start=s.toISOString();r.start=u.toISOString()}if(t.operator==="FROM"){a.end=l.toISOString();r.end=g.toISOString()}}return{value:e,range:a,rangeOData:r}};S.prototype._getDdr=function(){var t=this.getAggregation("_ddr");if(!t){t=this._createDdr();this.setAggregation("_ddr",t)}return t};S.prototype._createDdr=function(){var t=Object.assign({},this.getConfig());var e;if(t.value){t.value=i.resolveValue(t.value,this.getCardInstance());var a=t.value.option.toUpperCase();var s=n.getOption(a).getValueTypes();e={operator:a,values:t.value.values.map(function(t,e){if(s[e]==="date"){return new Date(t)}return t})}}t.options=t.options||this._getDefaultOptions();t.options=t.options.map(function(t){return t.toUpperCase()});var u=new r({value:e,options:t.options}).addStyleClass("sapFCardDateRangeField");u.attachChange(function(t){if(t.getParameter("valid")){u.setValueState(o.None);this._syncValue()}else{u.setValueState(o.Error)}}.bind(this));var l=this.createLabel(t);if(l){u.addAriaLabelledBy(l)}return u};S.prototype._getDefaultOptions=function(){return["date","today","dateRange","from","to","lastDays","nextDays","lastWeeks","nextWeeks"]};S.prototype.getOptions=function(){return p};return S});
//# sourceMappingURL=DateRangeFilter.js.map