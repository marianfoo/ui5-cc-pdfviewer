{"version":3,"file":"CsrfTokenHandler.js","names":["sap","ui","define","BaseObject","isPlainObject","merge","JSONModel","rPattern","TOKEN_DEFAULT_HEADER","CsrfTokenHandler","extend","metadata","library","constructor","mSettings","call","this","_oHost","host","_oConfiguration","configuration","_mTokens","Map","prototype","resolveToken","oDataConfig","oCsrfTokenContext","oCsrfTokenConfig","_findCsrfPlaceholder","Promise","resolve","_getCsrfConfig","tokenName","getCsrfToken","then","sTokenValue","_resolveTokenByUrl","_replaceCsrfPlaceholder","bind","catch","sError","reject","sCsrfTokenName","sCsrfUrl","data","request","url","has","get","_requestToken","setDataProviderFactory","oDataProviderFactory","_oDataProviderFactory","setHost","oHost","isExpiredToken","jqXHR","sXCSRFHeader","getResponseHeader","toLowerCase","status","pTokenValuePromise","oCsrfTokenDataProvider","create","getData","oData","oModel","path","getProperty","destroy","getLastJQXHR","_registerToken","resetTokenByRequest","_deleteRegisteredToken","sPlaceholder","object","key","replace","oConfig","vValue","sKey","sTokenName","_getCsrfTokenName","sString","aMatches","match","mCSRFTokenConfig","set","csrfTokenFetched","delete","csrfTokenExpired"],"sources":["CsrfTokenHandler-dbg.js"],"mappings":"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"}