/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/ui/integration/util/BindingHelper","sap/ui/integration/util/BindingResolver","sap/ui/integration/util/Utils","sap/m/IllustratedMessageType","sap/m/IllustratedMessageSize"],function(e,t,r,a,n,i){"use strict";var s={};s.resolveCard=function(e){e.startManifestProcessing();return s._awaitReadyEvent(e).then(s._handleCardReady).catch(function(t){return s._handleCardSevereError(e,t)})};s._awaitReadyEvent=function(e){if(e.isReady()){return Promise.resolve(e)}return new Promise(function(t,r){e.attachEvent("_ready",function(r){t(e)})})};s._handleCardReady=function(e){var n=e.getManifestEntry("/"),i=[],s=e.getSevereErrors(),o=e.getContentMessage();if(s.length){return Promise.reject(s.join(" "))}try{if(e.getAggregation("_filterBar")){i=e.getAggregation("_filterBar")._getFilters().map(function(e){return["/sap.card/configuration/filters/"+e.getKey(),e]})}i.concat([["/sap.card/content",e.getCardContent()],["/sap.card/header",e.getCardHeader()],["/sap.card/footer",e.getCardFooter()],["/sap.card",e]]).filter(function(t){return!!e.getManifestEntry(t[0])}).forEach(function(i){var s=i[0];var g=i[1];var u;var d;if(o&&s==="/sap.card/content"){u={message:o}}else if(g.getStaticConfiguration){u=g.getStaticConfiguration()}else{u=a.getNestedPropertyValue(n,s)}if(u.data){d=u.data.path;delete u.data}u=t.createBindingInfos(u,e.getBindingNamespaces());u=r.resolveValue(u,g,d);a.setNestedPropertyValue(n,s,u)});return Promise.resolve(JSON.parse(JSON.stringify(n)))}catch(e){return Promise.reject(e)}};s._handleCardSevereError=function(t,r){var a=t.getManifestEntry("/"),s=e.getLibraryResourceBundle("sap.ui.integration");a["sap.card"]={content:{message:{type:"error",title:s.getText("CARD_ERROR_OCCURED"),description:r.toString(),illustrationType:n.SimpleError,illustrationSize:i.Spot}}};return JSON.parse(JSON.stringify(a))};return s});
//# sourceMappingURL=ManifestResolver.js.map