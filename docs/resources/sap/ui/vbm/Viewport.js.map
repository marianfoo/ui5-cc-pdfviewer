{"version":3,"file":"Viewport.js","names":["sap","ui","define","Control","ResizeHandler","THREE","OrbitControls","Utilities","ViewportRenderer","Log","library","thisModule","Viewport","extend","metadata","properties","width","type","defaultValue","height","cameraHistoryLength","cameraHistoryPos","events","cameraChange","parameters","historyPos","historyLength","renderer","EPS","FLY_TO_LENGTH","MAP_PLANE_SIZE","CAMERA_TARGET_LIMIT","basePrototype","getMetadata","getParent","getClass","prototype","init","call","this","_resizeListenerId","_renderLoopRequestId","_renderLoopFunction","_renderLoop","bind","_renderer","WebGLRenderer","antialias","setPixelRatio","window","devicePixelRatio","shadowMap","enabled","domElement","tabIndex","setAttribute","core","AccessibleRole","Img","id","getId","_scene","Scene","_root","Group","scale","set","rotateX","Math","degToRad","matrixAutoUpdate","updateMatrix","add","_mapPlane","Mesh","PlaneGeometry","MeshBasicMaterial","color","side","DoubleSide","name","layers","visible","background","Color","AmbientLight","light1","DirectionalLight","position","light2","light3","_light","_lightPos","Vector3","_camera","PerspectiveCamera","innerWidth","innerHeight","enable","lookAt","_cameraHome","undefined","_flyToRequestId","_resetTimerId","_cameraHistory","_cameraChangeEvent","_bbox","Box3","_cameraController","listenToKeyEvents","addEventListener","_cameraEnd","_cameraUpdate","update","getOrbitControl","exit","deregister","_stopRenderLoop","dispose","getRoot","getScene","getCamera","getCameraHistoryLength","length","setCameraHistoryLength","error","setCameraHistoryPos","pos","getCameraHistoryPos","setProperty","tag","_fireCameraChange","_flyTo","saveState","applyCameraHome","flyTo","_applyCamera","worldToScreen","point","element","getDomRef","rect","getBoundingClientRect","camera","matViewProj","Matrix4","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","sp","clone","applyMatrix4","x","floor","y","Vector2","onBeforeRendering","onAfterRendering","domRef","appendChild","register","_handleResize","size","clientWidth","clientHeight","_startRenderLoop","event","aspect","updateProjectionMatrix","setSize","requestAnimationFrame","cancelAnimationFrame","getWorldDirection","negate","copy","render","easeOutCubic","time","start","end","total","flyToAnimation","context","min","Date","now","when","target","tempTarget","from","to","z","distance","distanceFrom","distanceTo","angle","tempPos","dir","applyAxisAngle","axis","multiplyScalar","reset","zoom","dirTo","sub","dirFrom","lengthTo","lengthFrom","acos","clamp","dot","cross","normalize","state","current","distanceToSquared","_pushCameraChange","resetStateTag","clearTimeout","setTimeout","_updateCamera","_updateController","fireCameraChange","splice","push","_setCameraHome","_getCameraState","_intersectMapPlane","raycaster","out","intersectObjects","_box","_matrix","calcBBox","object","box","i","geometry","updateWorldMatrix","boundingBox","computeBoundingBox","isInstancedMesh","count","getMatrixAt","union","children","_resetBBox","makeEmpty","_getBBox","isEmpty","sphere","Sphere","getBoundingSphere","radius","updateMatrixWorld","center","matrixWorldInverse","near","far","dirty","abs","normal","plane","Plane","ray","Ray","intersectPlane","radToDeg","angleTo"],"sources":["Viewport-dbg.js"],"mappings":"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"}