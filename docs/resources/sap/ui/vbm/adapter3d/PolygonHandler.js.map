{"version":3,"file":"PolygonHandler.js","names":["sap","ui","define","BaseObject","Utilities","THREE","Log","thisModule","Vector3","Matrix4","propertyAdded","propertyRemoved","propertyChanged","updateProperty","getColor","rgbaToString","equalsRGBA","createMaterial","createLineMaterial","PolygonHandler","extend","constructor","root","call","this","_root","_hotInstance","_instances","Map","_meshes","_borders","MAX_TRIANGLES","MAX_LINES","prototype","destroy","forEach","key","array","mesh","_deleteObject3D","object3D","border","clear","update","dirty","_updateMeshes","_updateBorders","_updateHot","addInstance","instance","set","indices","vertices","normal","lines","matrix","color","colorHot","colorBorder","colorBorderHot","updateInstance","data","get","updateMesh","updateBorder","getInstanceMatrix","toVector3","OuterNormal","normalize","_getGeometry","_removeInstanceFromMesh","_removeInstanceFromBorder","_getBorderGeometry","_requestMeshUpdate","_requestBorderUpdate","error","removeInstance","delete","_last","updateHotInstance","isPolygon","hot","material","geometry","range","groups","length","instances","copy","rgb","opacity","transparent","needsUpdate","addGroup","start","index","count","positions","getAttribute","vertexCount","i","pos2d","pos","posarray","split","x","parseFloat","y","z","push","Vector2","faces","ShapeUtils","triangulateShape","BufferGeometry","setIndex","setAttribute","Float32BufferAttribute","edges","EdgesGeometry","dispose","empty","hotUpdate","hotData","j","base","normals","hitInfo","fill","_identity","applyMatrix4","computeBoundingBox","computeBoundingSphere","Mesh","matrixAutoUpdate","layers","add","_instanceHitTest","bind","triangleCount","has","splice","LineSegments","lineCount","meshes","borders","object","parent","remove","toArray","faceIndex"],"sources":["PolygonHandler-dbg.js"],"mappings":"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"}