{"version":3,"file":"sapmapmanager.js","names":["sap","ui","define","VBI","MapManager","mapmanager","vbiclass","m_nRequest","m_tileWidth","m_tileHeight","m_runningRequests","m_runningXhrRequests","m_limitRequests","m_requestQueue","m_renderQueue","m_renderRequestID","m_failedSendTimer","m_renderJunksize","_modifyReqCounters","image","factor","m_Headers","m_bTrace","Trace","onAbort","event","srcElement","src","CheckReqQueue","UnlinkImage","CheckTmpCanvas","m_Target","m_nLayersAbove","onFailedSend","object","m_bRequestError","setInterval","RetrySending","onError","imageRender","m_Next","m_FillStyle","m_Prev","complete","push","window","requestAnimationFrame","RenderTiles","onLoad","target","URL","webkitURL","revokeObjectURL","src2execute","bChainComplete","item","clearInterval","shift","targetCanvas","m_nLOD","m_nCurrentLOD","m_bInvalid","_createHttpRequest","e","unshift","nCount","Math","min","length","i","RenderTile","bRendered","m_CanvasRedirect","undefined","m_CanvasRedirRequest","currentScene","m_Scene","canvasWidth","getPixelWidth","canvasHeight","getPixelHeight","m_nAppliedRequest","max","context","getContext","nMaxX","canvas","nCol","m_nReqX","m_nCurrentX","m_nTilesX","m_nCol","m_nXOrigin","nRow","m_nReqY","m_nCurrentY","m_bOutdated","m_numCol","m_numRow","nWidth","m_nWidthCanvas","nHeight","m_nHeightCanvas","setPixelWidth","setPixelHeight","tilewidth","tileheight","m_nTilesY","left","top","picWidth","m_nXExpansion","picHeight","m_nYExpansion","imageTemp","tmpFillStyle","fillStyle","fillRect","globalAlpha","m_Opacity","drawImage","font","fillText","m_nCount","onTileLoaded","m_Ctx","moThumbnail","Copy2Thumbnail","imgRequest","nTilesAbove","m_nTilesBefSwitch","SwitchTmpCanvasToActive","RequestTiles","maplayerstack","x","y","nx","ny","leftOffset","topOffset","rightOffset","bottomOffset","lod","bclear","sc","abs","AnimZoomTarget","m_nMaxAnimLodDiff","nYMax","xyRatio","m_Proj","m_nXYRatio","nXMax","fTileSize","clearRect","width","height","maplayerarray","m_MapLayerArray","ni","nk","nYExpansion","nCurrentXExpansion","yCorr","m_bSingleBMP","nLayerArrayLen","k","imagePrev","nReqX","nReqY","s","maplayer","m_colBkgnd","GetMinLOD","GetMaxLOD","Image","m_nYOrigin","m_nRow","m_fOpacity","mapProv","GetMapProvider","url","m_bPosRequired","leftupper","rightlower","CombineUrlWPos","m_requestTileWidth","m_requestTileHeight","CombineUrl","onload","onerror","onabort","substring","toLowerCase","img","curPrev","curNext","GetPreviewImage","lon","lat","scene","callback","exactLod","floor","tileWidth","m_MapManager","tileHeight","lodDistance","tileSize","lonlat","MathLib","DegToRad","parseFloat","uxy","LonLatToUCS","mapLayerArray","m_Callback","m_Images","m_ImagesRemain","m_MapLayerStack","compose","this","document","createElement","background","clipPosX","clipPosY","clipWidth","clipHeight","offsetX","offsetY","stretchX","stretchY","tileImages","toDataURL","onImageLoad","m_Context","onImageAbort","m_Index","onImageError","layer","provider","leftUpper","rightLower","setAttribute","ex","preview","oXMLHttpRequest","sinon","xhr","XMLHttpRequest","m_Image","jQuery","log","error","statusText","onprogress","abort","status","contentType","getResponseHeader","split","createObjectURL","response","open","forEach","header","setRequestHeader","name","value","responseType","send"],"sources":["sapmapmanager-dbg.js"],"mappings":"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"}