/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/dt/plugin/DragDrop","sap/ui/dt/plugin/ElementMover","sap/ui/dt/ElementUtil"],function(e,t,r){"use strict";var o=e.extend("sap.ui.dt.plugin.ControlDragDrop",{metadata:{library:"sap.ui.dt",properties:{draggableTypes:{type:"string[]",defaultValue:["sap.ui.core.Element"]},elementMover:{type:"any"},insertAfterElement:{type:"boolean",defaultValue:false}},associations:{}}});var i="sapUiDtOverlayDropZone";o.prototype.init=function(){e.prototype.init.apply(this,arguments);this.setElementMover(new t)};o.prototype.setElementMover=function(e){var t=this.getElementMover();if(t!==e){if(t){t.destroy()}this.setProperty("elementMover",e)}};o.prototype.setDraggableTypes=function(e){this.getElementMover().setMovableTypes(e);return this.setProperty("draggableTypes",e)};o.prototype.registerElementOverlay=function(t){var r=t.getElement();this.getElementMover().checkMovable(t).then(function(o){if(this.getElementMover().isMovableType(r)&&o){t.setMovable(true)}if(this.oDraggedElement){this.getElementMover().activateTargetZonesFor(t,i)}e.prototype.registerElementOverlay.call(this,t)}.bind(this))};o.prototype.deregisterElementOverlay=function(t){e.prototype.deregisterElementOverlay.apply(this,arguments);t.setMovable(false);if(this.oDraggedElement){this.getElementMover().deactivateTargetZonesFor(t,i)}};o.prototype.getDraggedOverlay=function(){return this._oDraggedOverlay};o.prototype.onDragStart=function(e){this._oDraggedOverlay=e;this.getElementMover().setMovedOverlay(e);this.getElementMover().activateAllValidTargetZones(this.getDesignTime(),i)};o.prototype.onDragEnd=function(){delete this._oPreviousTarget;this.getElementMover().deactivateAllTargetZones(this.getDesignTime(),i);delete this._oDraggedOverlay;this.getElementMover().setMovedOverlay(null)};o.prototype.onDragEnter=function(e){var t=this.getDraggedOverlay();if(e.getElement()!==t.getElement()&&e!==this._oPreviousTarget){this.getElementMover().repositionOn(t,e)}this._oPreviousTarget=e};o.prototype.onAggregationDragEnter=function(e){var t=e.getAggregationName();var o=e.getElement();if(r.getAggregation(o,t).length===0){delete this._oPreviousTarget;var i=this.getDraggedOverlay();this.getElementMover().insertInto(i,e,this.getInsertAfterElement())}};return o});
//# sourceMappingURL=ControlDragDrop.js.map