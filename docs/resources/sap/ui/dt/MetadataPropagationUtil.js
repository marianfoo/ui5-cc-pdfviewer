/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/dt/Util","sap/base/util/merge","sap/base/util/isEmptyObject"],function(t,a,e){"use strict";var n={};n._getParentPropagationInfo=function(t){if(!t||!t["propagationInfos"]){return false}return Object.assign([],t["propagationInfos"])};n._getCurrentRelevantContainerPropagation=function(a,e){var n={};if(!a.propagateRelevantContainer){return n}else if(typeof a.propagateRelevantContainer==="function"){n.relevantContainerFunction=a.propagateRelevantContainer;n.relevantContainerElement=e}else if(typeof a.propagateRelevantContainer==="boolean"&&a.propagateRelevantContainer){n.relevantContainerFunction=function(){return true};n.relevantContainerElement=e}else{var r=t.wrapError("Wrong type: it should be either a function or a boolean value and it is:"+typeof a.propagateRelevantContainer);var o="sap.ui.dt.MetadataPropagationUtil#_getCurrentRelevantContainerPropagation";r.name="Error in "+o;r.message=t.printf("{0} / {1}",o,r.message);throw r}return n};n._getCurrentDesigntimePropagation=function(a,e){var n={};if(!a.propagateMetadata){return n}else if(typeof a.propagateMetadata==="function"){n.relevantContainerElement=e;n.metadataFunction=a.propagateMetadata}else{var r=t.wrapError("Wrong type: it should be a function and it is:"+typeof a.propagateRelevantContainer);var o="sap.ui.dt.MetadataPropagationUtil#_getCurrentDesigntimePropagation";r.name="Error in "+o;r.message=t.printf("{0} / {1}",o,r.message);throw r}return n};n._setPropagationInfo=function(t,a,n){if(!n&&e(a)){return false}t.propagationInfos=n||[];if(!e(a)){t.propagationInfos.push(a)}return t};n.propagateMetadataToAggregationOverlay=function(t,a,r){var o;var i;var g;var p=Object.assign({},t);var s=n._getParentPropagationInfo(r);if(p&&!e(p)){g=n._getCurrentRelevantContainerPropagation(p,a);i=n._getCurrentDesigntimePropagation(p,a)}if(s||!e(g)||!e(i)){o=Object.assign({},g,i);return n._setPropagationInfo(p,o,s)}return p};n.getRelevantContainerForPropagation=function(t,a){var e=false;if(!t||!t.propagationInfos){return false}t.propagationInfos.some(function(t){if(t.relevantContainerFunction&&t.relevantContainerFunction(a)){e=t.relevantContainerElement;return true}});return e||false};n.getMetadataForPropagation=function(t,n){var r={};if(!t||!t.propagationInfos){return false}var o=t.propagationInfos.slice().reverse();r=o.reduce(function(t,e){if(e.metadataFunction){var r=e.metadataFunction(n,e.relevantContainerElement);return a(t,r)}return t},r);return e(r)?false:r};n.propagateMetadataToElementOverlay=function(t,e,r){var o=n.getRelevantContainerForPropagation(e,r);var i=n.getMetadataForPropagation(e,r);if(!o&&!i){return t}var g=a({},t);if(o){g.relevantContainer=o}if(i){if(i.actions===null||i.actions==="not-adaptable"){var p=r.getMetadata().getAllAggregations();var s=Object.keys(p);if(g.aggregations){s=s.concat(Object.keys(g.aggregations).filter(function(t){return s.indexOf(t)<0}))}else{g.aggregations={}}s.forEach(function(t){if(g.aggregations[t]&&g.aggregations[t].actions){g.aggregations[t].actions=i.actions}})}return a(g,i)}return g};return n},true);
//# sourceMappingURL=MetadataPropagationUtil.js.map