/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/ui/table/TreeTable","sap/ui/table/Column","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/m/SearchField","sap/m/Text","sap/m/RatingIndicator","./TableRenderer"],function(e,t,a,l,i,n,s,o,r,u,d){"use strict";var c=e.extend("sap.ui.dt.enablement.report.Table",{metadata:{library:"sap.ui.dt",properties:{data:{type:"object"}},aggregations:{_table:{type:"sap.ui.table.TreeTable",hidden:true,multiple:false}}},init:function(){this.setAggregation("_table",this._createTable())},exit:function(){clearTimeout(this._iFilterTimeout);this.setData(null)},setData:function(e){if(this._oModel){this._oModel.destroy();delete this._oModel}if(e){this._oModel=new t(e);this._getTable().setModel(this._oModel)}else{this._getTable().setModel(null)}this.setProperty("data",e)},filter:function(e){var t=this._getTable().getModel();if(t){if(e.length>0){var a=this.getData();var l=a.children.filter(function(t){if(e.indexOf("status=")!==-1){return t.status.value===e.substring(e.indexOf("=")+1)}return t.name.toLowerCase().indexOf(e.toLowerCase())!==-1});t.setData(l)}else{t.setData(this.getData())}}},_createTable:function(){var e=new a(this.getId()+"--table",{selectionMode:"MultiToggle",visibleRowCount:20,enableSelectAll:false,ariaLabelledBy:"title",toolbar:this._createToolbar(),rows:"{path:'/', parameters: {arrayNames:['children']}}",columns:[this._createTextColumn("name","Name","{name}"),this._createRatingIndicatorColumn("value","Status Values","{status/value}","{status/text} ({status/value})"),this._createTextColumn("status","Status","{status/text}"),this._createTextColumn("message","Message","{message}")]});return e},_createToolbar:function(){return new i(this.getId()+"--toolbar",{content:[new n(this.getId()+"--toolbar-spacer"),new s(this.getId()+"--toolbar-collapse-button",{text:"Collapse all",press:this._onCollapseAll.bind(this)}),new s(this.getId()+"--toolbar-expand-button",{text:"Expand",press:this._onExpandSecondLevel.bind(this)}),new o(this.getId()+"--toolbar-search-field",{liveChange:this._onSearch.bind(this)})]})},_onSearch:function(e){var t=e.getParameter("newValue");clearTimeout(this._iFilterTimeout);this._iFilterTimeout=setTimeout(function(){this.filter(t)}.bind(this),100)},_createTextColumn:function(e,t,a){return this._createColumn(e,t,new r({text:a}))},_createRatingIndicatorColumn:function(e,t,a,l){return this._createColumn(e,t,new u({maxValue:3,value:a,enabled:false,tooltip:l}))},_createColumn:function(e,t,a){return new l(this.getId()+"--table-column-"+e,{label:t,width:"13em",template:a})},_getTable:function(){return this.getAggregation("_table")},_onCollapseAll:function(){var e=this._getTable();e.collapseAll()},_onExpandSecondLevel:function(){var e=this._getTable();e.expandToLevel(2)},renderer:d});return c});
//# sourceMappingURL=Table.js.map