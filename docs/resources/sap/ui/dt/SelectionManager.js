/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/ManagedObject","sap/ui/dt/OverlayRegistry","sap/ui/dt/Util","sap/ui/dt/SelectionMode","sap/ui/dt/ElementOverlay","sap/base/util/includes"],function(t,e,i,r,n,a){"use strict";var o=t.extend("sap.ui.dt.SelectionManager",{metadata:{events:{change:{parameters:{selection:{type:"sap.ui.dt.ElementOverlay[]"}}}}}});function s(t){return i.castArray(t).map(function(t){if(t instanceof n){return t}var i=e.getOverlay(t);if(i){return i}}).filter(function(t,e,i){return t&&i.indexOf(t)===e})}function u(t){return t.every(function(t){return t.isSelectable()})}o.prototype.init=function(){this._aSelection=[];this._aValidators=[];this.addValidator(u)};o.prototype.exit=function(){delete this._aSelection;delete this._aValidators};o.prototype.getSelectionMode=function(){return this._aSelection.length>1?r.Multi:r.Single};o.prototype.get=function(){return this._aSelection.slice()};o.prototype.set=function(t){var e=s(t);var i=false;if(this._validate(e)){var r=this.get().filter(function(t){return!a(e,t)});i=this._remove(r)||i;i=this._add(e)||i;if(i){this.fireChange({selection:this.get()})}}return i};o.prototype._validate=function(t){return this.getValidators().every(function(e){return e(t)})};o.prototype._add=function(t){var e=this.get();t=t.filter(function(t){return!a(e,t)});if(t.length){var i=e.concat(t);if(this._validate(i)){this._aSelection=i;t.forEach(function(t){t.setSelected(true)},this);return true}}return false};o.prototype.add=function(t){if(this._add(s(t))){this.fireChange({selection:this.get()});return true}return false};o.prototype._remove=function(t){var e=this.get();var i=e.filter(function(e){return!a(t,e)});if(i.length!==e.length){this._aSelection=i;t.forEach(function(t){t.setSelected(false)});return true}return false};o.prototype.remove=function(t){if(this._remove(s(t))){this.fireChange({selection:this.get()});return true}return false};o.prototype.reset=function(){return this.remove(this.get())};o.prototype.addValidator=function(t){if(typeof t==="function"&&!a(this._aValidators,t)){this._aValidators=this._aValidators.concat(t)}};o.prototype.removeValidator=function(t){this._aValidators=this._aValidators.filter(function(e){return t!==e})};o.prototype.getValidators=function(){return this._aValidators.slice()};return o});
//# sourceMappingURL=SelectionManager.js.map