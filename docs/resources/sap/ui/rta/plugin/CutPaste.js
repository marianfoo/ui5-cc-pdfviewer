/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/dt/plugin/CutPaste","sap/ui/dt/Util","sap/ui/rta/plugin/Plugin","sap/ui/rta/plugin/RTAElementMover","sap/ui/rta/Utils"],function(t,e,i,n,r){"use strict";var a=t.extend("sap.ui.rta.plugin.CutPaste",{metadata:{library:"sap.ui.rta",properties:{commandFactory:{type:"object",multiple:false}},events:{dragStarted:{},elementModified:{command:{type:"sap.ui.rta.command.BaseCommand"}}}}});r.extendWith(a.prototype,i.prototype,function(t,e,i){return i!=="getMetadata"});a.prototype.init=function(){t.prototype.init.apply(this,arguments);this.setElementMover(new n({commandFactory:this.getCommandFactory()}))};a.prototype._isEditable=function(t,e){return this.getElementMover().isEditable(t,e.onRegistration).then(function(e){if(e){return true}return this._isPasteEditable(t)}.bind(this))};a.prototype._isPasteEditable=function(t){var e=this.getElementMover();if(!this.hasStableId(t)){return Promise.resolve(false)}return e.isMoveAvailableOnRelevantContainer(t).then(function(i){if(!i){return false}return r.doIfAllControlsAreAvailable([t],function(){return e.isMoveAvailableForChildren(t)})})};a.prototype.isAvailable=function(t){return t.every(function(t){return t.getMovable()})};a.prototype.registerElementOverlay=function(){t.prototype.registerElementOverlay.apply(this,arguments);i.prototype.registerElementOverlay.apply(this,arguments)};a.prototype.deregisterElementOverlay=function(){t.prototype.deregisterElementOverlay.apply(this,arguments);i.prototype.removeFromPluginsList.apply(this,arguments)};a.prototype.paste=function(t){this._executePaste(t);e.waitForSynced(this.getDesignTime())().then(function(){return this.getElementMover().buildMoveCommand()}.bind(this)).then(function(t){this.fireElementModified({command:t});this.stopCutAndPaste()}.bind(this)).catch(function(t){throw e.createError("CutPaste#paste",t,"sap.ui.rta")})};a.prototype.cut=function(e){return t.prototype.cut.apply(this,arguments).then(function(){e.setSelected(false)})};a.prototype.getMenuItems=function(t){var e=[];var i=this.enhanceItemWithResponsibleElement({id:"CTX_PASTE",text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta").getText("CTX_PASTE"),handler:function(t){return this.paste(t[0])}.bind(this),enabled:function(t){return this.isElementPasteable(t[0])}.bind(this),rank:80,icon:"sap-icon://paste"},t,["move"]);var n=i.responsible||t;if(this.isAvailable(n)){var r=this.enhanceItemWithResponsibleElement({id:"CTX_CUT",text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta").getText("CTX_CUT"),handler:function(t){return this.cut(t[0])}.bind(this),enabled:function(t){return t.length===1},rank:70,icon:"sap-icon://scissors"},t,["move"]);e.push(r,i);return e}return this._isPasteEditable(t[0]).then(function(t){if(t){e.push(i)}return e})};return a});
//# sourceMappingURL=CutPaste.js.map