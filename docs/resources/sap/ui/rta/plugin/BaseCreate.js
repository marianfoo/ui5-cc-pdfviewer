/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/rta/plugin/Plugin","sap/ui/fl/Utils","sap/ui/rta/Utils"],function(e,t,r){"use strict";var n=e.extend("sap.ui.rta.plugin.BaseCreate",{metadata:{library:"sap.ui.rta",properties:{},associations:{},events:{}}});n.prototype._isEditable=function(e){return Promise.all([this._isEditableCheck(e,true),this._isEditableCheck(e,false)]).then(function(e){return{asSibling:e[0],asChild:e[1]}})};n.prototype._isEditableCheck=function(e,r){var n=this._getParentOverlay(r,e);var a;if(!n||!n.getParentElementOverlay()){return Promise.resolve(false)}if(r){a=e.getParentAggregationOverlay().getAggregationName()}return this.checkAggregationsOnSelf(n,this.getActionName(),a).then(function(r){if(r){var a=t.getViewForControl(n.getElement());return this.hasStableId(e)&&t.checkControlId(a)}return false}.bind(this))};n.prototype._getParentOverlay=function(e,t){var r;var n=this.getResponsibleElementOverlay(t);if(e){r=n.getParentElementOverlay()}else{r=n}return r};n.prototype.getCreateActions=function(e,t){var r=this.getResponsibleElementOverlay(t);var n=this._getParentOverlay(e,r);var a=n.getDesignTimeMetadata();var i=a.getActionDataFromAggregations(this.getActionName(),r.getElement());if(e){var o=r.getParentAggregationOverlay().getAggregationName();return i.filter(function(e){return e.aggregation===o})}return i};n.prototype.getCreateAction=function(e,t,r){var n=this.getCreateActions(e,t);if(r){var a;n.some(function(e){if(e.aggregation===r){a=e;return true}});return a}return n[0]};n.prototype.isAvailable=function(e,t){return this._isEditableByPlugin(e[0],t)};n.prototype.isActionEnabled=function(e,t,r){if(!e){return false}if(e.isEnabled&&typeof e.isEnabled==="function"){var n=e.isEnabled;var a=this._getParentOverlay(t,r);return n(a.getElement())}return true};n.prototype.getCreatedContainerId=function(e,t){var r=t;if(e.getCreatedContainerId&&typeof e.getCreatedContainerId==="function"){var n=e.getCreatedContainerId;r=n(t)}return r};n.prototype._determineIndex=function(e,t,n,a){return r.getIndex(e,t,n,a)};n.prototype._getText=function(e,t,r,n){if(!e){return n}var a=r.getAggregationDescription(e.aggregation,t);if(!a){return n}var i=a.singular;var o=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");return o.getText(n,i)};n.prototype.getActionName=function(){throw new Error("abstract")};function a(){}n.prototype.getMenuItems=function(e){a(e);throw new Error("abstract")};n.prototype.handleCreate=function(e,t){a(e,t);throw new Error("abstract")};return n});
//# sourceMappingURL=BaseCreate.js.map