/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/rta/plugin/Plugin","sap/ui/rta/plugin/RenameHandler","sap/base/Log"],function(e,t,i){"use strict";var n=e.extend("sap.ui.rta.plugin.Rename",{metadata:{library:"sap.ui.rta",properties:{oldValue:"string"},associations:{},events:{editable:{},nonEditable:{}}}});n.prototype.exit=function(){e.prototype.exit.apply(this,arguments);this.setBusy(false);t._exit.call(this)};n.prototype.setDesignTime=function(e){t._setDesignTime.call(this,e)};n.prototype.startEdit=function(e){var i=this.getAction(e).domRef;var n=this.getAction(e).getTextMutators;t.startEdit.call(this,{overlay:e,domRef:i,getTextMutators:n,pluginMethodName:"plugin.Rename.startEdit"})};n.prototype.stopEdit=function(e){t._stopEdit.call(this,e,"plugin.Rename.stopEdit")};n.prototype.handler=function(e){e=this.getSelectedOverlays()||e;this.startEdit(e[0])};n.prototype.isRenameAvailable=function(e){return this._isEditableByPlugin(e)};n.prototype.isRenameEnabled=function(e){return this.isEnabled(e)};n.prototype.isEnabled=function(e){if(e.length>1){return false}var t=e[0];var i=this.getResponsibleElementOverlay(t);var n=true;if(!this.getAction(i)){n=false}var a=this.getAction(t);if(n&&typeof a.isEnabled!=="undefined"){if(typeof a.isEnabled==="function"){n=a.isEnabled(t.getElement())}else{n=a.isEnabled}}if(n){var r=t.getDesignTimeMetadata();var o=r.getAssociatedDomRef(t.getElement(),a.domRef);if(!(o&&o.get(0))){n=false}}return n};n.prototype.registerElementOverlay=function(i){i.attachEvent("editableChange",t._manageClickEvent,this);e.prototype.registerElementOverlay.apply(this,arguments)};n.prototype._isEditable=function(e){return this._checkChangeHandlerAndStableId(e)};n.prototype.deregisterElementOverlay=function(i){i.detachEvent("editableChange",t._manageClickEvent,this);i.detachBrowserEvent("click",t._onClick,this);e.prototype.deregisterElementOverlay.apply(this,arguments)};n.prototype._emitLabelChangeEvent=function(){var e=t._getCurrentEditableFieldText.call(this);this._fnSetControlText(e);var n=this.getResponsibleElementOverlay(this._oEditedOverlay);var a=n.getElement();var r=n.getDesignTimeMetadata();var o=this.getVariantManagementReference(n);return this.getCommandFactory().getCommandFor(a,"rename",{renamedElement:a,newValue:e},r,o).then(function(e){this.fireElementModified({command:e})}.bind(this)).catch(function(e){i.error("Error during rename: ",e)})};n.prototype.getMenuItems=function(e){return this._getMenuItems(e,{pluginId:"CTX_RENAME",rank:10,icon:"sap-icon://edit"})};n.prototype.getActionName=function(){return"rename"};return n});
//# sourceMappingURL=Rename.js.map