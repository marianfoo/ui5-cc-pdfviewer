/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/core/Fragment","sap/ui/core/library","sap/ui/model/json/JSONModel","sap/ui/rta/Utils","sap/ui/rta/plugin/iframe/AddIFrameDialogController","sap/ui/fl/util/getContainerUserInfo"],function(e,t,a,i,l,A,r,_){"use strict";var o=i.ValueState;var n=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");var E="https://help.sap.com/docs/search?q=Embedding%20Content%20%28Object%20Pages%29";var I=n.getText("IFRAME_ADDIFRAME_DIALOG_URL_WARNING_TEXT")+" ("+"<a href="+E+">"+n.getText("IFRAME_ADDIFRAME_DIALOG_URL_WARNING_LINKTEXT")+"</a>"+")";var s={dialogTitle:n.getText("IFRAME_ADDIFRAME_DIALOG_TITLE"),dialogCreateTitle:n.getText("IFRAME_ADDIFRAME_DIALOG_TITLE"),dialogUpdateTitle:n.getText("IFRAME_ADDIFRAME_DIALOG_UPDATE_TITLE"),sizeTitle:n.getText("IFRAME_ADDIFRAME_DIALOG_SIZE_TITLE"),widthLabel:n.getText("IFRAME_ADDIFRAME_DIALOG_WIDTH_LABEL"),widthUnitLabel:n.getText("IFRAME_ADDIFRAME_DIALOG_WIDTH_UNITLABEL"),heightLabel:n.getText("IFRAME_ADDIFRAME_DIALOG_HEIGHT_LABEL"),heightUnitLabel:n.getText("IFRAME_ADDIFRAME_DIALOG_HEIGHT_UNITLABEL"),percentUseLabel:n.getText("IFRAME_ADDIFRAME_DIALOG_PERCENT_USED"),saveText:n.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_SAVE"),cancelText:n.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_CANCEL"),previewUrlLabel:n.getText("IFRAME_ADDIFRAME_DIALOG_PREVIEW_URL_LABEL"),previewUrlMessage:n.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_PREVIEW_MESSAGE"),previewButtonText:n.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_SHOW_PREVIEW"),showPreviewButton:n.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_SHOW_PREVIEW"),updatePreviewButton:n.getText("IFRAME_ADDIFRAME_DIALOG_BUTTON_UPDATE_PREVIEW"),previewFrameLabel:n.getText("IFRAME_ADDIFRAME_DIALOG_PREVIEW_FRAME_LABEL"),parameterSearchLabel:n.getText("IFRAME_ADDIFRAME_DIALOG_PARAMETER_SEARCH_LABEL"),editUrlLabel:n.getText("IFRAME_ADDIFRAME_DIALOG_EDIT_URL_LABEL"),parametersLabel:n.getText("IFRAME_ADDIFRAME_DIALOG_PARAMETERS_LABEL"),columnParameterLabel:n.getText("IFRAME_ADDIFRAME_DIALOG_TABLE_PARAMETER_LABEL"),columnUiValueLabel:n.getText("IFRAME_ADDIFRAME_DIALOG_TABLE_UI_VALUE_LABEL")};function D(e){if(e){s.dialogTitle=s.dialogUpdateTitle}else{s.dialogTitle=s.dialogCreateTitle}return new l({text:s,section:{visible:false},asNewSection:{value:false},sectionName:{value:"",valueState:o.None},frameWidth:{value:100,valueState:o.None,id:"sapUiRtaAddIFrameDialog_WidthInput"},frameWidthUnit:{value:"%"},frameHeight:{value:100,valueState:o.None,id:"sapUiRtaAddIFrameDialog_HeightInput"},frameHeightUnit:{value:"%"},frameUrl:{value:"",valueState:o.None},previewUrl:{value:""},documentationLink:{HTML:I},parameters:{value:[]},unitsOfMeasure:[{name:"%"},{name:"px"},{name:"rem"}]})}var u=t.extend("sap.ui.rta.plugin.iframe.AddIFrameDialog",{metadata:{library:"sap.ui.rta",events:{opened:{}}}});u.prototype.open=function(e){return new Promise(function(t){this._fnResolve=t;this._createDialog(e)}.bind(this))};u.prototype._createDialog=function(t){var i=false;if(t){i=t.updateMode?t.updateMode:false}this._oJSONModel=D(i);this._oController=new r(this._oJSONModel,t);a.load({name:"sap.ui.rta.plugin.iframe.AddIFrameDialog",controller:this._oController}).then(function(e){this._oDialog=e;this._oDialog.addStyleClass(A.getRtaStyleClassName());this._oDialog.setModel(this._oJSONModel);this._openDialog()}.bind(this)).catch(function(t){e.error("Error loading fragment sap.ui.rta.plugin.iframe.AddIFrameDialog: ",t)})};u.prototype._openDialog=function(){this._oDialog.attachAfterOpen(function(){this._disablePanelExpand();this.fireOpened()}.bind(this));this._oDialog.attachAfterClose(function(){this._oDialog.destroy();this._oDialog=null;this._fnResolve(this._oController.getSettings());this._oController=null}.bind(this));this._oDialog.open()};u.prototype._disablePanelExpand=function(){var e=sap.ui.getCore().byId("sapUiRtaAddIFrameDialog_PreviewLinkPanel").getDependents()[0];if(e){e.setEnabled(false)}};u.buildUrlBuilderParametersFor=function(e){return _().then(function(t){var a=Object.keys(t).map(function(e){return{label:e,key:"{$user>/"+e+"}",value:t[e]}});var i=e.getBindingContext();var l;if(i){var A=i.getObject();l=Object.keys(A).filter(function(e){return typeof A[e]!=="object"}).map(function(e){return{label:e,key:"{"+e+"}",value:A[e]}})}else{l=[]}return a.concat(l)})};return u});
//# sourceMappingURL=AddIFrameDialog.js.map