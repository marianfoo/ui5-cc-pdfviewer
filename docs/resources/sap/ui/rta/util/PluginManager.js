/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/isEmptyObject","sap/base/util/values","sap/ui/base/ManagedObject","sap/ui/dt/plugin/ContextMenu","sap/ui/dt/plugin/TabHandling","sap/ui/dt/plugin/ToolHooks","sap/ui/fl/Layer","sap/ui/fl/registry/Settings","sap/ui/rta/command/CommandFactory","sap/ui/rta/plugin/additionalElements/AdditionalElementsPlugin","sap/ui/rta/plugin/additionalElements/AddElementsDialog","sap/ui/rta/plugin/additionalElements/AdditionalElementsAnalyzer","sap/ui/rta/plugin/iframe/AddIFrame","sap/ui/rta/plugin/Combine","sap/ui/rta/plugin/CompVariant","sap/ui/rta/plugin/ControlVariant","sap/ui/rta/plugin/CreateContainer","sap/ui/rta/plugin/CutPaste","sap/ui/rta/plugin/DragDrop","sap/ui/rta/plugin/Remove","sap/ui/rta/plugin/Rename","sap/ui/rta/plugin/RTAElementMover","sap/ui/rta/plugin/Selection","sap/ui/rta/plugin/Settings","sap/ui/rta/plugin/Split","sap/ui/rta/plugin/Stretch","sap/ui/rta/plugin/LocalReset","sap/ui/rta/plugin/Resize"],function(t,a,i,e,n,s,o,l,u,r,m,g,d,p,c,h,f,y,P,_,C,F,D,b,E,v,w,M){"use strict";var S=i.extend("sap.ui.rta.util.PluginManager",{metadata:{properties:{plugins:{type:"any",defaultValue:{}}}}});S.prototype.init=function(){this.iEditableOverlaysCount=0};S.prototype.getEditableOverlaysCount=function(){return this.iEditableOverlaysCount};S.prototype.getDefaultPlugins=function(t){if(!this._mDefaultPlugins){this._oCommandFactory=new u({flexSettings:t});this._mDefaultPlugins={};this._mDefaultPlugins["selection"]=new D({commandFactory:this._oCommandFactory,multiSelectionRequiredPlugins:[p.getMetadata().getName(),_.getMetadata().getName()],elementEditableChange:this.onElementEditableChange.bind(this)});this._oRTAElementMover=new F({commandFactory:this._oCommandFactory});this._mDefaultPlugins["dragDrop"]=new P({elementMover:this._oRTAElementMover,commandFactory:this._oCommandFactory,dragStarted:this.handleStopCutPaste.bind(this)});this._mDefaultPlugins["rename"]=new C({commandFactory:this._oCommandFactory,editable:this.handleStopCutPaste.bind(this)});this._mDefaultPlugins["additionalElements"]=new r({commandFactory:this._oCommandFactory});this._mDefaultPlugins["createContainer"]=new f({commandFactory:this._oCommandFactory});this._mDefaultPlugins["remove"]=new _({commandFactory:this._oCommandFactory});this._mDefaultPlugins["cutPaste"]=new y({elementMover:this._oRTAElementMover,commandFactory:this._oCommandFactory});this._mDefaultPlugins["settings"]=new b({commandFactory:this._oCommandFactory});this._mDefaultPlugins["combine"]=new p({commandFactory:this._oCommandFactory});this._mDefaultPlugins["split"]=new E({commandFactory:this._oCommandFactory});this._mDefaultPlugins["resize"]=new M({commandFactory:this._oCommandFactory});this._mDefaultPlugins["contextMenu"]=new e;this._mDefaultPlugins["tabHandling"]=new n;this._mDefaultPlugins["stretch"]=new v;var a=l.getInstanceOrUndef();if(a&&a.isVariantAdaptationEnabled()){this._mDefaultPlugins["compVariant"]=new c({commandFactory:this._oCommandFactory})}this._mDefaultPlugins["controlVariant"]=new h({commandFactory:this._oCommandFactory});this._mDefaultPlugins["addIFrame"]=new d({commandFactory:this._oCommandFactory});this._mDefaultPlugins["toolHooks"]=new s;if(t.layer===o.CUSTOMER&&a&&a.isLocalResetEnabled()){this._mDefaultPlugins["localReset"]=new w({commandFactory:this._oCommandFactory})}}return Object.assign({},this._mDefaultPlugins)};S.prototype.preparePlugins=function(a,i,e){if(t(this.getPlugins())){this.setPlugins(this.getDefaultPlugins(a))}else{this._destroyDefaultPlugins(this.getPlugins())}Object.keys(this.getPlugins()).forEach(function(t){if(this.getPlugin(t).attachElementModified){this.getPlugin(t).attachElementModified(i)}}.bind(this));this.provideCommandStack("settings",e)};S.prototype.getPluginList=function(){return a(this.getPlugins())};S.prototype.getPlugin=function(t){return this.getPlugins()[t]};S.prototype.provideCommandStack=function(t,a){if(this.getPlugin(t)){this.getPlugin(t).setCommandStack(a)}};S.prototype.onElementEditableChange=function(t){var a=t.getParameter("editable");if(a){this.iEditableOverlaysCount+=1}else{this.iEditableOverlaysCount-=1}};S.prototype.handleStopCutPaste=function(){var t=this.getPlugin("cutPaste");if(t){t.stopCutAndPaste()}};S.prototype._destroyDefaultPlugins=function(t){for(var a in this._mDefaultPlugins){var i=this._mDefaultPlugins[a];if(i&&!i.bIsDestroyed){if(!t||t[a]!==i){i.destroy()}}}};return S});
//# sourceMappingURL=PluginManager.js.map