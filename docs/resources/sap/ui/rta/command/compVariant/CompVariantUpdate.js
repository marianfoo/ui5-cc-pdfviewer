/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/each","sap/ui/fl/write/api/SmartVariantManagementWriteAPI","sap/ui/rta/command/BaseCommand","sap/ui/rta/library"],function(t,e,a,i){"use strict";var r=a.extend("sap.ui.rta.command.compVariant.CompVariantUpdate",{metadata:{library:"sap.ui.rta",properties:{newVariantProperties:{type:"object"},newDefaultVariantId:{type:"string"},oldDefaultVariantId:{type:"string"},onlySave:{type:"boolean"},isModifiedBefore:{type:"boolean"}}}});r.prototype.prepare=function(t,e,a){this.mInformation={layer:t.layer,command:a,generator:i.GENERATOR_NAME};return true};function n(t,a,i){var r=Object.assign({},i,this.mInformation,{id:a,control:this.getElement()});return e[t](r)}r.prototype.execute=function(){if(this.getOnlySave()){this.setIsModifiedBefore(this.getElement().getModified());this.getElement().setModified(false);var e=Object.keys(this.getNewVariantProperties())[0];n.call(this,"saveVariantContent",e,this.getNewVariantProperties()[e])}else{t(this.getNewVariantProperties(),function(t,e){if(e.deleted){n.call(this,"removeVariant",t,{});this.getElement().removeVariant({variantId:t})}else{var a=n.call(this,"updateVariantMetadata",t,e);this.getElement().updateVariant(a)}}.bind(this));if(this.getNewDefaultVariantId()){n.call(this,"setDefaultVariantId",undefined,{defaultVariantId:this.getNewDefaultVariantId()});this.getElement().setDefaultVariantId(this.getNewDefaultVariantId())}}return Promise.resolve()};r.prototype.undo=function(){if(this.getOnlySave()){var e=Object.keys(this.getNewVariantProperties())[0];n.call(this,"revert",e,{});this.getElement().setModified(this.getIsModifiedBefore())}else{t(this.getNewVariantProperties(),function(t,e){var a=n.call(this,"revert",t,{});if(e.deleted){this.getElement().addVariant(a)}else{this.getElement().updateVariant(a)}}.bind(this));if(this.getNewDefaultVariantId()){n.call(this,"revertSetDefaultVariantId",this.getOldDefaultVariantId());this.getElement().setDefaultVariantId(this.getOldDefaultVariantId())}}return Promise.resolve()};return r});
//# sourceMappingURL=CompVariantUpdate.js.map