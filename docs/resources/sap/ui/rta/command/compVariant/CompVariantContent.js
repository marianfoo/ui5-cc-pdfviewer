/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/rta/command/BaseCommand","sap/ui/fl/write/api/SmartVariantManagementWriteAPI","sap/ui/rta/library"],function(t,e,i){"use strict";var r=t.extend("sap.ui.rta.command.compVariant.CompVariantContent",{metadata:{library:"sap.ui.rta",properties:{variantId:{type:"string"},persistencyKey:{type:"string"},newContent:{type:"object"},isModifiedBefore:{type:"boolean"}}}});function n(t,i,r){var n=Object.assign({},r,this.mInformation,{id:i,control:this.getElement()});return e[t](n)}function a(t){var e=this.getElement();var i=e._getVariantContent(this.getVariantId());var r=Object.assign({},i);if(e.isPageVariant()){var n={};n[this.getPersistencyKey()]=t;e._applyVariantByPersistencyKey(this.getPersistencyKey(),n,"KEY_USER");r[this.getPersistencyKey()]=t}else{e._applyVariant(e._getPersoController(),t,"KEY_USER");r=t}return r}r.prototype.prepare=function(t,e,r){this.mInformation={layer:t.layer,command:r,generator:i.GENERATOR_NAME};return true};r.prototype.execute=function(){this.setIsModifiedBefore(this.getElement().getModified());this.getElement().setModified(true);var t=a.call(this,this.getNewContent());n.call(this,"updateVariantContent",this.getVariantId(),{content:t});return Promise.resolve()};r.prototype.undo=function(){var t=n.call(this,"revert",this.getVariantId(),{});this.getElement().setModified(this.getIsModifiedBefore());var e=this.getElement();if(e.isPageVariant()){a.call(this,t.getContent()[this.getPersistencyKey()])}else{a.call(this,t.getContent())}return Promise.resolve()};return r});
//# sourceMappingURL=CompVariantContent.js.map