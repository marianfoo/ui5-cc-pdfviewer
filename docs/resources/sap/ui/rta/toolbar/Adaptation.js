/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Fragment","sap/ui/fl/write/api/Version","sap/ui/rta/toolbar/contextBased/SaveAsContextBasedAdaptation","sap/ui/rta/toolbar/translation/Translation","sap/ui/rta/toolbar/versioning/Versioning","sap/ui/rta/appVariant/Feature","sap/ui/rta/toolbar/Base","sap/ui/Device","./AdaptationRenderer"],function(t,e,i,o,n,s,a,r,h){"use strict";var p=a.extend("sap.ui.rta.toolbar.Adaptation",{renderer:h,animation:true,metadata:{library:"sap.ui.rta",events:{undo:{},redo:{},exit:{},save:{},restore:{},transport:{},publishVersion:{},modeChange:{},activate:{},discardDraft:{},switchVersion:{},saveAsContextBasedAdaptation:{},openChangeCategorySelectionPopover:{}}}});p.modes={MOBILE:"sapUiRtaToolbarMobile",TABLET:"sapUiRtaToolbarTablet",DESKTOP:"sapUiRtaToolbarDesktop"};var l="sapUiRtaToolbar";p.prototype.init=function(){this._pFragmentLoaded=a.prototype.init.apply(this,arguments).then(function(){if(!r.media.hasRangeSet(l)){r.media.initRangeSet(l,[900,1200],"px",[p.modes.MOBILE,p.modes.TABLET,p.modes.DESKTOP])}r.media.attachHandler(this._onSizeChanged,this,l)}.bind(this))};p.prototype.onFragmentLoaded=function(){return this._pFragmentLoaded};p.prototype.exit=function(){r.media.detachHandler(this._onSizeChanged,this,l);a.prototype.exit.apply(this,arguments)};p.prototype.show=function(){this._onSizeChanged(r.media.getCurrentRange(l),true);return a.prototype.show.apply(this,arguments)};function d(t,e,i,o){var n=this.getControl(t);var s=i?this.getTextResources().getText(i):"";var a=o?this.getTextResources().getText(o):"";n.setText(s||"");n.setTooltip(a||"");n.setIcon(e||"")}p.prototype.formatPublishVersionVisibility=function(t,e,i,o){return this.getExtension("versioning",n).formatPublishVersionVisibility(t,e,i,o)};p.prototype.formatDiscardDraftVisible=function(t,e,i){return this.getExtension("versioning",n).formatDiscardDraftVisible(t,e,i)};p.prototype.formatVersionButtonText=function(t,e){return this.getExtension("versioning",n).formatVersionButtonText(t,e)};p.prototype.showVersionHistory=function(t){return this.getExtension("versioning",n).showVersionHistory(t)};p.prototype._openVersionTitleDialog=function(t){return this.getExtension("versioning",n).openActivateVersionDialog(t)};p.prototype.showRestore=function(t){return!t};p.prototype._showButtonIcon=function(t,e,i){d.call(this,t,e,"",i)};p.prototype._showButtonText=function(t,e){d.call(this,t,"",e,"")};p.prototype._switchToIcons=function(){var t=this.getControl("iconBox");var e=this.getControl("iconSpacer");t.setVisible(false);e.setVisible(false);this._showButtonIcon("adaptationSwitcherButton","sap-icon://wrench","BTN_ADAPTATION");this._showButtonIcon("navigationSwitcherButton","sap-icon://explorer","BTN_NAVIGATION");this._showButtonIcon("visualizationSwitcherButton","sap-icon://show","BTN_VISUALIZATION");this._showButtonIcon("exit","sap-icon://decline","BTN_EXIT")};p.prototype._switchToTexts=function(){var t=this.getControl("iconBox");var e=this.getControl("iconSpacer");t.setVisible(true);e.setVisible(true);this._showButtonText("adaptationSwitcherButton","BTN_ADAPTATION");this._showButtonText("navigationSwitcherButton","BTN_NAVIGATION");this._showButtonText("visualizationSwitcherButton","BTN_VISUALIZATION");this._showButtonText("exit","BTN_EXIT")};p.prototype._onSizeChanged=function(t,e){if(t){var i=t.name;this.sMode=i;switch(i){case p.modes.MOBILE:this._switchToIcons();break;case p.modes.TABLET:case p.modes.DESKTOP:if(!e){this._switchToTexts()}break;default:}}};p.prototype.buildControls=function(){return t.load({name:"sap.ui.rta.toolbar.Adaptation",id:this.getId()+"_fragment",controller:{activate:this._openVersionTitleDialog.bind(this),discardDraft:this.eventHandler.bind(this,"DiscardDraft"),formatDiscardDraftVisible:this.formatDiscardDraftVisible.bind(this),formatPublishVersionVisibility:this.formatPublishVersionVisibility.bind(this),modeChange:this.eventHandler.bind(this,"ModeChange"),openDownloadTranslationDialog:u.bind(this),openUploadTranslationDialog:c.bind(this),undo:this.eventHandler.bind(this,"Undo"),redo:this.eventHandler.bind(this,"Redo"),openChangeCategorySelectionPopover:this.eventHandler.bind(this,"OpenChangeCategorySelectionPopover"),manageApps:v.bind(this),appVariantOverview:T.bind(this),saveAs:f.bind(this),saveAsContextBasedAdaptation:b.bind(this),formatSaveAsEnabled:g,restore:this.eventHandler.bind(this,"Restore"),publish:this.eventHandler.bind(this,"Transport"),publishVersion:this.eventHandler.bind(this,"PublishVersion"),exit:this.eventHandler.bind(this,"Exit"),formatVersionButtonText:this.formatVersionButtonText.bind(this),showVersionHistory:this.showVersionHistory.bind(this),showRestore:this.showRestore.bind(this)}})};function u(){var t={layer:this.getRtaInformation().flexSettings.layer,selector:this.getRtaInformation().rootControl};this.getExtension("translation",o).openDownloadTranslationDialog(t)}function c(){this.getExtension("translation",o).openUploadTranslationDialog()}function g(t,i){return t&&i!==e.Number.Draft}function f(){s.onSaveAs(true,true,this.getRtaInformation().flexSettings.layer,null)}function b(){this.getExtension("adaptation",i).openAddAdaptationDialog(this.getRtaInformation().flexSettings.layer)}function T(t){var e=t.getParameter("item");var i=e.getId().endsWith("keyUser");return s.onGetOverview(i,this.getRtaInformation().flexSettings.layer)}function v(){s.onGetOverview(true,this.getRtaInformation().flexSettings.layer)}p.prototype.getControl=function(t){return sap.ui.getCore().byId(this.getId()+"_fragment--sapUiRta_"+t)};return p});
//# sourceMappingURL=Adaptation.js.map