{"version":3,"file":"TransactionController.js","names":["sap","ui","define","jQuery","BaseController","DraftController","ModelUtil","extend","Log","TransactionController","metadata","publicMethods","constructor","oModel","oQueue","mParams","apply","this","sName","_oDraft","noBatchGroups","setDeferredGroups","setChangeGroups","groupId","changeSetId","single","getInterface","prototype","setBatchStrategy","bSingle","n","mChangeBatchGroups","_oModel","getChangeGroups","getDraftController","_oQueue","editEntity","oContext","bPreserveChanges","sRootExpand","that","Promise","resolve","oDraftContext","sEntitySet","getDraftContext","getEntitySetFromContext","isDraftEnabled","_oDraftUtil","isActiveEntity","getObject","createEditDraftEntity","context","deleteEntity","vEntity","mParameters","bIsLenient","oPromise","oPromise2","sPath","oDraftController","model","Context","getPath","batchGroupId","successMsg","failedMsg","forceSubmit","sHandling","headers","Prefer","undefined","discardDraft","_remove","then","oResponse","_normalizeResponse","oResponseOut","_normalizeError","triggerSubmitChanges","_returnPromiseAll","deleteEntities","aEntities","aPromises","bIsStrict","fnResolve","fnReject","i","length","push","_atLeastOnePromiseResolved","invokeAction","sFunctionName","hasClientMessages","urlParameters","_callAction","oOut","refresh","resetChanges","aKeys","propertyChanged","sProperty","oBinding","binding","checkUpdateOnChange","getBoundContext","hasDraftPreparationAction","saveAndPrepareDraftEntity","onlyIfPending","noShowResponse","noBlockUI","getDefaultValues","aContexts","aPredefinedValues","sNavigationProperty","sFunctionImportName","oEntityObject","aEntityTypeProperties","Error","oMetaModel","getModel","getMetaModel","oEntityType","getODataEntityType","getODataEntitySet","entityType","forEach","oNavProperty","name","oChildEntityType","getODataAssociationEnd","type","property","getODataFunctionImport","parameter","sDefaultValueFunctionPath","getDefaultValuesFunction","sDefaultValuesFunctionImport","split","error","httpResponse","statusCode","oResult","responseData","oDefaultValue","oProperty","hasOwnProperty","aFinalValues","oPredefinedValue","oExistingValues","sProp","oEntitySet","sDefaultValue","String","updateMultipleEntities","aContextToBeUpdated","aUpdatePromise","iIndex","oUpdatePromise","_updateEntity","sContextPath","oUpdateData","destroy"],"sources":["TransactionController-dbg.js"],"mappings":"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"}