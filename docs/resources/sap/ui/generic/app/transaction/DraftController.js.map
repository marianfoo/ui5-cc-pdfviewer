{"version":3,"file":"DraftController.js","names":["sap","ui","define","jQuery","BaseController","DraftContext","Log","Context","ActionUtil","DraftController","extend","metadata","publicMethods","constructor","oModel","oQueue","apply","this","sName","_oContext","prototype","getDraftContext","_oModel","createDraft","sEntitySet","sPath","mParameters","that","Error","Promise","resolve","reject","fnSuccess","oData","oResponse","responseData","httpResponse","createdContext","fnError","oError","deleteCreatedEntry","createEntry","properties","predefinedValues","success","error","batchGroupId","changeSetId","canonicalRequest","expand","validateDraft","oContext","getModel","getObject","getPath","IsActiveEntity","oImport","getODataDraftFunctionImportName","_callAction","prepareDraft","urlParameters","activateDraft","oPrepareParameters","oActivateParameters","pPrepare","pActivate","all","editDraft","sImportName","discardDraft","mParam","sFunctionImport","_remove","getDraftForActive","$expand","_read","then","hasOwnProperty","context","getContext","getKey","SiblingEntity","getDraftForActiveEntity","oPromise","oPromise2","noShowSuccessToast","forceSubmit","_normalizeError","triggerSubmitChanges","_returnPromiseAll","createNewDraftEntity","vPredefinedValues","bCanonicalRequest","oParameters","fnSetBusy","Function","sId4BatchGroupAndChangeSet","mParameters1","sRootExpand","oFunctionImport","_oMeta","getODataFunctionImport","oPromise0","bUseNewActionForCreate","sFunctionImportLabel","split","oSkipProperties","ResultIsActiveEntity","bIsDraft","isDraftEnabled","oActionProcessor","controller","oController","contexts","applicationController","oApplicationController","operationGrouping","undefined","mAdditionalParamData","call","executionPromise","oPromise1","aResponse","Array","isArray","_normalizeResponse","response","oResponseOut","fnPromise1Callback","bIsActiveEntity","bHasDraftEntity","oResponseEntity","_oDraftUtil","isActiveEntity","hasDraftEntity","mParameters2","failedMsg","createEditDraftEntity","bPreserveChanges","successMsg","PreserveChanges","validateDraftEntity","saveAndPrepareDraftEntity","binding","refresh","prepareDraftEntity","activateDraftEntity","bIsLenient","sExpand","oActivateDraftPromise","oTriggerSubmitPromise","sHandling","headers","Prefer","sETag","getETag","oActivationPromise","fnResolve","fnReject","fnCallerFunc","detachOnQueueCompleted","aResponses","_oQueue","_aQueue","length","attachOnQueueCompleted","hasDraft","hasActiveEntity","destroy"],"sources":["DraftController-dbg.js"],"mappings":"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"}