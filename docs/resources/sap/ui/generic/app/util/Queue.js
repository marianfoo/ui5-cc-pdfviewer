/*
 * SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";var e=function(e){this._iMaxLength=e;this._aQueue=[];this._aEventHandlerRegistry=[]};e.prototype._attachEvent=function(e,t){if(typeof t!=="function"){throw new Error("Event handler must be a function")}this._aEventHandlerRegistry.push({event:e,handler:t})};e.prototype._detachEvent=function(e,t){for(var n=this._aEventHandlerRegistry.length;n--;){if(this._aEventHandlerRegistry[n].handler===t&&this._aEventHandlerRegistry[n].event===e){this._aEventHandlerRegistry.splice(n,1)}}};e.prototype._fireEvent=function(e,t){for(var n=0;n<this._aEventHandlerRegistry.length;n++){if(this._aEventHandlerRegistry[n].event===e){this._aEventHandlerRegistry[n].handler(t)}}};e.prototype._execNext=function(){var e,t=this;setTimeout(function(){t._aQueue.shift();e=t._aQueue[0];if(e){t._exec(e)}else{t._fireEvent("onQueueCompleted")}})};e.prototype._exec=function(e){var t=this,n=function(){t._execNext()};this._fireEvent("beforeQueueItemProcess",e.eventParameters);e.jqdeferred.resolve();e.wait.then(function(){e.wait.then(n)},jQuery.proxy(t._cancel,t))};e.prototype.enqueue=function(e,t){var n={fn:e,eventParameters:t};n.jqdeferred=jQuery.Deferred();n.defer=new Promise(function(e,t){n.jqdeferred.then(e,t)});n.wait=n.defer.then(e);if(!(this._iMaxLength===undefined)&&this._aQueue.length>=this._iMaxLength){n.jqdeferred.reject(new Error("Queue overflow: "+this._aQueue.length))}else{this._aQueue.push(n);if(this._aQueue.length===1){this._exec(n)}}return n.wait.then()};e.prototype._cancel=function(){var e,t,n=this._aQueue.length;for(t=0;t<n;t++){e=this._aQueue[t];e.jqdeferred.reject(new Error("Queue cancellation"))}this._fireEvent("onQueueFailed");this._aQueue=[]};e.prototype.destroy=function(){this._aQueue=[]};return e},true);
//# sourceMappingURL=Queue.js.map