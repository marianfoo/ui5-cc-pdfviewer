/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./TextField","./library","./TextAreaRenderer","sap/ui/Device","sap/ui/events/KeyCodes","sap/ui/dom/jquery/cursorPos","sap/ui/dom/jquery/selectText"],function(jQuery,t,e,o,r,n){"use strict";var p=t.extend("sap.ui.commons.TextArea",{metadata:{library:"sap.ui.commons",deprecated:true,properties:{height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},cols:{type:"int",group:"Dimension",defaultValue:null},rows:{type:"int",group:"Dimension",defaultValue:null},wrapping:{type:"sap.ui.core.Wrapping",group:"Appearance",defaultValue:null},cursorPos:{type:"int",group:"Appearance",defaultValue:null},explanation:{type:"string",group:"Misc",defaultValue:null},labeledBy:{type:"string",group:"Identification",defaultValue:null,deprecated:true}}}});p.prototype.exit=function(){this._detachEventHandler()};p.prototype.onBeforeRendering=function(){this._detachEventHandler()};p.prototype.onAfterRendering=function(){t.prototype.onAfterRendering.apply(this,arguments);this._attachEventHandler()};p.prototype._attachEventHandler=function(){var t=this.$();this.proChHandlerId=t.on("propertychange",jQuery.proxy(this.oninput,this))};p.prototype._detachEventHandler=function(){var t=this.$();if(this.proChHandlerId){t.off("propertychange",this.oninput);this.proChHandlerId=null}};p.prototype.onfocusin=function(e){t.prototype.onfocusin.apply(this,arguments);this.bFocus=true;e.preventDefault()};p.prototype.onsapfocusleave=function(e){t.prototype.onsapfocusleave.apply(this,arguments);var o=this.getFocusDomRef();if(o&&r.browser.firefox){if(o.selectionStart!=o.selectionEnd){jQuery(o).selectText(o.selectionStart,o.selectionStart)}}this.bFocus=false;e.preventDefault();e.stopPropagation()};p.prototype.applyFocusInfo=function(e){t.prototype.applyFocusInfo.apply(this,arguments);return this};p.prototype.onkeypress=function(e){t.prototype.onkeypress.apply(this,arguments);if(!this.getEditable()||!this.getEnabled()||this.getMaxLength()<=0){return}var o=e.which||e.keyCode;var r=this.getDomRef();if(document.selection){var p=document.selection.createRange();if(p.text.length>0){return}}else{if(r.selectionStart!=r.selectionEnd){return}}if(r.value.length>=this.getMaxLength()&&(o>n.DELETE||o==n.ENTER||o==n.SPACE)&&!e.ctrlKey){e.preventDefault();e.stopPropagation()}};p.prototype.onkeyup=function(e){var o=this.getDomRef();this.setProperty("cursorPos",jQuery(o).cursorPos(),true);t.prototype.onkeyup.apply(this,arguments)};p.prototype.onsapenter=function(t){t.stopPropagation()};p.prototype.onsapnext=function(t){if(jQuery(this.getFocusDomRef()).data("sap.InNavArea")&&t.keyCode!=n.END){t.preventDefault();return}this._checkCursorPosForNav(t,true)};p.prototype.onsapprevious=function(t){if(jQuery(this.getFocusDomRef()).data("sap.InNavArea")&&t.keyCode!=n.HOME){t.preventDefault();return}this._checkCursorPosForNav(t,false)};p.prototype.onsapnextmodifiers=p.prototype.onsapnext;p.prototype.onsappreviousmodifiers=p.prototype.onsapprevious;p.prototype.onsapend=p.prototype.onsapnext;p.prototype.onsaphome=p.prototype.onsapprevious;p.prototype.onmouseup=function(t){var e=this.getDomRef();this.setProperty("cursorPos",jQuery(e).cursorPos(),true)};p.prototype.onpaste=function(t){if(!this.getEditable()||!this.getEnabled()||this.getMaxLength()<=0){return}var e=this.getDomRef();if(e.value.length>=this.getMaxLength()&&e.selectionStart==e.selectionEnd){t.preventDefault();t.stopPropagation()}};p.prototype.oninput=function(e){if(e.originalEvent&&e.originalEvent.propertyName&&e.originalEvent.propertyName.toLowerCase()!="value"){return}if(this.getEditable()&&this.getEnabled()&&this.getMaxLength()>0){var o=this.getDomRef();if(o.value.length>this.getMaxLength()){o.value=o.value.substring(0,this.getMaxLength())}}t.prototype.oninput.apply(this,arguments);var r=this.getDomRef();this.setProperty("cursorPos",jQuery(r).cursorPos(),true)};p.prototype.setMaxLength=function(t){this.setProperty("maxLength",t,true);var e=this.getDomRef();if(e&&e.value.length>t&&t>0){e.value=e.value.substring(0,t)}var o=this.getValue();if(o.length>t&&t>0){this.setProperty("value",o.substring(0,t))}return this};p.prototype.setCursorPos=function(t){this.setProperty("cursorPos",t,true);if(this.bFocus){jQuery(this.getDomRef()).cursorPos(t)}return this};return p});
//# sourceMappingURL=TextArea.js.map