/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./library","sap/ui/core/Control","./AccordionRenderer","sap/ui/dom/jquery/control","sap/ui/thirdparty/jqueryui/jquery-ui-core","sap/ui/thirdparty/jqueryui/jquery-ui-widget","sap/ui/thirdparty/jqueryui/jquery-ui-mouse","sap/ui/thirdparty/jqueryui/jquery-ui-sortable"],function(jQuery,t,e,i){"use strict";var o=e.extend("sap.ui.commons.Accordion",{metadata:{library:"sap.ui.commons",deprecated:true,properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"200px"},openedSectionsId:{type:"string",group:"Misc",defaultValue:null}},defaultAggregation:"sections",aggregations:{sections:{type:"sap.ui.commons.AccordionSection",multiple:true,singularName:"section"}},events:{sectionOpen:{parameters:{openSectionId:{type:"string"},closeSectionIds:{type:"string[]"}}},sectionClose:{parameters:{closeSectionId:{type:"string"}}},sectionsReorder:{parameters:{movedSectionId:{type:"string"},newIndex:{type:"int"}}}}}});o.CARD_1=1;o.CARD_0_1=2;o.aAccordions=[];o.prototype.init=function(){this.bInitialRendering=true;this.activationMode=o.CARD_1;this.rb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.commons");this.aSectionTitles=[];o.aAccordions.push(this)};o.prototype.onsapspace=function(t){this.onclick(t)};o.prototype.onsappagedownmodifiers=function(t){var e=jQuery(t.target);var i=e.parentsUntil(".sapUiAcd");var o=i[i.length-1];var n=jQuery(o).next();while(!this.getCorrespondingSection(n[0]).getEnabled()){n=n.next()}n=n[0];this.openSection(n.id);var r=this.getSections();r[this.__idxOfSec(n.id)].focus();t.preventDefault();t.stopPropagation()};o.prototype.onsappageupmodifiers=function(t){var e=jQuery(t.target);var i=e.parentsUntil(".sapUiAcd");var o=i[i.length-1];var n=jQuery(o).prev();while(!this.getCorrespondingSection(n[0]).getEnabled()){n=n.prev()}n=n[0];this.openSection(n.id);var r=this.getSections();r[this.__idxOfSec(n.id)].focus();t.preventDefault();t.stopPropagation()};o.prototype.onsapupmodifiers=function(t){t.preventDefault();t.stopPropagation();var e=jQuery(t.target).parentsUntil(".sapUiAcd");var i=e[e.length-1];if(this.__idxOfSec(i.id)===0){return}var o=jQuery(i).prev().first()[0];var n=false;if(this.__idxOfSec(o.id)===0){n=true}this.dropSection(i,o,n);var r=this.getSections();r[this.__idxOfSec(i.id)].focus()};o.prototype.onsapdownmodifiers=function(t){t.preventDefault();t.stopPropagation();var e=jQuery(t.target).parentsUntil(".sapUiAcd");var i=e[e.length-1];if(this.__idxOfSec(i.id)==this.getSections().length-1){return}var o=jQuery(i).next().first()[0];this.dropSection(i,o,false);var n=this.getSections();n[this.__idxOfSec(i.id)].focus()};o.prototype.onsapprevious=function(t){if(t.srcControl.getMetadata().getName()!="sap.ui.commons.AccordionSection"){return}t.preventDefault();t.stopPropagation();var e=this.getCurrentSection(t.target),i=null;if(e.id==this.getSections()[0].getId()){i=jQuery(e).find("div.sapUiAcdSectionHdr");if(i){i.trigger("focus")}}if(e){var o=jQuery(e).prev();while(o&&jQuery(o).hasClass("sapUiAcdSectionDis")){o=jQuery(o).prev()}if(o){i=jQuery(o).find("div.sapUiAcdSectionHdr");if(i){i.trigger("focus")}}}};o.prototype.onsapnext=function(t){if(t.srcControl.getMetadata().getName()!="sap.ui.commons.AccordionSection"){return}t.preventDefault();t.stopPropagation();var e=this.getCurrentSection(t.target);if(e){var i=jQuery(e).next();while(i&&jQuery(i).hasClass("sapUiAcdSectionDis")){i=jQuery(i).next()}if(i){var o=jQuery(i).find("div.sapUiAcdSectionHdr");if(o){o.trigger("focus")}}}};o.prototype.onsaphome=function(t){t.preventDefault();t.stopPropagation();var e=this.getSections()[0].getDomRef();if(jQuery(e).hasClass("sapUiAcdSectionDis")){e=jQuery(e).next();while(e&&jQuery(e).hasClass("sapUiAcdSectionDis")){e=jQuery(e).next()}}if(e){var i=jQuery(e).find("div.sapUiAcdSectionHdr");if(i){i.trigger("focus")}}};o.prototype.onsapend=function(t){t.preventDefault();t.stopPropagation();var e=this.getSections().length;var i=this.getSections()[e-1].getDomRef();if(jQuery(i).hasClass("sapUiAcdSectionDis")){i=jQuery(i).prev();while(i&&jQuery(i).hasClass("sapUiAcdSectionDis")){i=jQuery(i).prev()}}if(i){var o=jQuery(i).find("div.sapUiAcdSectionHdr");if(o){o.trigger("focus")}}};o.prototype.getCurrentSection=function(t){var e=t;while(!jQuery(e).hasClass("sapUiAcdSection")){e=jQuery(e).parent()}return e[0]};o.prototype.dropSection=function(t,e,i){var o=jQuery(t).parent()[0];var n=jQuery(o).children(".sapUiAcdSection").toArray();var r=jQuery.inArray(e,n);if(i){r-=1}this.moveSection(t.id,r)};o.prototype.moveSection=function(t,e){var i=this.__idxOfSec(t);if(e==i){return}var o=this.aSectionTitles[i];this.aSectionTitles.splice(i,1);var n=this.getSections();var r=n[i];this.removeSection(i,true);if(e!=-1){this.aSectionTitles.splice(e,0,o)}else{this.aSectionTitles.splice(0,0,o)}this.insertSection(r,e,true);this.fireSectionsReorder({movedSectionId:t,newIndex:e})};o.prototype._onSortChange=function(t,e){t.preventDefault();t.stopPropagation();var i=e.item[0];var o=e.item[0].getAttribute("Id");var n=jQuery(i).parent()[0];var r=jQuery(n).children(".sapUiAcdSection").toArray();var s=jQuery.inArray(i,r);this.moveSection(o,s)};o.prototype.onclick=function(t){if(t.srcControl.getId()==this.getId()){return}var e=jQuery(t.target);if(e.hasClass("sapUiAcdSectionCont")){return}if(!(jQuery(t.target).control(0)instanceof sap.ui.commons.AccordionSection)){return}var i=t.srcControl.getDomRef();var o=this.getCorrespondingSection(i);if(o&&!o.getEnabled()){return}if(t.srcControl.getCollapsed()){this.openSection(i.id)}else{this.closeSection(i.id)}t.preventDefault();t.stopPropagation();var n=this.getSections();n[this.__idxOfSec(i.id)].focus()};o.prototype.openSection=function(t){var e=this.__idxOfSec(t);var i=this.getSections(),n=[];if(this.activationMode==o.CARD_0_1||this.activationMode==o.CARD_1){n=this.closeOpenedSections()}i[e]._setCollapsed(false);this.fireSectionOpen({openSectionId:t,closeSectionIds:n})};o.prototype.closeSection=function(t){var e=this.__idxOfSec(t);var i=this.getSections();i[e]._setCollapsed(true);this.fireSectionClose({closeSectionId:t})};o.prototype.closeOpenedSections=function(){var t=[];var e=this.getSections();for(var i=0;i<e.length;i++){if(!e[i].getCollapsed()){e[i]._setCollapsed(true);t.push(e[i].getId())}}return t};o.prototype.openDefaultSections=function(){var t=this.getSections();var e=this.getOpenedSectionsId().split(",");for(var i=0;i<e.length;i++){var o=t[this.__idxOfSec(e[i])];o._setCollapsed(false)}};o.prototype.getNumberOfOpenedSections=function(){var t=0;var e=this.getSections();for(var i=0;i<e.length;i++){if(e[i].getCollapsed()==false){t++}}return t};o.prototype.addSection=function(t){this.addAggregation("sections",t);if((this.getOpenedSectionsId()==null||this.getOpenedSectionsId()=="")&&t.getEnabled()){this.setOpenedSectionsId(t.getId())}this.aSectionTitles.push(t.getTitle());return this};o.prototype.__idxOfSec=function(t){if(typeof t=="string"){t=sap.ui.getCore().byId(t)}return this.indexOfSection(t)};o.prototype.setOpenedSectionsId=function(t){var e=this.getSections();var i=t.split(",");if(i.length==1){if(this.__idxOfSec(t)<0){this.setProperty("openedSectionsId",t);return this}if(e[this.__idxOfSec(t)].getEnabled()){this.setProperty("openedSectionsId",t)}else{for(var o=0;o<e.length;o++){if(e[o].getEnabled()){this.setProperty("openedSectionsId",e[o].getId());return this}}}}else if(i.length==0){return this}else{var n;for(var o=0;o<i.length;o++){if(e[this.__idxOfSec(i[o])].getEnabled()){if(n){n+=","+i[o]}else{n=i[o]}}}if(n){this.setProperty("openedSectionsId",n)}}return this};o.prototype.getCorrespondingSection=function(t){if(jQuery(t).hasClass("sapUiAcdSection")){var e=jQuery(t).parent();var i=e[0];var o=jQuery(i).children();var n=o.index(t);var r=this.getSections();return r[n-1]}};o.prototype.isLastSection=function(t){var e=this.getSections();return jQuery.inArray(t,e)===e.length-1};o.prototype.onAfterRendering=function(){var t=sap.ui.getCore(),e=this;function i(){var t=e.getDomRef();if(t){t.style.height=t.clientHeight-7+"px"}}if(t.isThemeApplied()){i()}else{t.attachThemeChanged(i,this)}this.$().sortable({handle:"> div.sapUiAcdSectionHdr > div",stop:jQuery.proxy(this._onSortChange,this)})};return o});
//# sourceMappingURL=Accordion.js.map