/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","./ComboBox","./library","./AutoCompleteRenderer","./TextField","sap/ui/events/KeyCodes","jquery.sap.strings"],function(jQuery,t,e,i,s,r){"use strict";var o=t.extend("sap.ui.commons.AutoComplete",{metadata:{interfaces:["sap.ui.commons.ToolbarItem"],library:"sap.ui.commons",deprecated:true,properties:{enableScrolling:{type:"boolean",group:"Misc",defaultValue:true}},events:{suggest:{parameters:{suggestValue:{type:"string"}}}}}});o._DEFAULTFILTER=function(t,e){if(this._skipFilter){return true}return jQuery.sap.startsWithIgnoreCase(e.getText(),t)};o.prototype.init=function(){t.prototype.init.apply(this,arguments);this.mobile=false;this._filter=o._DEFAULTFILTER};o.prototype.exit=function(){if(this._oListBox){this._oListBox.removeAllItems()}t.prototype.exit.apply(this,arguments)};o.prototype.setFilterFunction=function(t){if(typeof t=="function"){this._filter=t}else{this._filter=o._DEFAULTFILTER}};o.prototype.onkeypress=function(t){var e=t.which||t.keyCode;if(e===r.ESCAPE){s.prototype.onkeypress.apply(this,arguments);jQuery(this.getInputDomRef()).removeAttr("aria-posinset")}};o.prototype.onfocusin=function(e){if(!this.$().hasClass("sapUiTfFoc")){t.prototype.onfocusin.apply(this,arguments)}};(function(){function e(t,e){var i=t.getAriaDescribedBy();var s="";for(var r=0;r<i.length;r++){s+=i[r];if(r<i.length-1){s+=" "}}if(e){s+=" "+t.getId()+"-ariaLbl"}return s}function i(t){var i=jQuery(t.getInputDomRef());var s=e(t,false);if(s.length>0){i.attr("aria-describedby",s)}else{i.removeAttr("aria-describedby")}i.removeAttr("aria-posinset");i.removeAttr("aria-setsize")}o.prototype._close=function(){i(this);t.prototype._close.apply(this,arguments)};o.prototype._handleClosed=function(){i(this);t.prototype._handleClosed.apply(this,arguments)};o.prototype.onAfterRendering=function(){t.prototype.onAfterRendering.apply(this,arguments);jQuery(this.getInputDomRef()).removeAttr("aria-setsize")};o.prototype._prepareOpen=function(t){var i=jQuery(this.getInputDomRef());var s=e(this,true);i.attr("aria-describedby",s);i.removeAttr("aria-posinset")};o.prototype._fireLiveChange=function(e){var i=false;var o;if(!this.getEnabled()||!this.getEditable()){this._close()}else{this._sTypedChars=jQuery(this.getInputDomRef()).val();switch(e.type){case"keyup":case"sapup":case"sapdown":case"saphome":case"sapend":if(!t._isHotKey(e)){i=true}else{break}case"sapescape":this._close();break;case"keypress":o=e.which||e.keyCode;if(o===r.ESCAPE){this._close();break}default:s(this);i=true}}if(i){this.fireSuggest({suggestValue:this._sTypedChars})}t.prototype._fireLiveChange.apply(this,arguments)};o.prototype._doTypeAhead=function(){this._sTypeAhead=null;this._sWantedSelectedKey=undefined;this._sWantedSelectedItemId=undefined;this._sTypedChars=jQuery(this.getInputDomRef()).val();s(this)};o.prototype.refreshItems=function(t){var e=this.getBinding("items");if(t=="filter"&&e){e.getContexts()}else{o.prototype.updateItems.apply(this,arguments)}};o.prototype._handleItemsChanged=function(t,e){if(e){this._sHandleItemsChanged=null;this._bNoItemCheck=undefined}if(this._bNoItemCheck){return}var i=[];if(this._getExistingListBox()){i=this._getListBox().getItems()}var s=this.getDomRef();if(s){jQuery(this.getInputDomRef()).attr("aria-setsize",i.length)}};o.prototype.getItems=function(){return this.getAggregation("items",[])};o.prototype.insertItem=function(t,e){this.insertAggregation("items",e,t,true);s(this);return this};o.prototype.addItem=function(t){this.addAggregation("items",t,true);s(this);return this};o.prototype.removeItem=function(t){var e=this.removeAggregation("items",t,true);s(this);return e};o.prototype.removeAllItems=function(){var t=this.removeAllAggregation("items");s(this);return t};o.prototype.indexOfItem=function(t){return this.indexOfAggregation("items",t)};o.prototype.destroyItems=function(){this.destroyAggregation("items",true);s(this);return this};o.prototype.setEnableScrolling=function(t){this.setProperty("enableScrolling",t,true);if(this.oPopup&&this.oPopup.isOpen()){s(this)}return this};function s(t){if(!t.getDomRef()||!t.$().hasClass("sapUiTfFoc")){return false}var e,i=t.getItems(),s=t._sTypedChars&&t._sTypedChars.length>0,r=t._getListBox(),o=t.getMaxPopupItems(),n=t.getEnableScrolling(),p=[];if(!s){t._close();return}r.removeAllItems();r.clearSelection();for(var a=0;a<i.length;a++){e=i[a];if(!e.__CLONE){e.__CLONE=e.clone(e.getId()+"-CLONE",null,{cloneBindings:false});e.__origexit=e.exit;e.exit=function(){this.__CLONE.destroy();delete this.__CLONE;this.exit=this.__origexit;delete this.__origexit;if(typeof this.exit==="function"){this.exit.apply(this,arguments)}}}if((!s||t._filter(t._sTypedChars,e))&&(n||!n&&p.length<o)){p.push(e.__CLONE)}}var h=p.length;if(h>0){if(t._sort){p.sort(function(t,e){if(t.getText()>e.getText()){return 1}if(t.getText()<e.getText()){return-1}return 0})}for(var a=0;a<h;a++){r.addItem(p[a])}r.setVisibleItems(o<h?o:h);if(!t.oPopup||!t.oPopup.isOpen()){t._open()}}else{t._close()}}})();o.prototype.setListBox=function(){return this};o.prototype.setSelectedKey=function(){return this};o.prototype.setSelectedItemId=function(){return this};return o});
//# sourceMappingURL=AutoComplete.js.map