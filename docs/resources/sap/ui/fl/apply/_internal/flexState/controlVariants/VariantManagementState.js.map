{"version":3,"file":"VariantManagementState.js","names":["sap","ui","define","_omit","_pick","includes","isEmptyObject","ObjectPath","Log","JsControlTreeModifier","VariantsApplyUtil","States","FlexState","Change","LayerUtils","Utils","VariantManagementState","mUpdateStateListeners","getReferencedChanges","mPropertyBag","aReferencedVariantChanges","variantData","instance","getVariantReference","getControlChangesForVariant","Object","assign","vReference","filter","oReferencedChange","compareAgainstCurrentLayer","getLayer","getVariants","oVariantsMap","getContent","reference","aVariants","get","vmReference","addChangeContentToVariantMap","oVariantObject","oChangeContent","bAdd","sChangeType","changeType","push","some","oExistingContent","iIndex","fileName","splice","addChange","oFlexObjects","sChangeCategory","getVariantChangeCategory","deleteChange","iChangeContentIndex","oExistingChangeContent","fileType","addUpdateStateListener","sReference","fnListener","removeUpdateStateListener","getVariantsState","addFakeStandardVariant","sComponentId","oStandardVariant","setFakeStandardVariant","clearFakedStandardVariants","resetFakedStandardVariants","aResult","oVariant","getVariant","controlChanges","oChange","includeDirtyChanges","getState","states","PERSISTED","getVariantChangesForVariant","variantChanges","defaultVariant","oCurrentVariant","getId","getCurrentVariantReference","oVariantManagementSection","currentVariant","getVariantManagementReferences","keys","addVariantToVariantManagement","variants","slice","getIndexToSortVariant","concat","removeVariantFromVariantManagement","bFound","oCurrentVariantContent","index","variant","setVariantData","oVariantData","previousIndex","iSortedIndex","addChangeToVariant","aExistingChanges","aChangeIds","map","change","removeChangeFromVariant","aControlChanges","bChangeFound","oCurrentChange","getInitialChanges","reduce","aInitialChanges","sVMReference","sCurrentVReference","mArguments","fillVariantModel","forEach","oVariantEntry","JSON","parse","stringify","key","title","getName","layer","favorite","getFavorite","executeOnSelect","getExecuteOnSelection","visible","getVisible","author","getSupportInformation","user","contexts","getContexts","updateChangesForVariantManagementInMap","oVariantManagement","changeContent","selector","id","add","variantManagementChanges","setCurrentVariant","newVReference","updateVariantsState","error","getFlexObjectsFromStorageResponse","changeToBeAddedOrDeleted","NEW","convertToFileContent","DELETE","waitForInitialVariantChanges","aCurrentVariantChanges","aControls","aCurrentControls","oSelector","getSelector","oControl","bySelector","appComponent","indexOfObject","length","flexController","waitForChangesToBeApplied","Promise","resolve"],"sources":["VariantManagementState-dbg.js"],"mappings":"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"}