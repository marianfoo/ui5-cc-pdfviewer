{"version":3,"file":"Applier.js","names":["sap","ui","define","Log","Element","JsControlTreeModifier","FlexCustomData","Utils","DependencyHandler","FlUtils","oLastPromise","FakePromise","_checkControlAndDependentSelectorControls","oChange","mPropertyBag","oSelector","getSelector","id","name","Promise","reject","Error","checkFailedSelectors","indexOfObject","failedSelectors","modifier","bySelectorTypeIndependent","appComponent","view","then","oControl","aDependentControlSelectorList","getDependentControlSelectorList","forEach","oDependentControlSelector","oDependentControl","bySelector","_checkAndAdjustChangeStatusSync","mChangesMap","oFlexController","mControl","getControlIfTemplateAffected","oModifier","bHasAppliedCustomData","sync","getAppliedCustomDataValue","control","bIsCurrentlyAppliedOnControl","hasChangeApplyFinishedCustomData","bChangeStatusAppliedFinished","isApplyProcessFinished","fnCheckFunction","checkIfDependencyIsStillValidSync","bind","_oChangePersistence","copyDependenciesFromInitialChangesMapSync","setInitialApplyState","setRevertData","getParsedRevertDataFromCustomData","markSuccessful","markFailed","_isXmlModifier","targets","_checkAndAdjustChangeStatus","bXmlModifier","oAppliedCustomData","all","aCustomDataState","oAppComponent","oPromise","checkIfDependencyIsStillValid","copyDependenciesFromInitialChangesMap","oParsedRevertDataFromCustomData","undefined","_checkPreconditions","sErrorMessage","getJsOnly","_handleAfterApply","oInitializedControl","resolve","updateAggregation","originalControl","getContent","boundAggregation","addAppliedCustomData","oResult","success","_handleAfterApplyError","oError","error","sChangeId","getId","sLogMessage","bErrorOccurred","sCustomDataIdentifier","getCustomDataIdentifier","notApplicableChangesCustomDataKey","formatAndLogMessage","message","failedChangesCustomDataKeyXml","stack","failedChangesCustomDataKeyJs","addFailedCustomData","_logApplyChangeError","sChangeType","getChangeType","sTargetControlId","fullQualifiedName","getNamespace","getFileType","sWarningMessage","warning","adjustOriginalSelector","oPropertyBag","oCurrentOriginalControl","originalSelectorToBeAdjusted","oActualOriginalControl","getBindingInfo","template","getParent","aStack","oTempControl","push","aggregation","sParentAggregationName","index","getAggregation","indexOf","reverse","oInfo","addDependentControl","registerOnAfterXMLChangeProcessingHandler","aOnAfterXMLChangeProcessingHandlers","oChangeHandler","iChangeHandlerIndex","findIndex","mHandler","handler","length","controls","includes","Applier","addPreConditionForInitialChangeApplying","applyChangeOnControl","pHandlerPromise","changeHandler","getChangeHandler","hasApplyProcessStarted","addPromiseForApplyProcessing","startApplying","applyChange","catch","applyAllChangesForControl","fnGetChangesMap","sControlId","aChangesForControl","mChanges","getViewForControl","_ignoreOnce","setQueuedForApply","aPromiseStack","bControlWithDependencies","mControlsWithDependencies","removeControlsDependencies","resolveDependenciesForChange","mDependencies","fnCallback","addChangeApplyCallbackToDependency","execPromiseQueueSequentially","processDependentQueue","applyAllChangesForXMLView","aChanges","Array","isArray","reduce","oPreviousPromise","oReturnedControl","onAfterXMLChangeProcessing","oReturn","getDependentSelectorList"],"sources":["Applier-dbg.js"],"mappings":";;;;;AAMAA,IAAIC,GAAGC,OAAO,CACb,eACA,sBACA,oDACA,mDACA,0CACA,gEACA,mBACE,SACFC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,aAEA,IAAIC,EAAe,IAAID,EAAQE,YAE/B,SAASC,EAA0CC,EAASC,GAC3D,IAAIC,EAAYF,EAAQG,aAAeH,EAAQG,cAC/C,IAAKD,IAAeA,EAAUE,KAAOF,EAAUG,KAAO,CACrD,OAAOC,QAAQC,OAAOC,MAAM,kDAC7B,CAEA,SAASC,EAAqBP,GAC7B,GAAIN,EAAQc,cAAcT,EAAaU,gBAAiBT,IAAc,EAAG,CACxE,MAAMM,MAAM,sFACb,CACD,CAEA,OAAOP,EAAaW,SAASC,0BAA0BX,EAAWD,EAAaa,aAAcb,EAAac,MACxGC,KAAK,SAAUC,GACf,IAAKA,EAAU,CACd,MAAMT,MAAM,8DACb,CACAC,EAAqBP,GAErB,IAAIgB,EAAgClB,EAAQmB,kCAC5CD,EAA8BE,QAAQ,SAASC,GAC9C,IAAIC,EAAoBrB,EAAaW,SAASW,WAAWF,EAA2BpB,EAAaa,aAAcb,EAAac,MAC5H,IAAKO,EAAmB,CACvB,MAAM,IAAId,MAAM,2EACjB,CACAC,EAAqBY,EACtB,GACA,OAAOJ,CACR,EACF,CAEA,SAASO,EAAgCP,EAAUjB,EAASyB,EAAaC,EAAiBzB,GACzF,IAAI0B,EAAWjC,EAAMkC,6BAA6B5B,EAASiB,EAAUhB,GACrE,IAAI4B,EAAY5B,EAAaW,SAC7B,IAAIkB,IAA0BrC,EAAesC,KAAKC,0BAA0BL,EAASM,QAASjC,GAC9F,IAAIkC,EAA+BJ,GAAyBrC,EAAesC,KAAKI,iCAAiCR,EAASM,QAASjC,GACnI,IAAIoC,EAA+BpC,EAAQqC,yBAC3C,GAAID,IAAiCF,EAA8B,CAGlE,IAAII,EAAkB5C,EAAM6C,kCAAkCC,KAAK,KAAMvC,EAAaa,aAAce,EAAWJ,GAC/GC,EAAgBe,oBAAoBC,0CAA0C1C,EAASsC,EAAiBrC,EAAaa,cACrHd,EAAQ2C,sBACT,MAAO,IAAKP,GAAgCF,EAA8B,CAGzE,GAAIJ,EAAuB,CAE1B9B,EAAQ4C,cAAcnD,EAAesC,KAAKc,kCAAkClB,EAASM,QAASjC,IAC9FA,EAAQ8C,gBACT,KAAO,CACN9C,EAAQ+C,YACT,CACD,CACD,CAEA,SAASC,EAAe/C,GACvB,OAAOA,EAAaW,SAASqC,UAAY,SAC1C,CAEA,SAASC,EAA4BjC,EAAUjB,EAASyB,EAAaC,EAAiBzB,GACrF,IAAIkD,EAAeH,EAAe/C,GAClC,IAAI0B,EAAWjC,EAAMkC,6BAA6B5B,EAASiB,EAAUhB,GACrE,IAAI4B,EAAY5B,EAAaW,SAC7B,OAAOnB,EAAeuC,0BAA0BL,EAASM,QAASjC,EAAS6B,GACzEb,KAAK,SAASoC,GACd,IAAItB,IAA0BsB,EAC9B,OAAO9C,QAAQ+C,IAAI,CAClBvB,EAECA,GACGrC,EAAe0C,iCAAiCR,EAASM,QAASjC,EAAS6B,IAGjF,GACCb,KAAK,SAASsC,GACd,IAAIxB,EAAwBwB,EAAiB,GAC7C,IAAIpB,EAA+BoB,EAAiB,GACpD,IAAIlB,EAA+BpC,EAAQqC,yBAC3C,IAAIR,EAAY5B,EAAaW,SAC7B,IAAI2C,EAAgBtD,EAAaa,aACjC,GAAIsB,IAAiCF,EAA8B,CAClE,IAAIsB,EAAW,IAAI5D,EAAQE,YAG3B,IAAKqD,EAAc,CAClB,IAAIb,EAAkB5C,EAAM+D,8BAA8BjB,KAAK,KAAMe,EAAe1B,EAAWJ,GAC/F+B,EAAWA,EAASxC,KAAK,WACxB,OAAOU,EAAgBe,oBAAoBiB,sCAAsC1D,EAASsC,EAAiBiB,EAC5G,EACD,CACA,OAAOC,EAASxC,KAAKhB,EAAQ2C,qBAAqBH,KAAKxC,GACxD,MAAO,IAAKoC,GAAgCF,EAA8B,CAGzE,GAAIJ,EAAuB,CAE1B,OAAOrC,EAAeoD,kCAAkC5B,EAAUjB,EAAS6B,GACzEb,KAAK,SAAU2C,GACf3D,EAAQ4C,cAAce,GACtB3D,EAAQ8C,gBACT,EACF,CACA9C,EAAQ+C,aACR,OAAOa,SACR,MAAO,GAAIxB,GAAgCF,EAA8B,CAExElC,EAAQ8C,gBACT,CACA,OAAOc,SACR,EACF,CAEA,SAASC,EAAoB7D,EAASC,GACrC,IAAI6D,EACJ,GAAId,EAAe/C,IAAiBD,EAAQ+D,YAAa,CAGxDD,EAAgB,kDACjB,CAEA,GAAIA,EAAe,CAClB9D,EAAQ2C,uBACR,MAAMnC,MAAMsD,EACb,CACD,CAEA,SAASE,EAAkBhE,EAAS2B,EAAUsC,EAAqBhE,GAClE,OAAOK,QAAQ4D,UACblD,KAAK,WAEL,GAAIiD,aAA+B1E,EAAS,CAE3CoC,EAASM,QAAUgC,CACpB,CACA,GAAItC,EAASM,QAAS,CACrB,OAAOhC,EAAaW,SAASuD,kBAAkBxC,EAASyC,gBAAiBpE,EAAQqE,aAAaC,iBAC/F,CACA,OAAOV,SACR,GACC5C,KAAK,WAGL,OAAOvB,EAAe8E,qBAAqB5C,EAASM,QAASjC,EAASC,EAAc+C,EAAe/C,GACpG,GACCe,KAAK,WAEL,IAAIwD,EAAU,CAACC,QAAS,MACxBzE,EAAQ8C,eAAe0B,GACvB,OAAOA,CACR,EACF,CAEA,SAASE,EAAuBC,EAAQ3E,EAAS2B,EAAU1B,GAC1D,IAAIkD,EAAeH,EAAe/C,GAClC,IAAIuE,EAAU,CAACC,QAAS,MAAOG,MAAOD,GAEtC,IAAIE,EAAY7E,EAAQ8E,QACxB,IAAIC,EAAc,uCAClB,IAAIC,EAAiBL,aAAkBnE,MACvC,IAAIyE,EAAwBxF,EAAeyF,wBAAwB,MAAOF,EAAgB7B,GAC1F,OAAQ8B,GACP,KAAKxF,EAAe0F,kCACnBvF,EAAQwF,oBAAoB,OAAQ,CAACL,EAAaJ,EAAOU,SAAU,CAACR,IACpE,MACD,KAAKpF,EAAe6F,8BACnB1F,EAAQwF,oBAAoB,UAAW,CAACL,EAAa,uDAAwD,CAACF,GAAYF,EAAOY,OACjI,MACD,KAAK9F,EAAe+F,6BACnB5F,EAAQwF,oBAAoB,QAAS,CAACL,EAAa,8DAA+D,CAACF,GAAYF,EAAOY,OACtI,MAGF,OAAO9F,EAAegG,oBAAoB9D,EAASM,QAASjC,EAASC,EAAcgF,GACjFjE,KAAK,WAGL,GAAImC,EAAc,CACjBnD,EAAQ2C,sBACT,KAAO,CACN3C,EAAQ+C,WAAWyB,EACpB,CACA,OAAOA,CACR,EACF,CAEA,SAASkB,EAAqBf,EAAQ3E,GACrC,IAAI2F,EAAc3F,EAAQ4F,gBAC1B,IAAIC,EAAmB7F,EAAQG,cAAcC,GAC7C,IAAI0F,EAAoB9F,EAAQ+F,eAAiB/F,EAAQ8E,QAAU,IAAM9E,EAAQgG,cAEjF,IAAIC,EAAkB,6CACtBA,GAAmB,yDACnB,GAAItB,EAAOU,QAAS,CACnBY,GAAmB,iCAAmCtB,EAAOU,QAAU,GACxE,CACAY,GAAmB,yBAA2BN,EAAc,IAC5DM,GAAmB,qCAAuCH,EAC1DG,GAAmB,iCAAmCJ,EAAmB,KAEzEvG,EAAI4G,QAAQD,EAAiBrC,UAAW,4CACzC,CAEA,SAASuC,EAAuBnG,EAASiB,EAAUsC,GAClD,IAAI6C,EAAe,CAClBtF,aAAcyC,EACd3C,SAAUpB,GAEX,IAAI6G,EAA0B7G,EAAsB+B,WAAWvB,EAAQsG,6BAA8B/C,GACrG,IAAIgD,EAAyBtF,EAASuF,eAAexG,EAAQqE,aAAaC,kBAAkBmC,SAG5F,GAAIJ,EAAwBK,YAAa,CACxC,IAAIC,EAAS,GACb,IAAIC,EAAeP,EACnB,EAAG,CACFM,EAAOE,KAAK,CACXC,YAAaF,EAAaG,uBAC1BC,MAAOJ,EAAaF,YAAYO,eAAeL,EAAaG,wBAAwBG,QAAQN,KAE7FA,EAAeA,EAAaF,WAC7B,OAASE,EAAaF,aAEtBC,EAAOQ,UACPR,EAAOvF,QAAQ,SAASgG,GACvBb,EAAyBA,EAAuBU,eAAeG,EAAMN,aAAaM,EAAMJ,MACzF,EACD,CACAhH,EAAQqH,oBAAoBd,EAAwB,mBAAoBH,EACzE,CAEA,SAASkB,EAA0CC,EAAqCC,EAAgBvG,GACvG,IAAIwG,EAAsBF,EAAoCG,UAAU,SAAUC,GACjF,OAAOA,EAASC,UAAYJ,CAC7B,GACA,GAAIC,EAAsB,EAAG,CAC5BA,EAAsBF,EAAoCM,OAC1DN,EAAoCV,KAAK,CACxCe,QAASJ,EACTM,SAAU,IAEZ,CACA,IAAKP,EAAoCE,GAAqBK,SAASC,SAAS9G,GAAW,CAC1FsG,EAAoCE,GAAqBK,SAASjB,KAAK5F,EACxE,CACD,CAEA,IAAI+G,EAAU,CAMbC,wCAAyC,SAASzE,GACjD3D,EAAeA,EAAamB,KAAK,WAChC,OAAOwC,CACR,EACD,EAcA0E,qBAAsB,SAASlI,EAASiB,EAAUhB,GACjD,IAAI0B,EAAWjC,EAAMkC,6BAA6B5B,EAASiB,EAAUhB,GACrE,IAAIkI,EAAkBlI,EAAamI,cAChC9H,QAAQ4D,QAAQjE,EAAamI,eAC7B1I,EAAM2I,iBAAiBrI,EAAS2B,EAAU1B,GAE7C,OAAOkI,EAAgBnH,KAAK,SAASwG,GACpC3D,EAAoB7D,EAASC,GAC7B,OAAOuH,CACR,GAECxG,KAAK,SAASwG,GACd,GAAIxH,EAAQsI,yBAA0B,CAErC,OAAOtI,EAAQuI,+BAA+BvH,KAAK,SAASwD,GAC3DxE,EAAQ8C,iBACR,OAAO0B,CACR,EACD,MAAO,IAAKxE,EAAQqC,yBAA0B,CAC7C,OAAO,IAAIzC,EAAQE,aAAckB,KAAK,WACrChB,EAAQwI,gBACR,OAAOhB,EAAeiB,YAAYzI,EAAS2B,EAASM,QAAShC,EAC9D,GACCe,KAAK,SAASiD,GACd,OAAOD,EAAkBhE,EAAS2B,EAAUsC,EAAqBhE,EAClE,GACCyI,MAAM,SAAS/D,GACf,OAAOD,EAAuBC,EAAQ3E,EAAS2B,EAAU1B,EAC1D,EACD,CAGA,IAAIuE,EAAU,CAACC,QAAS,MACxBzE,EAAQ8C,eAAe0B,GACvB,OAAOA,CACR,GAECkE,MAAM,SAAS/D,GACf,MAAO,CACNF,QAAS,MACTG,MAAOD,EAET,EACD,EAYAgE,0BAA2B,SAASC,EAAiBrF,EAAe7B,EAAiBT,GAEpF,IAAIQ,EAAcmH,IAClB,IAAIC,EAAa5H,EAAS6D,QAC1B,IAAIgE,EAAqBrH,EAAYsH,SAASF,IAAe,GAC7D,IAAI5I,EAAe,CAClBW,SAAUpB,EACVsB,aAAcyC,EACdxC,KAAMnB,EAAQoJ,kBAAkB/H,IAGjC6H,EAAmB1H,QAAQ,SAAUpB,GACpCwB,EAAgCP,EAAUjB,EAASyB,EAAaC,EAAiBzB,GACjF,IAAKD,EAAQqC,2BAA6BrC,EAAQiJ,YAAa,CAC9DjJ,EAAQkJ,mBACT,CACD,GAGArJ,EAAeA,EAAamB,KAAK,SAASC,EAAUhB,GACnD,IAAIkJ,EAAgB,GACpB,IAAIN,EAAa5H,EAAS6D,QAC1B,IAAIgE,EAAqBrH,EAAYsH,SAASF,IAAe,GAC7D,IAAIO,EAEJ,GAAI3H,EAAY4H,0BAA0BR,GAAa,CACtDlJ,EAAkB2J,2BAA2B7H,EAAaoH,GAC1DO,EAA2B,IAC5B,CAEAN,EAAmB1H,QAAQ,SAAUpB,GAEpC,GAAIA,EAAQsG,6BAA8B,CACzCH,EAAuBnG,EAASiB,EAAUsC,UACnCvD,EAAQsG,4BAChB,CACA,GAAItG,EAAQiJ,YAAa,QACjBjJ,EAAQiJ,WAChB,MAAO,GAAIjJ,EAAQqC,yBAA0B,CAC5C1C,EAAkB4J,6BAA6B9H,EAAazB,EAAQ8E,QAAS+D,EAC9E,MAAO,IAAKpH,EAAY+H,cAAcxJ,EAAQ8E,SAAU,CACvDqE,EAActC,KAAK,WAClB,OAAOmB,EAAQE,qBAAqBlI,EAASiB,EAAUhB,GAAce,KAAK,WACzErB,EAAkB4J,6BAA6B9H,EAAazB,EAAQ8E,QAAS+D,EAC9E,EACD,EACD,KAAO,CACN,IAAIY,EAAazB,EAAQE,qBAAqB1F,KAAKwF,EAAShI,EAASiB,EAAUhB,GAC/EN,EAAkB+J,mCAAmCjI,EAAazB,EAAQ8E,QAAS2E,EACpF,CACD,GAEA,GAAIX,EAAmBjB,QAAUuB,EAA0B,CAC1D,OAAOxJ,EAAQ+J,6BAA6BR,GAAenI,KAAK,WAC/D,OAAOrB,EAAkBiK,sBAAsBnI,EAAa8B,EAAesF,EAC5E,EACD,CACA,OAAOjF,SACR,EAAEpB,KAAK,KAAMvB,EAAUhB,IAEvB,OAAOJ,CACR,EAaAgK,0BAA2B,SAAS5J,EAAc6J,GACjD,IAAKC,MAAMC,QAAQF,GAAW,CAC7B,IAAIhG,EAAgB,yEAA2E7D,EAAac,KAAO,IACnHzB,EAAIsF,MAAMd,EAAeF,UAAW,6CACpCkG,EAAW,EACZ,CAEA,IAAIvC,EAAsC,GAC1CtH,EAAaU,gBAAkB,GAE/B,OAAOmJ,EAASG,OAAO,SAASC,EAAkBlK,GACjD,IAAIiB,EACJ,OAAOiJ,EACLlJ,KAAKjB,EAA0CyC,KAAK,KAAMxC,EAASC,IACnEe,KAAK,SAAUmJ,GACflJ,EAAWkJ,EACX,IAAIxI,EAAWjC,EAAMkC,6BAA6B5B,EAASiB,EAAUhB,GACrE,OAAOP,EAAM2I,iBAAiBrI,EAAS2B,EAAU1B,EAClD,GACCe,KAAK,SAAUwG,GACfvH,EAAamI,cAAgBZ,EAC7BxH,EAAQkJ,oBACR,OAAOhG,EAA4BjC,EAAUjB,EAAS4D,UAAWA,UAAW3D,EAC7E,GACCe,KAAK,WACL,IAAKhB,EAAQqC,yBAA0B,CACtC,UAAWpC,EAAamI,cAAcgC,6BAA+B,WAAY,CAChF9C,EACCC,EACAtH,EAAamI,cACbnH,EAEF,CACA,OAAO+G,EAAQE,qBAAqBlI,EAASiB,EAAUhB,EACxD,CACA,MAAO,CAACwE,QAAS,KAClB,GACCzD,KAAK,SAASqJ,GACd,IAAKA,EAAQ5F,QAAS,CACrB,MAAMjE,MAAM6J,EAAQzF,MACrB,CACD,GACC8D,MAAM,SAAS/D,GACf3E,EAAQsK,2BAA2BlJ,QAAQ,SAASC,GACnD,GAAIzB,EAAQc,cAAcT,EAAaU,gBAAiBU,MAAgC,EAAG,CAC1FpB,EAAaU,gBAAgBkG,KAAKxF,EACnC,CACD,GACAqE,EAAqBf,EAAQ3E,EAC9B,EACF,EAAG,IAAIJ,EAAQE,aACdkB,KAAK,kBACEf,EAAaU,gBAIpB4G,EAAoCnG,QAAQ,SAAUuG,GACrDA,EAASG,SAAS1G,QAAQ,SAAUH,GACnC,IACC0G,EAASC,QAAQwC,2BAA2BnJ,EAAUhB,EACvD,CAAE,MAAO0E,GACRrF,EAAIsF,MAAM,0CAA2CD,EACtD,CACD,EACD,GAEA,OAAO1E,EAAac,IACrB,EACD,GAED,OAAOiH,CACR"}