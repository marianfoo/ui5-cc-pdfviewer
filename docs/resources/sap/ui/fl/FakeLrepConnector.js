/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/Cache","sap/ui/fl/write/_internal/connectors/ObjectPathConnector","sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils","sap/ui/core/Configuration"],function(e,t,n,r){"use strict";var i={};var c="sap.ui.fl";i.prototype={};i.enableFakeConnector=function(e){this.setFlexibilityServicesAndClearCache("LocalStorageConnector",e)};i.setFlexibilityServicesAndClearCache=function(n,i){this._oFlexibilityServices=r.getFlexibilityServices();var c=[];if(i){t.setJsonPath(i);c.push({connector:"ObjectPathConnector"})}c.push({connector:n});r.setFlexibilityServices(c);e.clearEntries()};i.disableFakeConnector=function(){i.prototype={};e.clearEntries();if(this._oFlexibilityServices){r.setFlexibilityServices(this._oFlexibilityServices);delete this._oFlexibilityServices}};i.forTesting={getNumberOfChanges:function(e,t){return e.loadFlexData({reference:t}).then(function(e){return e.reduce(function(e,t){return e+t.changes.length},0)})},spyMethod:function(e,t,n,r){var i=e.spy(n,r);return function(e,n){n=n||0;var c=i.getCall(n).args[0].flexObjects.length;t.equal(c,e,r+" was called "+e+" times")}},clear:function(t,n){e.clearEntries();return t.reset(n)},setStorage:function(e,t){e.storage=t},synchronous:{clearAll:function(e){var t=function(t){var n=t.includes(c);if(!n){return}e.removeItem(t)};Object.keys(e).map(t)},store:function(e,t,r){var i=n.createFlexKey(t);var c=JSON.stringify(r);e.setItem(i,c)},getNumberOfChanges:function(e,t){var n=0;Object.keys(e).map(function(r){var i=r.includes(c);if(!i){return}var o=JSON.parse(e.getItem(r));if(o.reference===t||o.reference+".Component"===t){n++}});return n}}};return i},true);
//# sourceMappingURL=FakeLrepConnector.js.map